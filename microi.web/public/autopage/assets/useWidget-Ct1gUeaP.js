import{g}from"./axiosInstance-D7VSU9S7.js";import{u as J,s as y,b as h,r as m}from"./index-BlNbL5rt.js";const x=J(),{formData:w}=y(x);function V(a,n,u=m(),f=m(!1),p=m(-1)){const d=e=>{let o=a.widgetOption.wrapperNumber,l=a.widgetOption.number,t=w.value.JsonObj.wrapperList.findIndex(r=>r.wrapperOption.number===o);if(t!==-1){let r=w.value.JsonObj.wrapperList[t].widgetList.findIndex(i=>i.widgetOption.number===l);r!==-1&&(w.value.JsonObj.wrapperList[t].widgetList[r].widgetParams[0].typeOptions.dataJson=e)}},c=async()=>{var o,l,t,r,i,P;let e={};if(u.value&&(e.start=u.value[0],e.end=u.value[1]),p.value!==-1&&((o=a.widgetParams[7])==null?void 0:o.value)!==-1&&(e.currentPage=p.value,e.pageSize=(l=a.widgetParams[7])==null?void 0:l.value),a.widgetParams[0].typeOptions.dataJson.searchData&&((t=a.widgetParams[0].typeOptions.dataJson.searchData)==null||t.forEach(s=>{e[s.prop]=s.value})),a.widgetParams[0].value){console.log("请求地址",a.widgetParams[0].value),console.log("请求参数",e),f.value=!0;const s=await g(a.widgetParams[0].value,e);try{(s instanceof Object||s instanceof Array)&&d(s),f.value=!1}catch(v){f.value=!1,console.log(v)}}else if(n&&p.value!==-1&&a.widgetParams[7]&&((r=a.widgetParams[7])==null?void 0:r.value)!==-1){let s=(p.value-1)*((i=a.widgetParams[7])==null?void 0:i.value),v=s+((P=a.widgetParams[7])==null?void 0:P.value);a.widgetParams[0].typeOptions.dataJson.bodyData&&(a.widgetParams[0].typeOptions.dataJson.bodyData=n==null?void 0:n.slice(s,v))}};return h([()=>a.widgetParams[0].value],async([e,o],[l,t])=>{await c()},{deep:!0}),{loadRemoteData:c,setResponse:d}}export{V as u};
