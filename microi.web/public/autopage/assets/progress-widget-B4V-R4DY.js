import{_ as le,r as p,o as se,y as oe,c as m,b as g,d as i,e as v,f as k,v as V,g as b,h as S,j as D,F as O,k as z,l as y,m as K,p as N,q as ne,t as de,x as j,A as Y}from"./index-BVh9aAA9.js";import{u as re,g as ie}from"./useWidget-DHPg7DNb.js";const ue={class:"date-range"},ge={__name:"progress-widget",props:{widgetObj:{type:Object,required:!0}},async setup(o){let x,C;const e=o,h=p(!1);p([]);const T=async(a,t,l)=>{if(a&&t.optionUrl){h.value=!0;let s={};try{const c=await ie(t.optionUrl+a,s);c&&c.length>0&&(e.widgetObj.widgetParams[0].typeOptions.dataJson.searchData[l].options=c),h.value=!1}catch(c){console.error("Error fetching data:",c)}finally{h.value=!1}}},w=p({});se(()=>{var a;(a=e.widgetObj.widgetParams[0].typeOptions.dataJson.searchData)==null||a.forEach((t,l)=>{w.value[l]=t.value})});const P=async a=>{const t={...w.value};for(const[l,s]of Object.entries(t))e.widgetObj.widgetParams[0].typeOptions.dataJson.searchData[l]&&(e.widgetObj.widgetParams[0].typeOptions.dataJson.searchData[l].value=s);await W()},J=p(),U=p(!1),{loadRemoteData:W}=re(e.widgetObj,e.widgetObj.widgetParams[0].typeOptions.dataJson,J,U);[x,C]=oe(()=>W()),await x,C();const L=m(()=>{var a,t,l;return{backgroundColor:(a=e.widgetObj.widgetParams[2])==null?void 0:a.value,padding:(t=e.widgetObj.widgetParams[3])==null?void 0:t.value,textAlign:(l=e.widgetObj.widgetParams[4])==null?void 0:l.value}}),R=m(()=>{var a,t,l,s;return{fontSize:(a=e.widgetObj.widgetParams[13])==null?void 0:a.value,fontWeight:(t=e.widgetObj.widgetParams[14])==null?void 0:t.value,color:(l=e.widgetObj.widgetParams[15])==null?void 0:l.value,margin:(s=e.widgetObj.widgetParams[16])==null?void 0:s.value}}),q=m(()=>{var a,t,l,s;return{fontSize:(a=e.widgetObj.widgetParams[22])==null?void 0:a.value,fontWeight:(t=e.widgetObj.widgetParams[23])==null?void 0:t.value,color:(l=e.widgetObj.widgetParams[24])==null?void 0:l.value,margin:(s=e.widgetObj.widgetParams[25])==null?void 0:s.value}}),G=m(()=>{var a,t,l,s;return{fontSize:(a=e.widgetObj.widgetParams[17])==null?void 0:a.value,fontWeight:(t=e.widgetObj.widgetParams[18])==null?void 0:t.value,color:(l=e.widgetObj.widgetParams[19])==null?void 0:l.value,margin:(s=e.widgetObj.widgetParams[20])==null?void 0:s.value}}),H=m(()=>{var a;return{padding:(a=e.widgetObj.widgetParams[11])==null?void 0:a.value}}),Q=m(()=>{var a;return(a=e.widgetObj.widgetParams[0].typeOptions.dataJson)!=null&&a.data?e.widgetObj.widgetParams[0].typeOptions.dataJson.data:e.widgetObj.widgetParams[0].typeOptions.dataJson});return(a,t)=>{var M;const l=g("el-input"),s=g("el-option"),c=g("el-select"),X=g("el-date-picker"),Z=g("el-button"),$=g("el-space"),ee=g("el-progress"),ae=g("el-col"),te=g("el-row");return i(),v(O,null,[k(b("div",ue,[S($,{wrap:""},{default:D(()=>{var u,f;return[(i(!0),v(O,null,z((u=o.widgetObj.widgetParams[0].typeOptions.dataJson)==null?void 0:u.searchData,(d,r)=>(i(),v(O,null,[d.type=="input"?(i(),y(l,{key:r,modelValue:w.value[r],"onUpdate:modelValue":n=>w.value[r]=n,size:"small",placeholder:"请输入"+d.label,clearable:"",onKeyup:K(P,["enter"])},null,8,["modelValue","onUpdate:modelValue","placeholder"])):d.type=="select"?(i(),y(c,{class:"pagesearch",style:{"min-width":"120px"},key:r+"select",modelValue:w.value[r],"onUpdate:modelValue":n=>w.value[r]=n,onChange:P,size:"small",placeholder:"请选择"+d.label,clearable:"",filterable:"",remote:"","remote-method":n=>T(n,d,r),loading:h.value,onKeyup:K(P,["enter"])},{default:D(()=>[(i(!0),v(O,null,z(d.options,(n,_)=>(i(),y(s,{value:n.value,label:n.label,key:_+n.value},null,8,["value","label"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder","remote-method","loading"])):N("",!0)],64))),256)),(f=o.widgetObj.widgetParams[27])!=null&&f.value?(i(),y(X,{key:0,modelValue:J.value,"onUpdate:modelValue":t[0]||(t[0]=d=>J.value=d),size:"small","unlink-panels":"",type:"monthrange","range-separator":"至","start-placeholder":"起始年月","end-placeholder":"结束年月",format:"YYYY-MM","value-format":"YYYY-MM"},null,8,["modelValue"])):N("",!0),S(Z,{icon:ne(de),size:"small",loading:U.value,circle:"",onClick:P},null,8,["icon","loading"])]}),_:1})],512),[[V,(M=o.widgetObj.widgetParams[26])==null?void 0:M.value]]),S(te,{style:{width:"100%"}},{default:D(()=>[(i(!0),v(O,null,z(Q.value,(u,f)=>{var d;return i(),y(ae,{key:f,class:"el-col",span:(d=o.widgetObj.widgetParams[1])==null?void 0:d.value,style:j(L.value)},{default:D(()=>{var r,n,_,B,E,F,A,I;return[k(b("div",{style:j(R.value)},Y(u.title),5),[[V,(r=o.widgetObj.widgetParams[12])==null?void 0:r.value]]),b("div",{style:j(G.value)},Y(u.value),5),k(b("div",{style:j(H.value)},[S(ee,{percentage:u.percentage,type:(n=o.widgetObj.widgetParams[5])==null?void 0:n.value,strokeWidth:(_=o.widgetObj.widgetParams[6])==null?void 0:_.value,showText:(B=o.widgetObj.widgetParams[7])==null?void 0:B.value,textInside:(E=o.widgetObj.widgetParams[8])==null?void 0:E.value,width:(F=o.widgetObj.widgetParams[10])==null?void 0:F.value,color:u.color==""?"#409EFF":u.color},null,8,["percentage","type","strokeWidth","showText","textInside","width","color"])],4),[[V,(A=o.widgetObj.widgetParams[7])==null?void 0:A.value]]),k(b("div",{style:j(q.value)},Y(u.subTitle),5),[[V,(I=o.widgetObj.widgetParams[21])==null?void 0:I.value]])]}),_:2},1032,["span","style"])}),128))]),_:1})],64)}}},me=le(ge,[["__scopeId","data-v-cbadcb2b"]]);export{me as default};
