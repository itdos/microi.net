import{u as v}from"./useWidget-BEXmAp0V.js";import{u as k,s as C,r as p,y as D,b as i,d as E,l as J,j as r,h as g,g as P,z as _,A as u,E as S}from"./index-3BQWWF1Q.js";const B=["onClick"],A={__name:"calendar-widget",props:{widgetObj:{type:Object,required:!0}},async setup(m){let c,l;const w=k(),{formData:f}=C(w),n=m,y=p(),O=p(!1),{loadRemoteData:b}=v(n.widgetObj,n.widgetObj.widgetParams[0].typeOptions.dataJson,y,O);[c,l]=D(()=>b()),await c,l();const h=e=>n.widgetObj.widgetParams[0].typeOptions.dataJson.findIndex(a=>a.date==e)>-1,j=e=>{var a,s;let t=n.widgetObj.widgetParams[0].typeOptions.dataJson.findIndex(d=>d.date==e);return((a=n.widgetObj.widgetParams[0].typeOptions.dataJson[t])==null?void 0:a.content)==null?"无事件":(s=n.widgetObj.widgetParams[0].typeOptions.dataJson[t])==null?void 0:s.content},x=e=>{var t;f.value.JsonObj.formConfig.link&&(S.emit("calendarSelDate",e),(t=window.parent)==null||t.postMessage({key:"calendarSelDate",value:e},"*"),console.log("触发日历事件总线，当前点击日期：",e))};return(e,t)=>{const a=i("el-badge"),s=i("el-tooltip"),d=i("el-calendar");return E(),J(d,null,{"date-cell":r(({data:o})=>[g(s,{"raw-content":!0,"show-after":200,content:j(o.day)},{default:r(()=>[P("div",{onClick:N=>x(o.day)},[g(a,{"is-dot":"",hidden:!h(o.day)},{default:r(()=>[_(u(o.day.split("-")[2]),1)]),_:2},1032,["hidden"]),_(" "+u(o.isSelected?"✔️":""),1)],8,B)]),_:2},1032,["content"])]),_:1})}}};export{A as default};
