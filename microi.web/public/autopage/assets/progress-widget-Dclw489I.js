import{_ as le,r as m,y as oe,c as w,b as u,d,e as v,f as P,v as f,g as p,h as _,j as k,F as b,k as x,l as y,m as K,p as N,q as se,t as ne,x as O,A as z}from"./index-CfICaLg9.js";import{u as re,g as de}from"./useWidget-zuxP2hw3.js";const ie={class:"date-range"},ue={__name:"progress-widget",props:{widgetObj:{type:Object,required:!0}},async setup(s){let Y,U;const e=s,W=m(e.widgetObj.widgetParams[0].typeOptions.dataJson.searchData),j=m(!1);m([]);const T=async(a,t,l)=>{if(a&&t.optionUrl){j.value=!0;let n={};try{const g=await de(t.optionUrl+a,n);g&&g.length>0&&(W.value[l].options=g),j.value=!1}catch(g){console.error("Error fetching data:",g)}finally{j.value=!1}}},V=async a=>{await D()},S=m(),C=m(!1),{loadRemoteData:D}=re(e.widgetObj,e.widgetObj.widgetParams[0].typeOptions.dataJson,S,C);[Y,U]=oe(()=>D()),await Y,U();const L=w(()=>{var a,t,l;return{backgroundColor:(a=e.widgetObj.widgetParams[2])==null?void 0:a.value,padding:(t=e.widgetObj.widgetParams[3])==null?void 0:t.value,textAlign:(l=e.widgetObj.widgetParams[4])==null?void 0:l.value}}),R=w(()=>{var a,t,l,n;return{fontSize:(a=e.widgetObj.widgetParams[13])==null?void 0:a.value,fontWeight:(t=e.widgetObj.widgetParams[14])==null?void 0:t.value,color:(l=e.widgetObj.widgetParams[15])==null?void 0:l.value,margin:(n=e.widgetObj.widgetParams[16])==null?void 0:n.value}}),q=w(()=>{var a,t,l,n;return{fontSize:(a=e.widgetObj.widgetParams[22])==null?void 0:a.value,fontWeight:(t=e.widgetObj.widgetParams[23])==null?void 0:t.value,color:(l=e.widgetObj.widgetParams[24])==null?void 0:l.value,margin:(n=e.widgetObj.widgetParams[25])==null?void 0:n.value}}),G=w(()=>{var a,t,l,n;return{fontSize:(a=e.widgetObj.widgetParams[17])==null?void 0:a.value,fontWeight:(t=e.widgetObj.widgetParams[18])==null?void 0:t.value,color:(l=e.widgetObj.widgetParams[19])==null?void 0:l.value,margin:(n=e.widgetObj.widgetParams[20])==null?void 0:n.value}}),H=w(()=>{var a;return{padding:(a=e.widgetObj.widgetParams[11])==null?void 0:a.value}}),Q=w(()=>{var a;return(a=e.widgetObj.widgetParams[0].typeOptions.dataJson)!=null&&a.data?e.widgetObj.widgetParams[0].typeOptions.dataJson.data:e.widgetObj.widgetParams[0].typeOptions.dataJson});return(a,t)=>{var J;const l=u("el-input"),n=u("el-option"),g=u("el-select"),X=u("el-date-picker"),Z=u("el-button"),$=u("el-space"),ee=u("el-progress"),ae=u("el-col"),te=u("el-row");return d(),v(b,null,[P(p("div",ie,[_($,{wrap:""},{default:k(()=>{var i;return[(d(!0),v(b,null,x(W.value,(o,c)=>(d(),v(b,null,[o.type=="input"?(d(),y(l,{key:c,modelValue:o.value,"onUpdate:modelValue":r=>o.value=r,size:"small",placeholder:"请输入"+o.label,clearable:"",onKeyup:K(V,["enter"])},null,8,["modelValue","onUpdate:modelValue","placeholder"])):o.type=="select"?(d(),y(g,{class:"pagesearch",style:{"min-width":"120px"},key:c+"select",modelValue:o.value,"onUpdate:modelValue":r=>o.value=r,size:"small",placeholder:"请选择"+o.label,clearable:"",filterable:"",remote:"","remote-method":r=>T(r,o,c),loading:j.value,onKeyup:K(V,["enter"])},{default:k(()=>[(d(!0),v(b,null,x(o.options,(r,h)=>(d(),y(n,{value:r.value,label:r.label,key:h+r.value},null,8,["value","label"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder","remote-method","loading"])):N("",!0)],64))),256)),(i=s.widgetObj.widgetParams[27])!=null&&i.value?(d(),y(X,{key:0,modelValue:S.value,"onUpdate:modelValue":t[0]||(t[0]=o=>S.value=o),size:"small","unlink-panels":"",type:"monthrange","range-separator":"至","start-placeholder":"起始年月","end-placeholder":"结束年月",format:"YYYY-MM","value-format":"YYYY-MM"},null,8,["modelValue"])):N("",!0),_(Z,{icon:se(ne),size:"small",loading:C.value,circle:"",onClick:V},null,8,["icon","loading"])]}),_:1})],512),[[f,(J=s.widgetObj.widgetParams[26])==null?void 0:J.value]]),_(te,{style:{width:"100%"}},{default:k(()=>[(d(!0),v(b,null,x(Q.value,(i,o)=>{var c;return d(),y(ae,{key:o,class:"el-col",span:(c=s.widgetObj.widgetParams[1])==null?void 0:c.value,style:O(L.value)},{default:k(()=>{var r,h,M,B,F,A,E,I;return[P(p("div",{style:O(R.value)},z(i.title),5),[[f,(r=s.widgetObj.widgetParams[12])==null?void 0:r.value]]),p("div",{style:O(G.value)},z(i.value),5),P(p("div",{style:O(H.value)},[_(ee,{percentage:i.percentage,type:(h=s.widgetObj.widgetParams[5])==null?void 0:h.value,strokeWidth:(M=s.widgetObj.widgetParams[6])==null?void 0:M.value,showText:(B=s.widgetObj.widgetParams[7])==null?void 0:B.value,textInside:(F=s.widgetObj.widgetParams[8])==null?void 0:F.value,width:(A=s.widgetObj.widgetParams[10])==null?void 0:A.value,color:i.color==""?"#409EFF":i.color},null,8,["percentage","type","strokeWidth","showText","textInside","width","color"])],4),[[f,(E=s.widgetObj.widgetParams[7])==null?void 0:E.value]]),P(p("div",{style:O(q.value)},z(i.subTitle),5),[[f,(I=s.widgetObj.widgetParams[21])==null?void 0:I.value]])]}),_:2},1032,["span","style"])}),128))]),_:1})],64)}}},we=le(ue,[["__scopeId","data-v-c0a2d144"]]);export{we as default};
