import{_ as Z,r as j,y as $,c as v,b as r,d as s,e as b,f as ee,v as ae,g as k,h as w,j as u,F as y,k as V,l as g,m as N,p as W,q as te,t as le,x as f,N as oe,A as se,M as K}from"./index-e3nHg57k.js";import{u as ne,g as re}from"./useWidget-R-djxtlI.js";const de={class:"date-range"},ie={__name:"statistic-widget",props:{widgetObj:{type:Object,required:!0}},async setup(d){let S,C;const a=d,_=j(!1);j([]);const R=async(e,t,i)=>{if(e&&t.optionUrl){_.value=!0;let m={};try{const c=await re(t.optionUrl+e,m);c&&c.length>0&&(a.widgetObj.widgetParams[0].typeOptions.dataJson.searchData[i].options=c),_.value=!1}catch(c){console.error("Error fetching data:",c)}finally{_.value=!1}}},h=async e=>{await Y()},P=j(),z=j(!1),{loadRemoteData:Y}=ne(a.widgetObj,a.widgetObj.widgetParams[0].typeOptions.dataJson,P,z);[S,C]=$(()=>Y()),await S,C();const A=v(()=>{var e,t;return{backgroundColor:(e=a.widgetObj.widgetParams[2])==null?void 0:e.value,padding:(t=a.widgetObj.widgetParams[3])==null?void 0:t.value}}),E=v(()=>{var e,t,i,m;return{fontSize:(e=a.widgetObj.widgetParams[7])==null?void 0:e.value,fontWeight:(t=a.widgetObj.widgetParams[8])==null?void 0:t.value,color:(i=a.widgetObj.widgetParams[9])==null?void 0:i.value,margin:(m=a.widgetObj.widgetParams[10])==null?void 0:m.value}}),F=v(()=>{var e,t,i;return{fontSize:(e=a.widgetObj.widgetParams[11])==null?void 0:e.value,fontWeight:(t=a.widgetObj.widgetParams[12])==null?void 0:t.value,color:(i=a.widgetObj.widgetParams[13])==null?void 0:i.value}}),D=v(()=>{var e,t;return{color:(e=a.widgetObj.widgetParams[15])==null?void 0:e.value,fontSize:(t=a.widgetObj.widgetParams[16])==null?void 0:t.value}}),L=v(()=>{var e;return(e=a.widgetObj.widgetParams[0].typeOptions.dataJson)!=null&&e.data?a.widgetObj.widgetParams[0].typeOptions.dataJson.data:a.widgetObj.widgetParams[0].typeOptions.dataJson});return(e,t)=>{var x;const i=r("el-input"),m=r("el-option"),c=r("el-select"),q=r("el-date-picker"),G=r("el-button"),H=r("el-space"),U=r("el-icon"),Q=r("el-statistic"),T=r("el-col"),X=r("el-row");return s(),b(y,null,[ee(k("div",de,[w(H,{wrap:""},{default:u(()=>{var n;return[(s(!0),b(y,null,V(a.widgetObj.widgetParams[0].typeOptions.dataJson.searchData,(l,p)=>(s(),b(y,null,[l.type=="input"?(s(),g(i,{key:p,modelValue:l.value,"onUpdate:modelValue":o=>l.value=o,size:"small",placeholder:"请输入"+l.label,clearable:"",onKeyup:N(h,["enter"])},null,8,["modelValue","onUpdate:modelValue","placeholder"])):l.type=="select"?(s(),g(c,{class:"pagesearch",style:{"min-width":"120px"},key:p+"select",modelValue:l.value,"onUpdate:modelValue":o=>l.value=o,size:"small",placeholder:"请选择"+l.label,clearable:"",filterable:"",remote:"","remote-method":o=>R(o,l,p),loading:_.value,onKeyup:N(h,["enter"])},{default:u(()=>[(s(!0),b(y,null,V(l.options,(o,O)=>(s(),g(m,{value:o.value,label:o.label,key:O+o.value},null,8,["value","label"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder","remote-method","loading"])):W("",!0)],64))),256)),(n=d.widgetObj.widgetParams[19])!=null&&n.value?(s(),g(q,{key:0,modelValue:P.value,"onUpdate:modelValue":t[0]||(t[0]=l=>P.value=l),size:"small","unlink-panels":"",type:"monthrange","range-separator":"至","start-placeholder":"起始年月","end-placeholder":"结束年月",format:"YYYY-MM","value-format":"YYYY-MM"},null,8,["modelValue"])):W("",!0),w(G,{icon:te(le),size:"small",loading:z.value,circle:"",onClick:h},null,8,["icon","loading"])]}),_:1})],512),[[ae,(x=d.widgetObj.widgetParams[18])==null?void 0:x.value]]),w(X,{style:{width:"100%"}},{default:u(()=>[(s(!0),b(y,null,V(L.value,(n,l)=>{var p;return s(),g(T,{key:l,class:"el-col",span:(p=d.widgetObj.widgetParams[1])==null?void 0:p.value,style:f(A.value)},{default:u(()=>{var o,O,J,M,B,I;return[w(Q,{style:f([{backgroundColor:n.bgColor?n.bgColor:(O=(o=d.widgetObj.widgetParams[4])==null?void 0:o.value)==null?void 0:O.split(",")[l>7?0:l]},{padding:(J=d.widgetObj.widgetParams[5])==null?void 0:J.value},{borderRadius:(M=d.widgetObj.widgetParams[6])==null?void 0:M.value},{backgroundImage:n.bgImage?n.bgImage:"url("+((B=d.widgetObj.widgetParams[17])==null?void 0:B.value)+")"}]),"value-style":F.value,value:n.value},oe({title:u(()=>[k("div",{style:f(E.value)},[k("span",null,se(n.name),1)],4)]),_:2},[((I=d.widgetObj.widgetParams[14])==null?void 0:I.value)=="prefix"?{name:"prefix",fn:u(()=>[w(U,{style:f(D.value)},{default:u(()=>[(s(),g(K(n.icon)))]),_:2},1032,["style"])]),key:"0"}:{name:"suffix",fn:u(()=>[w(U,{style:f(D.value)},{default:u(()=>[(s(),g(K(n.icon)))]),_:2},1032,["style"])]),key:"1"}]),1032,["style","value-style","value"])]}),_:2},1032,["span","style"])}),128))]),_:1})],64)}}},ge=Z(ie,[["__scopeId","data-v-756e44d7"]]);export{ge as default};
