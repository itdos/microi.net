import{u as v}from"./useWidget-DdzwJ3mM.js";import{u as k,s as C,r as p,w as D,c as i,d as E,l as J,h as r,g,f as P,i as _,t as m,E as S}from"./index-DE0aEFkh.js";import"./axiosInstance-BYAPDAHk.js";const B=["onClick"],T={__name:"calendar-widget",props:{widgetObj:{type:Object,required:!0}},async setup(u){let c,l;const w=k(),{formData:f}=C(w),n=u,y=p(),O=p(!1),{loadRemoteData:b}=v(n.widgetObj,n.widgetObj.widgetParams[0].typeOptions.dataJson,y,O);[c,l]=D(()=>b()),await c,l();const h=e=>n.widgetObj.widgetParams[0].typeOptions.dataJson.findIndex(o=>o.date==e)>-1,x=e=>{var o,s;let t=n.widgetObj.widgetParams[0].typeOptions.dataJson.findIndex(d=>d.date==e);return((o=n.widgetObj.widgetParams[0].typeOptions.dataJson[t])==null?void 0:o.content)==null?"无事件":(s=n.widgetObj.widgetParams[0].typeOptions.dataJson[t])==null?void 0:s.content},j=e=>{var t;f.value.JsonObj.formConfig.link&&(S.emit("calendarSelDate",e),(t=window.parent)==null||t.postMessage({key:"calendarSelDate",value:e},"*"),console.log("触发日历事件总线，当前点击日期：",e))};return(e,t)=>{const o=i("el-badge"),s=i("el-tooltip"),d=i("el-calendar");return E(),J(d,null,{"date-cell":r(({data:a})=>[g(s,{"raw-content":!0,"show-after":200,content:x(a.day)},{default:r(()=>[P("div",{onClick:N=>j(a.day)},[g(o,{"is-dot":"",hidden:!h(a.day)},{default:r(()=>[_(m(a.day.split("-")[2]),1)]),_:2},1032,["hidden"]),_(" "+m(a.isSelected?"✔️":""),1)],8,B)]),_:2},1032,["content"])]),_:1})}}};export{T as default};
