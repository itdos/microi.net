import{i as F}from"./index-C2kp-yMC.js";import{_ as J,u as T,s as A,r as z,j as I,a as H,k as V,n as R,b as q,d as B,e as M,l as N,f as U,m as G,F as K}from"./index-DTw8UPiM.js";import{C as Q}from"./CommonSearch-CyDPCkQd.js";import"./useWidget-FfpkHP7j.js";import"./axiosInstance-DGpakX9F.js";const X={__name:"pie-widget",props:{widgetObj:{type:Object,required:!0}},setup(l){var g,w;const D=T(),{curWrapper:E,dark:s}=A(D),e=l,o=z(null);let r=null;const C=I(()=>{var i;let a=(i=e.widgetObj.widgetParams[1])!=null&&i.value?40:0;return e.widgetObj.widgetOption.height-a+"px"}),t=z({});t.value={title:{show:!0,text:"",subtext:"",textStyle:{color:s.value?"#999":"#333",fontStyle:"normal",fontWeight:"bolder",fontFamily:"sans-serif",fontSize:18}},tooltip:{trigger:"item",show:!0},legend:{show:!0,type:"scroll",textStyle:{color:s.value?"#fff":"#333"},orient:(g=e.widgetObj.widgetParams[8])==null?void 0:g.value,left:(w=e.widgetObj.widgetParams[9])==null?void 0:w.value},grid:{show:!1,left:"6%",right:"4%",bottom:"30px",containLabel:!1},toolbox:{show:!0,feature:{dataView:{readOnly:!1},restore:{},saveAsImage:{}}},series:[]},H(()=>{window.addEventListener("resize",d)}),V(()=>{window.removeEventListener("resize",d)});const n=()=>{R(()=>{r&&r.dispose(),o.value&&(r=F(o.value),u())})},L=()=>{r.setOption(t.value)},u=()=>{var i,m,v,c,b,p,f,O,h,j,P,y,x,S,k,_;t.value.title.textStyle.color=s.value?"#999":"#333",t.value.legend.textStyle.color=s.value?"#999":"#333",t.value.legend.orient=(i=e.widgetObj.widgetParams[8])==null?void 0:i.value,t.value.legend.left=(m=e.widgetObj.widgetParams[9])==null?void 0:m.value,t.value.title.text=(v=e.widgetObj.widgetParams[5])==null?void 0:v.value,t.value.title.subtext=(c=e.widgetObj.widgetParams[6])==null?void 0:c.value,t.value.legend.show=(b=e.widgetObj.widgetParams[7])==null?void 0:b.value,t.value.tooltip.show=(p=e.widgetObj.widgetParams[10])==null?void 0:p.value,t.value.tooltip.trigger=(f=e.widgetObj.widgetParams[11])==null?void 0:f.value,t.value.toolbox.show=(O=e.widgetObj.widgetParams[12])==null?void 0:O.value,t.value.series=[];const a={type:"pie",radius:[((h=e.widgetObj.widgetParams[2])==null?void 0:h.value)+"%",((j=e.widgetObj.widgetParams[3])==null?void 0:j.value)+"%"],top:50,bottom:30,labelLine:{show:!0},padAngle:(P=e.widgetObj.widgetParams[17])==null?void 0:P.value,itemStyle:{borderRadius:(y=e.widgetObj.widgetParams[15])==null?void 0:y.value,borderColor:"#fff",borderWidth:(x=e.widgetObj.widgetParams[16])==null?void 0:x.value},data:W.value,label:{show:(S=e.widgetObj.widgetParams[13])==null?void 0:S.value,position:(k=e.widgetObj.widgetParams[14])==null?void 0:k.value}};(_=e.widgetObj.widgetParams[18])!=null&&_.value&&(a.roseType="radius"),t.value.series.push(a),L()},d=()=>{R(()=>{o.value&&r.resize()})};q([()=>e.widgetObj,()=>E.value,()=>s.value],()=>{n(),d()},{deep:!0});const W=I(()=>{var a;return(a=e.widgetObj.widgetParams[0].typeOptions.dataJson)!=null&&a.data?e.widgetObj.widgetParams[0].typeOptions.dataJson.data:e.widgetObj.widgetParams[0].typeOptions.dataJson});return(a,i)=>(B(),M(K,null,[(B(),N(Q,{widgetObj:l.widgetObj,searchIndex:1,pickerIndex:19,key:l.widgetObj.widgetOption.number,onSetData:u,onResetData:n},null,8,["widgetObj"])),U("div",{ref_key:"chartRef",ref:o,style:G([{width:"100%"},{height:C.value}])},null,4)],64))}},ae=J(X,[["__scopeId","data-v-c60ae924"]]);export{ae as default};
