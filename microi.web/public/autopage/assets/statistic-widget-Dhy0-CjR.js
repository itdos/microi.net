import{_ as $,r as v,y as ee,c as b,b as r,d as s,e as y,f as ae,v as te,g as k,h as w,j as u,F as f,k as V,l as g,m as W,p as K,q as le,t as oe,x as _,N as se,A as ne,M as R}from"./index-CfICaLg9.js";import{u as re,g as de}from"./useWidget-zuxP2hw3.js";const ie={class:"date-range"},ue={__name:"statistic-widget",props:{widgetObj:{type:Object,required:!0}},async setup(d){let S,C;const a=d,z=v(a.widgetObj.widgetParams[0].typeOptions.dataJson.searchData),O=v(!1);v([]);const A=async(e,t,i)=>{if(e&&t.optionUrl){O.value=!0;let m={};try{const c=await de(t.optionUrl+e,m);c&&c.length>0&&(z.value[i].options=c),O.value=!1}catch(c){console.error("Error fetching data:",c)}finally{O.value=!1}}},j=async e=>{await D()},P=v(),Y=v(!1),{loadRemoteData:D}=re(a.widgetObj,a.widgetObj.widgetParams[0].typeOptions.dataJson,P,Y);[S,C]=ee(()=>D()),await S,C();const E=b(()=>{var e,t;return{backgroundColor:(e=a.widgetObj.widgetParams[2])==null?void 0:e.value,padding:(t=a.widgetObj.widgetParams[3])==null?void 0:t.value}}),F=b(()=>{var e,t,i,m;return{fontSize:(e=a.widgetObj.widgetParams[7])==null?void 0:e.value,fontWeight:(t=a.widgetObj.widgetParams[8])==null?void 0:t.value,color:(i=a.widgetObj.widgetParams[9])==null?void 0:i.value,margin:(m=a.widgetObj.widgetParams[10])==null?void 0:m.value}}),L=b(()=>{var e,t,i;return{fontSize:(e=a.widgetObj.widgetParams[11])==null?void 0:e.value,fontWeight:(t=a.widgetObj.widgetParams[12])==null?void 0:t.value,color:(i=a.widgetObj.widgetParams[13])==null?void 0:i.value}}),U=b(()=>{var e,t;return{color:(e=a.widgetObj.widgetParams[15])==null?void 0:e.value,fontSize:(t=a.widgetObj.widgetParams[16])==null?void 0:t.value}}),q=b(()=>{var e;return(e=a.widgetObj.widgetParams[0].typeOptions.dataJson)!=null&&e.data?a.widgetObj.widgetParams[0].typeOptions.dataJson.data:a.widgetObj.widgetParams[0].typeOptions.dataJson});return(e,t)=>{var M;const i=r("el-input"),m=r("el-option"),c=r("el-select"),G=r("el-date-picker"),H=r("el-button"),Q=r("el-space"),x=r("el-icon"),T=r("el-statistic"),X=r("el-col"),Z=r("el-row");return s(),y(f,null,[ae(k("div",ie,[w(Q,{wrap:""},{default:u(()=>{var n;return[(s(!0),y(f,null,V(z.value,(l,p)=>(s(),y(f,null,[l.type=="input"?(s(),g(i,{key:p,modelValue:l.value,"onUpdate:modelValue":o=>l.value=o,size:"small",placeholder:"请输入"+l.label,clearable:"",onKeyup:W(j,["enter"])},null,8,["modelValue","onUpdate:modelValue","placeholder"])):l.type=="select"?(s(),g(c,{class:"pagesearch",style:{"min-width":"120px"},key:p+"select",modelValue:l.value,"onUpdate:modelValue":o=>l.value=o,size:"small",placeholder:"请选择"+l.label,clearable:"",filterable:"",remote:"","remote-method":o=>A(o,l,p),loading:O.value,onKeyup:W(j,["enter"])},{default:u(()=>[(s(!0),y(f,null,V(l.options,(o,h)=>(s(),g(m,{value:o.value,label:o.label,key:h+o.value},null,8,["value","label"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder","remote-method","loading"])):K("",!0)],64))),256)),(n=d.widgetObj.widgetParams[19])!=null&&n.value?(s(),g(G,{key:0,modelValue:P.value,"onUpdate:modelValue":t[0]||(t[0]=l=>P.value=l),size:"small","unlink-panels":"",type:"monthrange","range-separator":"至","start-placeholder":"起始年月","end-placeholder":"结束年月",format:"YYYY-MM","value-format":"YYYY-MM"},null,8,["modelValue"])):K("",!0),w(H,{icon:le(oe),size:"small",loading:Y.value,circle:"",onClick:j},null,8,["icon","loading"])]}),_:1})],512),[[te,(M=d.widgetObj.widgetParams[18])==null?void 0:M.value]]),w(Z,{style:{width:"100%"}},{default:u(()=>[(s(!0),y(f,null,V(q.value,(n,l)=>{var p;return s(),g(X,{key:l,class:"el-col",span:(p=d.widgetObj.widgetParams[1])==null?void 0:p.value,style:_(E.value)},{default:u(()=>{var o,h,J,B,I,N;return[w(T,{style:_([{backgroundColor:n.bgColor?n.bgColor:(h=(o=d.widgetObj.widgetParams[4])==null?void 0:o.value)==null?void 0:h.split(",")[l>7?0:l]},{padding:(J=d.widgetObj.widgetParams[5])==null?void 0:J.value},{borderRadius:(B=d.widgetObj.widgetParams[6])==null?void 0:B.value},{backgroundImage:n.bgImage?n.bgImage:"url("+((I=d.widgetObj.widgetParams[17])==null?void 0:I.value)+")"}]),"value-style":L.value,value:n.value},se({title:u(()=>[k("div",{style:_(F.value)},[k("span",null,ne(n.name),1)],4)]),_:2},[((N=d.widgetObj.widgetParams[14])==null?void 0:N.value)=="prefix"?{name:"prefix",fn:u(()=>[w(x,{style:_(U.value)},{default:u(()=>[(s(),g(R(n.icon)))]),_:2},1032,["style"])]),key:"0"}:{name:"suffix",fn:u(()=>[w(x,{style:_(U.value)},{default:u(()=>[(s(),g(R(n.icon)))]),_:2},1032,["style"])]),key:"1"}]),1032,["style","value-style","value"])]}),_:2},1032,["span","style"])}),128))]),_:1})],64)}}},me=$(ue,[["__scopeId","data-v-b13fbce1"]]);export{me as default};
