import{_ as K,u as M,s as Q,r as F,l as U,b as X,d as W,e as Y,p as Z,f as $,q as ee,F as ae,n as T,k as te}from"./index-WFV7e-oS.js";import{C as le}from"./CommonSearch-TXpHxxz2.js";import"./useWidget-TrsLfogO.js";const ie={__name:"linebar-widget",props:{widgetObj:{type:Object,required:!0}},setup(u){var g,w,v,c,b,m;const q=M(),{curWrapper:G,dark:t}=Q(q),e=u,r=F(null);let s=null;const H=U(()=>{var l;let o=(l=e.widgetObj.widgetParams[1])!=null&&l.value?40:0;return e.widgetObj.widgetOption.height-o+"px"}),a=F({});a.value={title:{show:!0,text:"",subtext:"",textStyle:{color:t.value?"#999":"#333",fontStyle:"normal",fontWeight:"bolder",fontFamily:"sans-serif",fontSize:18}},tooltip:{trigger:"axis",show:!0,axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}}},legend:{show:!0,type:"scroll",textStyle:{color:t.value?"#999":"#333"},data:[],orient:(g=e.widgetObj.widgetParams[8])==null?void 0:g.value,left:(w=e.widgetObj.widgetParams[9])==null?void 0:w.value},grid:{show:!1,left:"10%",right:"8%",bottom:"30px",containLabel:!1},toolbox:{show:!0,feature:{dataView:{readOnly:!1},restore:{},saveAsImage:{}}},xAxis:[{type:"category",boundaryGap:!0,axisTick:{alignWithLabel:!0},axisLabel:{color:t.value?"#999":"#333"},data:[]}],yAxis:[{type:"value",splitLine:{show:(v=e.widgetObj.widgetParams[16])==null?void 0:v.value,lineStyle:{color:["#ccc"],width:1,type:"solid"}},axisLabel:{formatter:"{value} "+((c=e.widgetObj.widgetParams[3])==null?void 0:c.value),color:t.value?"#999":"#333"}},{type:"value",splitLine:{show:(b=e.widgetObj.widgetParams[17])==null?void 0:b.value,lineStyle:{color:["#ccc"],width:1,type:"dashed"}},axisLabel:{formatter:"{value} "+((m=e.widgetObj.widgetParams[4])==null?void 0:m.value),color:t.value?"#999":"#333"}}],series:[]};const d=()=>{T(()=>{s&&s.dispose(),r.value&&(s=te(r.value),n())})},J=()=>{s.setOption(a.value)},n=()=>{var o,l,p,x,h,O,y,f,j,P,S,A,L,k,_,I,R,z,B;a.value.title.textStyle.color=t.value?"#999":"#333",a.value.legend.textStyle.color=t.value?"#999":"#333",a.value.legend.orient=(o=e.widgetObj.widgetParams[8])==null?void 0:o.value,a.value.legend.left=(l=e.widgetObj.widgetParams[9])==null?void 0:l.value,a.value.title.text=(p=e.widgetObj.widgetParams[5])==null?void 0:p.value,a.value.title.subtext=(x=e.widgetObj.widgetParams[6])==null?void 0:x.value,a.value.legend.show=(h=e.widgetObj.widgetParams[7])==null?void 0:h.value,a.value.tooltip.show=(O=e.widgetObj.widgetParams[10])==null?void 0:O.value,a.value.tooltip.trigger=(y=e.widgetObj.widgetParams[11])==null?void 0:y.value,a.value.toolbox.show=(f=e.widgetObj.widgetParams[13])==null?void 0:f.value,a.value.xAxis[0].data=(j=e.widgetObj.widgetParams[0])==null?void 0:j.typeOptions.dataJson.xAxis,a.value.xAxis[0].boundaryGap=(P=e.widgetObj.widgetParams[2])==null?void 0:P.value,a.value.xAxis[0].axisLabel.color=t.value?"#999":"#333",a.value.yAxis[0].axisLabel.color=t.value?"#999":"#333",a.value.yAxis[1].axisLabel.color=t.value?"#999":"#333",a.value.yAxis[0].axisLabel.formatter="{value} "+((S=e.widgetObj.widgetParams[3])==null?void 0:S.value),a.value.yAxis[1].axisLabel.formatter="{value} "+((A=e.widgetObj.widgetParams[4])==null?void 0:A.value),a.value.yAxis[0].splitLine.show=(k=(L=e.widgetObj)==null?void 0:L.widgetParams[16])==null?void 0:k.value,a.value.yAxis[1].splitLine.show=(I=(_=e.widgetObj)==null?void 0:_.widgetParams[17])==null?void 0:I.value,a.value.series=[],a.value.legend.data=[],(B=(z=(R=e.widgetObj.widgetParams[0])==null?void 0:R.typeOptions.dataJson)==null?void 0:z.series)==null||B.forEach((i,se)=>{var D,E;const C={type:i.type,name:i.name,data:i.data,tooltip:{valueFormatter:function(N){return N+" "+i.unit}},label:{show:(D=e.widgetObj.widgetParams[14])==null?void 0:D.value,position:(E=e.widgetObj.widgetParams[15])==null?void 0:E.value}};i.type=="line"&&(C.yAxisIndex=1),a.value.series.push(C),a.value.legend.data.push(i.name)}),J()},V=()=>{T(()=>{r.value&&s.resize()})};return X([()=>e.widgetObj,()=>G.value,()=>t.value],()=>{d(),V()},{deep:!0}),(o,l)=>(W(),Y(ae,null,[(W(),Z(le,{widgetObj:u.widgetObj,searchIndex:1,pickerIndex:18,key:u.widgetObj.widgetOption.number,onSetData:n,onResetData:d},null,8,["widgetObj"])),$("div",{ref_key:"chartRef",ref:r,style:ee([{width:"100%"},{height:H.value}])},null,4)],64))}},de=K(ie,[["__scopeId","data-v-51eac779"]]);export{de as default};
