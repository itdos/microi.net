import{_ as I,u as R,s as L,r as P,l as S,a as W,m as F,n as k,b as J,d as z,e as q,p as H,f as T,q as V,F as A,k as M}from"./index-Cd0LJEJn.js";import{C as N}from"./CommonSearch-CKeA7ir0.js";import"./useWidget-gUdKlkzY.js";const U={__name:"funnel-widget",props:{widgetObj:{type:Object,required:!0}},setup(r){var w,c;const _=R(),{curWrapper:E,dark:o}=L(_),e=r,s=P(null);let i=null;const B=S(()=>{var l;let a=(l=e.widgetObj.widgetParams[1])!=null&&l.value?40:0;return e.widgetObj.widgetOption.height-a+"px"}),t=P({});t.value={title:{show:!0,text:"",subtext:"",textStyle:{color:o.value?"#999":"#333",fontStyle:"normal",fontWeight:"bolder",fontFamily:"sans-serif",fontSize:18}},tooltip:{trigger:"item",show:!0,axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}}},legend:{show:!0,type:"scroll",textStyle:{color:o.value?"#999":"#333"},orient:(w=e.widgetObj.widgetParams[6])==null?void 0:w.value,left:(c=e.widgetObj.widgetParams[7])==null?void 0:c.value,data:[]},grid:{show:!1,left:"10%",right:"4%",bottom:"30px",containLabel:!1},toolbox:{show:!0,feature:{dataView:{readOnly:!1},restore:{},saveAsImage:{}}},series:[]},W(()=>{window.addEventListener("resize",n)}),F(()=>{window.removeEventListener("resize",n)});const d=()=>{console.log("重置数据"),k(()=>{i&&i.dispose(),s.value&&(i=M(s.value),u())})},C=()=>{i.setOption(t.value)},u=()=>{var a,l,m,v,b,p,f,h,O,j,x,y;t.value.legend.orient=(a=e.widgetObj.widgetParams[6])==null?void 0:a.value,t.value.legend.left=(l=e.widgetObj.widgetParams[7])==null?void 0:l.value,t.value.title.textStyle.color=o.value?"#999":"#333",t.value.legend.textStyle.color=o.value?"#999":"#333",t.value.title.text=(m=e.widgetObj.widgetParams[3])==null?void 0:m.value,t.value.title.subtext=(v=e.widgetObj.widgetParams[4])==null?void 0:v.value,t.value.legend.show=(b=e.widgetObj.widgetParams[5])==null?void 0:b.value,t.value.tooltip.show=(p=e.widgetObj.widgetParams[8])==null?void 0:p.value,t.value.tooltip.trigger=(f=e.widgetObj.widgetParams[9])==null?void 0:f.value,t.value.toolbox.show=(h=e.widgetObj.widgetParams[10])==null?void 0:h.value,t.value.series=[{type:"funnel",left:"10%",top:40,bottom:10,width:"80%",min:0,max:100,minSize:"0%",maxSize:"100%",sort:(O=e.widgetObj.widgetParams[14])==null?void 0:O.value,gap:2,label:{show:(j=e.widgetObj.widgetParams[11])==null?void 0:j.value,position:(x=e.widgetObj.widgetParams[12])==null?void 0:x.value},labelLine:{length:10,lineStyle:{width:1,type:"solid"}},itemStyle:{borderColor:"#fff",borderWidth:1},emphasis:{label:{fontSize:20}},data:g.value}],t.value.legend.data=[],(y=g.value)==null||y.forEach((D,G)=>{t.value.legend.data.push(D.name)}),C()},n=()=>{k(()=>{i&&s.value&&i.resize()})};J([()=>e.widgetObj,()=>E.value,()=>o.value],()=>{d(),n()},{deep:!0});const g=S(()=>{var a;return(a=e.widgetObj.widgetParams[0].typeOptions.dataJson)!=null&&a.data?e.widgetObj.widgetParams[0].typeOptions.dataJson.data:e.widgetObj.widgetParams[0].typeOptions.dataJson});return(a,l)=>(z(),q(A,null,[(z(),H(N,{widgetObj:r.widgetObj,searchIndex:1,pickerIndex:13,key:r.widgetObj.widgetOption.number,onSetData:u,onResetData:d},null,8,["widgetObj"])),T("div",{ref_key:"chartRef",ref:s,style:V([{width:"100%"},{height:B.value}])},null,4)],64))}},Y=I(U,[["__scopeId","data-v-0c55adc8"]]);export{Y as default};
