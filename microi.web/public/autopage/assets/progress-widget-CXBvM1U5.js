import{_ as te,r as P,y as le,c as w,b as u,d,e as m,f,v as _,g as p,h as k,j as V,F as v,k as z,l as b,m as I,p as K,q as oe,t as se,x as O,A as Y}from"./index-e3nHg57k.js";import{u as ne,g as re}from"./useWidget-R-djxtlI.js";const de={class:"date-range"},ie={__name:"progress-widget",props:{widgetObj:{type:Object,required:!0}},async setup(s){let U,W;const e=s,y=P(!1);P([]);const N=async(a,t,l)=>{if(a&&t.optionUrl){y.value=!0;let n={};try{const g=await re(t.optionUrl+a,n);g&&g.length>0&&(e.widgetObj.widgetParams[0].typeOptions.dataJson.searchData[l].options=g),y.value=!1}catch(g){console.error("Error fetching data:",g)}finally{y.value=!1}}},S=async a=>{await D()},x=P(),C=P(!1),{loadRemoteData:D}=ne(e.widgetObj,e.widgetObj.widgetParams[0].typeOptions.dataJson,x,C);[U,W]=le(()=>D()),await U,W();const T=w(()=>{var a,t,l;return{backgroundColor:(a=e.widgetObj.widgetParams[2])==null?void 0:a.value,padding:(t=e.widgetObj.widgetParams[3])==null?void 0:t.value,textAlign:(l=e.widgetObj.widgetParams[4])==null?void 0:l.value}}),L=w(()=>{var a,t,l,n;return{fontSize:(a=e.widgetObj.widgetParams[13])==null?void 0:a.value,fontWeight:(t=e.widgetObj.widgetParams[14])==null?void 0:t.value,color:(l=e.widgetObj.widgetParams[15])==null?void 0:l.value,margin:(n=e.widgetObj.widgetParams[16])==null?void 0:n.value}}),R=w(()=>{var a,t,l,n;return{fontSize:(a=e.widgetObj.widgetParams[22])==null?void 0:a.value,fontWeight:(t=e.widgetObj.widgetParams[23])==null?void 0:t.value,color:(l=e.widgetObj.widgetParams[24])==null?void 0:l.value,margin:(n=e.widgetObj.widgetParams[25])==null?void 0:n.value}}),q=w(()=>{var a,t,l,n;return{fontSize:(a=e.widgetObj.widgetParams[17])==null?void 0:a.value,fontWeight:(t=e.widgetObj.widgetParams[18])==null?void 0:t.value,color:(l=e.widgetObj.widgetParams[19])==null?void 0:l.value,margin:(n=e.widgetObj.widgetParams[20])==null?void 0:n.value}}),G=w(()=>{var a;return{padding:(a=e.widgetObj.widgetParams[11])==null?void 0:a.value}}),H=w(()=>{var a;return(a=e.widgetObj.widgetParams[0].typeOptions.dataJson)!=null&&a.data?e.widgetObj.widgetParams[0].typeOptions.dataJson.data:e.widgetObj.widgetParams[0].typeOptions.dataJson});return(a,t)=>{var J;const l=u("el-input"),n=u("el-option"),g=u("el-select"),Q=u("el-date-picker"),X=u("el-button"),Z=u("el-space"),$=u("el-progress"),ee=u("el-col"),ae=u("el-row");return d(),m(v,null,[f(p("div",de,[k(Z,{wrap:""},{default:V(()=>{var i,j;return[(d(!0),m(v,null,z((i=s.widgetObj.widgetParams[0].typeOptions.dataJson)==null?void 0:i.searchData,(o,c)=>(d(),m(v,null,[o.type=="input"?(d(),b(l,{key:c,modelValue:o.value,"onUpdate:modelValue":r=>o.value=r,size:"small",placeholder:"请输入"+o.label,clearable:"",onKeyup:I(S,["enter"])},null,8,["modelValue","onUpdate:modelValue","placeholder"])):o.type=="select"?(d(),b(g,{class:"pagesearch",style:{"min-width":"120px"},key:c+"select",modelValue:o.value,"onUpdate:modelValue":r=>o.value=r,size:"small",placeholder:"请选择"+o.label,clearable:"",filterable:"",remote:"","remote-method":r=>N(r,o,c),loading:y.value,onKeyup:I(S,["enter"])},{default:V(()=>[(d(!0),m(v,null,z(o.options,(r,h)=>(d(),b(n,{value:r.value,label:r.label,key:h+r.value},null,8,["value","label"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder","remote-method","loading"])):K("",!0)],64))),256)),(j=s.widgetObj.widgetParams[27])!=null&&j.value?(d(),b(Q,{key:0,modelValue:x.value,"onUpdate:modelValue":t[0]||(t[0]=o=>x.value=o),size:"small","unlink-panels":"",type:"monthrange","range-separator":"至","start-placeholder":"起始年月","end-placeholder":"结束年月",format:"YYYY-MM","value-format":"YYYY-MM"},null,8,["modelValue"])):K("",!0),k(X,{icon:oe(se),size:"small",loading:C.value,circle:"",onClick:S},null,8,["icon","loading"])]}),_:1})],512),[[_,(J=s.widgetObj.widgetParams[26])==null?void 0:J.value]]),k(ae,{style:{width:"100%"}},{default:V(()=>[(d(!0),m(v,null,z(H.value,(i,j)=>{var o;return d(),b(ee,{key:j,class:"el-col",span:(o=s.widgetObj.widgetParams[1])==null?void 0:o.value,style:O(T.value)},{default:V(()=>{var c,r,h,M,B,F,A,E;return[f(p("div",{style:O(L.value)},Y(i.title),5),[[_,(c=s.widgetObj.widgetParams[12])==null?void 0:c.value]]),p("div",{style:O(q.value)},Y(i.value),5),f(p("div",{style:O(G.value)},[k($,{percentage:i.percentage,type:(r=s.widgetObj.widgetParams[5])==null?void 0:r.value,strokeWidth:(h=s.widgetObj.widgetParams[6])==null?void 0:h.value,showText:(M=s.widgetObj.widgetParams[7])==null?void 0:M.value,textInside:(B=s.widgetObj.widgetParams[8])==null?void 0:B.value,width:(F=s.widgetObj.widgetParams[10])==null?void 0:F.value,color:i.color==""?"#409EFF":i.color},null,8,["percentage","type","strokeWidth","showText","textInside","width","color"])],4),[[_,(A=s.widgetObj.widgetParams[7])==null?void 0:A.value]]),f(p("div",{style:O(R.value)},Y(i.subTitle),5),[[_,(E=s.widgetObj.widgetParams[21])==null?void 0:E.value]])]}),_:2},1032,["span","style"])}),128))]),_:1})],64)}}},ce=te(ie,[["__scopeId","data-v-c0f27037"]]);export{ce as default};
