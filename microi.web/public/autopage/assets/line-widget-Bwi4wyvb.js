import{i as W}from"./index-C2kp-yMC.js";import{_ as F,u as T,s as G,r as z,j as H,a as J,k as V,n as E,b as q,d as I,e as M,l as N,f as U,m as K,F as Q}from"./index-DB62lVRu.js";import{C as X}from"./CommonSearch-xKYey-9Y.js";import"./useWidget-bwlLrmUh.js";import"./axiosInstance-C1lImToN.js";const Y={__name:"line-widget",props:{widgetObj:{type:Object,required:!0}},setup(r){var w,v,c;const B=T(),{curWrapper:R,dark:a}=G(B),e=r,o=z(null);let l=null;const C=H(()=>{var i;let s=(i=e.widgetObj.widgetParams[1])!=null&&i.value?40:0;return e.widgetObj.widgetOption.height-s+"px"}),t=z({});t.value={title:{show:!0,text:"",subtext:"",textStyle:{color:a.value?"#fff":"#333",fontStyle:"normal",fontWeight:"bolder",fontFamily:"sans-serif",fontSize:18}},tooltip:{trigger:"axis",show:!0,axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}}},legend:{show:!0,type:"scroll",textStyle:{color:a.value?"#999":"#333"},data:[],orient:(w=e.widgetObj.widgetParams[8])==null?void 0:w.value,left:(v=e.widgetObj.widgetParams[9])==null?void 0:v.value},grid:{show:!1,left:"10%",right:"4%",bottom:"30px",containLabel:!1},toolbox:{show:!0,feature:{dataView:{readOnly:!1},restore:{},saveAsImage:{}}},xAxis:{type:"category",boundaryGap:!0,axisTick:{alignWithLabel:!0},axisLabel:{color:a.value?"#999":"#333"},data:[]},yAxis:{type:"value",splitLine:{show:(c=e.widgetObj.widgetParams[15])==null?void 0:c.value},axisLabel:{formatter:"{value}",color:a.value?"#999":"#333"}},series:[]},J(()=>{window.addEventListener("resize",d)}),V(()=>{window.removeEventListener("resize",d)});const u=()=>{E(()=>{l&&l.dispose(),o.value&&(l=W(o.value),g())})},D=()=>{l.setOption(t.value)},g=()=>{var s,i,m,b,p,x,f,h,O,j,y,P;t.value.title.textStyle.color=a.value?"#999":"#333",t.value.legend.textStyle.color=a.value?"#999":"#333",t.value.xAxis.axisLabel.color=a.value?"#999":"#333",t.value.yAxis.axisLabel.color=a.value?"#999":"#333",t.value.legend.orient=(s=e.widgetObj.widgetParams[8])==null?void 0:s.value,t.value.legend.left=(i=e.widgetObj.widgetParams[9])==null?void 0:i.value,t.value.title.text=(m=e.widgetObj.widgetParams[5])==null?void 0:m.value,t.value.title.subtext=(b=e.widgetObj.widgetParams[6])==null?void 0:b.value,t.value.legend.show=(p=e.widgetObj.widgetParams[7])==null?void 0:p.value,t.value.tooltip.show=(x=e.widgetObj.widgetParams[10])==null?void 0:x.value,t.value.tooltip.trigger=(f=e.widgetObj.widgetParams[11])==null?void 0:f.value,t.value.toolbox.show=(h=e.widgetObj.widgetParams[12])==null?void 0:h.value,t.value.xAxis.data=e.widgetObj.widgetParams[0].typeOptions.dataJson.xAxis,t.value.xAxis.boundaryGap=(O=e.widgetObj.widgetParams[2])==null?void 0:O.value,t.value.yAxis.splitLine.show=(j=e.widgetObj.widgetParams[15])==null?void 0:j.value,t.value.series=[],t.value.legend.data=[],(P=(y=e.widgetObj.widgetParams[0].typeOptions.dataJson)==null?void 0:y.series)==null||P.forEach((n,Z)=>{var k,L,A,_;const S={type:"line",name:n.name,data:n.data,smooth:(k=e.widgetObj.widgetParams[3])==null?void 0:k.value,label:{show:(L=e.widgetObj.widgetParams[13])==null?void 0:L.value,position:(A=e.widgetObj.widgetParams[14])==null?void 0:A.value}};(_=e.widgetObj.widgetParams[4])!=null&&_.value&&(S.areaStyle={}),t.value.series.push(S),t.value.legend.data.push(n.name)}),D()},d=()=>{E(()=>{o.value&&l.resize()})};return q([()=>e.widgetObj,()=>R.value,()=>a.value],()=>{u(),d()},{deep:!0}),(s,i)=>(I(),M(Q,null,[(I(),N(X,{widgetObj:r.widgetObj,searchIndex:1,pickerIndex:16,key:r.widgetObj.widgetOption.number,onSetData:g,onResetData:u},null,8,["widgetObj"])),U("div",{ref_key:"chartRef",ref:o,style:K([{width:"100%"},{height:C.value}])},null,4)],64))}},le=F(Y,[["__scopeId","data-v-3f84bd8b"]]);export{le as default};
