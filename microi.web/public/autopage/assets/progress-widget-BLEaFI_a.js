import{_ as le,r as p,y as se,c as w,b as g,d as i,e as v,f as _,v as k,g as b,h as V,j as S,F as O,k as J,l as y,m as K,p as N,q as oe,t as ne,x as j,A as Y}from"./index-DlsyjTHd.js";import{u as re,g as de}from"./useWidget-DNrzTSHA.js";const ie={class:"date-range"},ue={__name:"progress-widget",props:{widgetObj:{type:Object,required:!0}},async setup(o){let x,U;const e=o,h=p(!1);p([]);const T=async(a,t,l)=>{if(a&&t.optionUrl){h.value=!0;let s={};try{const c=await de(t.optionUrl+a,s);c&&c.length>0&&(e.widgetObj.widgetParams[0].typeOptions.dataJson.searchData[l].options=c),h.value=!1}catch(c){console.error("Error fetching data:",c)}finally{h.value=!1}}},m=p({}),z=async a=>{const t={...m.value};for(const[l,s]of Object.entries(t))e.widgetObj.widgetParams[0].typeOptions.dataJson.searchData[l]&&(e.widgetObj.widgetParams[0].typeOptions.dataJson.searchData[l].value=s);await C()},D=p(),W=p(!1),{loadRemoteData:C}=re(e.widgetObj,e.widgetObj.widgetParams[0].typeOptions.dataJson,D,W);[x,U]=se(()=>C()),await x,U();const L=w(()=>{var a,t,l;return{backgroundColor:(a=e.widgetObj.widgetParams[2])==null?void 0:a.value,padding:(t=e.widgetObj.widgetParams[3])==null?void 0:t.value,textAlign:(l=e.widgetObj.widgetParams[4])==null?void 0:l.value}}),R=w(()=>{var a,t,l,s;return{fontSize:(a=e.widgetObj.widgetParams[13])==null?void 0:a.value,fontWeight:(t=e.widgetObj.widgetParams[14])==null?void 0:t.value,color:(l=e.widgetObj.widgetParams[15])==null?void 0:l.value,margin:(s=e.widgetObj.widgetParams[16])==null?void 0:s.value}}),q=w(()=>{var a,t,l,s;return{fontSize:(a=e.widgetObj.widgetParams[22])==null?void 0:a.value,fontWeight:(t=e.widgetObj.widgetParams[23])==null?void 0:t.value,color:(l=e.widgetObj.widgetParams[24])==null?void 0:l.value,margin:(s=e.widgetObj.widgetParams[25])==null?void 0:s.value}}),G=w(()=>{var a,t,l,s;return{fontSize:(a=e.widgetObj.widgetParams[17])==null?void 0:a.value,fontWeight:(t=e.widgetObj.widgetParams[18])==null?void 0:t.value,color:(l=e.widgetObj.widgetParams[19])==null?void 0:l.value,margin:(s=e.widgetObj.widgetParams[20])==null?void 0:s.value}}),H=w(()=>{var a;return{padding:(a=e.widgetObj.widgetParams[11])==null?void 0:a.value}}),Q=w(()=>{var a;return(a=e.widgetObj.widgetParams[0].typeOptions.dataJson)!=null&&a.data?e.widgetObj.widgetParams[0].typeOptions.dataJson.data:e.widgetObj.widgetParams[0].typeOptions.dataJson});return(a,t)=>{var M;const l=g("el-input"),s=g("el-option"),c=g("el-select"),X=g("el-date-picker"),Z=g("el-button"),$=g("el-space"),ee=g("el-progress"),ae=g("el-col"),te=g("el-row");return i(),v(O,null,[_(b("div",ie,[V($,{wrap:""},{default:S(()=>{var u,P;return[(i(!0),v(O,null,J((u=o.widgetObj.widgetParams[0].typeOptions.dataJson)==null?void 0:u.searchData,(r,d)=>(i(),v(O,null,[r.type=="input"?(i(),y(l,{key:d,modelValue:m.value[d],"onUpdate:modelValue":n=>m.value[d]=n,size:"small",placeholder:"请输入"+r.label,clearable:"",onKeyup:K(z,["enter"])},null,8,["modelValue","onUpdate:modelValue","placeholder"])):r.type=="select"?(i(),y(c,{class:"pagesearch",style:{"min-width":"120px"},key:d+"select",modelValue:m.value[d],"onUpdate:modelValue":n=>m.value[d]=n,size:"small",placeholder:"请选择"+r.label,clearable:"",filterable:"",remote:"","remote-method":n=>T(n,r,d),loading:h.value,onKeyup:K(z,["enter"])},{default:S(()=>[(i(!0),v(O,null,J(r.options,(n,f)=>(i(),y(s,{value:n.value,label:n.label,key:f+n.value},null,8,["value","label"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder","remote-method","loading"])):N("",!0)],64))),256)),(P=o.widgetObj.widgetParams[27])!=null&&P.value?(i(),y(X,{key:0,modelValue:D.value,"onUpdate:modelValue":t[0]||(t[0]=r=>D.value=r),size:"small","unlink-panels":"",type:"monthrange","range-separator":"至","start-placeholder":"起始年月","end-placeholder":"结束年月",format:"YYYY-MM","value-format":"YYYY-MM"},null,8,["modelValue"])):N("",!0),V(Z,{icon:oe(ne),size:"small",loading:W.value,circle:"",onClick:z},null,8,["icon","loading"])]}),_:1})],512),[[k,(M=o.widgetObj.widgetParams[26])==null?void 0:M.value]]),V(te,{style:{width:"100%"}},{default:S(()=>[(i(!0),v(O,null,J(Q.value,(u,P)=>{var r;return i(),y(ae,{key:P,class:"el-col",span:(r=o.widgetObj.widgetParams[1])==null?void 0:r.value,style:j(L.value)},{default:S(()=>{var d,n,f,B,F,A,E,I;return[_(b("div",{style:j(R.value)},Y(u.title),5),[[k,(d=o.widgetObj.widgetParams[12])==null?void 0:d.value]]),b("div",{style:j(G.value)},Y(u.value),5),_(b("div",{style:j(H.value)},[V(ee,{percentage:u.percentage,type:(n=o.widgetObj.widgetParams[5])==null?void 0:n.value,strokeWidth:(f=o.widgetObj.widgetParams[6])==null?void 0:f.value,showText:(B=o.widgetObj.widgetParams[7])==null?void 0:B.value,textInside:(F=o.widgetObj.widgetParams[8])==null?void 0:F.value,width:(A=o.widgetObj.widgetParams[10])==null?void 0:A.value,color:u.color==""?"#409EFF":u.color},null,8,["percentage","type","strokeWidth","showText","textInside","width","color"])],4),[[k,(E=o.widgetObj.widgetParams[7])==null?void 0:E.value]]),_(b("div",{style:j(q.value)},Y(u.subTitle),5),[[k,(I=o.widgetObj.widgetParams[21])==null?void 0:I.value]])]}),_:2},1032,["span","style"])}),128))]),_:1})],64)}}},we=le(ue,[["__scopeId","data-v-5ae44c22"]]);export{we as default};
