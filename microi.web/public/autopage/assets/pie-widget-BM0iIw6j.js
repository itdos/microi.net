import{_ as F,u as J,s as T,r as z,l as I,a as q,m as A,n as R,b as H,d as B,e as V,p as M,f as N,q as U,F as G,k as K}from"./index-Cd0LJEJn.js";import{C as Q}from"./CommonSearch-CKeA7ir0.js";import"./useWidget-gUdKlkzY.js";const X={__name:"pie-widget",props:{widgetObj:{type:Object,required:!0}},setup(l){var g,w;const D=J(),{curWrapper:E,dark:s}=T(D),e=l,o=z(null);let r=null;const C=I(()=>{var i;let a=(i=e.widgetObj.widgetParams[1])!=null&&i.value?40:0;return e.widgetObj.widgetOption.height-a+"px"}),t=z({});t.value={title:{show:!0,text:"",subtext:"",textStyle:{color:s.value?"#999":"#333",fontStyle:"normal",fontWeight:"bolder",fontFamily:"sans-serif",fontSize:18}},tooltip:{trigger:"item",show:!0},legend:{show:!0,type:"scroll",textStyle:{color:s.value?"#fff":"#333"},orient:(g=e.widgetObj.widgetParams[8])==null?void 0:g.value,left:(w=e.widgetObj.widgetParams[9])==null?void 0:w.value},grid:{show:!1,left:"6%",right:"4%",bottom:"30px",containLabel:!1},toolbox:{show:!0,feature:{dataView:{readOnly:!1},restore:{},saveAsImage:{}}},series:[]},q(()=>{window.addEventListener("resize",d)}),A(()=>{window.removeEventListener("resize",d)});const n=()=>{R(()=>{r&&r.dispose(),o.value&&(r=K(o.value),u())})},L=()=>{r.setOption(t.value)},u=()=>{var i,v,c,m,b,p,O,f,h,j,P,y,x,S,k,_;t.value.title.textStyle.color=s.value?"#999":"#333",t.value.legend.textStyle.color=s.value?"#999":"#333",t.value.legend.orient=(i=e.widgetObj.widgetParams[8])==null?void 0:i.value,t.value.legend.left=(v=e.widgetObj.widgetParams[9])==null?void 0:v.value,t.value.title.text=(c=e.widgetObj.widgetParams[5])==null?void 0:c.value,t.value.title.subtext=(m=e.widgetObj.widgetParams[6])==null?void 0:m.value,t.value.legend.show=(b=e.widgetObj.widgetParams[7])==null?void 0:b.value,t.value.tooltip.show=(p=e.widgetObj.widgetParams[10])==null?void 0:p.value,t.value.tooltip.trigger=(O=e.widgetObj.widgetParams[11])==null?void 0:O.value,t.value.toolbox.show=(f=e.widgetObj.widgetParams[12])==null?void 0:f.value,t.value.series=[];const a={type:"pie",radius:[((h=e.widgetObj.widgetParams[2])==null?void 0:h.value)+"%",((j=e.widgetObj.widgetParams[3])==null?void 0:j.value)+"%"],top:50,bottom:30,labelLine:{show:!0},padAngle:(P=e.widgetObj.widgetParams[17])==null?void 0:P.value,itemStyle:{borderRadius:(y=e.widgetObj.widgetParams[15])==null?void 0:y.value,borderColor:"#fff",borderWidth:(x=e.widgetObj.widgetParams[16])==null?void 0:x.value},data:W.value,label:{show:(S=e.widgetObj.widgetParams[13])==null?void 0:S.value,position:(k=e.widgetObj.widgetParams[14])==null?void 0:k.value}};(_=e.widgetObj.widgetParams[18])!=null&&_.value&&(a.roseType="radius"),t.value.series.push(a),L()},d=()=>{R(()=>{o.value&&r.resize()})};H([()=>e.widgetObj,()=>E.value,()=>s.value],()=>{n(),d()},{deep:!0});const W=I(()=>{var a;return(a=e.widgetObj.widgetParams[0].typeOptions.dataJson)!=null&&a.data?e.widgetObj.widgetParams[0].typeOptions.dataJson.data:e.widgetObj.widgetParams[0].typeOptions.dataJson});return(a,i)=>(B(),V(G,null,[(B(),M(Q,{widgetObj:l.widgetObj,searchIndex:1,pickerIndex:19,key:l.widgetObj.widgetOption.number,onSetData:u,onResetData:n},null,8,["widgetObj"])),N("div",{ref_key:"chartRef",ref:o,style:U([{width:"100%"},{height:C.value}])},null,4)],64))}},ee=F(X,[["__scopeId","data-v-c60ae924"]]);export{ee as default};
