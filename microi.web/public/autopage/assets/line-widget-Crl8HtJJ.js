import{_ as W,u as F,s as T,r as z,l as q,a as G,m as H,n as E,b as J,d as I,e as V,p as M,f as N,q as U,F as K,k as Q}from"./index-VdJnV-Xx.js";import{C as X}from"./CommonSearch-D8QI6QXb.js";import"./useWidget-MIMwv8H2.js";import"./axiosInstance-jW9wSf4p.js";const Y={__name:"line-widget",props:{widgetObj:{type:Object,required:!0}},setup(r){var w,v,c;const B=F(),{curWrapper:R,dark:a}=T(B),e=r,o=z(null);let l=null;const C=q(()=>{var i;let s=(i=e.widgetObj.widgetParams[1])!=null&&i.value?40:0;return e.widgetObj.widgetOption.height-s+"px"}),t=z({});t.value={title:{show:!0,text:"",subtext:"",textStyle:{color:a.value?"#fff":"#333",fontStyle:"normal",fontWeight:"bolder",fontFamily:"sans-serif",fontSize:18}},tooltip:{trigger:"axis",show:!0,axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}}},legend:{show:!0,type:"scroll",textStyle:{color:a.value?"#999":"#333"},data:[],orient:(w=e.widgetObj.widgetParams[8])==null?void 0:w.value,left:(v=e.widgetObj.widgetParams[9])==null?void 0:v.value},grid:{show:!1,left:"10%",right:"4%",bottom:"30px",containLabel:!1},toolbox:{show:!0,feature:{dataView:{readOnly:!1},restore:{},saveAsImage:{}}},xAxis:{type:"category",boundaryGap:!0,axisTick:{alignWithLabel:!0},axisLabel:{color:a.value?"#999":"#333"},data:[]},yAxis:{type:"value",splitLine:{show:(c=e.widgetObj.widgetParams[15])==null?void 0:c.value},axisLabel:{formatter:"{value}",color:a.value?"#999":"#333"}},series:[]},G(()=>{window.addEventListener("resize",d)}),H(()=>{window.removeEventListener("resize",d)});const u=()=>{E(()=>{l&&l.dispose(),o.value&&(l=Q(o.value),g())})},D=()=>{l.setOption(t.value)},g=()=>{var s,i,b,m,p,x,h,f,O,j,y,P;t.value.title.textStyle.color=a.value?"#999":"#333",t.value.legend.textStyle.color=a.value?"#999":"#333",t.value.xAxis.axisLabel.color=a.value?"#999":"#333",t.value.yAxis.axisLabel.color=a.value?"#999":"#333",t.value.legend.orient=(s=e.widgetObj.widgetParams[8])==null?void 0:s.value,t.value.legend.left=(i=e.widgetObj.widgetParams[9])==null?void 0:i.value,t.value.title.text=(b=e.widgetObj.widgetParams[5])==null?void 0:b.value,t.value.title.subtext=(m=e.widgetObj.widgetParams[6])==null?void 0:m.value,t.value.legend.show=(p=e.widgetObj.widgetParams[7])==null?void 0:p.value,t.value.tooltip.show=(x=e.widgetObj.widgetParams[10])==null?void 0:x.value,t.value.tooltip.trigger=(h=e.widgetObj.widgetParams[11])==null?void 0:h.value,t.value.toolbox.show=(f=e.widgetObj.widgetParams[12])==null?void 0:f.value,t.value.xAxis.data=e.widgetObj.widgetParams[0].typeOptions.dataJson.xAxis,t.value.xAxis.boundaryGap=(O=e.widgetObj.widgetParams[2])==null?void 0:O.value,t.value.yAxis.splitLine.show=(j=e.widgetObj.widgetParams[15])==null?void 0:j.value,t.value.series=[],t.value.legend.data=[],(P=(y=e.widgetObj.widgetParams[0].typeOptions.dataJson)==null?void 0:y.series)==null||P.forEach((n,Z)=>{var k,L,A,_;const S={type:"line",name:n.name,data:n.data,smooth:(k=e.widgetObj.widgetParams[3])==null?void 0:k.value,label:{show:(L=e.widgetObj.widgetParams[13])==null?void 0:L.value,position:(A=e.widgetObj.widgetParams[14])==null?void 0:A.value}};(_=e.widgetObj.widgetParams[4])!=null&&_.value&&(S.areaStyle={}),t.value.series.push(S),t.value.legend.data.push(n.name)}),D()},d=()=>{E(()=>{o.value&&l.resize()})};return J([()=>e.widgetObj,()=>R.value,()=>a.value],()=>{u(),d()},{deep:!0}),(s,i)=>(I(),V(K,null,[(I(),M(X,{widgetObj:r.widgetObj,searchIndex:1,pickerIndex:16,key:r.widgetObj.widgetOption.number,onSetData:g,onResetData:u},null,8,["widgetObj"])),N("div",{ref_key:"chartRef",ref:o,style:U([{width:"100%"},{height:C.value}])},null,4)],64))}},ie=W(Y,[["__scopeId","data-v-3f84bd8b"]]);export{ie as default};
