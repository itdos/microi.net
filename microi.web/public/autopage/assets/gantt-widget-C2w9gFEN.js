import{B as ci,r as di,a as Lm,w as Nm,d as Rm,e as Pm,f as ui,t as Om,C as Hm,D as Bm,q as zm,G as cr,H as Wm}from"./index-B5wzY7fk.js";import{u as Fm,p as Um}from"./useWidget-BqQaiJ-A.js";/** @license

dhtmlxGantt v.9.0.5 Standard

This version of dhtmlxGantt is distributed under GPL 2.0 license and can be legally used in GPL projects.

To use dhtmlxGantt in non-GPL projects (and get Pro version of the product), please obtain Individual, Commercial, Enterprise or Ultimate license on our site https://dhtmlx.com/docs/products/dhtmlxGantt/#licensing or contact us at info@dhtmlx.com

(c) XB Software

*/function Ft(t){var n=0,e=0,i=0,r=0;if(t.getBoundingClientRect){var a=t.getBoundingClientRect(),s=document.body,l=document.documentElement||document.body.parentNode||document.body,c=window.pageYOffset||l.scrollTop||s.scrollTop,u=window.pageXOffset||l.scrollLeft||s.scrollLeft,h=l.clientTop||s.clientTop||0,_=l.clientLeft||s.clientLeft||0;n=a.top+c-h,e=a.left+u-_,i=document.body.offsetWidth-a.right,r=document.body.offsetHeight-a.bottom}else{for(;t;)n+=parseInt(t.offsetTop,10),e+=parseInt(t.offsetLeft,10),t=t.offsetParent;i=document.body.offsetWidth-t.offsetWidth-e,r=document.body.offsetHeight-t.offsetHeight-n}return{y:Math.round(n),x:Math.round(e),width:t.offsetWidth,height:t.offsetHeight,right:Math.round(i),bottom:Math.round(r)}}function Vm(t){var n=!1,e=!1;if(window.getComputedStyle){var i=window.getComputedStyle(t,null);n=i.display,e=i.visibility}else t.currentStyle&&(n=t.currentStyle.display,e=t.currentStyle.visibility);return n!="none"&&e!="hidden"}function jm(t){return!isNaN(t.getAttribute("tabindex"))&&1*t.getAttribute("tabindex")>=0}function Gm(t){return!{a:!0,area:!0}[t.nodeName.loLowerCase()]||!!t.getAttribute("href")}function qm(t){return!{input:!0,select:!0,textarea:!0,button:!0,object:!0}[t.nodeName.toLowerCase()]||!t.hasAttribute("disabled")}function ps(t){for(var n=t.querySelectorAll(["a[href]","area[href]","input","select","textarea","button","iframe","object","embed","[tabindex]","[contenteditable]"].join(", ")),e=Array.prototype.slice.call(n,0),i=0;i<e.length;i++)e[i].$position=i;for(e.sort(function(a,s){return a.tabIndex===0&&s.tabIndex!==0?1:a.tabIndex!==0&&s.tabIndex===0?-1:a.tabIndex===s.tabIndex?a.$position-s.$position:a.tabIndex<s.tabIndex?-1:1}),i=0;i<e.length;i++){var r=e[i];(jm(r)||qm(r)||Gm(r))&&Vm(r)||(e.splice(i,1),i--)}return e}function $c(){var t=document.createElement("div");t.style.cssText="visibility:hidden;position:absolute;left:-1000px;width:100px;padding:0px;margin:0px;height:110px;min-height:100px;overflow-y:scroll;",document.body.appendChild(t);var n=t.offsetWidth-t.clientWidth;return document.body.removeChild(t),Math.max(n,15)}function ce(t){if(!t)return"";var n=t.className||"";return n.baseVal&&(n=n.baseVal),n.indexOf||(n=""),ns(n)}function Fn(t,n){n&&t.className.indexOf(n)===-1&&(t.className+=" "+n)}function vr(t,n){n=n.split(" ");for(var e=0;e<n.length;e++){var i=new RegExp("\\s?\\b"+n[e]+"\\b(?![-_.])","");t.className=t.className.replace(i,"")}}function ms(t){return typeof t=="string"?document.getElementById(t)||document.querySelector(t)||document.body:t||document.body}var dr;function Sc(t,n){dr||(dr=document.createElement("div")),dr.innerHTML=n;var e=dr.firstChild;return t.appendChild(e),e}function Tc(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function Ec(t,n){for(var e=t.childNodes,i=e.length,r=[],a=0;a<i;a++){var s=e[a];s.className&&s.className.indexOf(n)!==-1&&r.push(s)}return r}function xn(t){var n;return t.tagName?n=t:(n=(t=t||window.event).target||t.srcElement).shadowRoot&&t.composedPath&&(n=t.composedPath()[0]),n}function ye(t,n){if(n){for(var e=xn(t);e;){if(e.getAttribute&&e.getAttribute(n))return e;e=e.parentNode}return null}}function ns(t){return(String.prototype.trim||function(){return this.replace(/^\s+|\s+$/g,"")}).apply(t)}function on(t,n,e){var i=xn(t),r="";for(e===void 0&&(e=!0);i;){if(r=ce(i)){var a=r.indexOf(n);if(a>=0){if(!e)return i;var s=a===0||!ns(r.charAt(a-1)),l=a+n.length>=r.length||!ns(r.charAt(a+n.length));if(s&&l)return i}}i=i.parentNode}return null}function Ie(t,n){var e=document.documentElement,i=Ft(n);return{x:t.clientX+e.scrollLeft-e.clientLeft-i.x+n.scrollLeft,y:t.clientY+e.scrollTop-e.clientTop-i.y+n.scrollTop}}function Cc(t,n){const e=Ft(t),i=Ft(n);return{x:e.x-i.x,y:e.y-i.y}}function Qt(t,n){if(!t||!n)return!1;for(;t&&t!=n;)t=t.parentNode;return t===n}function He(t,n){if(t.closest)return t.closest(n);if(t.matches||t.msMatchesSelector||t.webkitMatchesSelector){var e=t;if(!document.documentElement.contains(e))return null;do{if((e.matches||e.msMatchesSelector||e.webkitMatchesSelector).call(e,n))return e;e=e.parentElement||e.parentNode}while(e!==null&&e.nodeType===1);return null}return console.error("Your browser is not supported"),null}function Ac(t){for(;t;){if(t.offsetWidth>0&&t.offsetHeight>0)return t;t=t.parentElement}return null}function Dc(){return document.head.createShadowRoot||document.head.attachShadow}function is(){var t=document.activeElement;return t.shadowRoot&&(t=t.shadowRoot.activeElement),t===document.body&&document.getSelection&&(t=document.getSelection().focusNode||document.body),t}function yn(t){if(!t||!Dc())return document.body;for(;t.parentNode&&(t=t.parentNode);)if(t instanceof ShadowRoot)return t.host;return document.body}const Ic=Object.freeze(Object.defineProperty({__proto__:null,addClassName:Fn,closest:He,getActiveElement:is,getChildNodes:Ec,getClassName:ce,getClosestSizedElement:Ac,getFocusableNodes:ps,getNodePosition:Ft,getRelativeEventPosition:Ie,getRelativeNodePosition:Cc,getRootNode:yn,getScrollSize:$c,getTargetNode:xn,hasClass:function(t,n){return"classList"in t?t.classList.contains(n):new RegExp("\\b"+n+"\\b").test(t.className)},hasShadowParent:function(t){return!!yn(t)},insertNode:Sc,isChildOf:Qt,isShadowDomSupported:Dc,locateAttribute:ye,locateClassName:on,removeClassName:vr,removeNode:Tc,toNode:ms},Symbol.toStringTag,{value:"Module"})),Oe=typeof window<"u"?window:global;let Ym=class{constructor(t){this._mouseDown=!1,this._gantt=t,this._domEvents=t._createDomEventScope()}attach(t,n,e){const i=this._gantt,r=t.getViewPort();this._originPosition=Oe.getComputedStyle(r).display,this._restoreOriginPosition=()=>{r.style.position=this._originPosition},this._originPosition==="static"&&(r.style.position="relative");const a=i.$services.getService("state");a.registerProvider("clickDrag",()=>({autoscroll:!1}));let s=null;const l=()=>{s&&(this._mouseDown=!0,t.setStart(i.copy(s)),t.setPosition(i.copy(s)),t.setEnd(i.copy(s)),s=null)};this._domEvents.attach(r,"mousedown",u=>{s=null;let h=".gantt_task_line, .gantt_task_link";e!==void 0&&(h=e instanceof Array?e.join(", "):e),h&&i.utils.dom.closest(u.target,h)||(a.registerProvider("clickDrag",()=>({autoscroll:this._mouseDown})),n&&u[n]!==!0||(s=this._getCoordinates(u,t)))});const c=yn(i.$root)||document.body;this._domEvents.attach(c,"mouseup",u=>{if(s=null,(!n||u[n]===!0)&&this._mouseDown===!0){this._mouseDown=!1;const h=this._getCoordinates(u,t);t.dragEnd(h)}}),this._domEvents.attach(r,"mousemove",u=>{if(n&&u[n]!==!0)return;const h=this._gantt.ext.clickDrag,_=(this._gantt.config.drag_timeline||{}).useKey;if(h&&_&&!n&&u[_])return;let g=null;if(!this._mouseDown&&s)return g=this._getCoordinates(u,t),void(Math.abs(s.relative.left-g.relative.left)>5&&l());this._mouseDown===!0&&(g=this._getCoordinates(u,t),t.setEnd(g),t.render())})}detach(){const t=this._gantt;this._domEvents.detachAll(),this._restoreOriginPosition&&this._restoreOriginPosition(),t.$services.getService("state").unregisterProvider("clickDrag")}destructor(){this.detach()}_getCoordinates(t,n){const e=n.getViewPort(),i=e.getBoundingClientRect(),{clientX:r,clientY:a}=t;return{absolute:{left:r,top:a},relative:{left:r-i.left+e.scrollLeft,top:a-i.top+e.scrollTop}}}};var Mc=function(){this._silent_mode=!1,this.listeners={}};Mc.prototype={_silentStart:function(){this._silent_mode=!0},_silentEnd:function(){this._silent_mode=!1}};var Km=function(t){var n={},e=0,i=function(){var r=!0;for(var a in n){var s=n[a].apply(t,arguments);r=r&&s}return r};return i.addEvent=function(r,a){if(typeof r=="function"){var s;if(a&&a.id?s=a.id:(s=e,e++),a&&a.once){var l=r;r=function(){l(),i.removeEvent(s)}}return n[s]=r,s}return!1},i.removeEvent=function(r){delete n[r]},i.clear=function(){n={}},i};function Le(t){var n=new Mc;t.attachEvent=function(e,i,r){e="ev_"+e.toLowerCase(),n.listeners[e]||(n.listeners[e]=Km(this)),r&&r.thisObject&&(i=i.bind(r.thisObject));var a=e+":"+n.listeners[e].addEvent(i,r);return r&&r.id&&(a=r.id),a},t.attachAll=function(e){this.attachEvent("listen_all",e)},t.callEvent=function(e,i){if(n._silent_mode)return!0;var r="ev_"+e.toLowerCase(),a=n.listeners;return a.ev_listen_all&&a.ev_listen_all.apply(this,[e].concat(i)),!a[r]||a[r].apply(this,i)},t.checkEvent=function(e){return!!n.listeners["ev_"+e.toLowerCase()]},t.detachEvent=function(e){if(e){var i=n.listeners;for(var r in i)i[r].removeEvent(e);var a=e.split(":");if(i=n.listeners,a.length===2){var s=a[0],l=a[1];i[s]&&i[s].removeEvent(l)}}},t.detachAllEvents=function(){for(var e in n.listeners)n.listeners[e].clear()}}var Zl={second:1,minute:60,hour:3600,day:86400,week:604800,month:2592e3,quarter:7776e3,year:31536e3};function gr(t){return Zl[t]||Zl.hour}function bn(t,n){if(t.forEach)t.forEach(n);else for(var e=t.slice(),i=0;i<e.length;i++)n(e[i],i)}function Jm(t,n){if(t.find)return t.find(n);for(var e=0;e<t.length;e++)if(n(t[e],e))return t[e]}function ur(t,n){if(t.includes)return t.includes(n);for(var e=0;e<t.length;e++)if(t[e]===n)return!0;return!1}function rs(t){return Array.isArray?Array.isArray(t):t&&t.length!==void 0&&t.pop&&t.push}function de(t){return!(!t||typeof t!="object")&&!!(t.getFullYear&&t.getMonth&&t.getDate)}function Bn(t){return de(t)&&!isNaN(t.getTime())}function Ql(t,n){var e,i=function(){i.$cancelTimeout(),i.$pending=!0;var r=Array.prototype.slice.call(arguments);e=setTimeout(function(){t.apply(this,r),i.$pending=!1},n)};return i.$pending=!1,i.$cancelTimeout=function(){clearTimeout(e),i.$pending=!1},i.$execute=function(){var r=Array.prototype.slice.call(arguments);t.apply(this,r),i.$cancelTimeout()},i}function De(t,n){return tc(t)&&!tc(n)&&(t="0"),t}function tc(t){return t===0}function fi(t,n){for(var e,i,r,a=0,s=t.length-1;a<=s;)if(i=+t[e=Math.floor((a+s)/2)],r=+t[e-1],i<n)a=e+1;else{if(!(i>n)){for(;+t[e]==+t[e+1];)e++;return e}if(!isNaN(r)&&r<n)return e-1;s=e-1}return t.length-1}class Xm{constructor(n,e,i){var r;this._el=document.createElement("div"),this.defaultRender=(a,s)=>{this._el||(this._el=document.createElement("div"));const l=this._el,c=Math.min(a.relative.top,s.relative.top),u=Math.max(a.relative.top,s.relative.top),h=Math.min(a.relative.left,s.relative.left),_=Math.max(a.relative.left,s.relative.left);if(this._singleRow){const g=this._getTaskPositionByTop(this._startPoint.relative.top);l.style.height=g.height+"px",l.style.top=g.top+"px"}else l.style.height=Math.abs(u-c)+"px",l.style.top=c+"px";return l.style.width=Math.abs(_-h)+"px",l.style.left=h+"px",l},this._gantt=e,this._view=i,this._viewPort=n.viewPort,this._el.classList.add(n.className),typeof n.callback=="function"&&(this._callback=n.callback),this.render=()=>{let a;a=n.render?n.render(this._startPoint,this._endPoint):this.defaultRender(this._startPoint,this._endPoint),a!==this._el&&(this._el&&this._el.parentNode&&this._el.parentNode.removeChild(this._el),this._el=a),n.className!==""&&this._el.classList.add(n.className),this.draw()},(r=this._viewPort).attachEvent&&r.detachEvent||Le(this._viewPort),this._singleRow=n.singleRow,this._useRequestAnimationFrame=n.useRequestAnimationFrame}draw(){if(this._useRequestAnimationFrame)return requestAnimationFrame(()=>{this._viewPort.appendChild(this.getElement())});this._viewPort.appendChild(this.getElement())}clear(){if(this._useRequestAnimationFrame)return requestAnimationFrame(()=>{this._el.parentNode&&this._viewPort.removeChild(this._el)});this._el.parentNode&&this._viewPort.removeChild(this._el)}getElement(){return this._el}getViewPort(){return this._viewPort}setStart(n){const e=this._gantt;this._startPoint=n,this._startDate=e.dateFromPos(this._startPoint.relative.left),this._viewPort.callEvent("onBeforeDrag",[this._startPoint])}setEnd(n){const e=this._gantt;if(this._endPoint=n,this._singleRow){const i=this._getTaskPositionByTop(this._startPoint.relative.top);this._endPoint.relative.top=i.top}this._endDate=e.dateFromPos(this._endPoint.relative.left),this._startPoint.relative.left>this._endPoint.relative.left&&(this._positionPoint={relative:{left:this._endPoint.relative.left,top:this._positionPoint.relative.top},absolute:{left:this._endPoint.absolute.left,top:this._positionPoint.absolute.top}}),this._startPoint.relative.top>this._endPoint.relative.top&&(this._positionPoint={relative:{left:this._positionPoint.relative.left,top:this._endPoint.relative.top},absolute:{left:this._positionPoint.absolute.left,top:this._endPoint.absolute.top}}),this._viewPort.callEvent("onDrag",[this._startPoint,this._endPoint])}setPosition(n){this._positionPoint=n}dragEnd(n){const e=this._gantt;n.relative.left<0&&(n.relative.left=0),this._viewPort.callEvent("onBeforeDragEnd",[this._startPoint,n]),this.setEnd(n),this._endDate=this._endDate||e.getState().max_date,this._startDate.valueOf()>this._endDate.valueOf()&&([this._startDate,this._endDate]=[this._endDate,this._startDate]),this.clear();const i=e.getTaskByTime(this._startDate,this._endDate),r=this._getTasksByTop(this._startPoint.relative.top,this._endPoint.relative.top);this._viewPort.callEvent("onDragEnd",[this._startPoint,this._endPoint]),this._callback&&this._callback(this._startPoint,this._endPoint,this._startDate,this._endDate,i,r)}getInBounds(){return this._singleRow}_getTasksByTop(n,e){const i=this._gantt;let r=n,a=e;n>e&&(r=e,a=n);const s=this._getTaskPositionByTop(r).index,l=this._getTaskPositionByTop(a).index,c=[];for(let u=s;u<=l;u++)i.getTaskByIndex(u)&&c.push(i.getTaskByIndex(u));return c}_getTaskPositionByTop(n){const e=this._gantt,i=this._view,r=i.getItemIndexByTopPosition(n),a=e.getTaskByIndex(r);if(a){const s=i.getItemHeight(a.id);return{top:i.getItemTop(a.id)||0,height:s||0,index:r}}{const s=i.getTotalHeight();return{top:n>s?s:0,height:e.config.row_height,index:n>s?e.getTaskCount():0}}}}class vs{constructor(n){this._mouseDown=!1,this._calculateDirectionVector=()=>{if(this._trace.length>=10){const e=this._trace.slice(this._trace.length-10),i=[];for(let a=1;a<e.length;a++)i.push({x:e[a].x-e[a-1].x,y:e[a].y-e[a-1].y});const r={x:0,y:0};return i.forEach(a=>{r.x+=a.x,r.y+=a.y}),{magnitude:Math.sqrt(r.x*r.x+r.y*r.y),angleDegrees:180*Math.atan2(Math.abs(r.y),Math.abs(r.x))/Math.PI}}return null},this._applyDndReadyStyles=()=>{this._timeline.$task.classList.add("gantt_timeline_move_available")},this._clearDndReadyStyles=()=>{this._timeline.$task.classList.remove("gantt_timeline_move_available")},this._getScrollPosition=e=>{const i=this._gantt;return{x:i.$ui.getView(e.$config.scrollX).getScrollState().position,y:i.$ui.getView(e.$config.scrollY).getScrollState().position}},this._countNewScrollPosition=e=>{const i=this._calculateDirectionVector();let r=this._startPoint.x-e.x,a=this._startPoint.y-e.y;return i&&(i.angleDegrees<15?a=0:i.angleDegrees>75&&(r=0)),{x:this._scrollState.x+r,y:this._scrollState.y+a}},this._setScrollPosition=(e,i)=>{const r=this._gantt;requestAnimationFrame(()=>{r.scrollLayoutCell(e.$id,i.x,i.y)})},this._stopDrag=e=>{const i=this._gantt;if(this._trace=[],i.$root.classList.remove("gantt_noselect"),this._originalReadonly!==void 0&&(i.config.readonly=this._originalReadonly,this._mouseDown&&i.config.drag_timeline&&i.config.drag_timeline.render&&i.render()),this._originAutoscroll!==void 0&&(i.config.autoscroll=this._originAutoscroll),i.config.drag_timeline){const{useKey:r}=i.config.drag_timeline;if(r&&e[r]!==!0)return}this._mouseDown=!1},this._startDrag=e=>{const i=this._gantt;this._originAutoscroll=i.config.autoscroll,i.config.autoscroll=!1,i.$root.classList.add("gantt_noselect"),this._originalReadonly=i.config.readonly,i.config.readonly=!0,i.config.drag_timeline&&i.config.drag_timeline.render&&i.render(),this._trace=[],this._mouseDown=!0;const{x:r,y:a}=this._getScrollPosition(this._timeline);this._scrollState={x:r,y:a},this._startPoint={x:e.clientX,y:e.clientY},this._trace.push(this._startPoint)},this._gantt=n,this._domEvents=n._createDomEventScope(),this._trace=[]}static create(n){return new vs(n)}destructor(){this._domEvents.detachAll()}attach(n){this._timeline=n;const e=this._gantt;this._domEvents.attach(n.$task,"mousedown",i=>{if(!e.config.drag_timeline)return;const{useKey:r,ignore:a,enabled:s}=e.config.drag_timeline;if(s===!1)return;let l=".gantt_task_line, .gantt_task_link";a!==void 0&&(l=a instanceof Array?a.join(", "):a),l&&e.utils.dom.closest(i.target,l)||r&&i[r]!==!0||this._startDrag(i)}),this._domEvents.attach(document,"keydown",i=>{if(!e.config.drag_timeline)return;const{useKey:r}=e.config.drag_timeline;r&&i[r]===!0&&this._applyDndReadyStyles()}),this._domEvents.attach(document,"keyup",i=>{if(!e.config.drag_timeline)return;const{useKey:r}=e.config.drag_timeline;r&&i[r]===!1&&(this._clearDndReadyStyles(),this._stopDrag(i))}),this._domEvents.attach(document,"mouseup",i=>{this._stopDrag(i)}),this._domEvents.attach(e.$root,"mouseup",i=>{this._stopDrag(i)}),this._domEvents.attach(document,"mouseleave",i=>{this._stopDrag(i)}),this._domEvents.attach(e.$root,"mouseleave",i=>{this._stopDrag(i)}),this._domEvents.attach(e.$root,"mousemove",i=>{if(!e.config.drag_timeline)return;const{useKey:r}=e.config.drag_timeline;if(r&&i[r]!==!0)return;const a=this._gantt.ext.clickDrag,s=(this._gantt.config.click_drag||{}).useKey;if((!a||!s||r||!i[s])&&this._mouseDown===!0){this._trace.push({x:i.clientX,y:i.clientY});const l=this._countNewScrollPosition({x:i.clientX,y:i.clientY});this._setScrollPosition(n,l),this._scrollState=l,this._startPoint={x:i.clientX,y:i.clientY}}})}}function Zm(t){(function(){var n=[];function e(){return!!n.length}function i(u){setTimeout(function(){e()||t.$destroyed||t.focus()},1)}function r(u){t.eventRemove(u,"keydown",s),t.event(u,"keydown",s),n.push(u)}function a(){var u=n.pop();u&&t.eventRemove(u,"keydown",s),i()}function s(u){var h=u.currentTarget;h==n[n.length-1]&&t.$keyboardNavigation.trapFocus(h,u)}function l(){r(t.getLightbox())}t.attachEvent("onLightbox",l),t.attachEvent("onAfterLightbox",a),t.attachEvent("onLightboxChange",function(){a(),l()}),t.attachEvent("onAfterQuickInfo",function(){i()}),t.attachEvent("onMessagePopup",function(u){c=t.utils.dom.getActiveElement(),r(u)}),t.attachEvent("onAfterMessagePopup",function(){a(),setTimeout(function(){c&&(c.focus(),c=null)},1)});var c=null;t.$keyboardNavigation.isModal=e})()}class Qm{constructor(n){this.show=(e,i)=>{i===void 0?this._showForTask(e):this._showAtCoordinates(e,i)},this.hide=e=>{const i=this._gantt,r=this._quickInfoBox;this._quickInfoBoxId=0;const a=this._quickInfoTask;if(this._quickInfoTask=null,r&&r.parentNode){if(i.config.quick_info_detached)return i.callEvent("onAfterQuickInfo",[a]),r.parentNode.removeChild(r);r.className+=" gantt_qi_hidden",r.style.right==="auto"?r.style.left="-350px":r.style.right="-350px",e&&(r.style.left=r.style.right="",r.parentNode.removeChild(r)),i.callEvent("onAfterQuickInfo",[a])}},this.getNode=()=>this._quickInfoBox?this._quickInfoBox:null,this.setContainer=e=>{e&&(this._container=typeof e=="string"?document.getElementById(e):e)},this.setContent=e=>{const i=this._gantt,r={taskId:null,header:{title:"",date:""},content:"",buttons:i.config.quickinfo_buttons};e||(e=r),e.taskId||(e.taskId=r.taskId),e.header||(e.header=r.header),e.header.title||(e.header.title=r.header.title),e.header.date||(e.header.date=r.header.date),e.content||(e.content=r.content),e.buttons||(e.buttons=r.buttons);let a=this.getNode();a||(a=this._createQuickInfoElement()),e.taskId&&(this._quickInfoBoxId=e.taskId);const s=a.querySelector(".gantt_cal_qi_title"),l=s.querySelector(".gantt_cal_qi_tcontent"),c=s.querySelector(".gantt_cal_qi_tdate"),u=a.querySelector(".gantt_cal_qi_content"),h=a.querySelector(".gantt_cal_qi_controls");i._waiAria.quickInfoHeader(a,[e.header.title,e.header.date].join(" ")),l.innerHTML=e.header.title,c.innerHTML=e.header.date,e.header.title||e.header.date?s.style.display="":s.style.display="none",u.innerHTML=e.content;const _=e.buttons;_.length?h.style.display="":h.style.display="none";let g="";for(let m=0;m<_.length;m++){const v=i._waiAria.quickInfoButtonAttrString(i.locale.labels[_[m]]);g+=`<div class="gantt_qi_big_icon ${_[m]} dhx_gantt_${_[m]}" title="${i.locale.labels[_[m]]}" ${v}>
            <div class='dhx_menu_icon dhx_gantt_icon ${_[m]} gantt_menu_icon dhx_gantt_${_[m]}'></div>
            <div>${i.locale.labels[_[m]]}</div>
         </div>`}h.innerHTML=g,i.eventRemove(a,"click",this._qiButtonClickHandler),i.eventRemove(a,"keypress",this._qiKeyPressHandler),i.event(a,"click",this._qiButtonClickHandler),i.event(a,"keypress",this._qiKeyPressHandler)},this._qiButtonClickHandler=e=>{this._qi_button_click(e.target)},this._qiKeyPressHandler=e=>{const i=e.which;i!==13&&i!==32||setTimeout(()=>{this._qi_button_click(e.target)},1)},this._gantt=n}_showAtCoordinates(n,e){this.hide(!0),this._quickInfoBoxId=0,this._quickInfoTask=null,this._quickInfoBox||(this._createQuickInfoElement(),this.setContent()),this._appendAtCoordinates(n,e),this._gantt.callEvent("onQuickInfo",[null])}_showForTask(n){const e=this._gantt;if(n===this._quickInfoBoxId&&e.utils.dom.isChildOf(this._quickInfoBox,document.body)||!e.config.show_quick_info)return;this.hide(!0);const i=this._getContainer(),r=this._get_event_counter_part(n,6,i.xViewport,i.yViewport);r&&(this._quickInfoBox=this._init_quick_info(n),this._quickInfoTask=n,this._quickInfoBox.className=this._prepare_quick_info_classname(n),this._fill_quick_data(n),this._show_quick_info(r,6),e.callEvent("onQuickInfo",[n]))}_get_event_counter_part(n,e,i,r){const a=this._gantt;let s=a.getTaskNode(n);if(!s&&(s=a.getTaskRowNode(n),!s))return null;let l=0;const c=e+s.offsetTop+s.offsetHeight;let u=s;if(a.utils.dom.isChildOf(u,i))for(;u&&u!==i;)l+=u.offsetLeft,u=u.offsetParent;const h=a.getScrollState();return u?{left:l,top:c,dx:l+s.offsetWidth/2-h.x>i.offsetWidth/2?1:0,dy:c+s.offsetHeight/2-h.y>r.offsetHeight/2?1:0,width:s.offsetWidth,height:s.offsetHeight}:null}_createQuickInfoElement(){const n=this._gantt,e=document.createElement("div");e.className+="gantt_cal_quick_info",n._waiAria.quickInfoAttr(e);var i=`
		<div class="gantt_cal_qi_tcontrols">
			<a class="gantt_cal_qi_close_btn dhx_gantt_icon dhx_gantt_icon_close"></a>
		</div>
		<div class="gantt_cal_qi_title" ${n._waiAria.quickInfoHeaderAttrString()}>
				
				<div class="gantt_cal_qi_tcontent"></div>
				<div class="gantt_cal_qi_tdate"></div>
			</div>
			<div class="gantt_cal_qi_content"></div>`;if(i+='<div class="gantt_cal_qi_controls">',i+="</div>",e.innerHTML=i,n.config.quick_info_detached){const r=this._getContainer();n.event(r.parent,"scroll",()=>{this.hide()})}return this._quickInfoBox=e,e}_init_quick_info(n){const e=this._gantt,i=e.getTask(n);return typeof this._quickInfoReadonly=="boolean"&&e.isReadonly(i)!==this._quickInfoReadonly&&(this.hide(!0),this._quickInfoBox=null),this._quickInfoReadonly=e.isReadonly(i),this._quickInfoBox||(this._quickInfoBox=this._createQuickInfoElement()),this._quickInfoBox}_prepare_quick_info_classname(n){const e=this._gantt,i=e.getTask(n);let r=`gantt_cal_quick_info gantt_${e.getTaskType(i)}`;const a=e.templates.quick_info_class(i.start_date,i.end_date,i);return a&&(r+=" "+a),r}_fill_quick_data(n){const e=this._gantt,i=e.getTask(n);this._quickInfoBoxId=n;let r=[];if(this._quickInfoReadonly){const a=e.config.quickinfo_buttons,s={icon_delete:!0,icon_edit:!0};for(let l=0;l<a.length;l++)this._quickInfoReadonly&&s[a[l]]||r.push(a[l])}else r=e.config.quickinfo_buttons;this.setContent({header:{title:e.templates.quick_info_title(i.start_date,i.end_date,i),date:e.templates.quick_info_date(i.start_date,i.end_date,i)},content:e.templates.quick_info_content(i.start_date,i.end_date,i),buttons:r})}_appendAtCoordinates(n,e){const i=this._quickInfoBox,r=this._getContainer();i.parentNode&&i.parentNode.nodeName.toLowerCase()!=="#document-fragment"||r.parent.appendChild(i),i.style.left=n+"px",i.style.top=e+"px"}_show_quick_info(n,e){const i=this._gantt,r=this._quickInfoBox;if(i.config.quick_info_detached){const a=this._getContainer();r.parentNode&&r.parentNode.nodeName.toLowerCase()!=="#document-fragment"||a.parent.appendChild(r);const s=r.offsetWidth,l=r.offsetHeight,c=i.getScrollState(),u=a.xViewport,h=a.yViewport,_=u.offsetWidth+c.x-s,g=n.top-c.y+l;let m=n.top;g>h.offsetHeight/2&&(m=n.top-(l+n.height+2*e),m<c.y&&g<=h.offsetHeight&&(m=n.top)),m<c.y&&(m=c.y);const v=Math.min(Math.max(c.x,n.left-n.dx*(s-n.width)),_),$=m;this._appendAtCoordinates(v,$)}else r.style.top="20px",n.dx===1?(r.style.right="auto",r.style.left="-300px",setTimeout(()=>{r.style.left="10px"},1)):(r.style.left="auto",r.style.right="-300px",setTimeout(()=>{r.style.right="10px"},1)),r.className+=" gantt_qi_"+(n.dx===1?"left":"right"),i.$root.appendChild(r)}_qi_button_click(n){const e=this._gantt,i=this._quickInfoBox;if(!n||n===i)return;if(n.closest(".gantt_cal_qi_close_btn"))return void this.hide();const r=n.className;if(r.indexOf("_icon")!==-1){const a=this._quickInfoBoxId;e.$click.buttons[r.split(" ")[1].replace("icon_","")](a)}else this._qi_button_click(n.parentNode)}_getContainer(){const n=this._gantt;let e=this._container?this._container:n.$task_data;return e&&e.offsetHeight&&e.offsetWidth?{parent:e,xViewport:n.$task,yViewport:n.$task_data}:(e=this._container?this._container:n.$grid_data,e&&e.offsetHeight&&e.offsetWidth?{parent:e,xViewport:n.$grid,yViewport:n.$grid_data}:{parent:this._container?this._container:n.$layout,xViewport:n.$layout,yViewport:n.$layout})}}var Va,tv={}.constructor.toString();function qt(t){var n,e;if(t&&typeof t=="object")switch(!0){case de(t):e=new Date(t);break;case rs(t):for(e=new Array(t.length),n=0;n<t.length;n++)e[n]=qt(t[n]);break;default:for(n in e=function(i){return i.constructor.toString()!==tv}(t)?Object.create(t):{},t)Object.prototype.hasOwnProperty.apply(t,[n])&&(e[n]=qt(t[n]))}return e||t}function ut(t,n,e){for(var i in n)(t[i]===void 0||e)&&(t[i]=n[i]);return t}function Mt(t){return t!==void 0}function Me(){return Va||(Va=new Date().valueOf()),++Va}function _t(t,n){return t.bind?t.bind(n):function(){return t.apply(n,arguments)}}function Lc(t,n,e,i){t.addEventListener?t.addEventListener(n,e,i!==void 0&&i):t.attachEvent&&t.attachEvent("on"+n,e)}function Nc(t,n,e,i){t.removeEventListener?t.removeEventListener(n,e,i!==void 0&&i):t.detachEvent&&t.detachEvent("on"+n,e)}const ev=Object.freeze(Object.defineProperty({__proto__:null,bind:_t,copy:qt,defined:Mt,event:Lc,eventRemove:Nc,mixin:ut,uid:Me},Symbol.toStringTag,{value:"Module"}));function ks(t,n){t=t||Lc,n=n||Nc;var e=[],i={attach:function(r,a,s,l){e.push({element:r,event:a,callback:s,capture:l}),t(r,a,s,l)},detach:function(r,a,s,l){n(r,a,s,l);for(var c=0;c<e.length;c++){var u=e[c];u.element===r&&u.event===a&&u.callback===s&&u.capture===l&&(e.splice(c,1),c--)}},detachAll:function(){for(var r=e.slice(),a=0;a<r.length;a++){var s=r[a];i.detach(s.element,s.event,s.callback,s.capture),i.detach(s.element,s.event,s.callback,void 0),i.detach(s.element,s.event,s.callback,!1),i.detach(s.element,s.event,s.callback,!0)}e.splice(0,e.length)},extend:function(){return ks(this.event,this.eventRemove)}};return i}class nv{constructor(n){this._gantt=n}getNode(){const n=this._gantt;return this._tooltipNode||(this._tooltipNode=document.createElement("div"),this._tooltipNode.className="gantt_tooltip",n._waiAria.tooltipAttr(this._tooltipNode)),this._tooltipNode}setViewport(n){return this._root=n,this}show(n,e){const i=this._gantt,r=document.body,a=this.getNode();if(Qt(a,r)||(this.hide(),a.style.top=a.style.top||"0px",a.style.left=a.style.left||"0px",r.appendChild(a)),this._isLikeMouseEvent(n)){const s=this._calculateTooltipPosition(n);e=s.top,n=s.left}return a.style.top=e+"px",a.style.left=n+"px",i._waiAria.tooltipVisibleAttr(a),this}hide(){const n=this._gantt,e=this.getNode();return e&&e.parentNode&&e.parentNode.removeChild(e),n._waiAria.tooltipHiddenAttr(e),this}setContent(n){return this.getNode().innerHTML=n,this}_isLikeMouseEvent(n){return!(!n||typeof n!="object")&&"clientX"in n&&"clientY"in n}_getViewPort(){return this._root||document.body}_calculateTooltipPosition(n){const e=this._gantt,i=this._getViewPortSize(),r=this.getNode(),a={top:0,left:0,width:r.offsetWidth,height:r.offsetHeight,bottom:0,right:0},s=e.config.tooltip_offset_x,l=e.config.tooltip_offset_y,c=document.body,u=Ie(n,c),h=Ft(c);u.y+=h.y,a.top=u.y,a.left=u.x,a.top+=l,a.left+=s,a.bottom=a.top+a.height,a.right=a.left+a.width;const _=window.scrollY+c.scrollTop;return a.top<i.top-_?(a.top=i.top,a.bottom=a.top+a.height):a.bottom>i.bottom&&(a.bottom=i.bottom,a.top=a.bottom-a.height),a.left<i.left?(a.left=i.left,a.right=i.left+a.width):a.right>i.right&&(a.right=i.right,a.left=a.right-a.width),u.x>=a.left&&u.x<=a.right&&(a.left=u.x-a.width-s,a.right=a.left+a.width),u.y>=a.top&&u.y<=a.bottom&&(a.top=u.y-a.height-l,a.bottom=a.top+a.height),a}_getViewPortSize(){const n=this._gantt,e=this._getViewPort();let i,r=e,a=window.scrollY+document.body.scrollTop,s=window.scrollX+document.body.scrollLeft;return e===n.$task_data?(r=n.$task,a=0,s=0,i=Ft(n.$task)):i=Ft(r),{left:i.x+s,top:i.y+a,width:i.width,height:i.height,bottom:i.y+i.height+a,right:i.x+i.width+s}}}class iv{constructor(n){this._listeners={},this.tooltip=new nv(n),this._gantt=n,this._domEvents=ks(),this._initDelayedFunctions()}destructor(){this.tooltip.hide(),this._domEvents.detachAll()}hideTooltip(){this.delayHide()}attach(n){let e=document.body;const i=this._gantt;n.global||(e=i.$root);let r=null;const a=s=>{const l=xn(s),c=He(l,n.selector);if(Qt(l,this.tooltip.getNode()))return;const u=()=>{r=c,n.onmouseenter(s,c)};r?c&&c===r?n.onmousemove(s,c):(n.onmouseleave(s,r),r=null,c&&c!==r&&u()):c&&u()};this.detach(n.selector),this._domEvents.attach(e,"mousemove",a),this._listeners[n.selector]={node:e,handler:a}}detach(n){const e=this._listeners[n];e&&this._domEvents.detach(e.node,"mousemove",e.handler)}tooltipFor(n){const e=i=>{let r=i;return document.createEventObject&&!document.createEvent&&(r=document.createEventObject(i)),r};this._initDelayedFunctions(),this.attach({selector:n.selector,global:n.global,onmouseenter:(i,r)=>{const a=n.html(i,r);a&&this.delayShow(e(i),a)},onmousemove:(i,r)=>{const a=n.html(i,r);a?this.delayShow(e(i),a):(this.delayShow.$cancelTimeout(),this.delayHide())},onmouseleave:()=>{this.delayShow.$cancelTimeout(),this.delayHide()}})}_initDelayedFunctions(){const n=this._gantt;this.delayShow&&this.delayShow.$cancelTimeout(),this.delayHide&&this.delayHide.$cancelTimeout(),this.tooltip.hide(),this.delayShow=Ql((e,i)=>{n.callEvent("onBeforeTooltip",[e])===!1?this.tooltip.hide():(this.tooltip.setContent(i),this.tooltip.show(e))},n.config.tooltip_timeout||1),this.delayHide=Ql(()=>{this.delayShow.$cancelTimeout(),this.tooltip.hide()},n.config.tooltip_hide_timeout||1)}}const ec={onBeforeUndo:"onAfterUndo",onBeforeRedo:"onAfterRedo"},nc=["onTaskDragStart","onAfterTaskUpdate","onAfterParentExpand","onAfterTaskDelete","onBeforeBatchUpdate"];class rv{constructor(n,e){this._batchAction=null,this._batchMode=!1,this._ignore=!1,this._ignoreMoveEvents=!1,this._initialTasks={},this._initialLinks={},this._nestedTasks={},this._nestedLinks={},this._undo=n,this._gantt=e,this._attachEvents()}store(n,e,i=!1){return e===this._gantt.config.undo_types.task?this._storeTask(n,i):e===this._gantt.config.undo_types.link&&this._storeLink(n,i)}isMoveEventsIgnored(){return this._ignoreMoveEvents}toggleIgnoreMoveEvents(n){this._ignoreMoveEvents=n||!1}startIgnore(){this._ignore=!0}stopIgnore(){this._ignore=!1}startBatchAction(){this._timeout||(this._timeout=setTimeout(()=>{this.stopBatchAction(),this._timeout=null},10)),this._ignore||this._batchMode||(this._batchMode=!0,this._batchAction=this._undo.action.create())}stopBatchAction(){if(this._ignore)return;const n=this._undo;this._batchAction&&n.logAction(this._batchAction),this._batchMode=!1,this._batchAction=null}onTaskAdded(n){this._ignore||this._storeTaskCommand(n,this._undo.command.type.add)}onTaskUpdated(n){this._ignore||this._storeTaskCommand(n,this._undo.command.type.update)}onTaskMoved(n){if(!this._ignore){n.$local_index=this._gantt.getTaskIndex(n.id);const e=this.getInitialTask(n.id);if(n.$local_index===e.$local_index&&this._gantt.getParent(n)===this._gantt.getParent(e))return;this._storeEntityCommand(n,this.getInitialTask(n.id),this._undo.command.type.move,this._undo.command.entity.task)}}onTaskDeleted(n){if(!this._ignore){if(this._storeTaskCommand(n,this._undo.command.type.remove),this._nestedTasks[n.id]){const e=this._nestedTasks[n.id];for(let i=0;i<e.length;i++)this._storeTaskCommand(e[i],this._undo.command.type.remove)}if(this._nestedLinks[n.id]){const e=this._nestedLinks[n.id];for(let i=0;i<e.length;i++)this._storeLinkCommand(e[i],this._undo.command.type.remove)}}}onLinkAdded(n){this._ignore||this._storeLinkCommand(n,this._undo.command.type.add)}onLinkUpdated(n){this._ignore||this._storeLinkCommand(n,this._undo.command.type.update)}onLinkDeleted(n){this._ignore||this._storeLinkCommand(n,this._undo.command.type.remove)}setNestedTasks(n,e){const i=this._gantt;let r=null;const a=[];let s=this._getLinks(i.getTask(n));for(let u=0;u<e.length;u++)r=this.setInitialTask(e[u]),s=s.concat(this._getLinks(r)),a.push(r);const l={};for(let u=0;u<s.length;u++)l[s[u]]=!0;const c=[];for(const u in l)c.push(this.setInitialLink(u));this._nestedTasks[n]=a,this._nestedLinks[n]=c}setInitialTask(n,e){const i=this._gantt;if(e||!this._initialTasks[n]||!this._batchMode){const r=i.copy(i.getTask(n));r.$index=i.getGlobalTaskIndex(n),r.$local_index=i.getTaskIndex(n),this.setInitialTaskObject(n,r)}return this._initialTasks[n]}getInitialTask(n){return this._initialTasks[n]}clearInitialTasks(){this._initialTasks={}}setInitialTaskObject(n,e){this._initialTasks[n]=e}setInitialLink(n,e){return this._initialLinks[n]&&this._batchMode||(this._initialLinks[n]=this._gantt.copy(this._gantt.getLink(n))),this._initialLinks[n]}getInitialLink(n){return this._initialLinks[n]}clearInitialLinks(){this._initialLinks={}}_attachEvents(){let n=null;const e=this._gantt,i=()=>{n||(n=setTimeout(()=>{n=null}),this.clearInitialTasks(),e.eachTask(c=>{this.setInitialTask(c.id)}),this.clearInitialLinks(),e.getLinks().forEach(c=>{this.setInitialLink(c.id)}))},r=c=>e.copy(e.getTask(c));for(const c in ec)e.attachEvent(c,()=>(this.startIgnore(),!0)),e.attachEvent(ec[c],()=>(this.stopIgnore(),!0));for(let c=0;c<nc.length;c++)e.attachEvent(nc[c],()=>(this.startBatchAction(),!0));e.attachEvent("onParse",()=>{this._undo.clearUndoStack(),this._undo.clearRedoStack(),i()}),e.attachEvent("onAfterTaskAdd",(c,u)=>{this.setInitialTask(c,!0),this.onTaskAdded(u)}),e.attachEvent("onAfterTaskUpdate",(c,u)=>{this.onTaskUpdated(u)}),e.attachEvent("onAfterParentExpand",(c,u)=>{this.onTaskUpdated(u)}),e.attachEvent("onAfterTaskDelete",(c,u)=>{this.onTaskDeleted(u)}),e.attachEvent("onAfterLinkAdd",(c,u)=>{this.setInitialLink(c,!0),this.onLinkAdded(u)}),e.attachEvent("onAfterLinkUpdate",(c,u)=>{this.onLinkUpdated(u)}),e.attachEvent("onAfterLinkDelete",(c,u)=>{this.onLinkDeleted(u)}),e.attachEvent("onRowDragEnd",(c,u)=>(this.onTaskMoved(r(c)),this.toggleIgnoreMoveEvents(),!0)),e.attachEvent("onBeforeTaskDelete",c=>{this.store(c,e.config.undo_types.task);const u=[];return i(),e.eachTask(h=>{u.push(h.id)},c),this.setNestedTasks(c,u),!0});const a=e.getDatastore("task");a.attachEvent("onBeforeItemMove",(c,u,h)=>(this.isMoveEventsIgnored()||i(),!0)),a.attachEvent("onAfterItemMove",(c,u,h)=>(this.isMoveEventsIgnored()||this.onTaskMoved(r(c)),!0)),e.attachEvent("onRowDragStart",(c,u,h)=>(this.toggleIgnoreMoveEvents(!0),i(),!0));let s=null,l=!1;if(e.attachEvent("onBeforeTaskDrag",c=>{if(s=e.getState().drag_id,s===c){const u=e.getTask(c);e.isSummaryTask(u)&&e.config.drag_project&&(l=!0)}if(e.plugins().multiselect){const u=e.getSelectedTasks();u.length>1&&u.forEach(h=>{this.store(h,e.config.undo_types.task,!0)})}return this.store(c,e.config.undo_types.task)}),e.attachEvent("onAfterTaskDrag",c=>{(l||e.plugins().multiselect&&e.getSelectedTasks().length>1)&&s===c&&(l=!1,s=null,this.stopBatchAction()),this.store(c,e.config.undo_types.task,!0)}),e.attachEvent("onLightbox",c=>this.store(c,e.config.undo_types.task)),e.attachEvent("onBeforeTaskAutoSchedule",c=>(this.store(c.id,e.config.undo_types.task,!0),!0)),e.ext.inlineEditors){let c=null,u=null;e.attachEvent("onGanttLayoutReady",()=>{c&&e.ext.inlineEditors.detachEvent(c),u&&e.ext.inlineEditors.detachEvent(u),u=e.ext.inlineEditors.attachEvent("onEditStart",h=>{this.store(h.id,e.config.undo_types.task)}),c=e.ext.inlineEditors.attachEvent("onBeforeEditStart",h=>(this.stopBatchAction(),!0))})}}_storeCommand(n){const e=this._undo;if(e.updateConfigs(),e.undoEnabled)if(this._batchMode)this._batchAction.commands.push(n);else{const i=e.action.create([n]);e.logAction(i)}}_storeEntityCommand(n,e,i,r){const a=this._undo.command.create(n,e,i,r);this._storeCommand(a)}_storeTaskCommand(n,e){this._gantt.isTaskExists(n.id)&&(n.$local_index=this._gantt.getTaskIndex(n.id)),this._storeEntityCommand(n,this.getInitialTask(n.id),e,this._undo.command.entity.task)}_storeLinkCommand(n,e){this._storeEntityCommand(n,this.getInitialLink(n.id),e,this._undo.command.entity.link)}_getLinks(n){return n.$source.concat(n.$target)}_storeTask(n,e=!1){const i=this._gantt;return this.setInitialTask(n,e),i.eachTask(r=>{this.setInitialTask(r.id)},n),!0}_storeLink(n,e=!1){return this.setInitialLink(n,e),!0}}class av{constructor(n){this.maxSteps=100,this.undoEnabled=!0,this.redoEnabled=!0,this.action={create:e=>({commands:e?e.slice():[]}),invert:e=>{const i=this._gantt.copy(e),r=this.command;for(let a=0;a<e.commands.length;a++){const s=i.commands[a]=r.invert(i.commands[a]);s.type!==r.type.update&&s.type!==r.type.move||([s.value,s.oldValue]=[s.oldValue,s.value])}return i}},this.command={entity:null,type:null,create:(e,i,r,a)=>{const s=this._gantt;return{entity:a,type:r,value:s.copy(e),oldValue:s.copy(i||e)}},invert:e=>{const i=this._gantt.copy(e);return i.type=this.command.inverseCommands(e.type),i},inverseCommands:e=>{const i=this._gantt,r=this.command.type;switch(e){case r.update:return r.update;case r.remove:return r.add;case r.add:return r.remove;case r.move:return r.move;default:return i.assert(!1,"Invalid command "+e),null}}},this._undoStack=[],this._redoStack=[],this._gantt=n}getUndoStack(){return this._undoStack}setUndoStack(n){this._undoStack=n}getRedoStack(){return this._redoStack}setRedoStack(n){this._redoStack=n}clearUndoStack(){this._undoStack=[]}clearRedoStack(){this._redoStack=[]}updateConfigs(){const n=this._gantt;this.maxSteps=n.config.undo_steps||100,this.command.entity=n.config.undo_types,this.command.type=n.config.undo_actions,this.undoEnabled=!!n.config.undo,this.redoEnabled=!!n.config.redo}undo(){const n=this._gantt;if(this.updateConfigs(),!this.undoEnabled)return;const e=this._pop(this._undoStack);if(e&&this._reorderCommands(e),n.callEvent("onBeforeUndo",[e])!==!1&&e)return this._applyAction(this.action.invert(e)),this._push(this._redoStack,n.copy(e)),void n.callEvent("onAfterUndo",[e]);n.callEvent("onAfterUndo",[null])}redo(){const n=this._gantt;if(this.updateConfigs(),!this.redoEnabled)return;const e=this._pop(this._redoStack);if(e&&this._reorderCommands(e),n.callEvent("onBeforeRedo",[e])!==!1&&e)return this._applyAction(e),this._push(this._undoStack,n.copy(e)),void n.callEvent("onAfterRedo",[e]);n.callEvent("onAfterRedo",[null])}logAction(n){this._push(this._undoStack,n),this._redoStack=[]}_push(n,e){const i=this._gantt;if(!e.commands.length)return;const r=n===this._undoStack?"onBeforeUndoStack":"onBeforeRedoStack";if(i.callEvent(r,[e])!==!1&&e.commands.length){for(n.push(e);n.length>this.maxSteps;)n.shift();return e}}_pop(n){return n.pop()}_reorderCommands(n){const e={any:0,link:1,task:2},i={move:1,any:0};n.commands.sort(function(r,a){if(r.entity==="task"&&a.entity==="task")return r.type!==a.type?(i[a.type]||0)-(i[r.type]||0):r.type==="move"&&r.oldValue&&a.oldValue&&a.oldValue.parent===r.oldValue.parent?r.oldValue.$index-a.oldValue.$index:0;{const s=e[r.entity]||e.any;return(e[a.entity]||e.any)-s}})}_applyAction(n){let e=null;const i=this.command.entity,r=this.command.type,a=this._gantt,s={};s[i.task]={add:"addTask",get:"getTask",update:"updateTask",remove:"deleteTask",move:"moveTask",isExists:"isTaskExists"},s[i.link]={add:"addLink",get:"getLink",update:"updateLink",remove:"deleteLink",isExists:"isLinkExists"},a.batchUpdate(function(){for(let l=0;l<n.commands.length;l++){e=n.commands[l];const c=s[e.entity][e.type],u=s[e.entity].get,h=s[e.entity].isExists;if(e.type===r.add)a[c](e.oldValue,e.oldValue.parent,e.oldValue.$local_index);else if(e.type===r.remove)a[h](e.value.id)&&a[c](e.value.id);else if(e.type===r.update){const _=a[u](e.value.id);for(const g in e.value){let m=!(g.startsWith("$")||g.startsWith("_"));["$open"].indexOf(g)>-1&&(m=!0),m&&(_[g]=e.value[g])}a[c](e.value.id)}else e.type===r.move&&(a[c](e.value.id,e.value.$local_index,e.value.parent),a.callEvent("onRowDragEnd",[e.value.id]))}})}}const sv={click_drag:function(t){t.ext||(t.ext={});const n={className:"gantt_click_drag_rect",useRequestAnimationFrame:!0,callback:void 0,singleRow:!1};function e(){const i={viewPort:t.$task_data,...n};t.ext.clickDrag&&t.ext.clickDrag.destructor(),t.ext.clickDrag=new Ym(t);const r=t.config.click_drag;i.render=r.render||n.render,i.className=r.className||n.className,i.callback=r.callback||n.callback,i.viewPort=r.viewPort||t.$task_data,i.useRequestAnimationFrame=r.useRequestAnimationFrame===void 0?n.useRequestAnimationFrame:r.useRequestAnimationFrame,i.singleRow=r.singleRow===void 0?n.singleRow:r.singleRow;const a=t.$ui.getView("timeline"),s=new Xm(i,t,a);t.ext.clickDrag.attach(s,r.useKey,r.ignore)}t.attachEvent("onGanttReady",()=>{t.config.click_drag&&e()}),t.attachEvent("onGanttLayoutReady",function(){t.$container&&t.config.click_drag&&t.attachEvent("onGanttRender",function(){e()},{once:!0})}),t.attachEvent("onDestroy",()=>{t.ext.clickDrag&&t.ext.clickDrag.destructor()})},drag_timeline:function(t){t.ext||(t.ext={}),t.ext.dragTimeline={create:()=>vs.create(t)},t.config.drag_timeline={enabled:!0,render:!1}},fullscreen:function(t){function n(){const h=document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement;return!(!h||h!==document.body)}function e(){try{return document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled}catch(h){console.error("Fullscreen is not available:",h)}}t.$services.getService("state").registerProvider("fullscreen",()=>e()?{fullscreen:n()}:void 0);let i={overflow:null,padding:null,paddingTop:null,paddingRight:null,paddingBottom:null,paddingLeft:null};const r={width:null,height:null,top:null,left:null,position:null,zIndex:null,modified:!1};let a=null;function s(h,_){_.width=h.width,_.height=h.height,_.top=h.top,_.left=h.left,_.position=h.position,_.zIndex=h.zIndex}let l=!1;function c(){if(!t.$container)return;let h;n()?l&&(h="onExpand",function(){const _=t.ext.fullscreen.getFullscreenElement(),g=document.body;s(_.style,r),i={overflow:g.style.overflow,padding:g.style.padding?g.style.padding:null,paddingTop:g.style.paddingTop?g.style.paddingTop:null,paddingRight:g.style.paddingRight?g.style.paddingRight:null,paddingBottom:g.style.paddingBottom?g.style.paddingBottom:null,paddingLeft:g.style.paddingLeft?g.style.paddingLeft:null},g.style.padding&&(g.style.padding="0"),g.style.paddingTop&&(g.style.paddingTop="0"),g.style.paddingRight&&(g.style.paddingRight="0"),g.style.paddingBottom&&(g.style.paddingBottom="0"),g.style.paddingLeft&&(g.style.paddingLeft="0"),g.style.overflow="hidden",_.style.width="100vw",_.style.height="100vh",_.style.top="0px",_.style.left="0px",_.style.position="absolute",_.style.zIndex=1,r.modified=!0,a=function(m){let v=m.parentNode;const $=[];for(;v&&v.style;)$.push({element:v,originalPositioning:v.style.position}),v.style.position="static",v=v.parentNode;return $}(_)}()):l&&(l=!1,h="onCollapse",function(){const _=t.ext.fullscreen.getFullscreenElement(),g=document.body;r.modified&&(i.padding&&(g.style.padding=i.padding),i.paddingTop&&(g.style.paddingTop=i.paddingTop),i.paddingRight&&(g.style.paddingRight=i.paddingRight),i.paddingBottom&&(g.style.paddingBottom=i.paddingBottom),i.paddingLeft&&(g.style.paddingLeft=i.paddingLeft),g.style.overflow=i.overflow,i={overflow:null,padding:null,paddingTop:null,paddingRight:null,paddingBottom:null,paddingLeft:null},s(r,_.style),r.modified=!1),a.forEach(m=>{m.element.style.position=m.originalPositioning}),a=null}()),setTimeout(()=>{t.render()}),setTimeout(()=>{t.callEvent(h,[t.ext.fullscreen.getFullscreenElement()])})}function u(){return!t.$container||!t.ext.fullscreen.getFullscreenElement()?!0:e()?!1:((console.warning||console.log)("The `fullscreen` feature not being allowed, or full-screen mode not being supported"),!0)}t.ext.fullscreen={expand(){if(u()||n()||!t.callEvent("onBeforeExpand",[this.getFullscreenElement()]))return;l=!0;const h=document.body,_=h.webkitRequestFullscreen?[Element.ALLOW_KEYBOARD_INPUT]:[],g=h.msRequestFullscreen||h.mozRequestFullScreen||h.webkitRequestFullscreen||h.requestFullscreen;g&&g.apply(h,_)},collapse(){if(u()||!n()||!t.callEvent("onBeforeCollapse",[this.getFullscreenElement()]))return;const h=document.msExitFullscreen||document.mozCancelFullScreen||document.webkitExitFullscreen||document.exitFullscreen;h&&h.apply(document)},toggle(){u()||(n()?this.collapse():this.expand())},getFullscreenElement:()=>t.$root},t.expand=function(){t.ext.fullscreen.expand()},t.collapse=function(){t.ext.fullscreen.collapse()},t.attachEvent("onGanttReady",function(){t.event(document,"webkitfullscreenchange",c),t.event(document,"mozfullscreenchange",c),t.event(document,"MSFullscreenChange",c),t.event(document,"fullscreenChange",c),t.event(document,"fullscreenchange",c)})},keyboard_navigation:function(t){(function(n){n.config.keyboard_navigation=!0,n.config.keyboard_navigation_cells=!1,n.$keyboardNavigation={},n._compose=function(){for(var e=Array.prototype.slice.call(arguments,0),i={},r=0;r<e.length;r++){var a=e[r];for(var s in typeof a=="function"&&(a=new a),a)i[s]=a[s]}return i},function(e){e.$keyboardNavigation.shortcuts={createCommand:function(){return{modifiers:{shift:!1,alt:!1,ctrl:!1,meta:!1},keyCode:null}},parse:function(i){for(var r=[],a=this.getExpressions(this.trim(i)),s=0;s<a.length;s++){for(var l=this.getWords(a[s]),c=this.createCommand(),u=0;u<l.length;u++)this.commandKeys[l[u]]?c.modifiers[l[u]]=!0:this.specialKeys[l[u]]?c.keyCode=this.specialKeys[l[u]]:c.keyCode=l[u].charCodeAt(0);r.push(c)}return r},getCommandFromEvent:function(i){var r=this.createCommand();r.modifiers.shift=!!i.shiftKey,r.modifiers.alt=!!i.altKey,r.modifiers.ctrl=!!i.ctrlKey,r.modifiers.meta=!!i.metaKey,r.keyCode=i.which||i.keyCode,r.keyCode>=96&&r.keyCode<=105&&(r.keyCode-=48);var a=String.fromCharCode(r.keyCode);return a&&(r.keyCode=a.toLowerCase().charCodeAt(0)),r},getHashFromEvent:function(i){return this.getHash(this.getCommandFromEvent(i))},getHash:function(i){var r=[];for(var a in i.modifiers)i.modifiers[a]&&r.push(a);return r.push(i.keyCode),r.join(this.junctionChar)},getExpressions:function(i){return i.split(this.junctionChar)},getWords:function(i){return i.split(this.combinationChar)},trim:function(i){return i.replace(/\s/g,"")},junctionChar:",",combinationChar:"+",commandKeys:{shift:16,alt:18,ctrl:17,meta:!0},specialKeys:{backspace:8,tab:9,enter:13,esc:27,space:32,up:38,down:40,left:37,right:39,home:36,end:35,pageup:33,pagedown:34,delete:46,insert:45,plus:107,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123}}}(n),function(e){e.$keyboardNavigation.EventHandler={_handlers:null,findHandler:function(i){this._handlers||(this._handlers={});var r=e.$keyboardNavigation.shortcuts.getHash(i);return this._handlers[r]},doAction:function(i,r){var a=this.findHandler(i);if(a){if(e.$keyboardNavigation.facade.callEvent("onBeforeAction",[i,r])===!1)return;a.call(this,r),r.preventDefault?r.preventDefault():r.returnValue=!1}},bind:function(i,r){this._handlers||(this._handlers={});for(var a=e.$keyboardNavigation.shortcuts,s=a.parse(i),l=0;l<s.length;l++)this._handlers[a.getHash(s[l])]=r},unbind:function(i){for(var r=e.$keyboardNavigation.shortcuts,a=r.parse(i),s=0;s<a.length;s++)this._handlers[r.getHash(a[s])]&&delete this._handlers[r.getHash(a[s])]},bindAll:function(i){for(var r in i)this.bind(r,i[r])},initKeys:function(){this._handlers||(this._handlers={}),this.keys&&this.bindAll(this.keys)}}}(n),function(e){e.$keyboardNavigation.getFocusableNodes=ps,e.$keyboardNavigation.trapFocus=function(i,r){if(r.keyCode!=9)return!1;for(var a=e.$keyboardNavigation.getFocusableNodes(i),s=is(),l=-1,c=0;c<a.length;c++)if(a[c]==s){l=c;break}if(r.shiftKey){if(l<=0){var u=a[a.length-1];if(u)return u.focus(),r.preventDefault(),!0}}else if(l>=a.length-1){var h=a[0];if(h)return h.focus(),r.preventDefault(),!0}return!1}}(n),function(e){e.$keyboardNavigation.GanttNode=function(){},e.$keyboardNavigation.GanttNode.prototype=e._compose(e.$keyboardNavigation.EventHandler,{focus:function(){e.focus()},blur:function(){},isEnabled:function(){return e.$container.hasAttribute("tabindex")},scrollHorizontal:function(i){var r=e.dateFromPos(e.getScrollState().x),a=e.getScale(),s=i<0?-a.step:a.step;r=e.date.add(r,s,a.unit),e.scrollTo(e.posFromDate(r))},scrollVertical:function(i){var r=e.getScrollState().y,a=e.config.row_height;e.scrollTo(null,r+(i<0?-1:1)*a)},keys:{"alt+left":function(i){this.scrollHorizontal(-1)},"alt+right":function(i){this.scrollHorizontal(1)},"alt+up":function(i){this.scrollVertical(-1)},"alt+down":function(i){this.scrollVertical(1)},"ctrl+z":function(){e.undo&&e.undo()},"ctrl+r":function(){e.redo&&e.redo()}}}),e.$keyboardNavigation.GanttNode.prototype.bindAll(e.$keyboardNavigation.GanttNode.prototype.keys)}(n),function(e){e.$keyboardNavigation.KeyNavNode=function(){},e.$keyboardNavigation.KeyNavNode.prototype=e._compose(e.$keyboardNavigation.EventHandler,{isValid:function(){return!0},fallback:function(){return null},moveTo:function(i){e.$keyboardNavigation.dispatcher.setActiveNode(i)},compareTo:function(i){if(!i)return!1;for(var r in this){if(!!this[r]!=!!i[r])return!1;var a=!(!this[r]||!this[r].toString),s=!(!i[r]||!i[r].toString);if(s!=a)return!1;if(s&&a){if(i[r].toString()!=this[r].toString())return!1}else if(i[r]!=this[r])return!1}return!0},getNode:function(){},focus:function(){var i=this.getNode();if(i){var r=e.$keyboardNavigation.facade;r.callEvent("onBeforeFocus",[i])!==!1&&i&&(i.setAttribute("tabindex","-1"),i.$eventAttached||(i.$eventAttached=!0,e.event(i,"focus",function(a){return a.preventDefault(),!1},!1)),e.utils.dom.isChildOf(document.activeElement,i)&&(i=document.activeElement),i.focus&&i.focus(),r.callEvent("onFocus",[this.getNode()]))}},blur:function(){var i=this.getNode();i&&(e.$keyboardNavigation.facade.callEvent("onBlur",[i]),i.setAttribute("tabindex","-1"))}})}(n),function(e){e.$keyboardNavigation.HeaderCell=function(i){this.index=i||0},e.$keyboardNavigation.HeaderCell.prototype=e._compose(e.$keyboardNavigation.KeyNavNode,{_handlers:null,isValid:function(){return!(!e.config.show_grid&&e.getVisibleTaskCount()||!e.getGridColumns()[this.index]&&e.getVisibleTaskCount())},fallback:function(){if(!e.config.show_grid)return e.getVisibleTaskCount()?new e.$keyboardNavigation.TaskRow:null;for(var i=e.getGridColumns(),r=this.index;r>=0&&!i[r];)r--;return i[r]?new e.$keyboardNavigation.HeaderCell(r):null},fromDomElement:function(i){var r=on(i,"gantt_grid_head_cell");if(r){for(var a=0;r&&r.previousSibling;)r=r.previousSibling,a+=1;return new e.$keyboardNavigation.HeaderCell(a)}return null},getNode:function(){return e.$grid_scale.childNodes[this.index]},keys:{left:function(){this.index>0&&this.moveTo(new e.$keyboardNavigation.HeaderCell(this.index-1))},right:function(){var i=e.getGridColumns();this.index<i.length-1&&this.moveTo(new e.$keyboardNavigation.HeaderCell(this.index+1))},down:function(){var i,r=e.getChildren(e.config.root_id);e.isTaskExists(r[0])&&(i=r[0]),i&&(e.config.keyboard_navigation_cells?this.moveTo(new e.$keyboardNavigation.TaskCell(i,this.index)):this.moveTo(new e.$keyboardNavigation.TaskRow(i)))},end:function(){var i=e.getGridColumns();this.moveTo(new e.$keyboardNavigation.HeaderCell(i.length-1))},home:function(){this.moveTo(new e.$keyboardNavigation.HeaderCell(0))},"enter, space":function(){is().click()},"ctrl+enter":function(){e.isReadonly(this)||e.createTask({},this.taskId)}}}),e.$keyboardNavigation.HeaderCell.prototype.bindAll(e.$keyboardNavigation.HeaderCell.prototype.keys)}(n),function(e){e.$keyboardNavigation.TaskRow=function(i){if(!i){var r=e.getChildren(e.config.root_id);r[0]&&(i=r[0])}this.taskId=i,e.isTaskExists(this.taskId)&&(this.index=e.getTaskIndex(this.taskId),this.globalIndex=e.getGlobalTaskIndex(this.taskId),this.splitItem=!!e.getTask(this.taskId).$split_subtask,this.parentId=e.getParent(this.taskId))},e.$keyboardNavigation.TaskRow.prototype=e._compose(e.$keyboardNavigation.KeyNavNode,{_handlers:null,isValid:function(){return e.isTaskExists(this.taskId)&&e.getTaskIndex(this.taskId)>-1},fallback:function(){if(!e.getVisibleTaskCount()){var i=new e.$keyboardNavigation.HeaderCell;return i.isValid()?i:null}if(this.splitItem)return new e.$keyboardNavigation.TaskRow(this.parentId);var r=-1;if(e.getTaskByIndex(this.globalIndex-1))r=this.globalIndex-1;else if(e.getTaskByIndex(this.globalIndex+1))r=this.globalIndex+1;else for(var a=this.globalIndex;a>=0;){if(e.getTaskByIndex(a)){r=a;break}a--}return r>-1?new e.$keyboardNavigation.TaskRow(e.getTaskByIndex(r).id):void 0},fromDomElement:function(i){if(e.config.keyboard_navigation_cells)return null;var r=e.locate(i);return e.isTaskExists(r)?new e.$keyboardNavigation.TaskRow(r):null},getNode:function(){if(e.isTaskExists(this.taskId)&&e.isTaskVisible(this.taskId))return e.config.show_grid?e.$grid.querySelector(`.gantt_row[${e.config.task_attribute}="${String(this.taskId).replaceAll('"','\\"')}"]`):e.getTaskNode(this.taskId)},focus:function(i){if(!i){const r=e.getTaskPosition(e.getTask(this.taskId)),a=e.getTaskHeight(this.taskId),s=e.getScrollState();let l,c;l=e.$task?e.$task.offsetWidth:s.inner_width,c=e.$grid_data||e.$task_data?(e.$grid_data||e.$task_data).offsetHeight:s.inner_height,r.top<s.y||r.top+a>s.y+c?e.scrollTo(null,r.top-20):e.config.scroll_on_click&&e.config.show_chart&&(r.left>s.x+l?e.scrollTo(r.left-e.config.task_scroll_offset):r.left+r.width<s.x&&e.scrollTo(r.left+r.width-e.config.task_scroll_offset))}e.$keyboardNavigation.KeyNavNode.prototype.focus.apply(this,[i]),function(){var r=e.$ui.getView("grid"),a=parseInt(r.$grid.scrollLeft),s=parseInt(r.$grid_data.scrollTop),l=r.$config.scrollX;if(l&&r.$config.scrollable){var c=e.$ui.getView(l);c&&c.scrollTo(a,s)}var u=r.$config.scrollY;if(u){var h=e.$ui.getView(u);h&&h.scrollTo(a,s)}}()},keys:{pagedown:function(){e.getVisibleTaskCount()&&this.moveTo(new e.$keyboardNavigation.TaskRow(e.getTaskByIndex(e.getVisibleTaskCount()-1).id))},pageup:function(){e.getVisibleTaskCount()&&this.moveTo(new e.$keyboardNavigation.TaskRow(e.getTaskByIndex(0).id))},up:function(){var i=null,r=e.getPrev(this.taskId);i=e.isTaskExists(r)?new e.$keyboardNavigation.TaskRow(r):new e.$keyboardNavigation.HeaderCell,this.moveTo(i)},down:function(){var i=e.getNext(this.taskId);e.isTaskExists(i)&&this.moveTo(new e.$keyboardNavigation.TaskRow(i))},"shift+down":function(){e.hasChild(this.taskId)&&!e.getTask(this.taskId).$open&&e.open(this.taskId)},"shift+up":function(){e.hasChild(this.taskId)&&e.getTask(this.taskId).$open&&e.close(this.taskId)},"shift+right":function(){if(!e.isReadonly(this)){var i=e.getPrevSibling(this.taskId);e.isTaskExists(i)&&!e.isChildOf(this.taskId,i)&&(e.getTask(i).$open=!0,e.moveTask(this.taskId,-1,i)!==!1&&e.updateTask(this.taskId))}},"shift+left":function(){if(!e.isReadonly(this)){var i=e.getParent(this.taskId);e.isTaskExists(i)&&e.moveTask(this.taskId,e.getTaskIndex(i)+1,e.getParent(i))!==!1&&e.updateTask(this.taskId)}},space:function(i){e.isSelectedTask(this.taskId)?e.unselectTask(this.taskId):e.selectTask(this.taskId)},"ctrl+left":function(i){e.close(this.taskId)},"ctrl+right":function(i){e.open(this.taskId)},delete:function(i){e.isReadonly(this)||e.$click.buttons.delete(this.taskId)},enter:function(){e.isReadonly(this)||e.showLightbox(this.taskId)},"ctrl+enter":function(){e.isReadonly(this)||e.createTask({},this.taskId)}}}),e.$keyboardNavigation.TaskRow.prototype.bindAll(e.$keyboardNavigation.TaskRow.prototype.keys)}(n),function(e){e.$keyboardNavigation.TaskCell=function(i,r){if(!(i=De(i,e.config.root_id))){var a=e.getChildren(e.config.root_id);a[0]&&(i=a[0])}this.taskId=i,this.columnIndex=r||0,e.isTaskExists(this.taskId)&&(this.index=e.getTaskIndex(this.taskId),this.globalIndex=e.getGlobalTaskIndex(this.taskId))},e.$keyboardNavigation.TaskCell.prototype=e._compose(e.$keyboardNavigation.TaskRow,{_handlers:null,isValid:function(){return e.$keyboardNavigation.TaskRow.prototype.isValid.call(this)&&!!e.getGridColumns()[this.columnIndex]},fallback:function(){var i=e.$keyboardNavigation.TaskRow.prototype.fallback.call(this),r=i;if(i instanceof e.$keyboardNavigation.TaskRow){for(var a=e.getGridColumns(),s=this.columnIndex;s>=0&&!a[s];)s--;a[s]&&(r=new e.$keyboardNavigation.TaskCell(i.taskId,s))}return r},fromDomElement:function(i){if(!e.config.keyboard_navigation_cells)return null;var r=e.locate(i);if(e.isTaskExists(r)){var a=0,s=ye(i,"data-column-index");return s&&(a=1*s.getAttribute("data-column-index")),new e.$keyboardNavigation.TaskCell(r,a)}return null},getNode:function(){if(e.isTaskExists(this.taskId)&&(e.isTaskVisible(this.taskId)||e.config.show_tasks_outside_timescale)){if(e.config.show_grid){var i=e.$grid.querySelector(".gantt_row["+e.config.task_attribute+"='"+this.taskId+"']");return i?i.querySelector("[data-column-index='"+this.columnIndex+"']"):null}return e.getTaskNode(this.taskId)}},keys:{up:function(){var i=null,r=e.getPrev(this.taskId);i=e.isTaskExists(r)?new e.$keyboardNavigation.TaskCell(r,this.columnIndex):new e.$keyboardNavigation.HeaderCell(this.columnIndex),this.moveTo(i)},down:function(){var i=e.getNext(this.taskId);e.isTaskExists(i)&&this.moveTo(new e.$keyboardNavigation.TaskCell(i,this.columnIndex))},left:function(){this.columnIndex>0&&this.moveTo(new e.$keyboardNavigation.TaskCell(this.taskId,this.columnIndex-1))},right:function(){var i=e.getGridColumns();this.columnIndex<i.length-1&&this.moveTo(new e.$keyboardNavigation.TaskCell(this.taskId,this.columnIndex+1))},end:function(){var i=e.getGridColumns();this.moveTo(new e.$keyboardNavigation.TaskCell(this.taskId,i.length-1))},home:function(){this.moveTo(new e.$keyboardNavigation.TaskCell(this.taskId,0))},pagedown:function(){e.getVisibleTaskCount()&&this.moveTo(new e.$keyboardNavigation.TaskCell(e.getTaskByIndex(e.getVisibleTaskCount()-1).id,this.columnIndex))},pageup:function(){e.getVisibleTaskCount()&&this.moveTo(new e.$keyboardNavigation.TaskCell(e.getTaskByIndex(0).id,this.columnIndex))}}}),e.$keyboardNavigation.TaskCell.prototype.bindAll(e.$keyboardNavigation.TaskRow.prototype.keys),e.$keyboardNavigation.TaskCell.prototype.bindAll(e.$keyboardNavigation.TaskCell.prototype.keys)}(n),Zm(n),function(e){e.$keyboardNavigation.dispatcher={isActive:!1,activeNode:null,globalNode:new e.$keyboardNavigation.GanttNode,enable:function(){this.isActive=!0,this.setActiveNode(this.getActiveNode())},disable:function(){this.isActive=!1},isEnabled:function(){return!!this.isActive},getDefaultNode:function(){var i;return(i=e.config.keyboard_navigation_cells?new e.$keyboardNavigation.TaskCell:new e.$keyboardNavigation.TaskRow).isValid()||(i=i.fallback()),i},setDefaultNode:function(){this.setActiveNode(this.getDefaultNode())},getActiveNode:function(){var i=this.activeNode;return i&&!i.isValid()&&(i=i.fallback()),i},fromDomElement:function(i){for(var r=[e.$keyboardNavigation.TaskRow,e.$keyboardNavigation.TaskCell,e.$keyboardNavigation.HeaderCell],a=0;a<r.length;a++)if(r[a].prototype.fromDomElement){var s=r[a].prototype.fromDomElement(i);if(s)return s}return null},focusGlobalNode:function(){this.blurNode(this.globalNode),this.focusNode(this.globalNode)},setActiveNode:function(i){var r=!0;this.activeNode&&this.activeNode.compareTo(i)&&(r=!1),this.isEnabled()&&(r&&this.blurNode(this.activeNode),this.activeNode=i,this.focusNode(this.activeNode,!r))},focusNode:function(i,r){i&&i.focus&&i.focus(r)},blurNode:function(i){i&&i.blur&&i.blur()},keyDownHandler:function(i){if(!e.$keyboardNavigation.isModal()&&this.isEnabled()&&!i.defaultPrevented){var r=this.globalNode,a=e.$keyboardNavigation.shortcuts.getCommandFromEvent(i),s=this.getActiveNode();e.$keyboardNavigation.facade.callEvent("onKeyDown",[a,i])!==!1&&(s?s.findHandler(a)?s.doAction(a,i):r.findHandler(a)&&r.doAction(a,i):this.setDefaultNode())}},_timeout:null,awaitsFocus:function(){return this._timeout!==null},delay:function(i,r){clearTimeout(this._timeout),this._timeout=setTimeout(e.bind(function(){this._timeout=null,i()},this),r||1)},clearDelay:function(){clearTimeout(this._timeout)}}}(n),function(){var e=n.$keyboardNavigation.dispatcher;e.isTaskFocused=function(x){var S=e.activeNode;return(S instanceof n.$keyboardNavigation.TaskRow||S instanceof n.$keyboardNavigation.TaskCell)&&S.taskId==x};var i=function(x){if(n.config.keyboard_navigation&&(n.config.keyboard_navigation_cells||!s(x))&&!l(x)&&!function(S){return!!He(S.target,".gantt_cal_light")}(x))return e.keyDownHandler(x)},r=function(x){if(e.$preventDefault)return x.preventDefault(),n.$container.blur(),!1;e.awaitsFocus()||e.focusGlobalNode()},a=function(){if(!e.isEnabled())return;const x=!Qt(document.activeElement,n.$container)&&document.activeElement.localName!="body";var S=e.getActiveNode();if(S&&!x){var p,b,k=S.getNode();k&&k.parentNode&&(p=k.parentNode.scrollTop,b=k.parentNode.scrollLeft),S.focus(!0),k&&k.parentNode&&(k.parentNode.scrollTop=p,k.parentNode.scrollLeft=b)}};function s(x){return!!He(x.target,".gantt_grid_editor_placeholder")}function l(x){return!!He(x.target,".no_keyboard_navigation")}function c(x){if(!n.config.keyboard_navigation||!n.config.keyboard_navigation_cells&&s(x))return!0;if(!l(x)){var S,p=e.fromDomElement(x);p&&(e.activeNode instanceof n.$keyboardNavigation.TaskCell&&Qt(x.target,n.$task)&&(p=new n.$keyboardNavigation.TaskCell(p.taskId,e.activeNode.columnIndex)),S=p),S?e.isEnabled()?e.delay(function(){e.setActiveNode(S)}):e.activeNode=S:(e.$preventDefault=!0,setTimeout(function(){e.$preventDefault=!1},300))}}n.attachEvent("onDataRender",function(){n.config.keyboard_navigation&&a()}),n.attachEvent("onGanttRender",function(){n.$root&&(n.eventRemove(n.$root,"keydown",i),n.eventRemove(n.$container,"focus",r),n.eventRemove(n.$container,"mousedown",c),n.config.keyboard_navigation?(n.event(n.$root,"keydown",i),n.event(n.$container,"focus",r),n.event(n.$container,"mousedown",c),n.$container.setAttribute("tabindex","0")):n.$container.removeAttribute("tabindex"))});var u=n.attachEvent("onGanttReady",function(){if(n.detachEvent(u),n.$data.tasksStore.attachEvent("onStoreUpdated",function(S){if(n.config.keyboard_navigation&&e.isEnabled()){const p=e.getActiveNode(),b=n.$ui.getView("grid"),k=b.getItemTop(S),w=b.$grid_data.scrollTop,A=w+b.$grid_data.getBoundingClientRect().height;p&&p.taskId==S&&w<=k&&A>=k&&a()}}),n._smart_render){var x=n._smart_render._redrawTasks;n._smart_render._redrawTasks=function(S,p){if(n.config.keyboard_navigation&&e.isEnabled()){var b=e.getActiveNode();if(b&&b.taskId!==void 0){for(var k=!1,w=0;w<p.length;w++)if(p[w].id==b.taskId&&p[w].start_date){k=!0;break}k||p.push(n.getTask(b.taskId))}}return x.apply(this,arguments)}}});let h=null,_=!1;n.attachEvent("onTaskCreated",function(x){return h=x.id,!0}),n.attachEvent("onAfterTaskAdd",function(x,S){if(!n.config.keyboard_navigation)return!0;if(e.isEnabled()){if(x==h&&(_=!0,setTimeout(()=>{_=!1,h=null})),_&&S.type==n.config.types.placeholder)return;var p=0,b=e.activeNode;b instanceof n.$keyboardNavigation.TaskCell&&(p=b.columnIndex);var k=n.config.keyboard_navigation_cells?n.$keyboardNavigation.TaskCell:n.$keyboardNavigation.TaskRow;S.type==n.config.types.placeholder&&n.config.placeholder_task.focusOnCreate===!1||e.setActiveNode(new k(x,p))}}),n.attachEvent("onTaskIdChange",function(x,S){if(!n.config.keyboard_navigation)return!0;var p=e.activeNode;return e.isTaskFocused(x)&&(p.taskId=S),!0});var g=setInterval(function(){n.config.keyboard_navigation&&(e.isEnabled()||e.enable())},500);function m(x){var S={gantt:n.$keyboardNavigation.GanttNode,headerCell:n.$keyboardNavigation.HeaderCell,taskRow:n.$keyboardNavigation.TaskRow,taskCell:n.$keyboardNavigation.TaskCell};return S[x]||S.gantt}function v(x){for(var S=n.getGridColumns(),p=0;p<S.length;p++)if(S[p].name==x)return p;return 0}n.attachEvent("onDestroy",function(){clearInterval(g)});var $={};Le($),n.mixin($,{addShortcut:function(x,S,p){var b=m(p);b&&b.prototype.bind(x,S)},getShortcutHandler:function(x,S){var p=n.$keyboardNavigation.shortcuts.parse(x);if(p.length)return $.getCommandHandler(p[0],S)},getCommandHandler:function(x,S){var p=m(S);if(p&&x)return p.prototype.findHandler(x)},removeShortcut:function(x,S){var p=m(S);p&&p.prototype.unbind(x)},focus:function(x){var S,p=x?x.type:null,b=m(p);switch(p){case"taskCell":S=new b(x.id,v(x.column));break;case"taskRow":S=new b(x.id);break;case"headerCell":S=new b(v(x.column))}e.delay(function(){S?e.setActiveNode(S):(e.enable(),e.getActiveNode()?e.awaitsFocus()||e.enable():e.setDefaultNode())})},getActiveNode:function(){if(e.isEnabled()){var x=e.getActiveNode(),S=(b=x)instanceof n.$keyboardNavigation.GanttNode?"gantt":b instanceof n.$keyboardNavigation.HeaderCell?"headerCell":b instanceof n.$keyboardNavigation.TaskRow?"taskRow":b instanceof n.$keyboardNavigation.TaskCell?"taskCell":null,p=n.getGridColumns();switch(S){case"taskCell":return{type:"taskCell",id:x.taskId,column:p[x.columnIndex].name};case"taskRow":return{type:"taskRow",id:x.taskId};case"headerCell":return{type:"headerCell",column:p[x.index].name}}}var b;return null}}),n.$keyboardNavigation.facade=$,n.ext.keyboardNavigation=$,n.focus=function(){$.focus()},n.addShortcut=$.addShortcut,n.getShortcutHandler=$.getShortcutHandler,n.removeShortcut=$.removeShortcut}()})(t)},quick_info:function(t){t.ext||(t.ext={}),t.ext.quickInfo=new Qm(t),t.config.quickinfo_buttons=["icon_edit","icon_delete"],t.config.quick_info_detached=!0,t.config.show_quick_info=!0,t.templates.quick_info_title=function(r,a,s){return s.text.substr(0,50)},t.templates.quick_info_content=function(r,a,s){return s.details||s.text},t.templates.quick_info_date=function(r,a,s){return t.templates.task_time(r,a,s)},t.templates.quick_info_class=function(r,a,s){return""},t.attachEvent("onTaskClick",function(r,a){return t.utils.dom.closest(a.target,".gantt_add")||setTimeout(function(){t.ext.quickInfo.show(r)},0),!0});const n=["onViewChange","onLightbox","onBeforeTaskDelete","onBeforeDrag"],e=function(){return t.ext.quickInfo.hide(),!0};for(let r=0;r<n.length;r++)t.attachEvent(n[r],e);function i(){return t.ext.quickInfo.hide(),t.ext.quickInfo._quickInfoBox=null,!0}t.attachEvent("onEmptyClick",function(r){let a=!0;const s=document.querySelector(".gantt_cal_quick_info");s&&t.utils.dom.isChildOf(r.target,s)&&(a=!1),a&&e()}),t.attachEvent("onGanttReady",i),t.attachEvent("onDestroy",i),t.event(window,"keydown",function(r){r.keyCode===27&&t.ext.quickInfo.hide()}),t.showQuickInfo=function(){t.ext.quickInfo.show.apply(t.ext.quickInfo,arguments)},t.hideQuickInfo=function(){t.ext.quickInfo.hide.apply(t.ext.quickInfo,arguments)}},tooltip:function(t){t.config.tooltip_timeout=30,t.config.tooltip_offset_y=20,t.config.tooltip_offset_x=10,t.config.tooltip_hide_timeout=30;const n=new iv(t);t.ext.tooltips=n,t.attachEvent("onGanttReady",function(){t.$root&&n.tooltipFor({selector:"["+t.config.task_attribute+"]:not(.gantt_task_row)",html:e=>{if(t.config.touch&&!t.config.touch_tooltip)return;const i=t.locate(e);if(t.isTaskExists(i)){const r=t.getTask(i);return t.templates.tooltip_text(r.start_date,r.end_date,r)}return null},global:!1})}),t.attachEvent("onDestroy",function(){n.destructor()}),t.attachEvent("onLightbox",function(){n.hideTooltip()}),t.attachEvent("onBeforeTooltip",function(){if(t.getState().link_source_id)return!1}),t.attachEvent("onGanttScroll",function(){n.hideTooltip()})},undo:function(t){const n=new av(t),e=new rv(n,t);function i(u,h,_){u&&(u.id===h&&(u.id=_),u.parent===h&&(u.parent=_))}function r(u,h,_){i(u.value,h,_),i(u.oldValue,h,_)}function a(u,h,_){u&&(u.source===h&&(u.source=_),u.target===h&&(u.target=_))}function s(u,h,_){a(u.value,h,_),a(u.oldValue,h,_)}function l(u,h,_){const g=n;for(let m=0;m<u.length;m++){const v=u[m];for(let $=0;$<v.commands.length;$++)v.commands[$].entity===g.command.entity.task?r(v.commands[$],h,_):v.commands[$].entity===g.command.entity.link&&s(v.commands[$],h,_)}}function c(u,h,_){const g=n;for(let m=0;m<u.length;m++){const v=u[m];for(let $=0;$<v.commands.length;$++){const x=v.commands[$];x.entity===g.command.entity.link&&(x.value&&x.value.id===h&&(x.value.id=_),x.oldValue&&x.oldValue.id===h&&(x.oldValue.id=_))}}}t.config.undo=!0,t.config.redo=!0,t.config.undo_types={link:"link",task:"task"},t.config.undo_actions={update:"update",remove:"remove",add:"add",move:"move"},t.ext||(t.ext={}),t.ext.undo={undo:()=>n.undo(),redo:()=>n.redo(),getUndoStack:()=>n.getUndoStack(),setUndoStack:u=>n.setUndoStack(u),getRedoStack:()=>n.getRedoStack(),setRedoStack:u=>n.setRedoStack(u),clearUndoStack:()=>n.clearUndoStack(),clearRedoStack:()=>n.clearRedoStack(),saveState:(u,h)=>e.store(u,h,!0),getInitialState:(u,h)=>h===t.config.undo_types.link?e.getInitialLink(u):e.getInitialTask(u)},t.undo=t.ext.undo.undo,t.redo=t.ext.undo.redo,t.getUndoStack=t.ext.undo.getUndoStack,t.getRedoStack=t.ext.undo.getRedoStack,t.clearUndoStack=t.ext.undo.clearUndoStack,t.clearRedoStack=t.ext.undo.clearRedoStack,t.attachEvent("onTaskIdChange",(u,h)=>{const _=n;l(_.getUndoStack(),u,h),l(_.getRedoStack(),u,h)}),t.attachEvent("onLinkIdChange",(u,h)=>{const _=n;c(_.getUndoStack(),u,h),c(_.getRedoStack(),u,h)}),t.attachEvent("onGanttReady",()=>{n.updateConfigs()})},marker:function(t){function n(i){if(!t.config.show_markers||!i.start_date)return!1;var r=t.getState();if(+i.start_date>+r.max_date||(!i.end_date||+i.end_date<+r.min_date)&&+i.start_date<+r.min_date)return;var a=document.createElement("div");a.setAttribute("data-marker-id",i.id);var s="gantt_marker";t.templates.marker_class&&(s+=" "+t.templates.marker_class(i)),i.css&&(s+=" "+i.css),t.templates.marker_class&&(s+=" "+t.templates.marker_class(i)),i.title&&(a.title=i.title),a.className=s;var l=t.posFromDate(i.start_date);a.style.left=l+"px";let c=Math.max(t.getRowTop(t.getVisibleTaskCount()),0)+"px";if(t.config.timeline_placeholder&&t.$task_data&&(c=t.$task_data.scrollHeight+"px"),a.style.height=c,i.end_date){var u=t.posFromDate(i.end_date);a.style.width=Math.max(u-l,0)+"px"}return i.text&&(a.innerHTML="<div class='gantt_marker_content' >"+i.text+"</div>"),a}function e(){if(t.$task_data){var i=document.createElement("div");i.className="gantt_marker_area",t.$task_data.appendChild(i),t.$marker_area=i}}t._markers||(t._markers=t.createDatastore({name:"marker",initItem:function(i){return i.id=i.id||t.uid(),i}})),t.config.show_markers=!0,t.attachEvent("onBeforeGanttRender",function(){t.$marker_area||e()}),t.attachEvent("onDataRender",function(){t.$marker_area||(e(),t.renderMarkers())}),t.attachEvent("onGanttLayoutReady",function(){t.attachEvent("onBeforeGanttRender",function(){e(),t.$services.getService("layers").createDataRender({name:"marker",defaultContainer:function(){return t.$marker_area}}).addLayer(n)},{once:!0})}),t.getMarker=function(i){return this._markers?this._markers.getItem(i):null},t.addMarker=function(i){return this._markers.addItem(i)},t.deleteMarker=function(i){return!!this._markers.exists(i)&&(this._markers.removeItem(i),!0)},t.updateMarker=function(i){this._markers.refresh(i)},t._getMarkers=function(){return this._markers.getItems()},t.renderMarkers=function(){this._markers.refresh()}},multiselect:function(t){t.config.multiselect=!0,t.config.multiselect_one_level=!1,t._multiselect={_selected:{},_one_level:!1,_active:!0,_first_selected_when_shift:null,getDefaultSelected:function(){var n=this.getSelected();return n.length?n[n.length-1]:null},setFirstSelected:function(n){this._first_selected_when_shift=n},getFirstSelected:function(){return this._first_selected_when_shift},isActive:function(){return this.updateState(),this._active},updateState:function(){this._one_level=t.config.multiselect_one_level;var n=this._active;this._active=t.config.select_task,this._active!=n&&this.reset()},reset:function(){this._selected={}},setLastSelected:function(n){t.$data.tasksStore.silent(function(){var e=t.$data.tasksStore;n?e.select(n+""):e.unselect(null)})},getLastSelected:function(){var n=t.$data.tasksStore.getSelectedId();return n&&t.isTaskExists(n)?n:null},select:function(n,e){return!!(n&&t.callEvent("onBeforeTaskMultiSelect",[n,!0,e])&&t.callEvent("onBeforeTaskSelected",[n]))&&(this._selected[n]=!0,this.setLastSelected(n),this.afterSelect(n),t.callEvent("onTaskMultiSelect",[n,!0,e]),t.callEvent("onTaskSelected",[n]),!0)},toggle:function(n,e){this._selected[n]?this.unselect(n,e):this.select(n,e)},unselect:function(n,e){n&&t.callEvent("onBeforeTaskMultiSelect",[n,!1,e])&&(this._selected[n]=!1,this.getLastSelected()==n&&this.setLastSelected(this.getDefaultSelected()),this.afterSelect(n),t.callEvent("onTaskMultiSelect",[n,!1,e]),t.callEvent("onTaskUnselected",[n]))},isSelected:function(n){return!(!t.isTaskExists(n)||!this._selected[n])},getSelected:function(){var n=[];for(var e in this._selected)this._selected[e]&&t.isTaskExists(e)?n.push(e):this._selected[e]=!1;return n.sort(function(i,r){return t.getGlobalTaskIndex(i)>t.getGlobalTaskIndex(r)?1:-1}),n},forSelected:function(n){for(var e=this.getSelected(),i=0;i<e.length;i++)n(e[i])},isSameLevel:function(n){if(!this._one_level)return!0;var e=this.getLastSelected();return!e||!t.isTaskExists(e)||!t.isTaskExists(n)||t.calculateTaskLevel(t.getTask(e))==t.calculateTaskLevel(t.getTask(n))},afterSelect:function(n){t.isTaskExists(n)&&t._quickRefresh(function(){t.refreshTask(n)})},doSelection:function(n){if(!this.isActive()||t._is_icon_open_click(n))return!1;var e=t.locate(n);if(!e||!t.callEvent("onBeforeMultiSelect",[n]))return!1;var i=this.getSelected(),r=this.getFirstSelected(),a=!1,s=this.getLastSelected(),l=t.config.multiselect,c=(function(){var h=t.ext.inlineEditors,_=h.getState(),g=h.locateCell(n.target);t.config.inline_editors_multiselect_open&&g&&h.getEditorConfig(g.columnName)&&(h.isVisible()&&_.id==g.id&&_.columnName==g.columnName||h.startEdit(g.id,g.columnName)),this.setFirstSelected(e),this.isSelected(e)||this.select(e,n),i=this.getSelected();for(var m=0;m<i.length;m++)i[m]!==e&&this.unselect(i[m],n)}).bind(this),u=(function(){if(s){if(e){var h=t.getGlobalTaskIndex(this.getFirstSelected()),_=t.getGlobalTaskIndex(e),g=t.getGlobalTaskIndex(s);h!=-1&&g!=-1||(h=_,this.reset());for(var m=s;t.getGlobalTaskIndex(m)!==h;)this.unselect(m,n),m=h>g?t.getNext(m):t.getPrev(m);for(m=e;t.getGlobalTaskIndex(m)!==h;)this.select(m,n)&&!a&&(a=!0,r=m),m=h>_?t.getNext(m):t.getPrev(m)}}else s=e}).bind(this);return l&&(n.ctrlKey||n.metaKey)?(this.isSelected(e)||this.setFirstSelected(e),e&&this.toggle(e,n)):l&&n.shiftKey?(t.isTaskExists(this.getFirstSelected())&&this.getFirstSelected()!==null||this.setFirstSelected(e),i.length?u():c()):c(),this.isSelected(e)?this.setLastSelected(e):r?e==s&&this.setLastSelected(n.shiftKey?r:this.getDefaultSelected()):this.setLastSelected(null),this.getSelected().length||this.setLastSelected(null),this.getLastSelected()&&this.isSelected(this.getFirstSelected())||this.setFirstSelected(this.getLastSelected()),!0}},function(){var n=t.selectTask;t.selectTask=function(i){if(!(i=De(i,this.config.root_id)))return!1;var r=t._multiselect,a=i;return r.isActive()?(r.select(i,null)&&r.setLastSelected(i),r.setFirstSelected(r.getLastSelected())):a=n.call(this,i),a};var e=t.unselectTask;t.unselectTask=function(i){var r=t._multiselect,a=r.isActive();(i=i||r.getLastSelected())&&a&&(r.unselect(i,null),i==r.getLastSelected()&&r.setLastSelected(null),t.refreshTask(i),r.setFirstSelected(r.getLastSelected()));var s=i;return a||(s=e.call(this,i)),s},t.toggleTaskSelection=function(i){var r=t._multiselect;i&&r.isActive()&&(r.toggle(i),r.setFirstSelected(r.getLastSelected()))},t.getSelectedTasks=function(){var i=t._multiselect;return i.isActive(),i.getSelected()},t.eachSelectedTask=function(i){return this._multiselect.forSelected(i)},t.isSelectedTask=function(i){return this._multiselect.isSelected(i)},t.getLastSelectedTask=function(){return this._multiselect.getLastSelected()},t.attachEvent("onGanttReady",function(){var i=t.$data.tasksStore.isSelected;t.$data.tasksStore.isSelected=function(r){return t._multiselect.isActive()?t._multiselect.isSelected(r):i.call(this,r)}})}(),t.attachEvent("onTaskIdChange",function(n,e){var i=t._multiselect;if(!i.isActive())return!0;t.isSelectedTask(n)&&(i.unselect(n,null),i.select(e,null))}),t.attachEvent("onAfterTaskDelete",function(n,e){var i=t._multiselect;if(!i.isActive())return!0;i._selected[n]&&(i._selected[n]=!1,i.setLastSelected(i.getDefaultSelected())),i.forSelected(function(r){t.isTaskExists(r)||i.unselect(r,null)})}),t.attachEvent("onBeforeTaskMultiSelect",function(n,e,i){const r=t._multiselect;if(e&&r.isActive()){let a=t.getSelectedId(),s=null;a&&(s=t.getTask(a));let l=t.getTask(n),c=!1;if(s&&s.$level!=l.$level&&(c=!0),t.config.multiselect_one_level&&c&&!i.ctrlKey&&!i.shiftKey)return!0;if(r._one_level)return r.isSameLevel(n)}return!0}),t.attachEvent("onTaskClick",function(n,e){return t._multiselect.doSelection(e)&&t.callEvent("onMultiSelect",[e]),!0})},export_api:function(t){return t.ext=t.ext||{},t.ext.export_api=t.ext.export_api||{_apiUrl:"https://export.dhtmlx.com/gantt",_preparePDFConfigRaw(n,e){let i=null;n.start&&n.end&&(i={start_date:t.config.start_date,end_date:t.config.end_date},t.config.start_date=t.date.str_to_date(t.config.date_format)(n.start),t.config.end_date=t.date.str_to_date(t.config.date_format)(n.end)),n=t.mixin(n,{name:"gantt."+e,data:t.ext.export_api._serializeHtml()}),i&&(t.config.start_date=i.start_date,t.config.end_date=i.end_date)},_prepareConfigPDF:(n,e)=>(n=t.mixin(n||{},{name:"gantt."+e,data:t.ext.export_api._serializeAll(),config:t.config}),t.ext.export_api._fixColumns(n.config.columns),n),_pdfExportRouter(n,e){n&&n.raw?t.ext.export_api._preparePDFConfigRaw(n,e):n=t.ext.export_api._prepareConfigPDF(n,e),n.version=t.version,t.ext.export_api._sendToExport(n,e)},exportToPDF(n){t.ext.export_api._pdfExportRouter(n,"pdf")},exportToPNG(n){t.ext.export_api._pdfExportRouter(n,"png")},exportToICal(n){n=t.mixin(n||{},{name:"gantt.ical",data:t.ext.export_api._serializePlain().data,version:t.version}),t.ext.export_api._sendToExport(n,"ical")},exportToExcel(n){let e,i,r,a;n=n||{};const s=t.config.smart_rendering;if(n.visual==="base-colors"&&(t.config.smart_rendering=!1),n.start||n.end){r=t.getState(),i=[t.config.start_date,t.config.end_date],a=t.getScrollState();const l=t.date.str_to_date(t.config.date_format);e=t.eachTask,n.start&&(t.config.start_date=l(n.start)),n.end&&(t.config.end_date=l(n.end)),t.render(),t.config.smart_rendering=s,t.eachTask=t.ext.export_api._eachTaskTimed(t.config.start_date,t.config.end_date)}else n.visual==="base-colors"&&(t.render(),t.config.smart_rendering=s);t._no_progress_colors=n.visual==="base-colors",(n=t.mixin(n,{name:"gantt.xlsx",title:"Tasks",data:t.ext.export_api._serializeTimeline(n).data,columns:t.ext.export_api._serializeGrid({rawDates:!0}),version:t.version})).visual&&(n.scales=t.ext.export_api._serializeScales(n)),t.ext.export_api._sendToExport(n,"excel"),(n.start||n.end)&&(t.config.start_date=r.min_date,t.config.end_date=r.max_date,t.eachTask=e,t.render(),t.scrollTo(a.x,a.y),t.config.start_date=i[0],t.config.end_date=i[1])},exportToJSON(n){n=t.mixin(n||{},{name:"gantt.json",data:t.ext.export_api._serializeAll(),config:t.config,columns:t.ext.export_api._serializeGrid(),worktime:t.ext.export_api._getWorktimeSettings(),version:t.version}),t.ext.export_api._sendToExport(n,"json")},importFromExcel(n){try{const e=n.data;if(e instanceof File){const i=new FormData;i.append("file",e),n.data=i}}catch{}t.ext.export_api._sendImportAjaxExcel(n)},importFromMSProject(n){const e=n.data;try{if(e instanceof File){const i=new FormData;i.append("file",e),n.data=i}}catch{}t.ext.export_api._sendImportAjaxMSP(n)},importFromPrimaveraP6:n=>(n.type="primaveraP6-parse",t.importFromMSProject(n)),exportToMSProject(n){(n=n||{}).skip_circular_links=n.skip_circular_links===void 0||!!n.skip_circular_links;const e=t.templates.xml_format,i=t.templates.format_date,r=t.config.xml_date,a=t.config.date_format,s="%d-%m-%Y %H:%i:%s";t.config.xml_date=s,t.config.date_format=s,t.templates.xml_format=t.date.date_to_str(s),t.templates.format_date=t.date.date_to_str(s);const l=t.ext.export_api._serializeAll();t.ext.export_api._customProjectProperties(l,n),t.ext.export_api._customTaskProperties(l,n),n.skip_circular_links&&t.ext.export_api._clearRecLinks(l),n=t.ext.export_api._exportConfig(l,n),t.ext.export_api._sendToExport(n,n.type||"msproject"),t.config.xml_date=r,t.config.date_format=a,t.templates.xml_format=e,t.templates.format_date=i,t.config.$custom_data=null,t.config.custom=null},exportToPrimaveraP6:n=>((n=n||{}).type="primaveraP6",t.exportToMSProject(n)),_fixColumns(n){for(let e=0;e<n.length;e++)n[e].label=n[e].label||t.locale.labels["column_"+n[e].name],typeof n[e].width=="string"&&(n[e].width=1*n[e].width)},_xdr(n,e,i){t.ajax.post(n,e,i)},_markColumns(n){const e=n.config.columns;if(e)for(let i=0;i<e.length;i++)e[i].template&&(e[i].$template=!0)},_sendImportAjaxExcel(n){const e=n.server||t.ext.export_api._apiUrl,i=n.store||0,r=n.data,a=n.callback;r.append("type","excel-parse"),r.append("data",JSON.stringify({sheet:n.sheet||0})),i&&r.append("store",i);const s=new XMLHttpRequest;s.onreadystatechange=function(l){s.readyState===4&&s.status===0&&a&&a(null)},s.onload=function(){let l=null;if(!(s.status>400))try{l=JSON.parse(s.responseText)}catch{}a&&a(l)},s.open("POST",e,!0),s.setRequestHeader("X-Requested-With","XMLHttpRequest"),s.send(r)},_ajaxToExport(n,e,i){delete n.callback;const r=n.server||t.ext.export_api._apiUrl,a="type="+e+"&store=1&data="+encodeURIComponent(JSON.stringify(n));t.ext.export_api._xdr(r,a,function(s){const l=s.xmlDoc||s;let c=null;if(!(l.status>400))try{c=JSON.parse(l.responseText)}catch{}i(c)})},_serializableGanttConfig(n){const e=t.mixin({},n);return e.columns&&(e.columns=e.columns.map(function(i){const r=t.mixin({},i);return delete r.editor,r})),delete e.editor_types,e},_sendToExport(n,e){const i=t.date.date_to_str(t.config.date_format||t.config.xml_date);if(n.skin||(n.skin=t.skin),n.config&&(n.config=t.copy(t.ext.export_api._serializableGanttConfig(n.config)),t.ext.export_api._markColumns(n,e),n.config.start_date&&n.config.end_date&&(n.config.start_date instanceof Date&&(n.config.start_date=i(n.config.start_date)),n.config.end_date instanceof Date&&(n.config.end_date=i(n.config.end_date)))),n.callback)return t.ext.export_api._ajaxToExport(n,e,n.callback);const r=t.ext.export_api._createHiddenForm();r.firstChild.action=n.server||t.ext.export_api._apiUrl,r.firstChild.childNodes[0].value=JSON.stringify(n),r.firstChild.childNodes[1].value=e,r.firstChild.submit()},_createHiddenForm(){if(!t.ext.export_api._hidden_export_form){const n=t.ext.export_api._hidden_export_form=document.createElement("div");n.style.display="none",n.innerHTML="<form method='POST' target='_blank'><textarea name='data' style='width:0px; height:0px;' readonly='true'></textarea><input type='hidden' name='type' value=''></form>",document.body.appendChild(n)}return t.ext.export_api._hidden_export_form},_copyObjectBase(n){const e={start_date:void 0,end_date:void 0,constraint_date:void 0,deadline:void 0};for(const r in n)r.charAt(0)!=="$"&&r!=="baselines"&&(e[r]=n[r]);const i=t.templates.xml_format||t.templates.format_date;return e.start_date=i(e.start_date),e.end_date&&(e.end_date=i(e.end_date)),e.constraint_date&&(e.constraint_date=i(e.constraint_date)),e.deadline&&(e.deadline=i(e.deadline)),e},_color_box:null,_color_hash:{},_getStyles(n){if(t.ext.export_api._color_box||(t.ext.export_api._color_box=document.createElement("DIV"),t.ext.export_api._color_box.style.cssText="position:absolute; display:none;",document.body.appendChild(t.ext.export_api._color_box)),t.ext.export_api._color_hash[n])return t.ext.export_api._color_hash[n];t.ext.export_api._color_box.className=n;const e=t.ext.export_api._getColor(t.ext.export_api._color_box,"color"),i=t.ext.export_api._getColor(t.ext.export_api._color_box,"backgroundColor");return t.ext.export_api._color_hash[n]=e+";"+i},_getMinutesWorktimeSettings(n){const e=[];return n.forEach(function(i){e.push(i.startMinute),e.push(i.endMinute)}),e},_getWorktimeSettings(){const n={hours:[0,24],minutes:null,dates:{0:!0,1:!0,2:!0,3:!0,4:!0,5:!0,6:!0}};let e;if(t.config.work_time){const i=t._working_time_helper;if(i&&i.get_calendar)e=i.get_calendar();else if(i)e={hours:i.hours,minutes:null,dates:i.dates};else if(t.config.worktimes&&t.config.worktimes.global){const r=t.config.worktimes.global;if(r.parsed){e={hours:null,minutes:t.ext.export_api._getMinutesWorktimeSettings(r.parsed.hours),dates:{}};for(const a in r.parsed.dates)Array.isArray(r.parsed.dates[a])?e.dates[a]=t.ext.export_api._getMinutesWorktimeSettings(r.parsed.dates[a]):e.dates[a]=r.parsed.dates[a]}else e={hours:r.hours,minutes:null,dates:r.dates}}else e=n}else e=n;return e},_eachTaskTimed:(n,e)=>function(i,r,a){r=r||t.config.root_id,a=a||t;const s=t.getChildren(r);if(s)for(let l=0;l<s.length;l++){const c=t._pull[s[l]];(!n||c.end_date>n)&&(!e||c.start_date<e)&&i.call(a,c),t.hasChild(c.id)&&t.eachTask(i,c.id,a)}},_originalCopyObject:t.json._copyObject,_copyObjectPlain(n){const e=t.templates.task_text(n.start_date,n.end_date,n),i=t.ext.export_api._copyObjectBase(n);return i.text=e||i.text,i},_getColor(n,e){const i=n.currentStyle?n.currentStyle[e]:getComputedStyle(n,null)[e],r=i.replace(/\s/g,"").match(/^rgba?\((\d+),(\d+),(\d+)/i);return(r&&r.length===4?("0"+parseInt(r[1],10).toString(16)).slice(-2)+("0"+parseInt(r[2],10).toString(16)).slice(-2)+("0"+parseInt(r[3],10).toString(16)).slice(-2):i).replace("#","")},_copyObjectTable(n){const e=t.date.date_to_str("%Y-%m-%dT%H:%i:%s.000Z"),i=t.ext.export_api._copyObjectColumns(n,t.ext.export_api._copyObjectPlain(n));i.start_date&&(i.start_date=e(n.start_date)),i.end_date&&(i.end_date=e(n.end_date));const r=t._day_index_by_date?t._day_index_by_date:t.columnIndexByDate;i.$start=r.call(t,n.start_date),i.$end=r.call(t,n.end_date);let a=0;const s=t.getScale().width;if(s.indexOf(0)>-1){let c=0;for(;c<i.$start;c++)s[c]||a++;for(i.$start-=a;c<i.$end;c++)s[c]||a++;i.$end-=a}i.$level=n.$level,i.$type=n.$rendered_type;const l=t.templates;return i.$text=l.task_text(n.start,n.end_date,n),i.$left=l.leftside_text?l.leftside_text(n.start,n.end_date,n):"",i.$right=l.rightside_text?l.rightside_text(n.start,n.end_date,n):"",i},_copyObjectColors(n){const e=t.ext.export_api._copyObjectTable(n),i=t.getTaskNode(n.id);if(i&&i.firstChild){let r=t.ext.export_api._getColor(t._no_progress_colors?i:i.firstChild,"backgroundColor");r==="363636"&&(r=t.ext.export_api._getColor(i,"backgroundColor")),e.$color=r}else n.color&&(e.$color=n.color);return e},_copyObjectColumns(n,e){for(let i=0;i<t.config.columns.length;i++){const r=t.config.columns[i].template;if(r){let a=r(n);a instanceof Date&&(a=t.templates.date_grid(a,n)),e["_"+i]=a}}return e},_copyObjectAll(n){const e=t.ext.export_api._copyObjectBase(n),i=["leftside_text","rightside_text","task_text","progress_text","task_class"];for(let r=0;r<i.length;r++){const a=t.templates[i[r]];a&&(e["$"+r]=a(n.start_date,n.end_date,n))}return t.ext.export_api._copyObjectColumns(n,e),e.open=n.$open,e},_serializeHtml(){const n=t.config.smart_scales,e=t.config.smart_rendering;(n||e)&&(t.config.smart_rendering=!1,t.config.smart_scales=!1,t.render());const i=t.$container.parentNode.innerHTML;return(n||e)&&(t.config.smart_scales=n,t.config.smart_rendering=e,t.render()),i},_serializeAll(){t.json._copyObject=t.ext.export_api._copyObjectAll;const n=t.ext.export_api._exportSerialize();return t.json._copyObject=t.ext.export_api._originalCopyObject,n},_serializePlain(){const n=t.templates.xml_format,e=t.templates.format_date;t.templates.xml_format=t.date.date_to_str("%Y%m%dT%H%i%s",!0),t.templates.format_date=t.date.date_to_str("%Y%m%dT%H%i%s",!0),t.json._copyObject=t.ext.export_api._copyObjectPlain;const i=t.ext.export_api._exportSerialize();return t.templates.xml_format=n,t.templates.format_date=e,t.json._copyObject=t.ext.export_api._originalCopyObject,delete i.links,i},_getRaw(){if(t._scale_helpers){const n=t._get_scales(),e=t.config.min_column_width,i=t._get_resize_options().x?Math.max(t.config.autosize_min_width,0):t.config.$task.offsetWidth,r=t.config.config.scale_height-1;return t._scale_helpers.prepareConfigs(n,e,i,r)}{const n=t.$ui.getView("timeline");if(n){let e=n.$config.width;t.config.autosize!=="x"&&t.config.autosize!=="xy"||(e=Math.max(t.config.autosize_min_width,0));const i=t.getState(),r=n._getScales(),a=t.config.min_column_width,s=t.config.scale_height-1,l=t.config.rtl;return n.$scaleHelper.prepareConfigs(r,a,e,s,i.min_date,i.max_date,l)}}},_serializeTimeline(n){t.json._copyObject=n.visual?t.ext.export_api._copyObjectColors:t.ext.export_api._copyObjectTable;const e=t.ext.export_api._exportSerialize();if(t.json._copyObject=t.ext.export_api._originalCopyObject,delete e.links,n.cellColors){const i=t.templates.timeline_cell_class||t.templates.task_cell_class;if(i){const r=t.ext.export_api._getRaw();let a=r[0].trace_x;for(let s=1;s<r.length;s++)r[s].trace_x.length>a.length&&(a=r[s].trace_x);for(let s=0;s<e.data.length;s++){e.data[s].styles=[];const l=t.getTask(e.data[s].id);for(let c=0;c<a.length;c++){const u=i(l,a[c]);u&&e.data[s].styles.push({index:c,styles:t.ext.export_api._getStyles(u)})}}}}return e},_serializeScales(n){const e=[],i=t.ext.export_api._getRaw();let r=1/0,a=0;for(let s=0;s<i.length;s++)r=Math.min(r,i[s].col_width);for(let s=0;s<i.length;s++){let l=0,c=0;const u=[];e.push(u);const h=i[s];a=Math.max(a,h.trace_x.length);const _=h.format||h.template||(h.date?t.date.date_to_str(h.date):t.config.date_scale);for(let g=0;g<h.trace_x.length;g++){const m=h.trace_x[g];c=l+Math.round(h.width[g]/r);const v={text:_(m),start:l,end:c,styles:""};if(n.cellColors){const $=h.css||t.templates.scaleCell_class;if($){const x=$(m);x&&(v.styles=t.ext.export_api._getStyles(x))}}u.push(v),l=c}}return{width:a,height:e.length,data:e}},_serializeGrid(n){t.exportMode=!0;const e=[],i=t.config.columns;let r=0;for(let a=0;a<i.length;a++)i[a].name!=="add"&&i[a].name!=="buttons"&&(e[r]={id:i[a].template?"_"+a:i[a].name,header:i[a].label||t.locale.labels["column_"+i[a].name],width:i[a].width?Math.floor(i[a].width/4):"",tree:i[a].tree||!1},i[a].name==="duration"&&(e[r].type="number"),i[a].name!=="start_date"&&i[a].name!=="end_date"||(e[r].type="date",n&&n.rawDates&&(e[r].id=i[a].name)),r++);return t.exportMode=!1,e},_exportSerialize(){t.exportMode=!0;const n=t.templates.xml_format,e=t.templates.format_date;t.templates.xml_format=t.templates.format_date=t.date.date_to_str(t.config.date_format||t.config.xml_date);const i=t.serialize();return t.templates.xml_format=n,t.templates.format_date=e,t.exportMode=!1,i},_setLevel(n){for(let e=0;e<n.length;e++){n[e].parent==0&&(n[e]._lvl=1);for(let i=e+1;i<n.length;i++)n[e].id==n[i].parent&&(n[i]._lvl=n[e]._lvl+1)}},_clearLevel(n){for(let e=0;e<n.length;e++)delete n[e]._lvl},_clearRecLinks(n){t.ext.export_api._setLevel(n.data);const e={};for(let a=0;a<n.data.length;a++)e[n.data[a].id]=n.data[a];const i={};for(let a=0;a<n.links.length;a++){const s=n.links[a];t.isTaskExists(s.source)&&t.isTaskExists(s.target)&&e[s.source]&&e[s.target]&&(i[s.id]=s)}for(const a in i)t.ext.export_api._makeLinksSameLevel(i[a],e);const r={};for(const a in e)t.ext.export_api._clearCircDependencies(e[a],i,e,{},r,null);Object.keys(i)&&t.ext.export_api._clearLinksSameLevel(i,e);for(let a=0;a<n.links.length;a++)i[n.links[a].id]||(n.links.splice(a,1),a--);t.ext.export_api._clearLevel(n.data)},_clearCircDependencies(n,e,i,r,a,s){const l=n.$_source;if(!l)return;r[n.id]&&t.ext.export_api._onCircDependencyFind(s,e,r,a),r[n.id]=!0;const c={};for(let u=0;u<l.length;u++){if(a[l[u]])continue;const h=e[l[u]],_=i[h._target];c[_.id]&&t.ext.export_api._onCircDependencyFind(h,e,r,a),c[_.id]=!0,t.ext.export_api._clearCircDependencies(_,e,i,r,a,h)}r[n.id]=!1},_onCircDependencyFind(n,e,i,r){n&&(t.callEvent("onExportCircularDependency",[n.id,n])&&delete e[n.id],delete i[n._source],delete i[n._target],r[n.id]=!0)},_makeLinksSameLevel(n,e){let i,r;const a={target:e[n.target],source:e[n.source]};if(a.target._lvl!=a.source._lvl){a.target._lvl<a.source._lvl?(i="source",r=a.target._lvl):(i="target",r=a.source._lvl);do{const c=e[a[i].parent];if(!c)break;a[i]=c}while(a[i]._lvl<r);let s=e[a.source.parent],l=e[a.target.parent];for(;s&&l&&s.id!=l.id;)a.source=s,a.target=l,s=e[a.source.parent],l=e[a.target.parent]}n._target=a.target.id,n._source=a.source.id,a.target.$_target||(a.target.$_target=[]),a.target.$_target.push(n.id),a.source.$_source||(a.source.$_source=[]),a.source.$_source.push(n.id)},_clearLinksSameLevel(n,e){for(const i in n)delete n[i]._target,delete n[i]._source;for(const i in e)delete e[i].$_source,delete e[i].$_target},_customProjectProperties(n,e){if(e&&e.project){for(const i in e.project)t.config.$custom_data||(t.config.$custom_data={}),t.config.$custom_data[i]=typeof e.project[i]=="function"?e.project[i](t.config):e.project[i];delete e.project}},_customTaskProperties(n,e){e&&e.tasks&&(n.data.forEach(function(i){for(const r in e.tasks)i.$custom_data||(i.$custom_data={}),i.$custom_data[r]=typeof e.tasks[r]=="function"?e.tasks[r](i,t.config):e.tasks[r]}),delete e.tasks)},_exportConfig(n,e){const i=e.name||"gantt.xml";delete e.name,t.config.custom=e;const r=t.ext.export_api._getWorktimeSettings(),a=t.getSubtaskDates();if(a.start_date&&a.end_date){const c=t.templates.format_date||t.templates.xml_format;t.config.start_end={start_date:c(a.start_date),end_date:c(a.end_date)}}const s=e.auto_scheduling!==void 0&&!!e.auto_scheduling,l={callback:e.callback||null,config:t.config,data:n,manual:s,name:i,worktime:r};for(const c in e)l[c]=e[c];return l},_sendImportAjaxMSP(n){const e=n.server||t.ext.export_api._apiUrl,i=n.store||0,r=n.data,a=n.callback,s={durationUnit:n.durationUnit||void 0,projectProperties:n.projectProperties||void 0,taskProperties:n.taskProperties||void 0};r.append("type",n.type||"msproject-parse"),r.append("data",JSON.stringify(s)),i&&r.append("store",i);const l=new XMLHttpRequest;l.onreadystatechange=function(c){l.readyState===4&&l.status===0&&a&&a(null)},l.onload=function(){let c=null;if(!(l.status>400))try{c=JSON.parse(l.responseText)}catch{}a&&a(c)},l.open("POST",e,!0),l.setRequestHeader("X-Requested-With","XMLHttpRequest"),l.send(r)}},t.exportToPDF=t.ext.export_api.exportToPDF,t.exportToPNG=t.ext.export_api.exportToPNG,t.exportToICal=t.ext.export_api.exportToICal,t.exportToExcel=t.ext.export_api.exportToExcel,t.exportToJSON=t.ext.export_api.exportToJSON,t.importFromExcel=t.ext.export_api.importFromExcel,t.importFromMSProject=t.ext.export_api.importFromMSProject,t.exportToMSProject=t.ext.export_api.exportToMSProject,t.importFromPrimaveraP6=t.ext.export_api.importFromPrimaveraP6,t.exportToPrimaveraP6=t.ext.export_api.exportToPrimaveraP6,t.ext.export_api}},ov={KEY_CODES:{UP:38,DOWN:40,LEFT:37,RIGHT:39,SPACE:32,ENTER:13,DELETE:46,ESC:27,TAB:9}};class lv{constructor(n){this.addExtension=(e,i)=>{this._extensions[e]=i},this.getExtension=e=>this._extensions[e],this._extensions={};for(const e in n)this._extensions[e]=n[e]}}const cv=()=>({layout:{css:"gantt_container",rows:[{cols:[{view:"grid",scrollX:"scrollHor",scrollY:"scrollVer"},{resizer:!0,width:1},{view:"timeline",scrollX:"scrollHor",scrollY:"scrollVer"},{view:"scrollbar",id:"scrollVer"}]},{view:"scrollbar",id:"scrollHor",height:20}]},links:{finish_to_start:"0",start_to_start:"1",finish_to_finish:"2",start_to_finish:"3"},types:{task:"task",project:"project",milestone:"milestone"},auto_types:!1,duration_unit:"day",work_time:!1,correct_work_time:!1,skip_off_time:!1,cascade_delete:!0,autosize:!1,autosize_min_width:0,autoscroll:!0,autoscroll_speed:30,deepcopy_on_parse:!1,show_links:!0,show_task_cells:!0,static_background:!1,static_background_cells:!0,branch_loading:!1,branch_loading_property:"$has_child",show_loading:!1,show_chart:!0,show_grid:!0,min_duration:36e5,date_format:"%d-%m-%Y %H:%i",xml_date:void 0,start_on_monday:!0,server_utc:!1,show_progress:!0,fit_tasks:!1,select_task:!0,scroll_on_click:!0,smart_rendering:!0,preserve_scroll:!0,readonly:!1,container_resize_timeout:20,deadlines:!0,date_grid:"%Y-%m-%d",drag_links:!0,drag_progress:!0,drag_resize:!0,drag_project:!1,drag_move:!0,drag_mode:{resize:"resize",progress:"progress",move:"move",ignore:"ignore"},round_dnd_dates:!0,link_wrapper_width:20,link_arrow_size:12,root_id:0,autofit:!1,columns:[{name:"text",tree:!0,width:"*",resize:!0},{name:"start_date",align:"center",resize:!0},{name:"duration",align:"center"},{name:"add",width:44}],scale_offset_minimal:!0,inherit_scale_class:!1,scales:[{unit:"day",step:1,date:"%d %M"}],time_step:60,duration_step:1,task_date:"%d %F %Y",time_picker:"%H:%i",task_attribute:"data-task-id",link_attribute:"data-link-id",layer_attribute:"data-layer",buttons_left:["gantt_save_btn","gantt_cancel_btn"],_migrate_buttons:{dhx_save_btn:"gantt_save_btn",dhx_cancel_btn:"gantt_cancel_btn",dhx_delete_btn:"gantt_delete_btn"},buttons_right:["gantt_delete_btn"],lightbox:{sections:[{name:"description",height:70,map_to:"text",type:"textarea",focus:!0},{name:"time",type:"duration",map_to:"auto"}],project_sections:[{name:"description",height:70,map_to:"text",type:"textarea",focus:!0},{name:"type",type:"typeselect",map_to:"type"},{name:"time",type:"duration",readonly:!0,map_to:"auto"}],milestone_sections:[{name:"description",height:70,map_to:"text",type:"textarea",focus:!0},{name:"type",type:"typeselect",map_to:"type"},{name:"time",type:"duration",single_date:!0,map_to:"auto"}]},drag_lightbox:!0,sort:!1,details_on_create:!0,details_on_dblclick:!0,initial_scroll:!0,task_scroll_offset:100,order_branch:!1,order_branch_free:!1,task_height:void 0,bar_height:"full",bar_height_padding:9,min_column_width:70,min_grid_column_width:70,grid_resizer_column_attribute:"data-column-index",keep_grid_width:!1,grid_resize:!1,grid_elastic_columns:!1,show_tasks_outside_timescale:!1,show_unscheduled:!0,resize_rows:!1,task_grid_row_resizer_attribute:"data-row-index",min_task_grid_row_height:30,row_height:36,readonly_property:"readonly",editable_property:"editable",calendar_property:"calendar_id",resource_calendars:{},dynamic_resource_calendars:!1,inherit_calendar:!1,type_renderers:{},open_tree_initially:!1,optimize_render:!0,prevent_default_scroll:!1,show_errors:!0,wai_aria_attributes:!0,smart_scales:!0,rtl:!1,placeholder_task:!1,horizontal_scroll_key:"shiftKey",drag_timeline:{useKey:void 0,ignore:".gantt_task_line, .gantt_task_link",render:!1},drag_multiple:!0,csp:"auto"});var Ce=typeof window<"u";const ln={isIE:Ce&&(navigator.userAgent.indexOf("MSIE")>=0||navigator.userAgent.indexOf("Trident")>=0),isIE6:Ce&&!XMLHttpRequest&&navigator.userAgent.indexOf("MSIE")>=0,isIE7:Ce&&navigator.userAgent.indexOf("MSIE 7.0")>=0&&navigator.userAgent.indexOf("Trident")<0,isIE8:Ce&&navigator.userAgent.indexOf("MSIE 8.0")>=0&&navigator.userAgent.indexOf("Trident")>=0,isOpera:Ce&&navigator.userAgent.indexOf("Opera")>=0,isChrome:Ce&&navigator.userAgent.indexOf("Chrome")>=0,isKHTML:Ce&&(navigator.userAgent.indexOf("Safari")>=0||navigator.userAgent.indexOf("Konqueror")>=0),isFF:Ce&&navigator.userAgent.indexOf("Firefox")>=0,isIPad:Ce&&navigator.userAgent.search(/iPad/gi)>=0,isEdge:Ce&&navigator.userAgent.indexOf("Edge")!=-1,isNode:!Ce||typeof navigator>"u"||!1};function ic(t){if(typeof t=="string"||typeof t=="number")return t;let n="";for(const e in t){let i="";t.hasOwnProperty(e)&&(i=typeof t[e]=="string"?encodeURIComponent(t[e]):typeof t[e]=="number"?String(t[e]):encodeURIComponent(JSON.stringify(t[e])),i=e+"="+i,n.length&&(i="&"+i),n+=i)}return n}function zn(t,n){var e={method:t};if(n.length===0)throw new Error("Arguments list of query is wrong.");if(n.length===1)return typeof n[0]=="string"?(e.url=n[0],e.async=!0):(e.url=n[0].url,e.async=n[0].async||!0,e.callback=n[0].callback,e.headers=n[0].headers),n[0].data?typeof n[0].data!="string"?e.data=ic(n[0].data):e.data=n[0].data:e.data="",e;switch(e.url=n[0],t){case"GET":case"DELETE":e.callback=n[1],e.headers=n[2];break;case"POST":case"PUT":n[1]?typeof n[1]!="string"?e.data=ic(n[1]):e.data=n[1]:e.data="",e.callback=n[2],e.headers=n[3]}return e}const rc={date_to_str:(t,n,e)=>{t=t.replace(/%[a-zA-Z]/g,r=>{switch(r){case"%d":return`"+to_fixed(date.get${n?"UTC":""}Date())+"`;case"%m":return`"+to_fixed((date.get${n?"UTC":""}Month()+1))+"`;case"%j":return`"+date.get${n?"UTC":""}Date()+"`;case"%n":return`"+(date.get${n?"UTC":""}Month()+1)+"`;case"%y":return`"+to_fixed(date.get${n?"UTC":""}FullYear()%100)+"`;case"%Y":return`"+date.get${n?"UTC":""}FullYear()+"`;case"%D":return`"+locale.date.day_short[date.get${n?"UTC":""}Day()]+"`;case"%l":return`"+locale.date.day_full[date.get${n?"UTC":""}Day()]+"`;case"%M":return`"+locale.date.month_short[date.get${n?"UTC":""}Month()]+"`;case"%F":return`"+locale.date.month_full[date.get${n?"UTC":""}Month()]+"`;case"%h":return`"+to_fixed((date.get${n?"UTC":""}Hours()+11)%12+1)+"`;case"%g":return`"+((date.get${n?"UTC":""}Hours()+11)%12+1)+"`;case"%G":return`"+date.get${n?"UTC":""}Hours()+"`;case"%H":return`"+to_fixed(date.get${n?"UTC":""}Hours())+"`;case"%i":return`"+to_fixed(date.get${n?"UTC":""}Minutes())+"`;case"%a":return`"+(date.get${n?"UTC":""}Hours()>11?"pm":"am")+"`;case"%A":return`"+(date.get${n?"UTC":""}Hours()>11?"PM":"AM")+"`;case"%s":return`"+to_fixed(date.get${n?"UTC":""}Seconds())+"`;case"%W":return'"+to_fixed(getISOWeek(date))+"';case"%w":return'"+to_fixed(getWeek(date))+"';default:return r}});const i=new Function("date","to_fixed","locale","getISOWeek","getWeek",`return "${t}";`);return r=>i(r,e.date.to_fixed,e.locale,e.date.getISOWeek,e.date.getWeek)},str_to_date:(t,n,e)=>{let i="var temp=date.match(/[a-zA-Z]+|[0-9]+/g);";const r=t.match(/%[a-zA-Z]/g);for(let l=0;l<r.length;l++)switch(r[l]){case"%j":case"%d":i+=`set[2]=temp[${l}]||1;`;break;case"%n":case"%m":i+=`set[1]=(temp[${l}]||1)-1;`;break;case"%y":i+=`set[0]=temp[${l}]*1+(temp[${l}]>50?1900:2000);`;break;case"%g":case"%G":case"%h":case"%H":i+=`set[3]=temp[${l}]||0;`;break;case"%i":i+=`set[4]=temp[${l}]||0;`;break;case"%Y":i+=`set[0]=temp[${l}]||0;`;break;case"%a":case"%A":i+=`set[3]=set[3]%12+((temp[${l}]||'').toLowerCase()=='am'?0:12);`;break;case"%s":i+=`set[5]=temp[${l}]||0;`;break;case"%M":i+=`set[1]=locale.date.month_short_hash[temp[${l}]]||0;`;break;case"%F":i+=`set[1]=locale.date.month_full_hash[temp[${l}]]||0;`}let a="set[0],set[1],set[2],set[3],set[4],set[5]";n&&(a=` Date.UTC(${a})`);const s=new Function("date","locale",`var set=[0,0,1,0,0,0]; ${i} return new Date(${a});`);return l=>s(l,e.locale)}},ac={date_to_str:(t,n,e)=>i=>t.replace(/%[a-zA-Z]/g,r=>{switch(r){case"%d":return n?e.date.to_fixed(i.getUTCDate()):e.date.to_fixed(i.getDate());case"%m":return n?e.date.to_fixed(i.getUTCMonth()+1):e.date.to_fixed(i.getMonth()+1);case"%j":return n?i.getUTCDate():i.getDate();case"%n":return n?i.getUTCMonth()+1:i.getMonth()+1;case"%y":return n?e.date.to_fixed(i.getUTCFullYear()%100):e.date.to_fixed(i.getFullYear()%100);case"%Y":return n?i.getUTCFullYear():i.getFullYear();case"%D":return n?e.locale.date.day_short[i.getUTCDay()]:e.locale.date.day_short[i.getDay()];case"%l":return n?e.locale.date.day_full[i.getUTCDay()]:e.locale.date.day_full[i.getDay()];case"%M":return n?e.locale.date.month_short[i.getUTCMonth()]:e.locale.date.month_short[i.getMonth()];case"%F":return n?e.locale.date.month_full[i.getUTCMonth()]:e.locale.date.month_full[i.getMonth()];case"%h":return n?e.date.to_fixed((i.getUTCHours()+11)%12+1):e.date.to_fixed((i.getHours()+11)%12+1);case"%g":return n?(i.getUTCHours()+11)%12+1:(i.getHours()+11)%12+1;case"%G":return n?i.getUTCHours():i.getHours();case"%H":return n?e.date.to_fixed(i.getUTCHours()):e.date.to_fixed(i.getHours());case"%i":return n?e.date.to_fixed(i.getUTCMinutes()):e.date.to_fixed(i.getMinutes());case"%a":return n?i.getUTCHours()>11?"pm":"am":i.getHours()>11?"pm":"am";case"%A":return n?i.getUTCHours()>11?"PM":"AM":i.getHours()>11?"PM":"AM";case"%s":return n?e.date.to_fixed(i.getUTCSeconds()):e.date.to_fixed(i.getSeconds());case"%W":return n?e.date.to_fixed(e.date.getUTCISOWeek(i)):e.date.to_fixed(e.date.getISOWeek(i));default:return r}}),str_to_date:(t,n,e)=>i=>{const r=[0,0,1,0,0,0],a=i.match(/[a-zA-Z]+|[0-9]+/g),s=t.match(/%[a-zA-Z]/g);for(let l=0;l<s.length;l++)switch(s[l]){case"%j":case"%d":r[2]=a[l]||1;break;case"%n":case"%m":r[1]=(a[l]||1)-1;break;case"%y":r[0]=1*a[l]+(a[l]>50?1900:2e3);break;case"%g":case"%G":case"%h":case"%H":r[3]=a[l]||0;break;case"%i":r[4]=a[l]||0;break;case"%Y":r[0]=a[l]||0;break;case"%a":case"%A":r[3]=r[3]%12+((a[l]||"").toLowerCase()==="am"?0:12);break;case"%s":r[5]=a[l]||0;break;case"%M":r[1]=e.locale.date.month_short_hash[a[l]]||0;break;case"%F":r[1]=e.locale.date.month_full_hash[a[l]]||0}return n?new Date(Date.UTC(r[0],r[1],r[2],r[3],r[4],r[5])):new Date(r[0],r[1],r[2],r[3],r[4],r[5])}};function dv(t){var n=null;function e(){var r=!1;return t.config.csp==="auto"?(n===null&&function(){try{new Function("canUseCsp = false;")}catch{n=!0}}(),r=n):r=t.config.csp,r}var i={init:function(){for(var r=t.locale,a=r.date.month_short,s=r.date.month_short_hash={},l=0;l<a.length;l++)s[a[l]]=l;for(a=r.date.month_full,s=r.date.month_full_hash={},l=0;l<a.length;l++)s[a[l]]=l},date_part:function(r){var a=new Date(r);return r.setHours(0),this.hour_start(r),r.getHours()&&(r.getDate()<a.getDate()||r.getMonth()<a.getMonth()||r.getFullYear()<a.getFullYear())&&r.setTime(r.getTime()+36e5*(24-r.getHours())),r},time_part:function(r){return(r.valueOf()/1e3-60*r.getTimezoneOffset())%86400},week_start:function(r){var a=r.getDay();return t.config.start_on_monday&&(a===0?a=6:a--),this.date_part(this.add(r,-1*a,"day"))},month_start:function(r){return r.setDate(1),this.date_part(r)},quarter_start:function(r){this.month_start(r);var a,s=r.getMonth();return a=s>=9?9:s>=6?6:s>=3?3:0,r.setMonth(a),r},year_start:function(r){return r.setMonth(0),this.month_start(r)},day_start:function(r){return this.date_part(r)},hour_start:function(r){return r.getMinutes()&&r.setMinutes(0),this.minute_start(r),r},minute_start:function(r){return r.getSeconds()&&r.setSeconds(0),r.getMilliseconds()&&r.setMilliseconds(0),r},_add_days:function(r,a,s){r.setDate(r.getDate()+a);var l=a>=0,c=!s.getHours()&&r.getHours(),u=r.getDate()<=s.getDate()||r.getMonth()<s.getMonth()||r.getFullYear()<s.getFullYear();return l&&c&&u&&r.setTime(r.getTime()+36e5*(24-r.getHours())),a>1&&c&&r.setHours(0),r},add:function(r,a,s){var l=new Date(r.valueOf());switch(s){case"day":l=this._add_days(l,a,r);break;case"week":l=this._add_days(l,7*a,r);break;case"month":l.setMonth(l.getMonth()+a);break;case"year":l.setYear(l.getFullYear()+a);break;case"hour":l.setTime(l.getTime()+60*a*60*1e3);break;case"minute":l.setTime(l.getTime()+60*a*1e3);break;default:return this["add_"+s](r,a,s)}return l},add_quarter:function(r,a){return this.add(r,3*a,"month")},to_fixed:function(r){return r<10?"0"+r:r},copy:function(r){return new Date(r.valueOf())},date_to_str:function(r,a){var s=rc;return e()&&(s=ac),s.date_to_str(r,a,t)},str_to_date:function(r,a){var s=rc;return e()&&(s=ac),s.str_to_date(r,a,t)},getISOWeek:function(r){return t.date._getWeekNumber(r,!0)},_getWeekNumber:function(r,a){if(!r)return!1;var s=r.getDay();a&&s===0&&(s=7);var l=new Date(r.valueOf());l.setDate(r.getDate()+(4-s));var c=l.getFullYear(),u=Math.round((l.getTime()-new Date(c,0,1).getTime())/864e5);return 1+Math.floor(u/7)},getWeek:function(r){return t.date._getWeekNumber(r,t.config.start_on_monday)},getUTCISOWeek:function(r){return t.date.getISOWeek(r)},convert_to_utc:function(r){return new Date(r.getUTCFullYear(),r.getUTCMonth(),r.getUTCDate(),r.getUTCHours(),r.getUTCMinutes(),r.getUTCSeconds())},parseDate:function(r,a){return r&&!r.getFullYear&&(typeof a!="function"&&(a=typeof a=="string"?a==="parse_date"||a==="xml_date"?t.defined(t.templates.xml_date)?t.templates.xml_date:t.templates.parse_date:t.defined(t.templates[a])?t.templates[a]:t.date.str_to_date(a):t.defined(t.templates.xml_date)?t.templates.xml_date:t.templates.parse_date),r=r?a(r):null),r}};return i}class uv{constructor(n){const{url:e,token:i}=n;this._url=e,this._token=i,this._mode=1,this._seed=1,this._queue=[],this.data={},this.api={},this._events={}}headers(){return{Accept:"application/json","Content-Type":"application/json","Remote-Token":this._token}}fetch(n,e){const i={credentials:"include",headers:this.headers()};return e&&(i.method="POST",i.body=e),fetch(n,i).then(r=>r.json())}load(n){return n&&(this._url=n),this.fetch(this._url).then(e=>this.parse(e))}parse(n){const{key:e,websocket:i}=n;e&&(this._token=n.key);for(const r in n.data)this.data[r]=n.data[r];for(const r in n.api){const a=this.api[r]={},s=n.api[r];for(const l in s)a[l]=this._wrapper(r+"."+l)}return i&&this.connect(),this}connect(){const n=this._socket;n&&(this._socket=null,n.onclose=function(){},n.close()),this._mode=2,this._socket=function(e,i,r,a){let s=i;s[0]==="/"&&(s=document.location.protocol+"//"+document.location.host+i),s=s.replace(/^http(s|):/,"ws$1:");const l=s.indexOf("?")!=-1?"&":"?";s=`${s}${l}token=${r}&ws=1`;const c=new WebSocket(s);return c.onclose=()=>setTimeout(()=>e.connect(),2e3),c.onmessage=u=>{const h=JSON.parse(u.data);switch(h.action){case"result":e.result(h.body,[]);break;case"event":e.fire(h.body.name,h.body.value);break;case"start":a();break;default:e.onError(h.data)}},c}(this,this._url,this._token,()=>(this._mode=3,this._send(),this._resubscribe(),this))}_wrapper(n){return(function(){const e=[].slice.call(arguments);let i=null;const r=new Promise((a,s)=>{i={data:{id:this._uid(),name:n,args:e},status:1,resolve:a,reject:s},this._queue.push(i)});return this.onCall(i,r),this._mode===3?this._send(i):setTimeout(()=>this._send(),1),r}).bind(this)}_uid(){return(this._seed++).toString()}_send(n){if(this._mode==2)return void setTimeout(()=>this._send(),100);const e=n?[n]:this._queue.filter(r=>r.status===1);if(!e.length)return;const i=e.map(r=>(r.status=2,r.data));this._mode!==3?this.fetch(this._url,JSON.stringify(i)).catch(r=>this.onError(r)).then(r=>this.result(r,i)):this._socket.send(JSON.stringify({action:"call",body:i}))}result(n,e){const i={};if(n)for(let r=0;r<n.length;r++)i[n[r].id]=n[r];else for(let r=0;r<e.length;r++)i[e[r].id]={id:e[r].id,error:"Network Error",data:null};for(let r=this._queue.length-1;r>=0;r--){const a=this._queue[r],s=i[a.data.id];s&&(this.onResponse(a,s),s.error?a.reject(s.error):a.resolve(s.data),this._queue.splice(r,1))}}on(n,e){const i=this._uid();let r=this._events[n];const a=!!r;return a||(r=this._events[n]=[]),r.push({id:i,handler:e}),a||this._mode!=3||this._socket.send(JSON.stringify({action:"subscribe",name:n})),{name:n,id:i}}_resubscribe(){if(this._mode==3)for(const n in this._events)this._socket.send(JSON.stringify({action:"subscribe",name:n}))}detach(n){if(!n){if(this._mode==3)for(const a in this._events)this._socket.send(JSON.stringify({action:"unsubscribe",key:a}));return void(this._events={})}const{id:e,name:i}=n,r=this._events[i];if(r){const a=r.filter(s=>s.id!=e);a.length?this._events[i]=a:(delete this._events[i],this._mode==3&&this._socket.send(JSON.stringify({action:"unsubscribe",name:i})))}}fire(n,e){const i=this._events[n];if(i)for(let r=0;r<i.length;r++)i[r].handler(e)}onError(n){return null}onCall(n,e){}onResponse(n,e){}}const hv=function(t,n){const e=new uv({url:t,token:n});e.fetch=function(i,r){const a={headers:this.headers()};return r&&(a.method="POST",a.body=r),fetch(i,a).then(s=>s.json())},this._ready=e.load().then(i=>this._remote=i),this.ready=function(){return this._ready},this.on=function(i,r){this.ready().then(a=>{if(typeof i=="string")a.on(i,r);else for(const s in i)a.on(s,i[s])})}};function Rc(t,n){if(!n)return!0;if(t._on_timeout)return!1;var e=Math.ceil(1e3/n);return e<2||(setTimeout(function(){delete t._on_timeout},e),t._on_timeout=!0),!0}var _v=function(){var t={};return{getState:function(n){if(t[n])return t[n].method();var e={};for(var i in t)t[i].internal||ut(e,t[i].method(),!0);return e},registerProvider:function(n,e,i){t[n]={method:e,internal:i}},unregisterProvider:function(n){delete t[n]}}};const fv=Promise;var ke={$create:function(t){return ut(t||[],this)},$removeAt:function(t,n){t>=0&&this.splice(t,n||1)},$remove:function(t){this.$removeAt(this.$find(t))},$insertAt:function(t,n){if(n||n===0){var e=this.splice(n,this.length-n);this[n]=t,this.push.apply(this,e)}else this.push(t)},$find:function(t){for(var n=0;n<this.length;n++)if(t==this[n])return n;return-1},$each:function(t,n){for(var e=0;e<this.length;e++)t.call(n||this,this[e])},$map:function(t,n){for(var e=0;e<this.length;e++)this[e]=t.call(n||this,this[e]);return this},$filter:function(t,n){for(var e=0;e<this.length;e++)t.call(n||this,this[e])||(this.splice(e,1),e--);return this}};function vi(t,n,e,i){return(i=n?n.config:i)&&i.placeholder_task&&e.exists(t)?e.getItem(t).type===i.types.placeholder:!1}var Ae=function(t){return this.pull={},this.$initItem=t.initItem,this.visibleOrder=ke.$create(),this.fullOrder=ke.$create(),this._skip_refresh=!1,this._filterRule=null,this._searchVisibleOrder={},this._indexRangeCache={},this._getItemsCache=null,this.$config=t,Le(this),this._attachDataChange(function(){return this._indexRangeCache={},this._getItemsCache=null,!0}),this};Ae.prototype={_attachDataChange:function(t){this.attachEvent("onClearAll",t),this.attachEvent("onBeforeParse",t),this.attachEvent("onBeforeUpdate",t),this.attachEvent("onBeforeDelete",t),this.attachEvent("onBeforeAdd",t),this.attachEvent("onParse",t),this.attachEvent("onBeforeFilter",t)},_parseInner:function(t){for(var n=null,e=[],i=0,r=t.length;i<r;i++)n=t[i],this.$initItem&&(this.$config.copyOnParse()&&(n=qt(n)),n=this.$initItem(n)),this.callEvent("onItemLoading",[n])&&(this.pull.hasOwnProperty(n.id)||this.fullOrder.push(n.id),e.push(n),this.pull[n.id]=n);return e},parse:function(t){this.isSilent()||this.callEvent("onBeforeParse",[t]);var n=this._parseInner(t);this.isSilent()||(this.refresh(),this.callEvent("onParse",[n]))},getItem:function(t){return this.pull[t]},_updateOrder:function(t){t.call(this.visibleOrder),t.call(this.fullOrder)},updateItem:function(t,n){if(Mt(n)||(n=this.getItem(t)),!this.isSilent()&&this.callEvent("onBeforeUpdate",[n.id,n])===!1)return!1;ut(this.pull[t],n,!0),this.isSilent()||(this.callEvent("onAfterUpdate",[n.id,n]),this.callEvent("onStoreUpdated",[n.id,n,"update"]))},_removeItemInner:function(t){this._updateOrder(function(){this.$remove(t)}),delete this.pull[t]},removeItem:function(t){var n=this.getItem(t);if(!this.isSilent()&&this.callEvent("onBeforeDelete",[n.id,n])===!1)return!1;this.callEvent("onAfterDeleteConfirmed",[n.id,n]),this._removeItemInner(t),this.isSilent()&&this.callEvent("onAfterSilentDelete",[n.id,n]),this.isSilent()||(this.filter(),this.callEvent("onAfterDelete",[n.id,n]),this.callEvent("onStoreUpdated",[n.id,n,"delete"]))},_addItemInner:function(t,n){if(this.exists(t.id))this.silent(function(){this.updateItem(t.id,t)});else{var e=this.visibleOrder,i=e.length;(!Mt(n)||n<0)&&(n=i),n>i&&(n=Math.min(e.length,n))}this.pull[t.id]=t,this.isSilent()||this._updateOrder(function(){this.$find(t.id)===-1&&this.$insertAt(t.id,n)}),this.filter()},isVisible:function(t){return this.visibleOrder.$find(t)>-1},getVisibleItems:function(){return this.getIndexRange()},addItem:function(t,n){return Mt(t.id)||(t.id=Me()),this.$initItem&&(t=this.$initItem(t)),!(!this.isSilent()&&this.callEvent("onBeforeAdd",[t.id,t])===!1)&&(this._addItemInner(t,n),this.isSilent()||(this.callEvent("onAfterAdd",[t.id,t]),this.callEvent("onStoreUpdated",[t.id,t,"add"])),t.id)},_changeIdInner:function(t,n){this.pull[t]&&(this.pull[n]=this.pull[t]);var e=this._searchVisibleOrder[t];this.pull[n].id=n,this._updateOrder(function(){this[this.$find(t)]=n}),this._searchVisibleOrder[n]=e,delete this._searchVisibleOrder[t],delete this.pull[t]},changeId:function(t,n){this._changeIdInner(t,n),this.callEvent("onIdChange",[t,n])},exists:function(t){return!!this.pull[t]},_moveInner:function(t,n){var e=this.getIdByIndex(t);this._updateOrder(function(){this.$removeAt(t),this.$insertAt(e,Math.min(this.length,n))})},move:function(t,n){var e=this.getIdByIndex(t),i=this.getItem(e);this._moveInner(t,n),this.isSilent()||this.callEvent("onStoreUpdated",[i.id,i,"move"])},clearAll:function(){this.$destroyed||(this.silent(function(){this.unselect()}),this.pull={},this.visibleOrder=ke.$create(),this.fullOrder=ke.$create(),this.isSilent()||(this.callEvent("onClearAll",[]),this.refresh()))},silent:function(t,n){var e=!1;this.isSilent()&&(e=!0),this._skip_refresh=!0,t.call(n||this),e||(this._skip_refresh=!1)},isSilent:function(){return!!this._skip_refresh},arraysEqual:function(t,n){if(t.length!==n.length)return!1;for(var e=0;e<t.length;e++)if(t[e]!==n[e])return!1;return!0},refresh:function(t,n){var e,i;if(!this.isSilent()&&(t&&(e=this.getItem(t)),i=t?[t,e,"paint"]:[null,null,null],this.callEvent("onBeforeStoreUpdate",i)!==!1)){var r=this._quick_refresh&&!this._mark_recompute;if(this._mark_recompute=!1,t){if(!n&&!r){var a=this.visibleOrder;this.filter(),this.arraysEqual(a,this.visibleOrder)||(t=void 0)}}else r||this.filter();i=t?[t,e,"paint"]:[null,null,null],this.callEvent("onStoreUpdated",i)}},count:function(){return this.fullOrder.length},countVisible:function(){return this.visibleOrder.length},sort:function(t){},serialize:function(){},eachItem:function(t){for(var n=0;n<this.fullOrder.length;n++){var e=this.getItem(this.fullOrder[n]);t.call(this,e)}},find:function(t){var n=[];return this.eachItem(function(e){t(e)&&n.push(e)}),n},filter:function(t){this.isSilent()||this.callEvent("onBeforeFilter",[]),this.callEvent("onPreFilter",[]);var n=ke.$create(),e=[];this.eachItem(function(r){this.callEvent("onFilterItem",[r.id,r])&&(vi(r.id,null,this,this._ganttConfig)?e.push(r.id):n.push(r.id))});for(var i=0;i<e.length;i++)n.push(e[i]);for(this.visibleOrder=n,this._searchVisibleOrder={},i=0;i<this.visibleOrder.length;i++)this._searchVisibleOrder[this.visibleOrder[i]]=i;this.isSilent()||this.callEvent("onFilter",[])},getIndexRange:function(t,n){var e=Math.min(n||1/0,this.countVisible()-1),i=t||0,r=i+"-"+e;if(this._indexRangeCache[r])return this._indexRangeCache[r].slice();for(var a=[],s=i;s<=e;s++)a.push(this.getItem(this.visibleOrder[s]));return this._indexRangeCache[r]=a.slice(),a},getItems:function(){if(this._getItemsCache)return this._getItemsCache.slice();var t=[];for(var n in this.pull)t.push(this.pull[n]);return this._getItemsCache=t.slice(),t},getIdByIndex:function(t){return this.visibleOrder[t]},getIndexById:function(t){var n=this._searchVisibleOrder[t];return n===void 0&&(n=-1),n},_getNullIfUndefined:function(t){return t===void 0?null:t},getFirst:function(){return this._getNullIfUndefined(this.visibleOrder[0])},getLast:function(){return this._getNullIfUndefined(this.visibleOrder[this.visibleOrder.length-1])},getNext:function(t){return this._getNullIfUndefined(this.visibleOrder[this.getIndexById(t)+1])},getPrev:function(t){return this._getNullIfUndefined(this.visibleOrder[this.getIndexById(t)-1])},destructor:function(){this.callEvent("onDestroy",[]),this.detachAllEvents(),this.$destroyed=!0,this.pull=null,this.$initItem=null,this.visibleOrder=null,this.fullOrder=null,this._skip_refresh=null,this._filterRule=null,this._searchVisibleOrder=null,this._indexRangeCache={}}};var Pc=function(t){var n;Ae.apply(this,[t]),this._branches={},this.pull={},this.$initItem=function(l){var c=l;t.initItem&&(c=t.initItem(c));var u=this.getItem(l.id);return u&&u.parent!=c.parent&&this.move(c.id,c.$index||-1,c.parent||this._ganttConfig.root_id),c},this.$parentProperty=t.parentProperty||"parent",typeof t.rootId!="function"?this.$getRootId=(n=t.rootId||0,function(){return n}):this.$getRootId=t.rootId,this.$openInitially=t.openInitially,this.visibleOrder=ke.$create(),this.fullOrder=ke.$create(),this._searchVisibleOrder={},this._indexRangeCache={},this._eachItemMainRangeCache=null,this._getItemsCache=null,this._skip_refresh=!1,this._ganttConfig=null,t.getConfig&&(this._ganttConfig=t.getConfig());var e={},i={},r={},a={},s=!1;return this._attachDataChange(function(){return this._indexRangeCache={},this._eachItemMainRangeCache=null,this._getItemsCache=null,!0}),this.attachEvent("onPreFilter",function(){this._indexRangeCache={},this._eachItemMainRangeCache=null,e={},i={},r={},a={},s=!1,this.eachItem(function(l){var c=this.getParent(l.id);l.$open&&r[c]!==!1?r[l.id]=!0:r[l.id]=!1,this._isSplitItem(l)&&(s=!0,e[l.id]=!0,i[l.id]=!0),s&&i[c]&&(i[l.id]=!0),r[c]||r[c]===void 0?a[l.id]=!0:a[l.id]=!1})}),this.attachEvent("onFilterItem",function(l,c){var u=!1;this._ganttConfig&&(u=this._ganttConfig.open_split_tasks);var h=a[c.id];return s&&(h&&i[c.id]&&!e[c.id]&&(h=!!u),i[c.id]&&!e[c.id]&&(c.$split_subtask=!0)),c.$expanded_branch=!!a[c.id],!!h}),this.attachEvent("onFilter",function(){e={},i={},r={},a={}}),this};function Bt(t){return ln.isNode||!t.$root}Pc.prototype=ut({_buildTree:function(t){for(var n=null,e=this.$getRootId(),i=0,r=t.length;i<r;i++)n=t[i],this.setParent(n,De(this.getParent(n),e)||e);for(i=0,r=t.length;i<r;i++)n=t[i],this._add_branch(n),n.$level=this.calculateItemLevel(n),n.$local_index=this.getBranchIndex(n.id),Mt(n.$open)||(n.$open=Mt(n.open)?n.open:this.$openInitially());this._updateOrder()},_isSplitItem:function(t){return t.render=="split"&&this.hasChild(t.id)},parse:function(t){this._skip_refresh||this.callEvent("onBeforeParse",[t]);var n=this._parseInner(t);this._buildTree(n),this.filter(),this._skip_refresh||this.callEvent("onParse",[n])},_addItemInner:function(t,n){var e=this.getParent(t);Mt(e)||(e=this.$getRootId(),this.setParent(t,e));var i=this.getIndexById(e)+Math.min(Math.max(n,0),this.visibleOrder.length);1*i!==i&&(i=void 0),Ae.prototype._addItemInner.call(this,t,i),this.setParent(t,e),t.hasOwnProperty("$rendered_parent")&&this._move_branch(t,t.$rendered_parent),this._add_branch(t,n)},_changeIdInner:function(t,n){var e=this.getChildren(t),i=this._searchVisibleOrder[t];Ae.prototype._changeIdInner.call(this,t,n);var r=this.getParent(n);this._replace_branch_child(r,t,n),this._branches[t]&&(this._branches[n]=this._branches[t]);for(var a=0;a<e.length;a++){var s=this.getItem(e[a]);s[this.$parentProperty]=n,s.$rendered_parent=n}this._searchVisibleOrder[n]=i,delete this._branches[t]},_traverseBranches:function(t,n){Mt(n)||(n=this.$getRootId());var e=this._branches[n];if(e)for(var i=0;i<e.length;i++){var r=e[i];t.call(this,r),this._branches[r]&&this._traverseBranches(t,r)}},_updateOrder:function(t){this.fullOrder=ke.$create(),this._traverseBranches(function(n){this.fullOrder.push(n)}),t&&Ae.prototype._updateOrder.call(this,t)},_removeItemInner:function(t){var n=[];this.eachItem(function(i){n.push(i)},t),n.push(this.getItem(t));for(var e=0;e<n.length;e++)this._move_branch(n[e],this.getParent(n[e]),null),Ae.prototype._removeItemInner.call(this,n[e].id),this._move_branch(n[e],this.getParent(n[e]),null)},move:function(t,n,e){var i=arguments[3],r=(this._ganttConfig||{}).root_id||0;if(i=De(i,r)){if(i===t)return;e=this.getParent(i),n=this.getBranchIndex(i)}if(t!=e){Mt(e)||(e=this.$getRootId());var a=this.getItem(t),s=this.getParent(a.id),l=this.getChildren(e);if(n==-1&&(n=l.length+1),s==e&&this.getBranchIndex(t)==n)return;if(this.callEvent("onBeforeItemMove",[t,e,n])===!1)return!1;for(var c=[],u=0;u<l.length;u++)vi(l[u],null,this,this._ganttConfig)&&(c.push(l[u]),l.splice(u,1),u--);this._replace_branch_child(s,t);var h=(l=this.getChildren(e))[n];(h=De(h,r))?l=l.slice(0,n).concat([t]).concat(l.slice(n)):l.push(t),c.length&&(l=l.concat(c)),a.$rendered_parent!==s&&s!==e&&(a.$rendered_parent=s),this.setParent(a,e),this._branches[e]=l;var _=this.calculateItemLevel(a)-a.$level;a.$level+=_,this.eachItem(function(g){g.$level+=_},a.id,this),this._moveInner(this.getIndexById(t),this.getIndexById(e)+n),this.callEvent("onAfterItemMove",[t,e,n]),this.refresh()}},getBranchIndex:function(t){var n=this.getChildren(this.getParent(t));let e=n.indexOf(t+"");return e==-1&&(e=n.indexOf(+t)),e},hasChild:function(t){var n=this._branches[t];return n&&n.length},getChildren:function(t){var n=this._branches[t];return n||ke.$create()},isChildOf:function(t,n){if(!this.exists(t))return!1;if(n===this.$getRootId())return!0;if(!this.hasChild(n))return!1;var e=this.getItem(t),i=this.getParent(t);if(this.getItem(n).$level>=e.$level)return!1;for(;e&&this.exists(i);){if((e=this.getItem(i))&&e.id==n)return!0;i=this.getParent(e)}return!1},getSiblings:function(t){if(!this.exists(t))return ke.$create();var n=this.getParent(t);return this.getChildren(n)},getNextSibling:function(t){for(var n=this.getSiblings(t),e=0,i=n.length;e<i;e++)if(n[e]==t){var r=n[e+1];return r===0&&e>0&&(r="0"),r||null}return null},getPrevSibling:function(t){for(var n=this.getSiblings(t),e=0,i=n.length;e<i;e++)if(n[e]==t){var r=n[e-1];return r===0&&e>0&&(r="0"),r||null}return null},getParent:function(t){var n=null;return(n=t.id!==void 0?t:this.getItem(t))?n[this.$parentProperty]:this.$getRootId()},clearAll:function(){this._branches={},Ae.prototype.clearAll.call(this)},calculateItemLevel:function(t){var n=0;return this.eachParent(function(){n++},t),n},_setParentInner:function(t,n,e){e||(t.hasOwnProperty("$rendered_parent")?this._move_branch(t,t.$rendered_parent,n):this._move_branch(t,t[this.$parentProperty],n))},setParent:function(t,n,e){this._setParentInner(t,n,e),t[this.$parentProperty]=n},_eachItemCached:function(t,n){for(var e=0,i=n.length;e<i;e++)t.call(this,n[e])},_eachItemIterate:function(t,n,e){var i=this.getChildren(n);for(i.length&&(i=i.slice().reverse());i.length;){var r=i.pop(),a=this.getItem(r);if(t.call(this,a),e&&e.push(a),this.hasChild(a.id))for(var s=this.getChildren(a.id),l=s.length-1;l>=0;l--)i.push(s[l])}},eachItem:function(t,n){var e=this.$getRootId();Mt(n)||(n=e);var i=De(n,e)||e,r=!1,a=!1,s=null;i===e&&(this._eachItemMainRangeCache?(r=!0,s=this._eachItemMainRangeCache):(a=!0,s=this._eachItemMainRangeCache=[])),r?this._eachItemCached(t,s):this._eachItemIterate(t,i,a?s:null)},eachParent:function(t,n){for(var e={},i=n,r=this.getParent(i);this.exists(r);){if(e[r])throw new Error("Invalid tasks tree. Cyclic reference has been detected on task "+r);e[r]=!0,i=this.getItem(r),t.call(this,i),r=this.getParent(i)}},_add_branch:function(t,n,e){var i=e===void 0?this.getParent(t):e;this.hasChild(i)||(this._branches[i]=ke.$create());var r=this.getChildren(i);r.indexOf(t.id+"")>-1||r.indexOf(+t.id)>-1||(1*n==n?r.splice(n,0,t.id):r.push(t.id),t.$rendered_parent=i)},_move_branch:function(t,n,e){this._eachItemMainRangeCache=null,this._replace_branch_child(n,t.id),this.exists(e)||e==this.$getRootId()?this._add_branch(t,void 0,e):delete this._branches[t.id],t.$level=this.calculateItemLevel(t),this.eachItem(function(i){i.$level=this.calculateItemLevel(i)},t.id)},_replace_branch_child:function(t,n,e){var i=this.getChildren(t);if(i&&t!==void 0){var r=ke.$create();let a=i.indexOf(n+"");a!=-1||isNaN(+n)||(a=i.indexOf(+n)),a>-1&&(e?i.splice(a,1,e):i.splice(a,1)),r=i,this._branches[t]=r}},sort:function(t,n,e){this.exists(e)||(e=this.$getRootId()),t||(t="order");var i=typeof t=="string"?function(c,u){return c[t]==u[t]||de(c[t])&&de(u[t])&&c[t].valueOf()==u[t].valueOf()?0:c[t]>u[t]?1:-1}:t;if(n){var r=i;i=function(c,u){return r(u,c)}}var a=this.getChildren(e);if(a){for(var s=[],l=a.length-1;l>=0;l--)s[l]=this.getItem(a[l]);for(s.sort(i),l=0;l<s.length;l++)a[l]=s[l].id,this.sort(t,n,a[l])}},filter:function(t){for(let n in this.pull){const e=this.pull[n].$rendered_parent,i=this.getParent(this.pull[n]);e!==i&&this._move_branch(this.pull[n],e,i)}return Ae.prototype.filter.apply(this,arguments)},open:function(t){this.exists(t)&&(this.getItem(t).$open=!0,this._skipTaskRecalculation=!0,this.callEvent("onItemOpen",[t]))},close:function(t){this.exists(t)&&(this.getItem(t).$open=!1,this._skipTaskRecalculation=!0,this.callEvent("onItemClose",[t]))},destructor:function(){Ae.prototype.destructor.call(this),this._branches=null,this._indexRangeCache={},this._eachItemMainRangeCache=null}},Ae.prototype);const gv=function(t,n){const e=n.getDatastore(t),i=function(l,c){const u=c.getLayers(),h=e.getItem(l);if(h&&e.isVisible(l))for(let _=0;_<u.length;_++)u[_].render_item(h)},r=function(l){const c=l.getLayers();for(let m=0;m<c.length;m++)c[m].clear();let u=null;const h={};for(let m=0;m<c.length;m++){const v=c[m];let $;if(v.get_visible_range){var _=v.get_visible_range(e);if(_.start!==void 0&&_.end!==void 0){var g=_.start+" - "+_.end;h[g]?$=h[g]:($=e.getIndexRange(_.start,_.end),h[g]=$)}else{if(_.ids===void 0)throw new Error("Invalid range returned from 'getVisibleRange' of the layer");$=_.ids.map(function(x){return e.getItem(x)})}}else u||(u=e.getVisibleItems()),$=u;v.prepare_data&&v.prepare_data($),c[m].render_items($)}},a=function(l){if(l.update_items){let u=[];if(l.get_visible_range){var c=l.get_visible_range(e);if(c.start!==void 0&&c.end!==void 0&&(u=e.getIndexRange(c.start,c.end)),c.ids!==void 0){let h=c.ids.map(function(_){return e.getItem(_)});h.length>0&&(h=h.filter(_=>_!==void 0),u=u.concat(h))}if((c.start==null||c.end==null)&&c.ids==null)throw new Error("Invalid range returned from 'getVisibleRange' of the layer")}else u=e.getVisibleItems();l.prepare_data&&l.prepare_data(u,l),l.update_items(u)}};function s(l){return!!l.$services.getService("state").getState("batchUpdate").batch_update}e.attachEvent("onStoreUpdated",function(l,c,u){if(Bt(n))return!0;const h=n.$services.getService("layers").getDataRender(t);h&&(h.onUpdateRequest=function(_){a(_)})}),e.attachEvent("onStoreUpdated",function(l,c,u){s(n)||(l&&u!="move"&&u!="delete"?(e.callEvent("onBeforeRefreshItem",[c.id]),e.callEvent("onAfterRefreshItem",[c.id])):(e.callEvent("onBeforeRefreshAll",[]),e.callEvent("onAfterRefreshAll",[])))}),e.attachEvent("onAfterRefreshAll",function(){if(Bt(n))return!0;const l=n.$services.getService("layers").getDataRender(t);l&&!s(n)&&r(l)}),e.attachEvent("onAfterRefreshItem",function(l){if(Bt(n))return!0;const c=n.$services.getService("layers").getDataRender(t);c&&i(l,c)}),e.attachEvent("onItemOpen",function(){if(Bt(n))return!0;n.render()}),e.attachEvent("onItemClose",function(){if(Bt(n))return!0;n.render()}),e.attachEvent("onIdChange",function(l,c){if(Bt(n))return!0;if(e.callEvent("onBeforeIdChange",[l,c]),!s(n)&&!e.isSilent()){const u=n.$services.getService("layers").getDataRender(t);u?(function(h,_,g){for(let m=0;m<h.length;m++)h[m].change_id(_,g)}(u.getLayers(),l,c,e.getItem(c)),i(c,u)):n.render()}})};function ja(){for(var t=this.$services.getService("datastores"),n=[],e=0;e<t.length;e++){var i=this.getDatastore(t[e]);i.$destroyed||n.push(i)}return n}const pv={create:function(){var t=ut({},{createDatastore:function(n){var e=(n.type||"").toLowerCase()=="treedatastore"?Pc:Ae;if(n){var i=this;n.openInitially=function(){return i.config.open_tree_initially},n.copyOnParse=function(){return i.config.deepcopy_on_parse}}var r=new e(n);if(this.mixin(r,function(l){var c=null,u=l._removeItemInner;function h(_){c=null,this.callEvent("onAfterUnselect",[_])}return l._removeItemInner=function(_){return c==_&&h.call(this,_),c&&this.eachItem&&this.eachItem(function(g){g.id==c&&h.call(this,g.id)},_),u.apply(this,arguments)},l.attachEvent("onIdChange",function(_,g){l.getSelectedId()==_&&l.silent(function(){l.unselect(_),l.select(g)})}),{select:function(_){if(_){if(c==_)return c;if(!this._skip_refresh&&!this.callEvent("onBeforeSelect",[_]))return!1;this.unselect(),c=_,this._skip_refresh||(this.refresh(_),this.callEvent("onAfterSelect",[_]))}return c},getSelectedId:function(){return c},isSelected:function(_){return _==c},unselect:function(_){(_=_||c)&&(c=null,this._skip_refresh||(this.refresh(_),h.call(this,_)))}}}(r)),n.name){var a="datastore:"+n.name;r.attachEvent("onDestroy",(function(){this.$services.dropService(a);for(var l=this.$services.getService("datastores"),c=0;c<l.length;c++)if(l[c]===n.name){l.splice(c,1);break}}).bind(this)),this.$services.dropService(a),this.$services.setService(a,function(){return r});var s=this.$services.getService("datastores");s?s.indexOf(n.name)<0&&s.push(n.name):(s=[],this.$services.setService("datastores",function(){return s}),s.push(n.name)),gv(n.name,this)}return r},getDatastore:function(n){return this.$services.getService("datastore:"+n)},_getDatastores:ja,refreshData:function(){var n;Bt(this)||(n=this.getScrollState()),this.callEvent("onBeforeDataRender",[]);for(var e=ja.call(this),i=0;i<e.length;i++)e[i].refresh();this.config.preserve_scroll&&!Bt(this)&&(n.x||n.y)&&this.scrollTo(n.x,n.y),this.callEvent("onDataRender",[])},isChildOf:function(n,e){return this.$data.tasksStore.isChildOf(n,e)},refreshTask:function(n,e){var i=this.getTask(n),r=this;function a(){if(e===void 0||e){for(var l=0;l<i.$source.length;l++)r.refreshLink(i.$source[l]);for(l=0;l<i.$target.length;l++)r.refreshLink(i.$target[l])}}if(i&&this.isTaskVisible(n))this.$data.tasksStore.refresh(n,!!this.getState("tasksDnd").drag_id||e===!1),a();else if(this.isTaskExists(n)&&this.isTaskExists(this.getParent(n))&&!this._bulk_dnd){this.refreshTask(this.getParent(n));var s=!1;this.eachParent(function(l){(s||this.isSplitTask(l))&&(s=!0)},n),s&&a()}},refreshLink:function(n){this.$data.linksStore.refresh(n,!!this.getState("tasksDnd").drag_id)},silent:function(n){var e=this;e.$data.tasksStore.silent(function(){e.$data.linksStore.silent(function(){n()})})},clearAll:function(){for(var n=ja.call(this),e=0;e<n.length;e++)n[e].silent(function(){n[e].clearAll()});for(e=0;e<n.length;e++)n[e].clearAll();this._update_flags(),this.userdata={},this.callEvent("onClear",[]),this.render()},_clear_data:function(){this.$data.tasksStore.clearAll(),this.$data.linksStore.clearAll(),this._update_flags(),this.userdata={}},selectTask:function(n){var e=this.$data.tasksStore;if(!this.config.select_task)return!1;if(n=De(n,this.config.root_id)){let i=this.getSelectedId();e._skipResourceRepaint=!0,e.select(n),e._skipResourceRepaint=!1,i&&e.pull[i].$split_subtask&&i!=n&&this.refreshTask(i),e.pull[n].$split_subtask&&i!=n&&this.refreshTask(n)}return e.getSelectedId()},unselectTask:function(n){var e=this.$data.tasksStore;e.unselect(n),n&&e.pull[n].$split_subtask&&this.refreshTask(n)},isSelectedTask:function(n){return this.$data.tasksStore.isSelected(n)},getSelectedId:function(){return this.$data.tasksStore.getSelectedId()}});return ut(t,{getTask:function(n){n=De(n,this.config.root_id),this.assert(n,"Invalid argument for gantt.getTask");var e=this.$data.tasksStore.getItem(n);return this.assert(e,"Task not found id="+n),e},getTaskByTime:function(n,e){var i=this.$data.tasksStore.getItems(),r=[];if(n||e){n=+n||-1/0,e=+e||1/0;for(var a=0;a<i.length;a++){var s=i[a];+s.start_date<e&&+s.end_date>n&&r.push(s)}}else r=i;return r},isTaskExists:function(n){return!(!this.$data||!this.$data.tasksStore)&&this.$data.tasksStore.exists(n)},updateTask:function(n,e){Mt(e)||(e=this.getTask(n)),this.$data.tasksStore.updateItem(n,e),this.isTaskExists(n)&&this.refreshTask(n)},addTask:function(n,e,i){if(Mt(n.id)||(n.id=Me()),this.isTaskExists(n.id)&&this.getTask(n.id).$index!=n.$index)return n.start_date&&typeof n.start_date=="string"&&(n.start_date=this.date.parseDate(n.start_date,"parse_date")),n.end_date&&typeof n.end_date=="string"&&(n.end_date=this.date.parseDate(n.end_date,"parse_date")),this.$data.tasksStore.updateItem(n.id,n);if(Mt(e)||(e=this.getParent(n)||0),this.isTaskExists(e)||(e=this.config.root_id),this.setParent(n,e),this.getState().lightbox&&this.isTaskExists(e)){var r=this.getTask(e);this.callEvent("onAfterParentExpand",[e,r])}return this.$data.tasksStore.addItem(n,i,e)},deleteTask:function(n){return n=De(n,this.config.root_id),this.$data.tasksStore.removeItem(n)},getTaskCount:function(){return this.$data.tasksStore.count()},getVisibleTaskCount:function(){return this.$data.tasksStore.countVisible()},getTaskIndex:function(n){return this.$data.tasksStore.getBranchIndex(n)},getGlobalTaskIndex:function(n){return n=De(n,this.config.root_id),this.assert(n,"Invalid argument"),this.$data.tasksStore.getIndexById(n)},eachTask:function(n,e,i){return this.$data.tasksStore.eachItem(_t(n,i||this),e)},eachParent:function(n,e,i){return this.$data.tasksStore.eachParent(_t(n,i||this),e)},changeTaskId:function(n,e){this.$data.tasksStore.changeId(n,e);var i=this.$data.tasksStore.getItem(e),r=[];i.$source&&(r=r.concat(i.$source)),i.$target&&(r=r.concat(i.$target));for(var a=0;a<r.length;a++){var s=this.getLink(r[a]);s.source==n&&(s.source=e),s.target==n&&(s.target=e)}},calculateTaskLevel:function(n){return this.$data.tasksStore.calculateItemLevel(n)},getNext:function(n){return this.$data.tasksStore.getNext(n)},getPrev:function(n){return this.$data.tasksStore.getPrev(n)},getParent:function(n){return this.$data.tasksStore.getParent(n)},setParent:function(n,e,i){return this.$data.tasksStore.setParent(n,e,i)},getSiblings:function(n){return this.$data.tasksStore.getSiblings(n).slice()},getNextSibling:function(n){return this.$data.tasksStore.getNextSibling(n)},getPrevSibling:function(n){return this.$data.tasksStore.getPrevSibling(n)},getTaskByIndex:function(n){var e=this.$data.tasksStore.getIdByIndex(n);return this.isTaskExists(e)?this.getTask(e):null},getChildren:function(n){return this.hasChild(n)?this.$data.tasksStore.getChildren(n).slice():[]},hasChild:function(n){return this.$data.tasksStore.hasChild(n)},open:function(n){this.$data.tasksStore.open(n)},close:function(n){this.$data.tasksStore.close(n)},moveTask:function(n,e,i){return i=De(i,this.config.root_id),this.$data.tasksStore.move.apply(this.$data.tasksStore,arguments)},sort:function(n,e,i,r){var a=!r;this.$data.tasksStore.sort(n,e,i),this.callEvent("onAfterSort",[n,e,i]),a&&this.render()}}),ut(t,{getLinkCount:function(){return this.$data.linksStore.count()},getLink:function(n){return this.$data.linksStore.getItem(n)},getLinks:function(){return this.$data.linksStore.getItems()},isLinkExists:function(n){return this.$data.linksStore.exists(n)},addLink:function(n){const e=this.$data.linksStore.addItem(n);return this.$data.linksStore.isSilent()&&this.$data.linksStore.fullOrder.push(e),e},updateLink:function(n,e){Mt(e)||(e=this.getLink(n)),this.$data.linksStore.updateItem(n,e)},deleteLink:function(n){return this.$data.linksStore.removeItem(n)},changeLinkId:function(n,e){return this.$data.linksStore.changeId(n,e)}}),t}};function as(t){var n=t.date,e=t.$services;return{getSum:function(i,r,a){a===void 0&&(a=i.length-1),r===void 0&&(r=0);for(var s=0,l=r;l<=a;l++)s+=i[l];return s},setSumWidth:function(i,r,a,s){var l=r.width;s===void 0&&(s=l.length-1),a===void 0&&(a=0);var c=s-a+1;if(!(a>l.length-1||c<=0||s>l.length-1)){var u=i-this.getSum(l,a,s);this.adjustSize(u,l,a,s),this.adjustSize(-u,l,s+1),r.full_width=this.getSum(l)}},splitSize:function(i,r){for(var a=[],s=0;s<r;s++)a[s]=0;return this.adjustSize(i,a),a},adjustSize:function(i,r,a,s){a||(a=0),s===void 0&&(s=r.length-1);for(var l=s-a+1,c=this.getSum(r,a,s),u=a;u<=s;u++){var h=Math.floor(i*(c?r[u]/c:1/l));c-=r[u],i-=h,l--,r[u]+=h}r[r.length-1]+=i},sortScales:function(i){function r(s,l){var c=new Date(1970,0,1);return n.add(c,l,s)-c}i.sort(function(s,l){return r(s.unit,s.step)<r(l.unit,l.step)?1:r(s.unit,s.step)>r(l.unit,l.step)?-1:0});for(var a=0;a<i.length;a++)i[a].index=a},_isLegacyMode:function(i){var r=i||t.config;return r.scale_unit||r.date_scale||r.subscales},_prepareScaleObject:function(i){var r=i.format;return r||(r=i.template||i.date||"%d %M"),typeof r=="string"&&(r=t.date.date_to_str(r)),{unit:i.unit||"day",step:i.step||1,format:r,css:i.css}},primaryScale:function(i){var r,a=e.getService("templateLoader"),s=this._isLegacyMode(i),l=i||t.config;if(s)a.initTemplate("date_scale",void 0,void 0,l,t.config.templates),r={unit:t.config.scale_unit,step:t.config.step,template:t.templates.date_scale,date:t.config.date_scale,css:t.templates.scale_cell_class};else{var c=l.scales[0];r={unit:c.unit,step:c.step,template:c.template,format:c.format,date:c.date,css:c.css||t.templates.scale_cell_class}}return this._prepareScaleObject(r)},getSubScales:function(i){var r,a=this._isLegacyMode(i),s=i||t.config;if(a){let l="https://docs.dhtmlx.com/gantt/migrating.html#:~:text=%3D%20false%3B-,Time%20scale%20settings,-Configuration%20of%20time";t.env.isFF&&(l="https://docs.dhtmlx.com/gantt/migrating.html#6162"),console.warn(`You are using the obsolete scale configuration.
It will stop working in the future versions.
Please migrate the configuration to the newer version:
${l}`),r=s.subscales||[]}else r=s.scales.slice(1);return r.map((function(l){return this._prepareScaleObject(l)}).bind(this))},prepareConfigs:function(i,r,a,s,l,c,u){for(var h=this.splitSize(s,i.length),_=a,g=[],m=i.length-1;m>=0;m--){var v=m==i.length-1,$=this.initScaleConfig(i[m],l,c);v&&this.processIgnores($),this.initColSizes($,r,_,h[m]),this.limitVisibleRange($),v&&(_=$.full_width),g.unshift($)}for(m=0;m<g.length-1;m++)this.alineScaleColumns(g[g.length-1],g[m]);for(m=0;m<g.length;m++)u&&this.reverseScale(g[m]),this.setPosSettings(g[m]);return g},reverseScale:function(i){i.width=i.width.reverse(),i.trace_x=i.trace_x.reverse();var r=i.trace_indexes;i.trace_indexes={},i.trace_index_transition={},i.rtl=!0;for(var a=0;a<i.trace_x.length;a++)i.trace_indexes[i.trace_x[a].valueOf()]=a,i.trace_index_transition[r[i.trace_x[a].valueOf()]]=a;return i},setPosSettings:function(i){for(var r=0,a=i.trace_x.length;r<a;r++)i.left.push((i.width[r-1]||0)+(i.left[r-1]||0))},_ignore_time_config:function(i,r){if(t.config.skip_off_time){for(var a=!0,s=i,l=0;l<r.step;l++)l&&(s=n.add(i,l,r.unit)),a=a&&!this.isWorkTime(s,r.unit);return a}return!1},processIgnores:function(i){i.ignore_x={},i.display_count=i.count},initColSizes:function(i,r,a,s){var l=a;i.height=s;var c=i.display_count===void 0?i.count:i.display_count;c||(c=1),i.col_width=Math.floor(l/c),r&&i.col_width<r&&(i.col_width=r,l=i.col_width*c),i.width=[];for(var u=i.ignore_x||{},h=0;h<i.trace_x.length;h++)if(u[i.trace_x[h].valueOf()]||i.display_count==i.count)i.width[h]=0;else{var _=1;i.unit=="month"&&(_=Math.round((n.add(i.trace_x[h],i.step,i.unit)-i.trace_x[h])/864e5)),i.width[h]=_}this.adjustSize(l-this.getSum(i.width),i.width),i.full_width=this.getSum(i.width)},initScaleConfig:function(i,r,a){var s=ut({count:0,col_width:0,full_width:0,height:0,width:[],left:[],trace_x:[],trace_indexes:{},min_date:new Date(r),max_date:new Date(a)},i);return this.eachColumn(i.unit,i.step,r,a,function(l){s.count++,s.trace_x.push(new Date(l)),s.trace_indexes[l.valueOf()]=s.trace_x.length-1}),s.trace_x_ascending=s.trace_x.slice(),s},iterateScales:function(i,r,a,s,l){for(var c=r.trace_x,u=i.trace_x,h=a||0,_=s||u.length-1,g=0,m=1;m<c.length;m++){var v=i.trace_indexes[+c[m]];v!==void 0&&v<=_&&(l&&l.apply(this,[g,m,h,v]),h=v,g=m)}},alineScaleColumns:function(i,r,a,s){this.iterateScales(i,r,a,s,function(l,c,u,h){var _=this.getSum(i.width,u,h-1);this.getSum(r.width,l,c-1)!=_&&this.setSumWidth(_,r,l,c-1)})},eachColumn:function(i,r,a,s,l){var c=new Date(a),u=new Date(s);n[i+"_start"]&&(c=n[i+"_start"](c));var h=new Date(c);for(+h>=+u&&(u=n.add(h,r,i));+h<+u;){l.call(this,new Date(h));var _=h.getTimezoneOffset();h=n.add(h,r,i),h=t._correct_dst_change(h,_,r,i),n[i+"_start"]&&(h=n[i+"_start"](h))}},limitVisibleRange:function(i){var r=i.trace_x,a=i.width.length-1,s=0;if(+r[0]<+i.min_date&&a!=0){var l=Math.floor(i.width[0]*((r[1]-i.min_date)/(r[1]-r[0])));s+=i.width[0]-l,i.width[0]=l,r[0]=new Date(i.min_date)}var c=r.length-1,u=r[c],h=n.add(u,i.step,i.unit);if(+h>+i.max_date&&c>0&&(l=i.width[c]-Math.floor(i.width[c]*((h-i.max_date)/(h-u))),s+=i.width[c]-l,i.width[c]=l),s){for(var _=this.getSum(i.width),g=0,m=0;m<i.width.length;m++){var v=Math.floor(s*(i.width[m]/_));i.width[m]+=v,g+=v}this.adjustSize(s-g,i.width)}}}}function mv(t){var n=function(h){var _=new as(h).primaryScale(),g=_.unit,m=_.step;if(h.config.scale_offset_minimal){var v=new as(h),$=[v.primaryScale()].concat(v.getSubScales());v.sortScales($),g=$[$.length-1].unit,m=$[$.length-1].step||1}return{unit:g,step:m}}(t),e=n.unit,i=n.step,r=function(h,_){var g={start_date:null,end_date:null};if(_.config.start_date&&_.config.end_date){g.start_date=_.date[h+"_start"](new Date(_.config.start_date));var m=new Date(_.config.end_date),v=_.date[h+"_start"](new Date(m));m=+m!=+v?_.date.add(v,1,h):v,g.end_date=m}return g}(e,t);if(!r.start_date||!r.end_date){for(var a=!0,s=t.getTaskByTime(),l=0;l<s.length;l++)if(s[l].type!==t.config.types.project){a=!1;break}if(s.length&&a){var c=s[0].start_date,u=t.date.add(c,1,t.config.duration_unit);r={start_date:new Date(c),end_date:new Date(u)}}else r=t.getSubtaskDates();r.start_date&&r.end_date||(r={start_date:new Date,end_date:new Date}),t.eachTask(function(h){t.config.deadlines&&h.deadline&&Ga(r,h.deadline,h.deadline),h.constraint_date&&h.constraint_type&&t.config.constraint_types&&h.constraint_type!==t.config.constraint_types.ASAP&&h.constraint_type!==t.config.constraint_types.ALAP&&Ga(r,h.constraint_date,h.constraint_date),t.config.baselines&&h.baselines&&h.baselines.forEach(function(_){Ga(r,_.start_date,_.end_date)})}),r.start_date=t.date[e+"_start"](r.start_date),r.start_date=t.calculateEndDate({start_date:t.date[e+"_start"](r.start_date),duration:-1,unit:e,step:i}),r.end_date=t.date[e+"_start"](r.end_date),r.end_date=t.calculateEndDate({start_date:r.end_date,duration:2,unit:e,step:i})}t._min_date=r.start_date,t._max_date=r.end_date}function Ga(t,n,e){n<t.start_date&&(t.start_date=new Date(n)),e>t.end_date&&(t.end_date=new Date(e))}function ss(t){mv(t),function(n){if(n.config.fit_tasks){var e=+n._min_date,i=+n._max_date;if(+n._min_date!=e||+n._max_date!=i)return n.render(),n.callEvent("onScaleAdjusted",[]),!0}}(t)}function sc(t,n,e){for(var i=0;i<n.length;i++)t.isLinkExists(n[i])&&(e[n[i]]=t.getLink(n[i]))}function oc(t,n,e){sc(t,n.$source,e),sc(t,n.$target,e)}const os={getSubtreeLinks:function(t,n){var e={};return t.isTaskExists(n)&&oc(t,t.getTask(n),e),t.eachTask(function(i){oc(t,i,e)},n),e},getSubtreeTasks:function(t,n){var e={};return t.eachTask(function(i){e[i.id]=i},n),e}};class vv{constructor(n,e){this.$gantt=n,this.$dp=e,this._dataProcessorHandlers=[]}attach(){const n=this.$dp,e=this.$gantt,i={},r=l=>this.clientSideDelete(l,n,e);this._dataProcessorHandlers.push(e.attachEvent("onAfterTaskAdd",function(l,c){e.isTaskExists(l)&&(n.setGanttMode("tasks"),n.setUpdated(l,!0,"inserted"))})),this._dataProcessorHandlers.push(e.attachEvent("onAfterTaskUpdate",function(l,c){e.isTaskExists(l)&&(n.setGanttMode("tasks"),n.setUpdated(l,!0),e._sendTaskOrder&&e._sendTaskOrder(l,c))})),this._dataProcessorHandlers.push(e.attachEvent("onBeforeTaskDelete",function(l,c){return e.config.cascade_delete&&(i[l]={tasks:os.getSubtreeTasks(e,l),links:os.getSubtreeLinks(e,l)}),!n.deleteAfterConfirmation||(n.setGanttMode("tasks"),n.setUpdated(l,!0,"deleted"),!1)})),this._dataProcessorHandlers.push(e.attachEvent("onAfterTaskDelete",function(l,c){n.setGanttMode("tasks");const u=!r(l),h=e.config.cascade_delete&&i[l];if(u||h){if(h){const _=n.updateMode;n.setUpdateMode("off");const g=i[l];for(const m in g.tasks)r(m)||(n.storeItem(g.tasks[m]),n.setUpdated(m,!0,"deleted"));n.setGanttMode("links");for(const m in g.links)r(m)||(n.storeItem(g.links[m]),n.setUpdated(m,!0,"deleted"));i[l]=null,_!=="off"&&n.sendAllData(),n.setGanttMode("tasks"),n.setUpdateMode(_)}u&&(n.storeItem(c),n.deleteAfterConfirmation||n.setUpdated(l,!0,"deleted")),n.updateMode==="off"||n._tSend||n.sendAllData()}})),this._dataProcessorHandlers.push(e.attachEvent("onAfterLinkUpdate",function(l,c){e.isLinkExists(l)&&(n.setGanttMode("links"),n.setUpdated(l,!0))})),this._dataProcessorHandlers.push(e.attachEvent("onAfterLinkAdd",function(l,c){e.isLinkExists(l)&&(n.setGanttMode("links"),n.setUpdated(l,!0,"inserted"))})),this._dataProcessorHandlers.push(e.attachEvent("onAfterLinkDelete",function(l,c){n.setGanttMode("links"),!r(l)&&(n.storeItem(c),n.setUpdated(l,!0,"deleted"))})),this._dataProcessorHandlers.push(e.attachEvent("onRowDragEnd",function(l,c){e._sendTaskOrder(l,e.getTask(l))}));let a=null,s=null;this._dataProcessorHandlers.push(e.attachEvent("onTaskIdChange",function(l,c){if(!n._waitMode)return;const u=e.getChildren(c);if(u.length){a=a||{};for(let _=0;_<u.length;_++){const g=this.getTask(u[_]);a[g.id]=g}}const h=function(_){let g=[];return _.$source&&(g=g.concat(_.$source)),_.$target&&(g=g.concat(_.$target)),g}(this.getTask(c));if(h.length){s=s||{};for(let _=0;_<h.length;_++){const g=this.getLink(h[_]);s[g.id]=g}}})),n.attachEvent("onAfterUpdateFinish",function(){(a||s)&&(e.batchUpdate(function(){for(const l in a)e.updateTask(a[l].id);for(const l in s)e.updateLink(s[l].id);a=null,s=null}),a?e._dp.setGanttMode("tasks"):e._dp.setGanttMode("links"))}),n.attachEvent("onBeforeDataSending",function(){if(this._tMode==="CUSTOM")return!0;let l=this._serverProcessor;if(this._tMode==="REST-JSON"||this._tMode==="REST"){const c=this._ganttMode;l=l.substring(0,l.indexOf("?")>-1?l.indexOf("?"):l.length),this.serverProcessor=l+(l.slice(-1)==="/"?"":"/")+c}else{const c=this._ganttMode+"s";this.serverProcessor=l+e.ajax.urlSeparator(l)+"gantt_mode="+c}return!0}),n.attachEvent("insertCallback",function(l,c,u,h){const _=l.data||e.xml._xmlNodeToJSON(l.firstChild),g={add:e.addTask,isExist:e.isTaskExists};h==="links"&&(g.add=e.addLink,g.isExist=e.isLinkExists),g.isExist.call(e,c)||(_.id=c,g.add.call(e,_))}),n.attachEvent("updateCallback",function(l,c){const u=l.data||e.xml._xmlNodeToJSON(l.firstChild);if(!e.isTaskExists(c))return;const h=e.getTask(c);for(const _ in u){let g=u[_];switch(_){case"id":continue;case"start_date":case"end_date":g=e.defined(e.templates.xml_date)?e.templates.xml_date(g):e.templates.parse_date(g);break;case"duration":h.end_date=e.calculateEndDate({start_date:h.start_date,duration:g,task:h})}h[_]=g}e.updateTask(c),e.refreshData()}),n.attachEvent("deleteCallback",function(l,c,u,h){const _={delete:e.deleteTask,isExist:e.isTaskExists};h==="links"?(_.delete=e.deleteLink,_.isExist=e.isLinkExists):h==="assignment"&&(_.delete=function(g){e.$data.assignmentsStore.remove(g)},_.isExist=function(g){return e.$data.assignmentsStore.exists(g)}),_.isExist.call(e,c)&&_.delete.call(e,c)}),this.handleResourceCRUD(n,e),this.handleResourceAssignmentCRUD(n,e),this.handleBaselineCRUD(n,e)}clientSideDelete(n,e,i){const r=e.updatedRows.slice();let a=!1;i.getUserData(n,"!nativeeditor_status",e._ganttMode)==="true_deleted"&&(a=!0,e.setUpdated(n,!1));for(let s=0;s<r.length&&!e._in_progress[n];s++)r[s]===n&&(i.getUserData(n,"!nativeeditor_status",e._ganttMode)==="inserted"&&(a=!0),e.setUpdated(n,!1));return a}handleResourceAssignmentCRUD(n,e){if(!e.config.resources||e.config.resources.dataprocessor_assignments!==!0)return;const i=e.getDatastore(e.config.resource_assignment_store),r={},a={};function s(l){const c=l.id;i.exists(c)&&(n.setGanttMode("assignment"),n.setUpdated(c,!0,"inserted")),delete a[c]}e.attachEvent("onBeforeTaskAdd",function(l,c){return r[l]=!0,!0}),e.attachEvent("onTaskIdChange",function(l,c){delete r[l]}),i.attachEvent("onAfterAdd",(l,c)=>{r[c.task_id]?function(u){a[u.id]=u,r[u.task_id]=!0}(c):s(c)}),i.attachEvent("onAfterUpdate",(l,c)=>{i.exists(l)&&(a[l]?s(c):(n.setGanttMode("assignment"),n.setUpdated(l,!0)))}),i.attachEvent("onAfterDelete",(l,c)=>{n.setGanttMode("assignment"),!this.clientSideDelete(l,n,e)&&(n.storeItem(c),n.setUpdated(l,!0,"deleted"))})}handleResourceCRUD(n,e){if(!e.config.resources||e.config.resources.dataprocessor_resources!==!0)return;const i=e.getDatastore(e.config.resource_store);i.attachEvent("onAfterAdd",(r,a)=>{(function(s){const l=s.id;i.exists(l)&&(n.setGanttMode("resource"),n.setUpdated(l,!0,"inserted"))})(a)}),i.attachEvent("onAfterUpdate",(r,a)=>{i.exists(r)&&(n.setGanttMode("resource"),n.setUpdated(r,!0))}),i.attachEvent("onAfterDelete",(r,a)=>{n.setGanttMode("resource"),!this.clientSideDelete(r,n,e)&&(n.storeItem(a),n.setUpdated(r,!0,"deleted"))})}handleBaselineCRUD(n,e){if(!e.config.baselines||e.config.baselines.dataprocessor_baselines!==!0)return;const i=e.getDatastore(e.config.baselines.datastore);i.attachEvent("onAfterAdd",(r,a)=>{(function(s){const l=s.id;i.exists(l)&&(n.setGanttMode("baseline"),n.setUpdated(l,!0,"inserted"))})(a)}),i.attachEvent("onAfterUpdate",(r,a)=>{i.exists(r)&&(n.setGanttMode("baseline"),n.setUpdated(r,!0))}),i.attachEvent("onAfterDelete",(r,a)=>{n.setGanttMode("baseline"),!this.clientSideDelete(r,n,e)&&(n.storeItem(a),n.setUpdated(r,!0,"deleted"))})}detach(){bn(this._dataProcessorHandlers,n=>{this.$gantt.detachEvent(n)}),this._dataProcessorHandlers=[]}}const ls=class{constructor(){this.clear=()=>{this._storage={}},this.storeItem=n=>{this._storage[n.id]=qt(n)},this.getStoredItem=n=>this._storage[n]||null,this._storage={}}};ls.create=()=>new ls;let lc=ls,cc=class{constructor(t){this.serverProcessor=t,this.action_param="!nativeeditor_status",this.updatedRows=[],this.autoUpdate=!0,this.updateMode="cell",this._headers=null,this._payload=null,this._postDelim="_",this._routerParametersFormat="parameters",this._waitMode=0,this._in_progress={},this._storage=lc.create(),this._invalid={},this.messages=[],this.styles={updated:"font-weight:bold;",inserted:"font-weight:bold;",deleted:"text-decoration : line-through;",invalid:"background-color:FFE0E0;",invalid_cell:"border-bottom:2px solid red;",error:"color:red;",clear:"font-weight:normal;text-decoration:none;"},this.enableUTFencoding(!0),Le(this)}setTransactionMode(t,n){typeof t=="object"?(this._tMode=t.mode||this._tMode,Mt(t.headers)&&(this._headers=t.headers),Mt(t.payload)&&(this._payload=t.payload),this._tSend=!!n):(this._tMode=t,this._tSend=n),this._tMode==="REST"&&(this._tSend=!1),this._tMode==="JSON"||this._tMode==="REST-JSON"?(this._tSend=!1,this._serializeAsJson=!0,this._headers=this._headers||{},this._headers["Content-Type"]="application/json"):this._headers&&!this._headers["Content-Type"]&&(this._headers["Content-Type"]="application/x-www-form-urlencoded"),this._tMode==="CUSTOM"&&(this._tSend=!1,this._router=t.router)}escape(t){return this._utf?encodeURIComponent(t):escape(t)}enableUTFencoding(t){this._utf=!!t}getSyncState(){return!this.updatedRows.length}setUpdateMode(t,n){this.autoUpdate=t==="cell",this.updateMode=t,this.dnd=n}ignore(t,n){this._silent_mode=!0,t.call(n||Oe),this._silent_mode=!1}setUpdated(t,n,e){if(this._silent_mode)return;const i=this.findRow(t);e=e||"updated";const r=this.$gantt.getUserData(t,this.action_param,this._ganttMode);r&&e==="updated"&&(e=r),n?(this.set_invalid(t,!1),this.updatedRows[i]=t,this.$gantt.setUserData(t,this.action_param,e,this._ganttMode),this._in_progress[t]&&(this._in_progress[t]="wait")):this.is_invalid(t)||(this.updatedRows.splice(i,1),this.$gantt.setUserData(t,this.action_param,"",this._ganttMode)),this.markRow(t,n,e),n&&this.autoUpdate&&this.sendData(t)}markRow(t,n,e){let i="";const r=this.is_invalid(t);if(r&&(i=this.styles[r],n=!0),this.callEvent("onRowMark",[t,n,e,r])&&(i=this.styles[n?e:"clear"]+" "+i,this.$gantt[this._methods[0]](t,i),r&&r.details)){i+=this.styles[r+"_cell"];for(let a=0;a<r.details.length;a++)r.details[a]&&this.$gantt[this._methods[1]](t,a,i)}}getActionByState(t){return t==="inserted"?"create":t==="updated"?"update":t==="deleted"?"delete":"update"}getState(t){return this.$gantt.getUserData(t,this.action_param,this._ganttMode)}is_invalid(t){return this._invalid[t]}set_invalid(t,n,e){e&&(n={value:n,details:e,toString:function(){return this.value.toString()}}),this._invalid[t]=n}checkBeforeUpdate(t){return!0}sendData(t){if(this.$gantt.editStop&&this.$gantt.editStop(),t===void 0||this._tSend){const n=[];if(this.modes&&["task","link","assignment","baseline"].forEach(e=>{this.modes[e]&&this.modes[e].updatedRows.length&&n.push(e)}),n.length){for(let e=0;e<n.length;e++)this.setGanttMode(n[e]),this.sendAllData();return}return this.sendAllData()}return!this._in_progress[t]&&(this.messages=[],!(!this.checkBeforeUpdate(t)&&this.callEvent("onValidationError",[t,this.messages]))&&void this._beforeSendData(this._getRowData(t),t))}serialize(t,n){if(this._serializeAsJson)return this._serializeAsJSON(t);if(typeof t=="string")return t;if(n!==void 0)return this.serialize_one(t,"");{const e=[],i=[];for(const r in t)t.hasOwnProperty(r)&&(e.push(this.serialize_one(t[r],r+this._postDelim)),i.push(r));return e.push("ids="+this.escape(i.join(","))),this.$gantt.security_key&&e.push("dhx_security="+this.$gantt.security_key),e.join("&")}}serialize_one(t,n){if(typeof t=="string")return t;const e=[];let i="";for(const r in t)if(t.hasOwnProperty(r)){if((r==="id"||r==this.action_param)&&this._tMode==="REST")continue;i=typeof t[r]=="string"||typeof t[r]=="number"?String(t[r]):JSON.stringify(t[r]),e.push(this.escape((n||"")+r)+"="+this.escape(i))}return e.join("&")}sendAllData(){if(!this.updatedRows.length)return;this.messages=[];let t=!0;if(this._forEachUpdatedRow(function(n){t=t&&this.checkBeforeUpdate(n)}),!t&&!this.callEvent("onValidationError",["",this.messages]))return!1;this._tSend?this._sendData(this._getAllData()):this._forEachUpdatedRow(function(n){if(!this._in_progress[n]){if(this.is_invalid(n))return;this._beforeSendData(this._getRowData(n),n)}})}findRow(t){let n=0;for(n=0;n<this.updatedRows.length&&t!=this.updatedRows[n];n++);return n}defineAction(t,n){this._uActions||(this._uActions={}),this._uActions[t]=n}afterUpdateCallback(t,n,e,i,r){if(!this.$gantt)return;this.setGanttMode(r);const a=t,s=e!=="error"&&e!=="invalid";if(s||this.set_invalid(t,e),this._uActions&&this._uActions[e]&&!this._uActions[e](i))return delete this._in_progress[a];this._in_progress[a]!=="wait"&&this.setUpdated(t,!1);const l=t;switch(e){case"inserted":case"insert":n!=t&&(this.setUpdated(t,!1),this.$gantt[this._methods[2]](t,n),t=n);break;case"delete":case"deleted":if(this.deleteAfterConfirmation&&this._ganttMode==="task"){if(this._ganttMode==="task"&&this.$gantt.isTaskExists(t)){this.$gantt.setUserData(t,this.action_param,"true_deleted",this._ganttMode);const c=this.$gantt.getTask(t);this.$gantt.silent(()=>{this.$gantt.deleteTask(t)}),this.$gantt.callEvent("onAfterTaskDelete",[t,c]),this.$gantt.render(),delete this._in_progress[a]}return this.callEvent("onAfterUpdate",[t,e,n,i])}return this.$gantt.setUserData(t,this.action_param,"true_deleted",this._ganttMode),this.$gantt[this._methods[3]](t),delete this._in_progress[a],this.callEvent("onAfterUpdate",[t,e,n,i])}this._in_progress[a]!=="wait"?(s&&this.$gantt.setUserData(t,this.action_param,"",this._ganttMode),delete this._in_progress[a]):(delete this._in_progress[a],this.setUpdated(n,!0,this.$gantt.getUserData(t,this.action_param,this._ganttMode))),this.callEvent("onAfterUpdate",[l,e,n,i])}afterUpdate(t,n,e){let i;i=arguments.length===3?arguments[1]:arguments[4];let r=this.getGanttMode();const a=i.filePath||i.url;r=this._tMode!=="REST"&&this._tMode!=="REST-JSON"?a.indexOf("gantt_mode=links")!==-1?"link":a.indexOf("gantt_mode=assignments")!==-1?"assignment":a.indexOf("gantt_mode=baselines")!==-1?"baseline":"task":a.indexOf("/link")>=0?"link":a.indexOf("/assignment")>=0?"assignment":a.indexOf("/baseline")>=0?"baseline":"task",this.setGanttMode(r);const s=this.$gantt.ajax;let l;try{l=JSON.parse(n.xmlDoc.responseText)}catch{n.xmlDoc.responseText.length||(l={})}const c=_=>{const g=l.action||this.getState(_)||"updated",m=l.sid||_[0],v=l.tid||_[0];t.afterUpdateCallback(m,v,g,l,r)};if(l)return Array.isArray(e)&&e.length>1?e.forEach(_=>c(_)):c(e),t.finalizeUpdate(),void this.setGanttMode(r);const u=s.xmltop("data",n.xmlDoc);if(!u)return this.cleanUpdate(e);const h=s.xpath("//data/action",u);if(!h.length)return this.cleanUpdate(e);for(let _=0;_<h.length;_++){const g=h[_],m=g.getAttribute("type"),v=g.getAttribute("sid"),$=g.getAttribute("tid");t.afterUpdateCallback(v,$,m,g,r)}t.finalizeUpdate()}cleanUpdate(t){if(t)for(let n=0;n<t.length;n++)delete this._in_progress[t[n]]}finalizeUpdate(){this._waitMode&&this._waitMode--,this.callEvent("onAfterUpdateFinish",[]),this.updatedRows.length||this.callEvent("onFullSync",[])}init(t){if(this._initialized)return;this.$gantt=t,this.$gantt._dp_init&&this.$gantt._dp_init(this),this._setDefaultTransactionMode(),this.styles={updated:"gantt_updated",order:"gantt_updated",inserted:"gantt_inserted",deleted:"gantt_deleted",delete_confirmation:"gantt_deleted",invalid:"gantt_invalid",error:"gantt_error",clear:""},this._methods=["_row_style","setCellTextStyle","_change_id","_delete_task"],function(e,i){e.getUserData=function(r,a,s){return this.userdata||(this.userdata={}),this.userdata[s]=this.userdata[s]||{},this.userdata[s][r]&&this.userdata[s][r][a]?this.userdata[s][r][a]:""},e.setUserData=function(r,a,s,l){this.userdata||(this.userdata={}),this.userdata[l]=this.userdata[l]||{},this.userdata[l][r]=this.userdata[l][r]||{},this.userdata[l][r][a]=s},e._change_id=function(r,a){switch(this._dp._ganttMode){case"task":this.changeTaskId(r,a);break;case"link":this.changeLinkId(r,a);break;case"assignment":this.$data.assignmentsStore.changeId(r,a);break;case"resource":this.$data.resourcesStore.changeId(r,a);break;case"baseline":this.$data.baselineStore.changeId(r,a);break;default:throw new Error(`Invalid mode of the dataProcessor after database id is received: ${this._dp._ganttMode}, new id: ${a}`)}},e._row_style=function(r,a){this._dp._ganttMode==="task"&&e.isTaskExists(r)&&(e.getTask(r).$dataprocessor_class=a,e.refreshTask(r))},e._delete_task=function(r,a){},e._sendTaskOrder=function(r,a){a.$drop_target&&(this._dp.setGanttMode("task"),this.getTask(r).target=a.$drop_target,this._dp.setUpdated(r,!0,"order"),delete this.getTask(r).$drop_target)},e.setDp=function(){this._dp=i},e.setDp()}(this.$gantt,this);const n=new vv(this.$gantt,this);n.attach(),this.attachEvent("onDestroy",function(){delete this.setGanttMode,delete this._getRowData,delete this.$gantt._dp,delete this.$gantt._change_id,delete this.$gantt._row_style,delete this.$gantt._delete_task,delete this.$gantt._sendTaskOrder,delete this.$gantt,n.detach()}),this.$gantt.callEvent("onDataProcessorReady",[this]),this._initialized=!0}setOnAfterUpdate(t){this.attachEvent("onAfterUpdate",t)}setOnBeforeUpdateHandler(t){this.attachEvent("onBeforeDataSending",t)}setAutoUpdate(t,n){t=t||2e3,this._user=n||new Date().valueOf(),this._needUpdate=!1,this._updateBusy=!1,this.attachEvent("onAfterUpdate",this.afterAutoUpdate),this.attachEvent("onFullSync",this.fullSync),setInterval(()=>{this.loadUpdate()},t)}afterAutoUpdate(t,n,e,i){return n!=="collision"||(this._needUpdate=!0,!1)}fullSync(){return this._needUpdate&&(this._needUpdate=!1,this.loadUpdate()),!0}getUpdates(t,n){const e=this.$gantt.ajax;if(this._updateBusy)return!1;this._updateBusy=!0,e.get(t,n)}loadUpdate(){const t=this.$gantt.ajax,n=this.$gantt.getUserData(0,"version",this._ganttMode);let e=this.serverProcessor+t.urlSeparator(this.serverProcessor)+["dhx_user="+this._user,"dhx_version="+n].join("&");e=e.replace("editing=true&",""),this.getUpdates(e,i=>{const r=t.xpath("//userdata",i);this.$gantt.setUserData(0,"version",this._getXmlNodeValue(r[0]),this._ganttMode);const a=t.xpath("//update",i);if(a.length){this._silent_mode=!0;for(let s=0;s<a.length;s++){const l=a[s].getAttribute("status"),c=a[s].getAttribute("id"),u=a[s].getAttribute("parent");switch(l){case"inserted":this.callEvent("insertCallback",[a[s],c,u]);break;case"updated":this.callEvent("updateCallback",[a[s],c,u]);break;case"deleted":this.callEvent("deleteCallback",[a[s],c,u])}}this._silent_mode=!1}this._updateBusy=!1})}destructor(){this.callEvent("onDestroy",[]),this.detachAllEvents(),this.updatedRows=[],this._in_progress={},this._invalid={},this._storage.clear(),this._storage=null,this._headers=null,this._payload=null,delete this._initialized}setGanttMode(t){t==="tasks"?t="task":t==="links"&&(t="link");const n=this.modes||{},e=this.getGanttMode();e&&(n[e]={_in_progress:this._in_progress,_invalid:this._invalid,_storage:this._storage,updatedRows:this.updatedRows});let i=n[t];i||(i=n[t]={_in_progress:{},_invalid:{},_storage:lc.create(),updatedRows:[]}),this._in_progress=i._in_progress,this._invalid=i._invalid,this._storage=i._storage,this.updatedRows=i.updatedRows,this.modes=n,this._ganttMode=t}getGanttMode(){return this._ganttMode}storeItem(t){this._storage.storeItem(t)}url(t){this.serverProcessor=this._serverProcessor=t}_beforeSendData(t,n){if(!this.callEvent("onBeforeUpdate",[n,this.getState(n),t]))return!1;this._sendData(t,n)}_serializeAsJSON(t){if(typeof t=="string")return t;const n=qt(t);return this._tMode==="REST-JSON"&&(delete n.id,delete n[this.action_param]),JSON.stringify(n)}_applyPayload(t){const n=this.$gantt.ajax;if(this._payload)for(const e in this._payload)t=t+n.urlSeparator(t)+this.escape(e)+"="+this.escape(this._payload[e]);return t}_cleanupArgumentsBeforeSend(t){let n;if(t[this.action_param]===void 0){n={};for(const e in t)n[e]=this._cleanupArgumentsBeforeSend(t[e])}else n=this._cleanupItemBeforeSend(t);return n}_cleanupItemBeforeSend(t){let n=null;return t&&(t[this.action_param]==="deleted"?(n={},n.id=t.id,n[this.action_param]=t[this.action_param]):n=t),n}_sendData(t,n){if(!t)return;if(!this.callEvent("onBeforeDataSending",n?[n,this.getState(n),t]:[null,null,t]))return!1;n&&(this._in_progress[n]=new Date().valueOf());const e=this.$gantt.ajax;if(this._tMode==="CUSTOM"){const c=this.getState(n),u=this.getActionByState(c),h=this.getGanttMode(),_=m=>{let v=c||"updated",$=n,x=n;m&&(v=m.action||c,$=m.sid||$,x=m.id||m.tid||x),this.afterUpdateCallback($,x,v,m,h)};let g;if(this._router instanceof Function)if(this._routerParametersFormat==="object"){const m={entity:h,action:u,data:t,id:n};g=this._router(m)}else g=this._router(h,u,t,n);else if(this._router[h]instanceof Function)g=this._router[h](u,t,n);else{const m="Incorrect configuration of gantt.createDataProcessor",v=`
You need to either add missing properties to the dataProcessor router object or to use a router function.
See https://docs.dhtmlx.com/gantt/desktop__server_side.html#customrouting and https://docs.dhtmlx.com/gantt/api__gantt_createdataprocessor.html for details.`;if(!this._router[h])throw new Error(`${m}: router for the **${h}** entity is not defined. ${v}`);switch(c){case"inserted":if(!this._router[h].create)throw new Error(`${m}: **create** action for the **${h}** entity is not defined. ${v}`);g=this._router[h].create(t);break;case"deleted":if(!this._router[h].delete)throw new Error(`${m}: **delete** action for the **${h}** entity is not defined. ${v}`);g=this._router[h].delete(n);break;default:if(!this._router[h].update)throw new Error(`${m}: **update**" action for the **${h}** entity is not defined. ${v}`);g=this._router[h].update(t,n)}}if(g){if(!g.then&&g.id===void 0&&g.tid===void 0&&g.action===void 0)throw new Error("Incorrect router return value. A Promise or a response object is expected");g.then?g.then(_).catch(m=>{m&&m.action?_(m):_({action:"error",value:m})}):_(g)}else _(null);return}let i;i={callback:c=>{const u=[];if(n)u.push(n);else if(t)for(const h in t)u.push(h);return this.afterUpdate(this,c,u)},headers:this._headers};const r="dhx_version="+this.$gantt.getUserData(0,"version",this._ganttMode),a=this.serverProcessor+(this._user?e.urlSeparator(this.serverProcessor)+["dhx_user="+this._user,r].join("&"):"");let s,l=this._applyPayload(a);switch(this._tMode){case"GET":s=this._cleanupArgumentsBeforeSend(t),i.url=l+e.urlSeparator(l)+this.serialize(s,n),i.method="GET";break;case"POST":s=this._cleanupArgumentsBeforeSend(t),i.url=l,i.method="POST",i.data=this.serialize(s,n);break;case"JSON":s={};const c=this._cleanupItemBeforeSend(t);for(const u in c)u!==this.action_param&&u!=="id"&&u!=="gr_id"&&(s[u]=c[u]);i.url=l,i.method="POST",i.data=JSON.stringify({id:n,action:t[this.action_param],data:s});break;case"REST":case"REST-JSON":switch(l=a.replace(/(&|\?)editing=true/,""),s="",this.getState(n)){case"inserted":i.method="POST",i.data=this.serialize(t,n);break;case"deleted":i.method="DELETE",l=l+(l.slice(-1)==="/"?"":"/")+n;break;default:i.method="PUT",i.data=this.serialize(t,n),l=l+(l.slice(-1)==="/"?"":"/")+n}i.url=this._applyPayload(l)}return this._waitMode++,e.query(i)}_forEachUpdatedRow(t){const n=this.updatedRows.slice();for(let e=0;e<n.length;e++){const i=n[e];this.$gantt.getUserData(i,this.action_param,this._ganttMode)&&t.call(this,i)}}_setDefaultTransactionMode(){this.serverProcessor&&(this.setTransactionMode("POST",!0),this.serverProcessor+=(this.serverProcessor.indexOf("?")!==-1?"&":"?")+"editing=true",this._serverProcessor=this.serverProcessor)}_getXmlNodeValue(t){return t.firstChild?t.firstChild.nodeValue:""}_getAllData(){const t={};let n=!1;return this._forEachUpdatedRow(function(e){if(this._in_progress[e]||this.is_invalid(e))return;const i=this._getRowData(e);this.callEvent("onBeforeUpdate",[e,this.getState(e),i])&&(t[e]=i,n=!0,this._in_progress[e]=new Date().valueOf())}),n?t:null}_prepareDate(t){return this.$gantt.defined(this.$gantt.templates.xml_format)?this.$gantt.templates.xml_format(t):this.$gantt.templates.format_date(t)}_prepareArray(t,n){return n.push(t),t.map(e=>de(e)?this._prepareDate(e):Array.isArray(e)&&!ur(n,e)?this._prepareArray(e,n):e&&typeof e=="object"&&!ur(n,e)?this._prepareObject(e,n):e)}_prepareObject(t,n){const e={};n.push(t);for(const i in t){if(i.substr(0,1)==="$")continue;const r=t[i];de(r)?e[i]=this._prepareDate(r):r===null?e[i]="":Array.isArray(r)&&!ur(n,r)?e[i]=this._prepareArray(r,n):r&&typeof r=="object"&&!ur(n,r)?e[i]=this._prepareObject(r,n):e[i]=r}return e}_prepareDataItem(t){const n=this._prepareObject(t,[]);return n[this.action_param]=this.$gantt.getUserData(t.id,this.action_param,this._ganttMode),n}getStoredItem(t){return this._storage.getStoredItem(t)}_getRowData(t){let n;const e=this.$gantt;return this.getGanttMode()==="task"?e.isTaskExists(t)&&(n=this.$gantt.getTask(t)):this.getGanttMode()==="assignment"?this.$gantt.$data.assignmentsStore.exists(t)&&(n=this.$gantt.$data.assignmentsStore.getItem(t)):this.getGanttMode()==="baseline"?this.$gantt.$data.baselineStore.exists(t)&&(n=this.$gantt.$data.baselineStore.getItem(t)):e.isLinkExists(t)&&(n=this.$gantt.getLink(t)),n||(n=this.getStoredItem(t)),n||(n={id:t}),this._prepareDataItem(n)}};const dc={DEPRECATED_api:function(t){return new cc(t)},createDataProcessor:function(t){let n,e,i;t instanceof Function?n=t:t.hasOwnProperty("router")?n=t.router:t.hasOwnProperty("assignment")||t.hasOwnProperty("baseline")||t.hasOwnProperty("link")||t.hasOwnProperty("task")?n=t:t.hasOwnProperty("headers")&&(i=t.headers),e=n?"CUSTOM":t.mode||"REST-JSON";const r=new cc(t.url);return r.init(this),r.setTransactionMode({mode:e,router:n,headers:i},t.batchUpdate),t.deleteAfterConfirmation&&(r.deleteAfterConfirmation=t.deleteAfterConfirmation),r}};function kv(t){var n={},e=!1;function i(c,u){u=typeof u=="function"?u:function(){},n[c]||(n[c]=this[c],this[c]=u)}function r(c){n[c]&&(this[c]=n[c],n[c]=null)}function a(c){for(var u in c)i.call(this,u,c[u])}function s(){for(var c in n)r.call(this,c)}function l(c){try{c()}catch(u){Oe.console.error(u)}}return t.$services.getService("state").registerProvider("batchUpdate",function(){return{batch_update:e}},!1),function(c,u){if(e)l(c);else{var h,_=this._dp&&this._dp.updateMode!="off";_&&(h=this._dp.updateMode,this._dp.setUpdateMode("off"));var g={},m={render:!0,refreshData:!0,refreshTask:!0,refreshLink:!0,resetProjectDates:function($){g[$.id]=$}};for(var v in a.call(this,m),e=!0,this.callEvent("onBeforeBatchUpdate",[]),l(c),this.callEvent("onAfterBatchUpdate",[]),s.call(this),g)this.resetProjectDates(g[v]);e=!1,u||this.render(),_&&(this._dp.setUpdateMode(h),this._dp.setGanttMode("task"),this._dp.sendData(),this._dp.setGanttMode("link"),this._dp.sendData())}}}function yv(t){t.batchUpdate=kv(t)}var bv=function(t){return{_needRecalc:!0,reset:function(){this._needRecalc=!0},_isRecalcNeeded:function(){return!this._isGroupSort()&&this._needRecalc},_isGroupSort:function(){return!!t.getState().group_mode},_getWBSCode:function(n){return n?(this._isRecalcNeeded()&&this._calcWBS(),n.$virtual?"":this._isGroupSort()?n.$wbs||"":(n.$wbs||(this.reset(),this._calcWBS()),n.$wbs)):""},_setWBSCode:function(n,e){n.$wbs=e},getWBSCode:function(n){return this._getWBSCode(n)},getByWBSCode:function(n){for(var e=n.split("."),i=t.config.root_id,r=0;r<e.length;r++){var a=t.getChildren(i),s=1*e[r]-1;if(!t.isTaskExists(a[s]))return null;i=a[s]}return t.isTaskExists(i)?t.getTask(i):null},_calcWBS:function(){if(this._isRecalcNeeded()){var n=!0;t.eachTask(function(e){if(n)return n=!1,void this._setWBSCode(e,"1");var i=t.getPrevSibling(e.id);if(i!==null){var r=t.getTask(i).$wbs;r&&((r=r.split("."))[r.length-1]++,this._setWBSCode(e,r.join(".")))}else{var a=t.getParent(e.id);this._setWBSCode(e,t.getTask(a).$wbs+".1")}},t.config.root_id,this),this._needRecalc=!1}}}};function xv(t){var n=bv(t);function e(){return n.reset(),!0}t.getWBSCode=function(i){return n.getWBSCode(i)},t.getTaskByWBSCode=function(i){return n.getByWBSCode(i)},t.attachEvent("onAfterTaskMove",e),t.attachEvent("onBeforeParse",e),t.attachEvent("onAfterTaskDelete",e),t.attachEvent("onAfterTaskAdd",e),t.attachEvent("onAfterSort",e)}function wv(t){var n={},e=!1;t.$data.tasksStore.attachEvent("onStoreUpdated",function(){n={},e=!1}),t.attachEvent("onBeforeGanttRender",function(){n={}});var i=String(Math.random());function r(c){return c===null?i+String(c):String(c)}function a(c,u,h){return Array.isArray(c)?c.map(function(_){return r(_)}).join("_")+`_${u}_${h}`:r(c)+`_${u}_${h}`}function s(c,u,h){var _,g=a(u,c,JSON.stringify(h)),m={};return bn(u,function(v){m[r(v)]=!0}),n[g]?_=n[g]:(_=n[g]=[],t.eachTask(function(v){if(h){if(!h[t.getTaskType(v)])return}else if(v.type==t.config.types.project)return;c in v&&bn(rs(v[c])?v[c]:[v[c]],function($){var x=$&&$.resource_id?$.resource_id:$;if(m[r(x)])_.push(v);else if(!e){var S=a($,c);n[S]||(n[S]=[]),n[S].push(v)}})}),e=!0),_}function l(c,u,h){var _=t.config.resource_property,g=[];if(t.getDatastore("task").exists(u)){var m=t.getTask(u);g=m[_]||[]}Array.isArray(g)||(g=[g]);for(var v=0;v<g.length;v++)g[v].resource_id==c&&h.push({task_id:m.id,resource_id:g[v].resource_id,value:g[v].value})}return{getTaskBy:function(c,u,h){return typeof c=="function"?(_=c,g=[],t.eachTask(function(m){_(m)&&g.push(m)}),g):rs(u)?s(c,u,h):s(c,[u],h);var _,g},getResourceAssignments:function(c,u){var h=[],_=t.config.resource_property;return u!==void 0?l(c,u,h):t.getTaskBy(_,c).forEach(function(g){l(c,g.id,h)}),h}}}function $v(t){var n=wv(t);t.ext.resources=function(r){const a={renderEditableLabel:function(s,l,c,u,h){const _=r.config.readonly?"":"contenteditable";if(s<c.end_date&&l>c.start_date){for(let g=0;g<h.length;g++){const m=h[g];return"<div "+_+" data-assignment-cell data-assignment-id='"+m.id+"' data-row-id='"+c.id+"' data-task='"+c.$task_id+"' data-start-date='"+r.templates.format_date(s)+"' data-end-date='"+r.templates.format_date(l)+"'>"+m.value+"</div>"}return"<div "+_+" data-assignment-cell data-empty  data-row-id='"+c.id+"' data-resource-id='"+c.$resource_id+"' data-task='"+c.$task_id+"' data-start-date='"+r.templates.format_date(s)+"''  data-end-date='"+r.templates.format_date(l)+"'>-</div>"}return""},renderSummaryLabel:function(s,l,c,u,h){let _=h.reduce(function(g,m){return g+Number(m.value)},0);return _%1&&(_=Math.round(10*_)/10),_?"<div>"+_+"</div>":""},editableResourceCellTemplate:function(s,l,c,u,h){return c.$role==="task"?a.renderEditableLabel(s,l,c,u,h):a.renderSummaryLabel(s,l,c,u,h)},editableResourceCellClass:function(s,l,c,u,h){const _=[];_.push("resource_marker"),c.$role==="task"?_.push("task_cell"):_.push("resource_cell");const g=h.reduce(function(v,$){return v+Number($.value)},0);let m=Number(c.capacity);return isNaN(m)&&(m=8),g<=m?_.push("workday_ok"):_.push("workday_over"),_.join(" ")},getSummaryResourceAssignments:function(s){let l;const c=r.getDatastore(r.config.resource_store),u=c.getItem(s);return u.$role==="task"?l=r.getResourceAssignments(u.$resource_id,u.$task_id):(l=r.getResourceAssignments(s),c.eachItem&&c.eachItem(function(h){h.$role!=="task"&&(l=l.concat(r.getResourceAssignments(h.id)))},s)),l},initEditableDiagram:function(){r.config.resource_render_empty_cells=!0,function(){let s=null;function l(){return s&&cancelAnimationFrame(s),s=requestAnimationFrame(function(){r.$container&&Array.prototype.slice.call(r.$container.querySelectorAll(".resourceTimeline_cell [data-assignment-cell]")).forEach(function(c){c.contentEditable=!0})}),!0}r.attachEvent("onGanttReady",function(){r.getDatastore(r.config.resource_assignment_store).attachEvent("onStoreUpdated",l),r.getDatastore(r.config.resource_store).attachEvent("onStoreUpdated",l)},{once:!0}),r.attachEvent("onGanttLayoutReady",function(){r.$layout.getCellsByType("viewCell").forEach(function(c){c.$config&&c.$config.view==="resourceTimeline"&&c.$content&&c.$content.attachEvent("onScroll",l)})})}(),r.attachEvent("onGanttReady",function(){let s=!1;r.event(r.$container,"keypress",function(l){var c=l.target.closest(".resourceTimeline_cell [data-assignment-cell]");c&&(l.keyCode!==13&&l.keyCode!==27||c.blur())}),r.event(r.$container,"focusout",function(l){if(!s){s=!0,setTimeout(function(){s=!1},300);var c=l.target.closest(".resourceTimeline_cell [data-assignment-cell]");if(c){var u=(c.innerText||"").trim();u=="-"&&(u="0");var h=Number(u),_=c.getAttribute("data-row-id"),g=c.getAttribute("data-assignment-id"),m=c.getAttribute("data-task"),v=c.getAttribute("data-resource-id"),$=r.templates.parse_date(c.getAttribute("data-start-date")),x=r.templates.parse_date(c.getAttribute("data-end-date")),S=r.getDatastore(r.config.resource_assignment_store);if(isNaN(h))r.getDatastore(r.config.resource_store).refresh(_);else{var p=r.getTask(m);if(r.plugins().undo&&r.ext.undo.saveState(m,"task"),g){if(h===(k=S.getItem(g)).value)return;if(k.start_date.valueOf()===$.valueOf()&&k.end_date.valueOf()===x.valueOf())k.value=h,h?S.updateItem(k.id):S.removeItem(k.id);else{if(k.end_date.valueOf()>x.valueOf()){var b=r.copy(k);b.id=r.uid(),b.start_date=x,b.duration=r.calculateDuration({start_date:b.start_date,end_date:b.end_date,task:p}),b.delay=r.calculateDuration({start_date:p.start_date,end_date:b.start_date,task:p}),b.mode=k.mode||"default",b.duration!==0&&S.addItem(b)}k.start_date.valueOf()<$.valueOf()?(k.end_date=$,k.duration=r.calculateDuration({start_date:k.start_date,end_date:k.end_date,task:p}),k.mode="fixedDuration",k.duration===0?S.removeItem(k.id):S.updateItem(k.id)):S.removeItem(k.id),h&&S.addItem({task_id:k.task_id,resource_id:k.resource_id,value:h,start_date:$,end_date:x,duration:r.calculateDuration({start_date:$,end_date:x,task:p}),delay:r.calculateDuration({start_date:p.start_date,end_date:$,task:p}),mode:"fixedDuration"})}r.updateTaskAssignments(p.id),r.updateTask(p.id)}else if(h){var k={task_id:m,resource_id:v,value:h,start_date:$,end_date:x,duration:r.calculateDuration({start_date:$,end_date:x,task:p}),delay:r.calculateDuration({start_date:p.start_date,end_date:$,task:p}),mode:"fixedDuration"};S.addItem(k),r.updateTaskAssignments(p.id),r.updateTask(p.id)}}}}})},{once:!0})}};return a}(t),t.config.resources={dataprocessor_assignments:!1,dataprocessor_resources:!1,editable_resource_diagram:!1,resource_store:{type:"treeDataStore",fetchTasks:!1,initItem:function(r){return r.parent=r.parent||t.config.root_id,r[t.config.resource_property]=r.parent,r.open=!0,r}},lightbox_resources:function(r){const a=[],s=t.getDatastore(t.config.resource_store);return r.forEach(function(l){if(!s.hasChild(l.id)){const c=t.copy(l);c.key=l.id,c.label=l.text,a.push(c)}}),a}},t.attachEvent("onBeforeGanttReady",function(){if(t.getDatastore(t.config.resource_store))return;const r=t.config.resources?t.config.resources.resource_store:void 0;let a=r?r.fetchTasks:void 0;t.config.resources&&t.config.resources.editable_resource_diagram&&(a=!0);let s=function(c){return c.parent=c.parent||t.config.root_id,c[t.config.resource_property]=c.parent,c.open=!0,c};r&&r.initItem&&(s=r.initItem);const l=r&&r.type?r.type:"treeDatastore";t.$resourcesStore=t.createDatastore({name:t.config.resource_store,type:l,fetchTasks:a!==void 0&&a,initItem:s}),t.$data.resourcesStore=t.$resourcesStore,t.$resourcesStore.attachEvent("onParse",function(){let c=function(h){const _=[];return h.forEach(function(g){if(!t.$resourcesStore.hasChild(g.id)){var m=t.copy(g);m.key=g.id,m.label=g.text,_.push(m)}}),_};t.config.resources&&t.config.resources.lightbox_resources&&(c=t.config.resources.lightbox_resources);const u=c(t.$resourcesStore.getItems());t.updateCollection("resourceOptions",u)})}),t.getTaskBy=n.getTaskBy,t.getResourceAssignments=n.getResourceAssignments,t.config.resource_property="owner_id",t.config.resource_store="resource",t.config.resource_render_empty_cells=!1,t.templates.histogram_cell_class=function(r,a,s,l,c){},t.templates.histogram_cell_label=function(r,a,s,l,c){return l.length+"/3"},t.templates.histogram_cell_allocated=function(r,a,s,l,c){return l.length/3},t.templates.histogram_cell_capacity=function(r,a,s,l,c){return 0};const e=function(r,a,s,l,c){return l.length<=1?"gantt_resource_marker_ok":"gantt_resource_marker_overtime"},i=function(r,a,s,l,c){return 8*l.length};t.templates.resource_cell_value=i,t.templates.resource_cell_class=e,t.attachEvent("onBeforeGanttReady",function(){t.config.resources&&t.config.resources.editable_resource_diagram&&(t.config.resource_render_empty_cells=!0,t.templates.resource_cell_value===i&&(t.templates.resource_cell_value=t.ext.resources.editableResourceCellTemplate),t.templates.resource_cell_class===e&&(t.templates.resource_cell_class=t.ext.resources.editableResourceCellClass),t.ext.resources.initEditableDiagram(t))})}function Sv(t){var n="$resourceAssignments";t.config.resource_assignment_store="resourceAssignments",t.config.process_resource_assignments=!0;var e={auto:"auto",singleValue:"singleValue",valueArray:"valueArray",resourceValueArray:"resourceValueArray",assignmentsArray:"assignmentsArray"},i=e.auto,r={fixedDates:"fixedDates",fixedDuration:"fixedDuration",default:"default"};function a(v,$){v.start_date?v.start_date=t.date.parseDate(v.start_date,"parse_date"):v.start_date=null,v.end_date?v.end_date=t.date.parseDate(v.end_date,"parse_date"):v.end_date=null;var x=Number(v.delay),S=!1;if(isNaN(x)?(v.delay=0,S=!0):v.delay=x,t.defined(v.value)||(v.value=null),!v.task_id||!v.resource_id)return!1;if(v.mode=v.mode||r.default,v.mode===r.fixedDuration&&(isNaN(Number(v.duration))&&($=$||t.getTask(v.task_id),v.duration=t.calculateDuration({start_date:v.start_date,end_date:v.end_date,id:$})),S&&($=$||t.getTask(v.task_id),v.delay=t.calculateDuration({start_date:$.start_date,end_date:v.start_date,id:$}))),v.mode!==r.fixedDates&&($||t.isTaskExists(v.task_id))){var p=l(v,$=$||t.getTask(v.task_id));v.start_date=p.start_date,v.end_date=p.end_date,v.duration=p.duration}}var s=t.createDatastore({name:t.config.resource_assignment_store,initItem:function(v){return v.id||(v.id=t.uid()),a(v),v}});function l(v,$){if(v.mode===r.fixedDates)return{start_date:v.start_date,end_date:v.end_date,duration:v.duration};var x,S,p=v.delay?t.calculateEndDate({start_date:$.start_date,duration:v.delay,task:$}):new Date($.start_date);return v.mode===r.fixedDuration?(x=t.calculateEndDate({start_date:p,duration:v.duration,task:$}),S=v.duration):(x=new Date($.end_date),S=$.duration-v.delay),{start_date:p,end_date:x,duration:S}}function c(v){const $=t.config.resource_property;let x=v[$];const S=[];let p=i===e.auto;if(t.defined(x)&&x){Array.isArray(x)||(x=[x],p&&(i=e.singleValue,p=!1));const b={};x.forEach(function(k){k.resource_id||(k={resource_id:k},p&&(i=e.valueArray,p=!1)),p&&(k.id&&k.resource_id?(i=e.assignmentsArray,p=!1):(i=e.resourceValueArray,p=!1));let w,A=r.default;k.mode||(k.start_date&&k.end_date||k.start_date&&k.duration)&&(A=r.fixedDuration),w=k.id||!k.$id||b[k.$id]?k.id&&!b[k.id]?k.id:t.uid():k.$id,b[w]=!0;const I={id:w,start_date:k.start_date,duration:k.duration,end_date:k.end_date,delay:k.delay,task_id:v.id,resource_id:k.resource_id,value:k.value,mode:k.mode||A};Object.keys(k).forEach(C=>{C!="$id"&&(I[C]=k[C])}),I.start_date&&I.start_date.getMonth&&I.end_date&&I.end_date.getMonth&&typeof I.duration=="number"||a(I,v),S.push(I)})}return S}function u(v){if(t.isTaskExists(v)){var $=t.getTask(v);h($,t.getTaskAssignments($.id))}}function h(v,$){$.sort(function(x,S){return x.start_date&&S.start_date&&x.start_date.valueOf()!=S.start_date.valueOf()?x.start_date-S.start_date:0}),i==e.assignmentsArray?v[t.config.resource_property]=$:i==e.resourceValueArray&&(v[t.config.resource_property]=$.map(function(x){return{$id:x.id,start_date:x.start_date,duration:x.duration,end_date:x.end_date,delay:x.delay,resource_id:x.resource_id,value:x.value,mode:x.mode}})),v[n]=$}function _(v){var $=c(v);return $.forEach(function(x){x.id=x.id||t.uid()}),$}function g(v,$){var x=function(S,p){var b={inBoth:[],inTaskNotInStore:[],inStoreNotInTask:[]};if(i==e.singleValue){var k=S[0],w=k?k.resource_id:null,A=!1;p.forEach(function(N){N.resource_id!=w?b.inStoreNotInTask.push(N):N.resource_id==w&&(b.inBoth.push({store:N,task:k}),A=!0)}),!A&&k&&b.inTaskNotInStore.push(k)}else if(i==e.valueArray){var I={},C={},M={};S.forEach(function(N){I[N.resource_id]=N}),p.forEach(function(N){C[N.resource_id]=N}),S.concat(p).forEach(function(N){if(!M[N.resource_id]){M[N.resource_id]=!0;var P=I[N.resource_id],B=C[N.resource_id];P&&B?b.inBoth.push({store:B,task:P}):P&&!B?b.inTaskNotInStore.push(P):!P&&B&&b.inStoreNotInTask.push(B)}})}else i!=e.assignmentsArray&&i!=e.resourceValueArray||(I={},C={},M={},S.forEach(function(N){I[N.id||N.$id]=N}),p.forEach(function(N){C[N.id]=N}),S.concat(p).forEach(function(N){var P=N.id||N.$id;if(!M[P]){M[P]=!0;var B=I[P],W=C[P];B&&W?b.inBoth.push({store:W,task:B}):B&&!W?b.inTaskNotInStore.push(B):!B&&W&&b.inStoreNotInTask.push(W)}}));return b}(c(v),$);x.inStoreNotInTask.forEach(function(S){s.removeItem(S.id)}),x.inTaskNotInStore.forEach(function(S){s.addItem(S)}),x.inBoth.forEach(function(S){if(function(b,k){var w={id:!0};for(var A in b)if(!w[A]&&String(b[A])!==String(k[A]))return!0;return!1}(S.task,S.store))(function(b,k){var w={id:!0};for(var A in b)w[A]||(k[A]=b[A])})(S.task,S.store),s.updateItem(S.store.id);else if(S.task.start_date&&S.task.end_date&&S.task.mode!==r.fixedDates){var p=l(S.store,v);S.store.start_date.valueOf()==p.start_date.valueOf()&&S.store.end_date.valueOf()==p.end_date.valueOf()||(S.store.start_date=p.start_date,S.store.end_date=p.end_date,S.store.duration=p.duration,s.updateItem(S.store.id))}}),u(v.id)}function m(v){var $=v[n]||s.find(function(x){return x.task_id==v.id});g(v,$)}t.$data.assignmentsStore=s,t.attachEvent("onGanttReady",function(){if(t.config.process_resource_assignments){t.attachEvent("onParse",function(){t.silent(function(){s.clearAll();var w=[];t.eachTask(function(A){if(A.type!==t.config.types.project){var I=_(A);h(A,I),I.forEach(function(C){w.push(C)})}}),s.parse(w)})});var v=!1,$=!1,x={},S=!1;t.attachEvent("onBeforeBatchUpdate",function(){v=!0}),t.attachEvent("onAfterBatchUpdate",function(){if($){var w={};for(var A in x)w[A]=t.getTaskAssignments(x[A].id);for(var A in x)g(x[A],w[A])}$=!1,v=!1,x={}}),t.attachEvent("onTaskCreated",function(w){var A=_(w);return s.parse(A),h(w,A),!0}),t.attachEvent("onAfterTaskUpdate",function(w,A){v?($=!0,x[w]=A):A.unscheduled||m(A)}),t.attachEvent("onAfterTaskAdd",function(w,A){v?($=!0,x[w]=A):m(A)}),t.attachEvent("onRowDragEnd",function(w){m(t.getTask(w))}),t.$data.tasksStore.attachEvent("onAfterDeleteConfirmed",function(w,A){var I,C=[w];t.eachTask(function(M){C.push(M.id)},w),I={},C.forEach(function(M){I[M]=!0}),s.find(function(M){return I[M.task_id]}).forEach(function(M){s.removeItem(M.id)})}),t.$data.tasksStore.attachEvent("onClearAll",function(){return p=null,b=null,k=null,s.clearAll(),!0}),t.attachEvent("onTaskIdChange",function(w,A){s.find(function(I){return I.task_id==w}).forEach(function(I){I.task_id=A,s.updateItem(I.id)}),u(A)}),t.attachEvent("onBeforeUndo",function(w){return S=!0,!0}),t.attachEvent("onAfterUndo",function(w){S=!0});var p=null,b=null,k=null;s.attachEvent("onStoreUpdated",function(){return v&&!S||(p=null,b=null,k=null),!0}),t.getResourceAssignments=function(w,A){var I=t.defined(A)&&A!==null;return p===null&&(p={},b={},s.eachItem(function(C){p[C.resource_id]||(p[C.resource_id]=[]),p[C.resource_id].push(C);var M=C.resource_id+"-"+C.task_id;b[M]||(b[M]=[]),b[M].push(C)})),I?(b[w+"-"+A]||[]).slice():(p[w]||[]).slice()},t.getTaskAssignments=function(w){if(k===null){var A=[];k={},s.eachItem(function(I){k[I.task_id]||(k[I.task_id]=[]),k[I.task_id].push(I),I.task_id==w&&A.push(I)})}return(k[w]||[]).slice()},t.getTaskResources=function(w){const A=t.getDatastore("resource"),I=t.getTaskAssignments(w),C={};I.forEach(function(N){C[N.resource_id]||(C[N.resource_id]=N.resource_id)});const M=[];for(const N in C){const P=A.getItem(C[N]);P&&M.push(P)}return M},t.updateTaskAssignments=u}},{once:!0})}function Tv(t){function n(l){return function(){return!t.config.placeholder_task||l.apply(this,arguments)}}function e(){var l=t.getTaskBy("type",t.config.types.placeholder);if(!l.length||!t.isTaskExists(l[0].id)){var c={unscheduled:!0,type:t.config.types.placeholder,duration:0,text:t.locale.labels.new_task};if(t.callEvent("onTaskCreated",[c])===!1)return;t.addTask(c)}}function i(l){var c=t.getTask(l);c.type==t.config.types.placeholder&&(c.start_date&&c.end_date&&c.unscheduled&&(c.unscheduled=!1),t.batchUpdate(function(){var u=t.copy(c);t.silent(function(){t.deleteTask(c.id)}),delete u["!nativeeditor_status"],u.type=t.config.types.task,u.id=t.uid(),t.addTask(u)}))}t.config.types.placeholder="placeholder",t.attachEvent("onDataProcessorReady",n(function(l){l&&!l._silencedPlaceholder&&(l._silencedPlaceholder=!0,l.attachEvent("onBeforeUpdate",n(function(c,u,h){return h.type!=t.config.types.placeholder||(l.setUpdated(c,!1),!1)})))}));var r=!1;function a(l){return!!(t.config.types.placeholder&&t.isTaskExists(l)&&t.getTask(l).type==t.config.types.placeholder)}function s(l){return!(!a(l.source)&&!a(l.target))}t.attachEvent("onGanttReady",function(){r||(r=!0,t.attachEvent("onAfterTaskUpdate",n(i)),t.attachEvent("onAfterTaskAdd",n(function(l,c){c.type!=t.config.types.placeholder&&(t.getTaskBy("type",t.config.types.placeholder).forEach(function(u){t.silent(function(){t.isTaskExists(u.id)&&t.deleteTask(u.id)})}),e())})),t.attachEvent("onParse",n(e)))}),t.attachEvent("onLinkValidation",function(l){return!s(l)}),t.attachEvent("onBeforeLinkAdd",function(l,c){return!s(c)}),t.attachEvent("onBeforeUndoStack",function(l){for(var c=0;c<l.commands.length;c++){var u=l.commands[c];u.entity==="task"&&u.value.type===t.config.types.placeholder&&(l.commands.splice(c,1),c--)}return!0})}function Ev(t){function n(h){return function(){return!t.config.auto_types||t.getTaskType(t.config.types.project)!=t.config.types.project||h.apply(this,arguments)}}function e(h,_){var g=t.getTask(h),m=a(g);m!==!1&&t.getTaskType(g)!==m&&(_.$needsUpdate=!0,_[g.id]={task:g,type:m})}function i(h){if(!t.getState().group_mode){var _=function(g,m){return e(g,m=m||{}),t.eachParent(function(v){e(v.id,m)},g),m}(h);_.$needsUpdate&&t.batchUpdate(function(){(function(g){for(var m in g)if(g[m]&&g[m].task){var v=g[m].task;v.type=g[m].type,t.updateTask(v.id)}})(_)})}}var r;function a(h){var _=t.config.types,g=t.hasChild(h.id),m=t.getTaskType(h.type);return g&&m===_.task?_.project:!g&&m===_.project&&_.task}var s,l,c=!0;function u(h){h!=t.config.root_id&&t.isTaskExists(h)&&i(h)}t.attachEvent("onParse",n(function(){c=!1,t.getState().group_mode||(t.batchUpdate(function(){t.eachTask(function(h){var _=a(h);_!==!1&&function(g,m){t.getState().group_mode||(g.type=m,t.updateTask(g.id))}(h,_)})}),c=!0)})),t.attachEvent("onAfterTaskAdd",n(function(h){c&&i(h)})),t.attachEvent("onAfterTaskUpdate",n(function(h){c&&i(h)})),t.attachEvent("onBeforeTaskDelete",n(function(h,_){return r=t.getParent(h),!0})),t.attachEvent("onAfterTaskDelete",n(function(h,_){u(r)})),t.attachEvent("onRowDragStart",n(function(h,_,g){return s=t.getParent(h),!0})),t.attachEvent("onRowDragEnd",n(function(h,_){u(s),i(h)})),t.attachEvent("onBeforeTaskMove",n(function(h,_,g){return l=t.getParent(h),!0})),t.attachEvent("onAfterTaskMove",n(function(h,_,g){document.querySelector(".gantt_drag_marker")||(u(l),i(h))}))}const cs=class{constructor(){this.canParse=n=>!isNaN(this.parse(n)),this.format=n=>String(n),this.parse=n=>parseInt(n,10)}};cs.create=(t=null)=>new cs;let ds=cs;const us=class{constructor(n){this.format=e=>this._getWBSCode(e.source),this.canParse=e=>this._linkReg.test(e),this.parse=e=>{if(!this.canParse(e))return null;const i=this._linkReg.exec(e)[0].trim();return{id:void 0,source:this._findSource(i)||null,target:null,type:this._gantt.config.links.finish_to_start,lag:0}},this._getWBSCode=e=>{const i=this._gantt.getTask(e);return this._gantt.getWBSCode(i)},this._findSource=e=>{const i=new RegExp("^[0-9.]+","i");if(i.exec(e)){const r=i.exec(e)[0],a=this._gantt.getTaskByWBSCode(r);if(a)return a.id}return null},this._linkReg=/^[0-9\.]+/,this._gantt=n}};us.create=(t=null,n)=>new us(n);let Cv=us;function Av(t){t.ext.formatters={durationFormatter:function(n){return n||(n={}),n.store||(n.store=t.config.duration_unit),n.enter||(n.enter=t.config.duration_unit),ds.create(n,t)},linkFormatter:function(n){return Cv.create(n,t)}}}function Dv(t){t.ext=t.ext||{},t.config.show_empty_state=!1,t.ext.emptyStateElement=t.ext.emptyStateElement||{isEnabled:()=>t.config.show_empty_state===!0,isGanttEmpty:()=>!t.getTaskByTime().length,renderContent(n){const e=`<div class='gantt_empty_state'><div class='gantt_empty_state_image'></div>${`<div class='gantt_empty_state_text'>
    <div class='gantt_empty_state_text_link' data-empty-state-create-task>${t.locale.labels.empty_state_text_link}</div>
    <div class='gantt_empty_state_text_description'>${t.locale.labels.empty_state_text_description}</div>
    </div>`}</div>`;n.innerHTML=e},clickEvents:[],attachAddTaskEvent(){const n=t.attachEvent("onEmptyClick",function(e){t.utils.dom.closest(e.target,"[data-empty-state-create-task]")&&t.createTask({id:t.uid(),text:"New Task"})});this.clickEvents.push(n)},detachAddTaskEvents(){this.clickEvents.forEach(function(n){t.detachEvent(n)}),this.clickEvents=[]},getContainer(){if(t.$container){const n=t.utils.dom;if(t.$container.contains(t.$grid_data))return n.closest(t.$grid_data,".gantt_layout_content");if(t.$container.contains(t.$task_data))return n.closest(t.$task_data,".gantt_layout_content")}return null},getNode(){const n=this.getContainer();return n?n.querySelector(".gantt_empty_state_wrapper"):null},show(){const n=this.getContainer();if(!n&&this.isGanttEmpty())return null;const e=document.createElement("div");e.className="gantt_empty_state_wrapper",e.style.marginTop=t.config.scale_height-n.offsetHeight+"px";const i=t.$container.querySelectorAll(".gantt_empty_state_wrapper");Array.prototype.forEach.call(i,function(r){r.parentNode.removeChild(r)}),this.detachAddTaskEvents(),this.attachAddTaskEvent(),n.appendChild(e),this.renderContent(e)},hide(){const n=this.getNode();if(!n)return!1;n.parentNode.removeChild(n)},init(){}},t.attachEvent("onDataRender",function(){const n=t.ext.emptyStateElement;n.isEnabled()&&n.isGanttEmpty()?n.show():n.hide()})}const Oc=function(t,n){const e=n.baselines&&n.baselines.length,i=t.config.baselines.render_mode=="separateRow"||t.config.baselines.render_mode=="individualRow";if(e&&i)return!0},Iv=function(t,n){let e=!1;return t.eachTask(function(i){e||(e=Oc(t,i))},n),e},Wn=function(t){return t.render&&t.render=="split"&&!t.$open},Mv=function(t,n,e,i){let r=n.$task_data.scrollHeight,a=!1,s=!1;return t.eachParent(function(l){if(Wn(l)){s=!0;const c=n.getItemPosition(l).rowHeight;c<r&&(r=c,a=!0)}},e.id),{maxHeight:r,shrinkHeight:a,splitChild:s}};function Lv(t){t.config.baselines={datastore:"baselines",render_mode:!1,dataprocessor_baselines:!1,row_height:16,bar_height:8};const n=t.createDatastore({name:t.config.baselines.datastore,initItem:function(r){return r.id||(r.id=t.uid()),function(a){if(!a.task_id||!a.start_date&&!a.end_date)return!1;a.start_date?a.start_date=t.date.parseDate(a.start_date,"parse_date"):a.start_date=null,a.end_date?a.end_date=t.date.parseDate(a.end_date,"parse_date"):a.end_date=null,a.duration=a.duration||1,a.start_date&&!a.end_date?a.end_date=t.calculateEndDate(a.start_date,a.duration):a.end_date&&!a.start_date&&(a.start_date=t.calculateEndDate(a.end_date,-a.duration))}(r),r}});function e(r){let a=0;t.adjustTaskHeightForBaselines(r),t.eachTask(function(s){let l=s.row_height||t.config.row_height;a=a||l,l>a&&(a=l)},r.id),r.row_height<a&&(r.row_height=a)}function i(r){t.eachParent(function(a){if(Wn(a)){const s=a.row_height||t.getLayoutView("timeline").getBarHeight(a.id);let l=r.row_height;t.getChildren(a.id).forEach(function(c){const u=t.getTask(c);if(u.id==r.id)return;const h=u.row_height||t.getLayoutView("timeline").getBarHeight(u.id);l=l||h,h>l&&(l=h)}),a.row_height=l,a.bar_height=a.bar_height||s}},r.id)}t.$data.baselineStore=n,t.adjustTaskHeightForBaselines=function(r){let a,s,l=r.baselines&&r.baselines.length||0;const c=t.config.baselines.row_height,u=t.getLayoutView("timeline");if(u&&t.config.show_chart)switch(t.config.baselines.render_mode){case"taskRow":r.row_height=r.bar_height+4;break;case"separateRow":a=u.getBarHeight(r.id),l?(r.bar_height=r.bar_height||a,r.bar_height>a&&(a=r.bar_height),r.row_height=a+c):r.bar_height&&(r.row_height=r.bar_height+4),i(r);break;case"individualRow":a=u.getBarHeight(r.id),l?(r.bar_height=r.bar_height||a,r.bar_height>a&&(a=r.bar_height),s=c*l,r.row_height=a+s+2):r.bar_height&&(r.row_height=r.bar_height+4),i(r)}},t.attachEvent("onGanttReady",function(){t.config.baselines&&(t.attachEvent("onParse",function(){n.eachItem(function(r){const a=r.task_id;if(t.isTaskExists(a)){const s=t.getTask(a);s.baselines=s.baselines||[];let l=!0;for(let c=0;c<s.baselines.length;c++){let u=s.baselines[c];if(u.id==r.id){l=!1,t.mixin(u,r,!0);break}}l&&s.baselines.push(r),Bt(t)||(Wn(s)?e(s):t.adjustTaskHeightForBaselines(s))}})}),t.attachEvent("onBeforeTaskUpdate",function(r,a){return function(s){let l=!1;const c={},u=s.baselines||[],h=t.getTaskBaselines(s.id);u.length!=h.length&&(l=!0),u.forEach(function(_){c[_.id]=!0;const g=n.getItem(_.id);if(g){const m=+g.start_date!=+_.start_date,v=+g.end_date!=+_.end_date;(m||v)&&n.updateItem(_.id,_)}else n.addItem(_)}),h.forEach(function(_){c[_.id]||n.removeItem(_.id)}),l&&(Wn(s)?e(s):t.adjustTaskHeightForBaselines(s),t.render())}(a),!0}),t.attachEvent("onAfterUndo",function(r){if((t.config.baselines.render_mode=="separateRow"||t.config.baselines.render_mode=="individualRow")&&r){let a=!1;r.commands.forEach(function(s){if(s.entity=="task"){const l=s.value.id;if(t.isTaskExists(l)){const c=t.getTask(l);if(c.parent&&t.isTaskExists(c.parent)){const u=t.getTask(c.parent);Wn(u)&&(e(u),a=!0)}}}}),a&&t.render()}}),t.attachEvent("onAfterTaskDelete",function(r,a){if(Oc&&a.parent&&t.isTaskExists(a.parent)){const s=t.getTask(a.parent);Wn(s)&&e(s)}n.eachItem(function(s){t.isTaskExists(s.task_id)||n.removeItem(s.id)})}),t.getTaskBaselines=function(r){const a=[];return n.eachItem(function(s){s.task_id==r&&a.push(s)}),a},t.$data.baselineStore.attachEvent("onClearAll",function(){return t.eachTask(function(r){r.baselines&&delete r.baselines}),!0}),t.$data.tasksStore.attachEvent("onClearAll",function(){return n.clearAll(),!0}),t.attachEvent("onTaskIdChange",function(r,a){n.find(function(s){return s.task_id==r}).forEach(function(s){s.task_id=a,n.updateItem(s.id)})}))},{once:!0})}function Nv(t){function n(e){throw t.assert(!1,"Can't parse data: incorrect value of gantt.parse or gantt.load method. Actual argument value: "+JSON.stringify(e)),new Error("Invalid argument for gantt.parse or gantt.load. An object or a JSON string of format https://docs.dhtmlx.com/gantt/desktop__supported_data_formats.html#json is expected. Actual argument value: "+JSON.stringify(e))}t.load=function(){throw new Error("gantt.load() method is not available in the node.js, use gantt.parse() instead")},t.parse=function(e,i){this.on_load({xmlDoc:{responseText:e}},i)},t.serialize=function(e){return this[e=e||"json"].serialize()},t.on_load=function(e,i){if(e.xmlDoc&&e.xmlDoc.status===404)this.assert(!1,"Failed to load the data from <a href='"+e.xmlDoc.responseURL+"' target='_blank'>"+e.xmlDoc.responseURL+"</a>, server returns 404");else if(!t.$destroyed){this.callEvent("onBeforeParse",[]),i||(i="json"),this.assert(this[i],"Invalid data type:'"+i+"'");var r=e.xmlDoc.responseText,a=this[i].parse(r,e);this._process_loading(a)}},t._process_loading=function(e){e.collections&&this._load_collections(e.collections),e.resources&&this.$data.resourcesStore&&this.$data.resourcesStore.parse(e.resources),t.config.baselines&&e.baselines&&this.$data.baselineStore&&this.$data.baselineStore.parse(e.baselines);const i=e.data||e.tasks;e.assignments&&function(a,s){const l={};s.forEach(c=>{l[c.task_id]||(l[c.task_id]=[]),l[c.task_id].push(c)}),a.forEach(c=>{c[t.config.resource_property]=l[c.id]||[]})}(i,e.assignments),this.$data.tasksStore.parse(i);var r=e.links||(e.collections&&e.collections.links?e.collections.links:[]);this.$data.linksStore.parse(r),this.callEvent("onParse",[]),this.render()},t._load_collections=function(e){var i=!1;for(var r in e)if(e.hasOwnProperty(r)){i=!0;var a=e[r];this.serverList[r]=this.serverList[r]||[];var s=this.serverList[r];if(!s)continue;s.splice(0,s.length);for(var l=0;l<a.length;l++){var c=a[l],u=this.copy(c);for(var h in u.key=u.value,c)if(c.hasOwnProperty(h)){if(h=="value"||h=="label")continue;u[h]=c[h]}s.push(u)}}i&&this.callEvent("onOptionsLoad",[])},t.attachEvent("onBeforeTaskDisplay",function(e,i){return!i.$ignore}),t.json={parse:function(e){if(e||n(e),typeof e=="string")if(typeof JSON!=null)try{e=JSON.parse(e)}catch{n(e)}else t.assert(!1,"JSON is not supported");return e.data||e.tasks||n(e),e.dhx_security&&(t.security_key=e.dhx_security),e},serializeTask:function(e){return this._copyObject(e)},serializeLink:function(e){return this._copyLink(e)},_copyLink:function(e){var i={};for(var r in e)i[r]=e[r];return i},_copyObject:function(e){var i={};for(var r in e)r.charAt(0)!="$"&&(i[r]=e[r],de(i[r])&&(i[r]=t.defined(t.templates.xml_format)?t.templates.xml_format(i[r]):t.templates.format_date(i[r])));return i},serialize:function(){var e=[],i=[];let r=[];t.eachTask(function(l){t.resetProjectDates(l),e.push(this.serializeTask(l))},t.config.root_id,this);for(var a=t.getLinks(),s=0;s<a.length;s++)i.push(this.serializeLink(a[s]));return t.getDatastore("baselines").eachItem(function(l){const c=t.json.serializeTask(l);r.push(c)}),{data:e,links:i,baselines:r}}},t.xml={_xmlNodeToJSON:function(e,i){for(var r={},a=0;a<e.attributes.length;a++)r[e.attributes[a].name]=e.attributes[a].value;if(!i){for(a=0;a<e.childNodes.length;a++){var s=e.childNodes[a];s.nodeType==1&&(r[s.tagName]=s.firstChild?s.firstChild.nodeValue:"")}r.text||(r.text=e.firstChild?e.firstChild.nodeValue:"")}return r},_getCollections:function(e){for(var i={},r=t.ajax.xpath("//coll_options",e),a=0;a<r.length;a++)for(var s=i[r[a].getAttribute("for")]=[],l=t.ajax.xpath(".//item",r[a]),c=0;c<l.length;c++){for(var u=l[c].attributes,h={key:l[c].getAttribute("value"),label:l[c].getAttribute("label")},_=0;_<u.length;_++){var g=u[_];g.nodeName!="value"&&g.nodeName!="label"&&(h[g.nodeName]=g.nodeValue)}s.push(h)}return i},_getXML:function(e,i,r){r=r||"data",i.getXMLTopNode||(i=t.ajax.parse(i));var a=t.ajax.xmltop(r,i.xmlDoc);a&&a.tagName==r||function(l){throw t.assert(!1,"Can't parse data: incorrect value of gantt.parse or gantt.load method. Actual argument value: "+JSON.stringify(l)),new Error("Invalid argument for gantt.parse or gantt.load. An XML of format https://docs.dhtmlx.com/gantt/desktop__supported_data_formats.html#xmldhtmlxgantt20 is expected. Actual argument value: "+JSON.stringify(l))}(e);var s=a.getAttribute("dhx_security");return s&&(t.security_key=s),a},parse:function(e,i){i=this._getXML(e,i);for(var r={},a=r.data=[],s=t.ajax.xpath("//task",i),l=0;l<s.length;l++)a[l]=this._xmlNodeToJSON(s[l]);return r.collections=this._getCollections(i),r},_copyLink:function(e){return"<item id='"+e.id+"' source='"+e.source+"' target='"+e.target+"' type='"+e.type+"' />"},_copyObject:function(e){return"<task id='"+e.id+"' parent='"+(e.parent||"")+"' start_date='"+e.start_date+"' duration='"+e.duration+"' open='"+!!e.open+"' progress='"+e.progress+"' end_date='"+e.end_date+"'><![CDATA["+e.text+"]]></task>"},serialize:function(){for(var e=[],i=[],r=t.json.serialize(),a=0,s=r.data.length;a<s;a++)e.push(this._copyObject(r.data[a]));for(a=0,s=r.links.length;a<s;a++)i.push(this._copyLink(r.links[a]));return"<data>"+e.join("")+"<coll_options for='links'>"+i.join("")+"</coll_options></data>"}},t.oldxml={parse:function(e,i){i=t.xml._getXML(e,i,"projects");for(var r={collections:{links:[]}},a=r.data=[],s=t.ajax.xpath("//task",i),l=0;l<s.length;l++){a[l]=t.xml._xmlNodeToJSON(s[l]);var c=s[l].parentNode;c.tagName=="project"?a[l].parent="project-"+c.getAttribute("id"):a[l].parent=c.parentNode.getAttribute("id")}for(s=t.ajax.xpath("//project",i),l=0;l<s.length;l++)(u=t.xml._xmlNodeToJSON(s[l],!0)).id="project-"+u.id,a.push(u);for(l=0;l<a.length;l++){var u;(u=a[l]).start_date=u.startdate||u.est,u.end_date=u.enddate,u.text=u.name,u.duration=u.duration/8,u.open=1,u.duration||u.end_date||(u.duration=1),u.predecessortasks&&r.collections.links.push({target:u.id,source:u.predecessortasks,type:t.config.links.finish_to_start})}return r},serialize:function(){t.message("Serialization to 'old XML' is not implemented")}},t.serverList=function(e,i){return i?this.serverList[e]=i.slice(0):this.serverList[e]||(this.serverList[e]=[]),this.serverList[e]}}function qa(t,n,e,i,r){return this.date=t,this.unit=n,this.task=e,this.id=i,this.calendar=r,this}function Ya(t,n,e,i,r,a){return this.date=t,this.dir=n,this.unit=e,this.task=i,this.id=r,this.calendar=a,this}function Ka(t,n,e,i,r,a,s){return this.start_date=t,this.duration=n,this.unit=e,this.step=i,this.task=r,this.id=a,this.calendar=s,this}function Rv(t,n,e,i){return this.start_date=t,this.end_date=n,this.task=e,this.calendar=i,this.unit=null,this.step=null,this}var Hc=function(t){return{getWorkHoursArguments:function(){var n=arguments[0];if(!Bn((n=de(n)?{date:n}:ut({},n)).date))throw t.assert(!1,"Invalid date argument for getWorkHours method"),new Error("Invalid date argument for getWorkHours method");return n},setWorkTimeArguments:function(){return arguments[0]},unsetWorkTimeArguments:function(){return arguments[0]},isWorkTimeArguments:function(){var n,e=arguments[0];if(e instanceof qa)return e;if((n=e.date?new qa(e.date,e.unit,e.task,null,e.calendar):new qa(arguments[0],arguments[1],arguments[2],null,arguments[3])).unit=n.unit||t.config.duration_unit,!Bn(n.date))throw t.assert(!1,"Invalid date argument for isWorkTime method"),new Error("Invalid date argument for isWorkTime method");return n},getClosestWorkTimeArguments:function(n){var e,i=arguments[0];if(i instanceof Ya)return i;if(e=de(i)?new Ya(i):new Ya(i.date,i.dir,i.unit,i.task,null,i.calendar),i.id&&(e.task=i),e.dir=i.dir||"any",e.unit=i.unit||t.config.duration_unit,!Bn(e.date))throw t.assert(!1,"Invalid date argument for getClosestWorkTime method"),new Error("Invalid date argument for getClosestWorkTime method");return e},_getStartEndConfig:function(n){var e,i=Rv;if(n instanceof i)return n;if(de(n)?e=new i(arguments[0],arguments[1],arguments[2],arguments[3]):(e=new i(n.start_date,n.end_date,n.task),n.id!==null&&n.id!==void 0&&(e.task=n)),e.unit=e.unit||t.config.duration_unit,e.step=e.step||t.config.duration_step,e.start_date=e.start_date||e.start||e.date,!Bn(e.start_date))throw t.assert(!1,"Invalid start_date argument for getDuration method"),new Error("Invalid start_date argument for getDuration method");if(!Bn(e.end_date))throw t.assert(!1,"Invalid end_date argument for getDuration method"),new Error("Invalid end_date argument for getDuration method");return e},getDurationArguments:function(n,e,i,r){return this._getStartEndConfig.apply(this,arguments)},hasDurationArguments:function(n,e,i,r){return this._getStartEndConfig.apply(this,arguments)},calculateEndDateArguments:function(n,e,i,r){var a,s=arguments[0];if(s instanceof Ka)return s;if(a=de(s)?new Ka(arguments[0],arguments[1],arguments[2],void 0,arguments[3],void 0,arguments[4]):new Ka(s.start_date,s.duration,s.unit,s.step,s.task,null,s.calendar),s.id!==null&&s.id!==void 0&&(a.task=s,a.unit=null,a.step=null),a.unit=a.unit||t.config.duration_unit,a.step=a.step||t.config.duration_step,!Bn(a.start_date))throw t.assert(!1,"Invalid start_date argument for calculateEndDate method"),new Error("Invalid start_date argument for calculateEndDate method");return a}}};function Bc(){}Bc.prototype={_getIntervals:function(t){for(var n=[],e=0;e<t.length;e+=2)n.push({start:t[e],end:t[e+1]});return n},_toHoursArray:function(t){var n=[];function e(r){var a,s=Math.floor(r/3600),l=r-60*s*60,c=Math.floor(l/60);return s+":"+((a=String(c)).length<2&&(a="0"+a),a)}for(var i=0;i<t.length;i++)n.push(e(t[i].start)+"-"+e(t[i].end));return n},_intersectHourRanges:function(t,n){var e=[],i=t.length>n.length?t:n,r=t===i?n:t;i=i.slice(),r=r.slice(),e=[];for(var a=0;a<i.length;a++)for(var s=i[a],l=0;l<r.length;l++){var c=r[l];c.start<s.end&&c.end>s.start&&(e.push({start:Math.max(s.start,c.start),end:Math.min(s.end,c.end)}),s.end>c.end&&(r.splice(l,1),l--,a--))}return e},_mergeAdjacentIntervals:function(t){var n=t.slice();n.sort(function(a,s){return a.start-s.start});for(var e=n[0],i=1;i<n.length;i++){var r=n[i];r.start<=e.end?(r.end>e.end&&(e.end=r.end),n.splice(i,1),i--):e=r}return n},_mergeHoursConfig:function(t,n){return this._mergeAdjacentIntervals(this._intersectHourRanges(t,n))},merge:function(t,n){var e=qt(t.getConfig().parsed),i=qt(n.getConfig().parsed),r={hours:this._toHoursArray(this._mergeHoursConfig(e.hours,i.hours)),dates:{},customWeeks:{}};const a=(l,c)=>{for(let u in l.dates){const h=l.dates[u];+u>1e3&&(r.dates[u]=!1);for(const _ in c.dates){const g=c.dates[_];if(_==u&&(r.dates[u]=!(!h||!g)),Array.isArray(h)){const m=Array.isArray(g)?g:c.hours;r.dates[u]=this._toHoursArray(this._mergeHoursConfig(h,m))}}}};if(a(e,i),a(i,e),e.customWeeks)for(var s in e.customWeeks)r.customWeeks[s]=e.customWeeks[s];if(i.customWeeks)for(var s in i.customWeeks)r.customWeeks[s]=i.customWeeks[s];return r}};class Pv{constructor(){this.clear()}getItem(n,e,i){if(this._cache.has(n)){const r=this._cache.get(n)[i.getFullYear()];if(r&&r.has(e))return r.get(e)}return-1}setItem(n,e,i,r){if(!n||!e)return;const a=this._cache,s=r.getFullYear();let l;a.has(n)?l=a.get(n):(l=[],a.set(n,l));let c=l[s];c||(c=l[s]=new Map),c.set(e,i)}clear(){this._cache=new Map}}class Ov{constructor(){this.clear()}getItem(n,e,i){const r=this._cache;if(r&&r[n]){const a=r[n];if(a===void 0)return-1;const s=a[i.getFullYear()];if(s&&s[e]!==void 0)return s[e]}return-1}setItem(n,e,i,r){if(!n||!e)return;const a=this._cache;if(!a)return;a[n]||(a[n]=[]);const s=a[n],l=r.getFullYear();let c=s[l];c||(c=s[l]={}),c[e]=i}clear(){this._cache={}}}class Hv{constructor(n){this.getMinutesPerWeek=e=>{const i=e.valueOf();if(this._weekCache.has(i))return this._weekCache.get(i);const r=this._calendar,a=this._calendar.$gantt;let s=0,l=a.date.week_start(new Date(e));for(let c=0;c<7;c++)s+=60*r.getHoursPerDay(l),l=a.date.add(l,1,"day");return this._weekCache.set(i,s),s},this.getMinutesPerMonth=e=>{const i=e.valueOf();if(this._monthCache.has(i))return this._monthCache.get(i);const r=this._calendar,a=this._calendar.$gantt;let s=0,l=a.date.week_start(new Date(e));const c=a.date.add(l,1,"month").valueOf();for(;l.valueOf()<c;)s+=60*r.getHoursPerDay(l),l=a.date.add(l,1,"day");return this._monthCache.set(i,s),s},this.clear=()=>{this._weekCache=new Map,this._monthCache=new Map},this.clear(),this._calendar=n}}class Bv{constructor(){this.clear()}_getCacheObject(n,e,i){const r=this._cache;r[e]||(r[e]=[]);let a=r[e];a||(a=r[e]={});let s=a[i];s||(s=a[i]={});const l=n.getFullYear();let c=s[l];return c||(c=s[l]={durations:{},endDates:{}}),c}_endDateCacheKey(n,e){return String(n)+"-"+String(e)}_durationCacheKey(n,e){return String(n)+"-"+String(e)}getEndDate(n,e,i,r,a){const s=this._getCacheObject(n,i,r),l=n.valueOf(),c=this._endDateCacheKey(l,e);let u;if(s.endDates[c]===void 0){const h=a(),_=h.valueOf();s.endDates[c]=_,s.durations[this._durationCacheKey(l,_)]=e,u=h}else u=new Date(s.endDates[c]);return u}getDuration(n,e,i,r,a){const s=this._getCacheObject(n,i,r),l=n.valueOf(),c=e.valueOf(),u=this._durationCacheKey(l,c);let h;if(s.durations[u]===void 0){const _=a();s.durations[u]=_.valueOf(),h=_}else h=s.durations[u];return h}clear(){this._cache={}}}function hs(t,n){this.argumentsHelper=n,this.$gantt=t,this._workingUnitsCache=typeof Map<"u"?new Pv:new Ov,this._largeUnitsCache=new Hv(this),this._dateDurationCache=new Bv,this._worktime=null,this._cached_timestamps={},this._cached_timestamps_count=0}hs.prototype={units:["year","month","week","day","hour","minute"],_clearCaches:function(){this._workingUnitsCache.clear(),this._largeUnitsCache.clear(),this._dateDurationCache.clear()},_getUnitOrder:function(t){for(var n=0,e=this.units.length;n<e;n++)if(this.units[n]==t)return n},_resetTimestampCache:function(){this._cached_timestamps={},this._cached_timestamps_count=0},_timestamp:function(t){this._cached_timestamps_count>1e6&&this._resetTimestampCache();var n=null;if(t.day||t.day===0)n=t.day;else if(t.date){var e=String(t.date.valueOf());this._cached_timestamps[e]?n=this._cached_timestamps[e]:(n=Date.UTC(t.date.getFullYear(),t.date.getMonth(),t.date.getDate()),this._cached_timestamps[e]=n,this._cached_timestamps_count++)}return n},_checkIfWorkingUnit:function(t,n){if(!this["_is_work_"+n]){const e=this.$gantt.date[`${n}_start`](new Date(t)),i=this.$gantt.date.add(e,1,n);return this.hasDuration(e,i)}return this["_is_work_"+n](t)},_is_work_day:function(t){var n=this._getWorkHours(t);return!!Array.isArray(n)&&n.length>0},_is_work_hour:function(t){for(var n=this._getWorkHours(t),e=t.getHours(),i=0;i<n.length;i++)if(e>=n[i].startHour&&e<n[i].endHour)return!0;return!1},_getTimeOfDayStamp:function(t,n){var e=t.getHours();return t.getHours()||t.getMinutes()||!n||(e=24),60*e*60+60*t.getMinutes()},_is_work_minute:function(t){for(var n=this._getWorkHours(t),e=this._getTimeOfDayStamp(t),i=0;i<n.length;i++)if(e>=n[i].start&&e<n[i].end)return!0;return!1},_nextDate:function(t,n,e){return this.$gantt.date.add(t,e,n)},_getWorkUnitsBetweenGeneric:function(t,n,e,i){var r=this.$gantt.date,a=new Date(t),s=new Date(n);i=i||1;var l,c,u=0,h=null,_=!1;(l=r[e+"_start"](new Date(a))).valueOf()!=a.valueOf()&&(_=!0);var g=!1;(c=r[e+"_start"](new Date(n))).valueOf()!=n.valueOf()&&(g=!0);for(var m=!1;a.valueOf()<s.valueOf();){if(m=(h=this._nextDate(a,e,i)).valueOf()>s.valueOf(),this._isWorkTime(a,e))(_||g&&m)&&(l=r[e+"_start"](new Date(a)),c=r.add(l,i,e)),_?(_=!1,h=this._nextDate(l,e,i),u+=(c.valueOf()-a.valueOf())/(c.valueOf()-l.valueOf())):g&&m?(g=!1,u+=(s.valueOf()-a.valueOf())/(c.valueOf()-l.valueOf())):u++;else{var v=this._getUnitOrder(e),$=this.units[v-1];$&&!this._isWorkTime(a,$)&&(h=this._getClosestWorkTimeFuture(a,$))}a=h}return u},_getMinutesPerHour:function(t){var n=this._getTimeOfDayStamp(t),e=this._getTimeOfDayStamp(this._nextDate(t,"hour",1));e===0&&(e=86400);for(var i=this._getWorkHours(t),r=0;r<i.length;r++){var a=i[r];if(n>=a.start&&e<=a.end)return 60;if(n<a.end&&e>a.start)return(Math.min(e,a.end)-Math.max(n,a.start))/60}return 0},_getMinutesPerDay:function(t){var n=this._getWorkHours(t),e=0;return n.forEach(function(i){e+=i.durationMinutes}),e},getHoursPerDay:function(t){var n=this._getWorkHours(t),e=0;return n.forEach(function(i){e+=i.durationHours}),e},_getWorkUnitsForRange:function(t,n,e,i){var r,a=0,s=new Date(t),l=new Date(n);for(r=_t(e=="minute"?this._getMinutesPerDay:this.getHoursPerDay,this);s.valueOf()<l.valueOf();)if(l-s>27648e5&&s.getDate()===0){var c=this._largeUnitsCache.getMinutesPerMonth(s);e=="hour"&&(c/=60),a+=c,s=this.$gantt.date.add(s,1,"month")}else{if(l-s>13824e5){var u=this.$gantt.date.week_start(new Date(s));if(s.valueOf()===u.valueOf()){c=this._largeUnitsCache.getMinutesPerWeek(s),e=="hour"&&(c/=60),a+=c,s=this.$gantt.date.add(s,7,"day");continue}}a+=r(s),s=this._nextDate(s,"day",1)}return a/i},_getMinutesBetweenSingleDay:function(t,n){for(var e=this._getIntervalTimestamp(t,n),i=this._getWorkHours(t),r=0,a=0;a<i.length;a++){var s=i[a];if(e.end>=s.start&&e.start<=s.end){var l=Math.max(s.start,e.start),c=Math.min(s.end,e.end);r+=(c-l)/60,e.start=c}}return Math.floor(r)},_getMinutesBetween:function(t,n,e,i){var r=new Date(t),a=new Date(n);i=i||1;var s=new Date(r),l=this.$gantt.date.add(this.$gantt.date.day_start(new Date(r)),1,"day");if(a.valueOf()<=l.valueOf())return this._getMinutesBetweenSingleDay(t,n);var c=this.$gantt.date.day_start(new Date(a)),u=a,h=this._getMinutesBetweenSingleDay(s,l),_=this._getMinutesBetweenSingleDay(c,u);return h+this._getWorkUnitsForRange(l,c,e,i)+_},_getHoursBetween:function(t,n,e,i){var r=new Date(t),a=new Date(n);i=i||1;var s=new Date(r),l=this.$gantt.date.add(this.$gantt.date.day_start(new Date(r)),1,"day");if(a.valueOf()<=l.valueOf())return Math.round(this._getMinutesBetweenSingleDay(t,n)/60);var c=this.$gantt.date.day_start(new Date(a)),u=a,h=this._getMinutesBetweenSingleDay(s,l,e,i)/60,_=this._getMinutesBetweenSingleDay(c,u,e,i)/60,g=h+this._getWorkUnitsForRange(l,c,e,i)+_;return Math.round(g)},getConfig:function(){return this._worktime},_setConfig:function(t){this._worktime=t,this._parseSettings(),this._clearCaches()},_parseSettings:function(){var t=this.getConfig();for(var n in t.parsed={dates:{},hours:null,haveCustomWeeks:!1,customWeeks:{},customWeeksRangeStart:null,customWeeksRangeEnd:null,customWeeksBoundaries:[]},t.parsed.hours=this._parseHours(t.hours),t.dates)t.parsed.dates[n]=this._parseHours(t.dates[n]);if(t.customWeeks){var e=null,i=null;for(var n in t.customWeeks){var r=t.customWeeks[n];if(r.from&&r.to){var a=r.from,s=r.to;(!e||e>a.valueOf())&&(e=a.valueOf()),(!i||i<s.valueOf())&&(i=s.valueOf()),t.parsed.customWeeksBoundaries.push({from:a.valueOf(),fromReadable:new Date(a),to:s.valueOf(),toReadable:new Date(s),name:n}),t.parsed.haveCustomWeeks=!0;var l=t.parsed.customWeeks[n]={from:r.from,to:r.to,hours:this._parseHours(r.hours),dates:{}};for(var c in r.dates)l.dates[c]=this._parseHours(r.dates[c])}}t.parsed.customWeeksRangeStart=e,t.parsed.customWeeksRangeEnd=i}},_tryChangeCalendarSettings:function(t){var n=JSON.stringify(this.getConfig());return t(),!!this.hasWorkTime()||(this._setConfig(JSON.parse(n)),this._clearCaches(),!1)},_arraysEqual:function(t,n){if(t===n)return!0;if(!t||!n||t.length!=n.length)return!1;for(var e=0;e<t.length;++e)if(t[e]!==n[e])return!1;return!0},_compareSettings:function(t,n){if(!this._arraysEqual(t.hours,n.hours))return!1;var e=Object.keys(t.dates),i=Object.keys(n.dates);if(e.sort(),i.sort(),!this._arraysEqual(e,i))return!1;for(var r=0;r<e.length;r++){var a=e[r],s=t.dates[a],l=t.dates[a];if(s!==l&&!(Array.isArray(s)&&Array.isArray(l)&&this._arraysEqual(s,l)))return!1}return!0},equals:function(t){if(!(t instanceof hs))return!1;var n=this.getConfig(),e=t.getConfig();if(!this._compareSettings(n,e))return!1;if(n.parsed.haveCustomWeeks&&e.parsed.haveCustomWeeks){if(n.parsed.customWeeksBoundaries.length!=e.parsed.customWeeksBoundaries.length)return!1;for(var i in n.parsed.customWeeks){var r=n.parsed.customWeeks[i],a=e.parsed.customWeeks[i];if(!a||!this._compareSettings(r,a))return!1}}else if(n.parse.haveCustomWeeks!==e.parsed.haveCustomWeeks)return!1;return!0},getWorkHours:function(){var t=this.argumentsHelper.getWorkHoursArguments.apply(this.argumentsHelper,arguments);return this._getWorkHours(t.date,!1)},_getWorkHours:function(t,n){var e=this.getConfig();if(n!==!1&&(e=e.parsed),!t)return e.hours;var i=this._timestamp({date:t});if(e.haveCustomWeeks&&e.customWeeksRangeStart<=i&&e.customWeeksRangeEnd>i){for(var r=0;r<e.customWeeksBoundaries.length;r++)if(e.customWeeksBoundaries[r].from<=i&&e.customWeeksBoundaries[r].to>i){e=e.customWeeks[e.customWeeksBoundaries[r].name];break}}var a=!0;return e.dates[i]!==void 0?a=e.dates[i]:e.dates[t.getDay()]!==void 0&&(a=e.dates[t.getDay()]),a===!0?e.hours:a||[]},_getIntervalTimestamp:function(t,n){var e={start:0,end:0};e.start=60*t.getHours()*60+60*t.getMinutes()+t.getSeconds();var i=n.getHours();return!i&&!n.getMinutes()&&!n.getSeconds()&&t.valueOf()<n.valueOf()&&(i=24),e.end=60*i*60+60*n.getMinutes()+n.getSeconds(),e},_parseHours:function(t){if(Array.isArray(t)){var n=[];t.forEach(function(l){typeof l=="number"?n.push(60*l*60):typeof l=="string"&&l.split("-").map(function(c){return c.trim()}).forEach(function(c){var u=c.split(":").map(function(_){return _.trim()}),h=parseInt(60*u[0]*60);u[1]&&(h+=parseInt(60*u[1])),u[2]&&(h+=parseInt(u[2])),n.push(h)})});for(var e=[],i=0;i<n.length;i+=2){var r=n[i],a=n[i+1],s=a-r;e.push({start:r,end:a,startHour:Math.floor(r/3600),startMinute:Math.floor(r/60),endHour:Math.ceil(a/3600),endMinute:Math.ceil(a/60),durationSeconds:s,durationMinutes:s/60,durationHours:s/3600})}return e}return t},setWorkTime:function(t){return this._tryChangeCalendarSettings(_t(function(){var n=t.hours===void 0||t.hours,e=this._timestamp(t),i=this.getConfig();if(e!==null?i.dates[e]=n:t.customWeeks||(i.hours=n),t.customWeeks){if(i.customWeeks||(i.customWeeks={}),typeof t.customWeeks=="string")e!==null?i.customWeeks[t.customWeeks].dates[e]=n:t.customWeeks||(i.customWeeks[t.customWeeks].hours=n);else if(typeof t.customWeeks=="object"&&Function.prototype.toString.call(t.customWeeks.constructor)==="function Object() { [native code] }")for(var r in t.customWeeks)i.customWeeks[r]=t.customWeeks[r]}this._parseSettings(),this._clearCaches()},this))},unsetWorkTime:function(t){return this._tryChangeCalendarSettings(_t(function(){if(t){var n=this._timestamp(t);n!==null&&delete this.getConfig().dates[n]}else this.reset_calendar();this._parseSettings(),this._clearCaches()},this))},_isWorkTime:function(t,n){var e,i=-1;return e=String(t.valueOf()),(i=this._workingUnitsCache.getItem(n,e,t))==-1&&(i=this._checkIfWorkingUnit(t,n),this._workingUnitsCache.setItem(n,e,i,t)),i},isWorkTime:function(){var t=this.argumentsHelper.isWorkTimeArguments.apply(this.argumentsHelper,arguments);return this._isWorkTime(t.date,t.unit)},calculateDuration:function(){var t=this.argumentsHelper.getDurationArguments.apply(this.argumentsHelper,arguments);if(!t.unit)return!1;var n=this;return this._dateDurationCache.getDuration(t.start_date,t.end_date,t.unit,t.step,function(){return n._calculateDuration(t.start_date,t.end_date,t.unit,t.step)})},_calculateDuration:function(t,n,e,i){var r=0,a=1;if(t.valueOf()>n.valueOf()){var s=n;n=t,t=s,a=-1}return r=e=="hour"&&i==1?this._getHoursBetween(t,n,e,i):e=="minute"&&i==1?this._getMinutesBetween(t,n,e,i):this._getWorkUnitsBetweenGeneric(t,n,e,i),a*Math.round(r)},hasDuration:function(){var t=this.argumentsHelper.getDurationArguments.apply(this.argumentsHelper,arguments),n=t.start_date,e=t.end_date,i=t.unit,r=t.step;if(!i)return!1;var a=new Date(n),s=new Date(e);for(r=r||1;a.valueOf()<s.valueOf();){if(this._isWorkTime(a,i))return!0;a=this._nextDate(a,i,r)}return!1},calculateEndDate:function(){var t=this.argumentsHelper.calculateEndDateArguments.apply(this.argumentsHelper,arguments),n=t.start_date,e=t.duration,i=t.unit,r=t.step;if(!i)return!1;var a=t.duration>=0?1:-1;e=Math.abs(1*e);var s=this;return this._dateDurationCache.getEndDate(n,e,i,r*a,function(){return s._calculateEndDate(n,e,i,r*a)})},_calculateEndDate:function(t,n,e,i){return!!e&&(i==1&&e=="minute"?this._calculateMinuteEndDate(t,n,i):i==-1&&e=="minute"?this._subtractMinuteDate(t,n,i):i==1&&e=="hour"?this._calculateHourEndDate(t,n,i):this._addInterval(t,n,e,i,null).end)},_addInterval:function(t,n,e,i,r){for(var a=0,s=t,l=!1;a<n&&(!r||!r(s));){var c=this._nextDate(s,e,i);e=="day"&&(l=l||!s.getHours()&&c.getHours())&&(c.setHours(0),c.getHours()||(l=!1));var u=new Date(c.valueOf()+1);i>0&&(u=new Date(c.valueOf()-1)),this._isWorkTime(u,e)&&!l&&a++,s=c}return{end:s,start:t,added:a}},_addHoursUntilDayEnd:function(t,n){for(var e=this.$gantt.date.add(this.$gantt.date.day_start(new Date(t)),1,"day"),i=0,r=n,a=this._getIntervalTimestamp(t,e),s=this._getWorkHours(t),l=0;l<s.length&&i<n;l++){var c=s[l];if(a.end>=c.start&&a.start<=c.end){var u=Math.max(c.start,a.start),h=Math.min(c.end,a.end),_=(h-u)/3600;_>r&&(_=r,h=u+60*r*60);var g=Math.round((h-u)/3600);i+=g,r-=g,a.start=h}}var m=e;return i===n&&(m=new Date(t.getFullYear(),t.getMonth(),t.getDate(),0,0,a.start)),{added:i,end:m}},_calculateHourEndDate:function(t,n,e){var i=new Date(t),r=0;e=e||1,n=Math.abs(1*n);var a=this._addHoursUntilDayEnd(i,n);if(r=a.added,i=a.end,u=n-r){for(var s=i;r<n;){var l=this._nextDate(s,"day",e);l.setHours(0),l.setMinutes(0),l.setSeconds(0);var c=0;if(r+(c=e>0?this.getHoursPerDay(new Date(l.valueOf()-1)):this.getHoursPerDay(new Date(l.valueOf()+1)))>=n)break;r+=c,s=l}i=s}if(r<n){var u=n-r;i=(a=this._addHoursUntilDayEnd(i,u)).end}return i},_addMinutesUntilHourEnd:function(t,n){if(t.getMinutes()===0)return{added:0,end:new Date(t)};for(var e=this.$gantt.date.add(this.$gantt.date.hour_start(new Date(t)),1,"hour"),i=0,r=n,a=this._getIntervalTimestamp(t,e),s=this._getWorkHours(t),l=0;l<s.length&&i<n;l++){var c=s[l];if(a.end>=c.start&&a.start<=c.end){var u=Math.max(c.start,a.start),h=Math.min(c.end,a.end),_=(h-u)/60;_>r&&(_=r,h=u+60*r);var g=Math.round((h-u)/60);r-=g,i+=g,a.start=h}}var m=e;return i===n&&(m=new Date(t.getFullYear(),t.getMonth(),t.getDate(),0,0,a.start)),{added:i,end:m}},_subtractMinutesUntilHourStart:function(t,n){for(var e=this.$gantt.date.hour_start(new Date(t)),i=0,r=n,a=60*e.getHours()*60+60*e.getMinutes()+e.getSeconds(),s=60*t.getHours()*60+60*t.getMinutes()+t.getSeconds(),l=this._getWorkHours(t),c=l.length-1;c>=0&&i<n;c--){var u=l[c];if(s>u.start&&a<=u.end){var h=Math.min(s,u.end),_=Math.max(a,u.start),g=(h-_)/60;g>r&&(g=r,_=h-60*r);var m=Math.abs(Math.round((h-_)/60));r-=m,i+=m,s=_}}var v=e;return i===n&&(v=new Date(t.getFullYear(),t.getMonth(),t.getDate(),0,0,s)),{added:i,end:v}},_subtractMinuteDate:function(t,n,e){var i=this.getClosestWorkTime({date:t,dir:"past",unit:"minute"}),r=0;e=e||-1,n=Math.abs(1*n),n=Math.round(n);const a=this._isMinutePrecision(i);let s=this._subtractMinutesUntilHourStart(i,n);r+=s.added,i=s.end;for(var l=0,c=[],u=0;r<n;){var h=this.$gantt.date.day_start(new Date(i)),_=!1;i.valueOf()===h.valueOf()&&(h=this.$gantt.date.add(h,-1,"day"),_=!0);var g=new Date(h.getFullYear(),h.getMonth(),h.getDate(),23,59,59,999).valueOf();g!==l&&(c=this._getWorkHours(h),u=this._getMinutesPerDay(h),l=g);var m=n-r,v=this._getTimeOfDayStamp(i,_);if(c.length&&u)if(c[c.length-1].end<=v&&m>u)r+=u,i=this.$gantt.date.add(i,-1,"day");else{for(var $=!1,x=null,S=null,p=c.length-1;p>=0;p--)if(c[p].start<v-1&&c[p].end>=v-1){$=!0,x=c[p],S=c[p-1];break}if($)if(v===x.end&&m>=x.durationMinutes)r+=x.durationMinutes,i=this.$gantt.date.add(i,-x.durationMinutes,"minute");else if(!a&&m<=v/60-x.startMinute)r+=m,i=this.$gantt.date.add(i,-m,"minute");else if(a)m<=v/60-x.startMinute?(r+=m,i=this.$gantt.date.add(i,-m,"minute")):(r+=v/60-x.startMinute,i=S?new Date(i.getFullYear(),i.getMonth(),i.getDate(),0,0,S.end):this.$gantt.date.day_start(i));else{var b=this._getMinutesPerHour(i);b<=m?(r+=b,i=this._nextDate(i,"hour",e)):(s=this._subtractMinutesUntilHourStart(i,m),r+=s.added,i=s.end)}else if(i.getHours()===0&&i.getMinutes()===0&&i.getSeconds()===0){if((k=this._getClosestWorkTimePast(i,"hour")).valueOf()===i.valueOf()){var k=this.$gantt.date.add(i,-1,"day"),w=this._getWorkHours(k);if(w.length){var A=w[w.length-1];k.setSeconds(A.durationSeconds)}}i=k}else i=this._getClosestWorkTimePast(new Date(i-1),"hour")}else i=this.$gantt.date.add(i,-1,"day")}if(r<n){var I=n-r;s=this._subtractMinutesUntilHourStart(i,I),r+=s.added,i=s.end}return i},_calculateMinuteEndDate:function(t,n,e){var i=new Date(t),r=0;e=e||1,n=Math.abs(1*n),n=Math.round(n);var a=this._addMinutesUntilHourEnd(i,n);r+=a.added,i=a.end;for(var s=0,l=[],c=0,u=this._isMinutePrecision(i);r<n;){var h=this.$gantt.date.day_start(new Date(i)).valueOf();h!==s&&(l=this._getWorkHours(i),c=this._getMinutesPerDay(i),s=h);var _=n-r,g=this._getTimeOfDayStamp(i);if(l.length&&c)if(l[0].start>=g&&_>=c){if(r+=c,_==c){i=new Date(i.getFullYear(),i.getMonth(),i.getDate(),0,0,l[l.length-1].end);break}i=this.$gantt.date.add(i,1,"day"),i=this.$gantt.date.day_start(i)}else{for(var m=!1,v=null,$=0;$<l.length;$++)if(l[$].start<=g&&l[$].end>g){m=!0,v=l[$];break}if(m)if(g===v.start&&_>=v.durationMinutes)r+=v.durationMinutes,i=this.$gantt.date.add(i,v.durationMinutes,"minute");else if(_<=v.endMinute-g/60)r+=_,i=this.$gantt.date.add(i,_,"minute");else{var x=this._getMinutesPerHour(i);x<=_?(r+=x,i=u?this.$gantt.date.add(i,x,"minute"):this._nextDate(i,"hour",e)):(r+=(a=this._addMinutesUntilHourEnd(i,_)).added,i=a.end)}else i=this._getClosestWorkTimeFuture(i,"hour")}else i=this.$gantt.date.add(this.$gantt.date.day_start(i),1,"day")}if(r<n){var S=n-r;r+=(a=this._addMinutesUntilHourEnd(i,S)).added,i=a.end}return i},getClosestWorkTime:function(){var t=this.argumentsHelper.getClosestWorkTimeArguments.apply(this.argumentsHelper,arguments);return this._getClosestWorkTime(t.date,t.unit,t.dir)},_getClosestWorkTime:function(t,n,e){var i=new Date(t);if(this._isWorkTime(i,n))return i;if(i=this.$gantt.date[n+"_start"](i),e!="any"&&e)i=e=="past"?this._getClosestWorkTimePast(i,n):this._getClosestWorkTimeFuture(i,n);else{var r=this._getClosestWorkTimeFuture(i,n),a=this._getClosestWorkTimePast(i,n);i=Math.abs(r-t)<=Math.abs(t-a)?r:a}return i},_getClosestWorkTimeFuture:function(t,n){return this._getClosestWorkTimeGeneric(t,n,1)},_getClosestWorkTimePast:function(t,n){var e=this._getClosestWorkTimeGeneric(t,n,-1);return this.$gantt.date.add(e,1,n)},_findClosestTimeInDay:function(t,n,e){var i=new Date(t),r=null,a=!1;this._getWorkHours(i).length||(i=this._getClosestWorkTime(i,"day",n<0?"past":"future"),n<0&&(i=new Date(i.valueOf()-1),a=!0),e=this._getWorkHours(i));var s=this._getTimeOfDayStamp(i);if(a&&(s=this._getTimeOfDayStamp(new Date(i.valueOf()+1),a)),n>0){for(var l=0;l<e.length;l++)if(e[l].start>=s){r=new Date(i.getFullYear(),i.getMonth(),i.getDate(),0,0,e[l].start);break}}else for(l=e.length-1;l>=0;l--){if(e[l].end<=s){r=new Date(i.getFullYear(),i.getMonth(),i.getDate(),0,0,e[l].end);break}if(e[l].end>s&&e[l].start<=s){r=new Date(i.getFullYear(),i.getMonth(),i.getDate(),0,0,s);break}}return r},_getClosestWorkMinute:function(t,n,e){var i=new Date(t),r=this._getWorkHours(i),a=this._findClosestTimeInDay(i,e,r);return a||(i=this.calculateEndDate(i,e,"day"),e>0?i=this.$gantt.date.day_start(i):(i=this.$gantt.date.day_start(i),i=this.$gantt.date.add(i,1,"day"),i=new Date(i.valueOf()-1)),r=this._getWorkHours(i),a=this._findClosestTimeInDay(i,e,r)),e<0&&(a=this.$gantt.date.add(a,-1,n)),a},_getClosestWorkTimeGeneric:function(t,n,e){if(n==="hour"||n==="minute")return this._getClosestWorkMinute(t,n,e);for(var i=this._getUnitOrder(n),r=this.units[i-1],a=t,s=0;!this._isWorkTime(a,n)&&(!r||this._isWorkTime(a,r)||(a=e>0?this._getClosestWorkTimeFuture(a,r):this._getClosestWorkTimePast(a,r),!this._isWorkTime(a,n)));){if(++s>3e3)return this.$gantt.assert(!1,"Invalid working time check"),!1;var l=a.getTimezoneOffset();a=this.$gantt.date.add(a,e,n),a=this.$gantt._correct_dst_change(a,l,e,n),this.$gantt.date[n+"_start"]&&(a=this.$gantt.date[n+"_start"](a))}return a},hasWorkTime:function(){var t=this.getConfig(),n=t.dates;for(var e in t.dates);var i=this._checkWorkHours(t.hours),r=!1;return[0,1,2,3,4,5,6].forEach((function(a){if(!r){var s=n[a];s===!0?r=i:Array.isArray(s)&&(r=this._checkWorkHours(s))}}).bind(this)),r},_checkWorkHours:function(t){if(t.length===0)return!1;for(var n=!1,e=0;e<t.length;e+=2)t[e]!==t[e+1]&&(n=!0);return n},_isMinutePrecision:function(t){let n=!1;return this._getWorkHours(t).forEach(function(e){(e.startMinute%60||e.endMinute%60)&&(n=!0)}),n}};const gi={isLegacyResourceCalendarFormat:function(t){if(!t)return!1;for(var n in t)if(t[n]&&typeof t[n]=="object")return!0;return!1},getResourceProperty:function(t){var n=t.resource_calendars,e=t.resource_property;if(this.isLegacyResourceCalendarFormat(n))for(var i in t){e=i;break}return e},getCalendarIdFromLegacyConfig:function(t,n){if(n)for(var e in n){var i=n[e];if(t[e]){var r=i[t[e]];if(r)return r}}return null}},zv=(hr={},{getCalendarIdFromMultipleResources:function(t,n){var e=function(r){return r.map(function(a){return a&&a.resource_id?a.resource_id:a}).sort().join("-")}(t);if(t.length){if(t.length===1)return n.getResourceCalendar(e).id;if(hr[e])return hr[e].id;var i=function(r,a){return a.mergeCalendars(r.map(function(s){var l=s&&s.resource_id?s.resource_id:s;return a.getResourceCalendar(l)}))}(t,n);return hr[e]=i,n.addCalendar(i)}return null}});var hr;function zc(t){this.$gantt=t,this._calendars={},this._legacyConfig=void 0,this.$gantt.attachEvent("onGanttReady",(function(){this.$gantt.config.resource_calendars&&(this._isLegacyConfig=gi.isLegacyResourceCalendarFormat(this.$gantt.config.resource_calendars))}).bind(this)),this.$gantt.attachEvent("onBeforeGanttReady",(function(){this.createDefaultCalendars()}).bind(this)),this.$gantt.attachEvent("onBeforeGanttRender",(function(){this.createDefaultCalendars()}).bind(this))}function _s(t,n){this.argumentsHelper=n,this.$gantt=t}function Wc(t){this.$gantt=t.$gantt,this.argumentsHelper=Hc(this.$gantt),this.calendarManager=t,this.$disabledCalendar=new _s(this.$gantt,this.argumentsHelper)}zc.prototype={_calendars:{},_convertWorkTimeSettings:function(t){var n=t.days;if(n&&!t.dates){t.dates=t.dates||{};for(var e=0;e<n.length;e++)t.dates[e]=n[e],n[e]instanceof Array||(t.dates[e]=!!n[e])}return delete t.days,t},mergeCalendars:function(){var t=[],n=arguments;if(Array.isArray(n[0]))t=n[0].slice();else for(var e=0;e<arguments.length;e++)t.push(arguments[e]);var i,r=new Bc;return t.forEach((function(a){i=i?this._createCalendarFromConfig(r.merge(i,a)):a}).bind(this)),this.createCalendar(i)},_createCalendarFromConfig:function(t){var n=new hs(this.$gantt,Hc(this.$gantt));n.id=String(Me());var e=this._convertWorkTimeSettings(t);if(e.customWeeks)for(var i in e.customWeeks)e.customWeeks[i]=this._convertWorkTimeSettings(e.customWeeks[i]);return n._setConfig(e),n},createCalendar:function(t){var n;return t||(t={}),ut(n=t.getConfig?qt(t.getConfig()):t.worktime?qt(t.worktime):qt(t),qt(this.defaults.fulltime.worktime)),this._createCalendarFromConfig(n)},getCalendar:function(t){t=t||"global";var n=this._calendars[t];return n||(this.createDefaultCalendars(),n=this._calendars[t]),n},getCalendars:function(){var t=[];for(var n in this._calendars)t.push(this.getCalendar(n));return t},_getOwnCalendar:function(t){var n=this.$gantt.config;if(t[n.calendar_property])return this.getCalendar(t[n.calendar_property]);if(n.resource_calendars){var e;if(e=this._legacyConfig===!1?n.resource_property:gi.getResourceProperty(n),Array.isArray(t[e]))n.dynamic_resource_calendars?i=zv.getCalendarIdFromMultipleResources(t[e],this):r=this.getResourceCalendar(t[e]);else if(this._legacyConfig===void 0&&(this._legacyConfig=gi.isLegacyResourceCalendarFormat(n.resource_calendars)),this._legacyConfig)var i=gi.getCalendarIdFromLegacyConfig(t,n.resource_calendars);else if(e&&t[e]&&n.resource_calendars[t[e]])var r=this.getResourceCalendar(t[e]);if(i&&(r=this.getCalendar(i)),r)return r}return null},getResourceCalendar:function(t){if(t==null)return this.getCalendar();var n=null;n=typeof t=="number"||typeof t=="string"?t:t.id||t.key;var e=this.$gantt.config,i=e.resource_calendars,r=null;if(Array.isArray(t)&&t.length===1&&(n=typeof t[0]=="object"?t[0].resource_id:t[0]),i){if(this._legacyConfig===void 0&&(this._legacyConfig=gi.isLegacyResourceCalendarFormat(e.resource_calendars)),this._legacyConfig){for(var a in i)if(i[a][n]){r=i[a][n];break}}else r=i[n];if(r)return this.getCalendar(r)}return this.getCalendar()},getTaskCalendar:function(t){var n,e=this.$gantt;if(t==null)return this.getCalendar();if(!(n=typeof t!="number"&&typeof t!="string"||!e.isTaskExists(t)?t:e.getTask(t)))return this.getCalendar();var i=this._getOwnCalendar(n),r=!!e.getState().group_mode;if(!i&&e.config.inherit_calendar&&e.isTaskExists(n.parent)){for(var a=n;e.isTaskExists(a.parent)&&(a=e.getTask(a.parent),!e.isSummaryTask(a)||!(i=this._getOwnCalendar(a))););r&&!i&&t.$effective_calendar&&(i=this.getCalendar(t.$effective_calendar))}return i||this.getCalendar()},addCalendar:function(t){if(!this.isCalendar(t)){var n=t.id;(t=this.createCalendar(t)).id=n}if(t._tryChangeCalendarSettings(function(){})){var e=this.$gantt.config;return t.id=t.id||Me(),this._calendars[t.id]=t,e.worktimes||(e.worktimes={}),e.worktimes[t.id]=t.getConfig(),t.id}return this.$gantt.callEvent("onCalendarError",[{message:"Invalid calendar settings, no worktime available"},t]),null},deleteCalendar:function(t){var n=this.$gantt.config;return!!t&&!!this._calendars[t]&&(delete this._calendars[t],n.worktimes&&n.worktimes[t]&&delete n.worktimes[t],!0)},restoreConfigCalendars:function(t){for(var n in t)if(!this._calendars[n]){var e=t[n],i=this.createCalendar(e);i.id=n,this.addCalendar(i)}},defaults:{global:{id:"global",worktime:{hours:[8,12,13,17],days:[0,1,1,1,1,1,0]}},fulltime:{id:"fulltime",worktime:{hours:[0,24],days:[1,1,1,1,1,1,1]}}},createDefaultCalendars:function(){var t=this.$gantt.config;this.restoreConfigCalendars(this.defaults),this.restoreConfigCalendars(t.worktimes)},isCalendar:function(t){return[t.isWorkTime,t.setWorkTime,t.getWorkHours,t.unsetWorkTime,t.getClosestWorkTime,t.calculateDuration,t.hasDuration,t.calculateEndDate].every(function(n){return n instanceof Function})}},_s.prototype={getWorkHours:function(){return[0,24]},setWorkTime:function(){return!0},unsetWorkTime:function(){return!0},isWorkTime:function(){return!0},getClosestWorkTime:function(t){return this.argumentsHelper.getClosestWorkTimeArguments.apply(this.argumentsHelper,arguments).date},calculateDuration:function(){var t=this.argumentsHelper.getDurationArguments.apply(this.argumentsHelper,arguments),n=t.start_date,e=t.end_date,i=t.unit,r=t.step;return this._calculateDuration(n,e,i,r)},_calculateDuration:function(t,n,e,i){var r=this.$gantt.date,a={week:6048e5,day:864e5,hour:36e5,minute:6e4},s=0;if(a[e])s=Math.round((n-t)/(i*a[e]));else{for(var l=new Date(t),c=new Date(n);l.valueOf()<c.valueOf();)s+=1,l=r.add(l,i,e);l.valueOf()!=n.valueOf()&&(s+=(c-l)/(r.add(l,i,e)-l))}return Math.round(s)},hasDuration:function(){var t=this.argumentsHelper.getDurationArguments.apply(this.argumentsHelper,arguments),n=t.start_date,e=t.end_date;return!!t.unit&&(n=new Date(n),e=new Date(e),n.valueOf()<e.valueOf())},hasWorkTime:function(){return!0},equals:function(t){return t instanceof _s},calculateEndDate:function(){var t=this.argumentsHelper.calculateEndDateArguments.apply(this.argumentsHelper,arguments),n=t.start_date,e=t.duration,i=t.unit,r=t.step;return this.$gantt.date.add(n,r*e,i)}},Wc.prototype={_getCalendar:function(t){var n;if(this.$gantt.config.work_time){var e=this.calendarManager;t.task?n=e.getTaskCalendar(t.task):t.id?n=e.getTaskCalendar(t):t.calendar&&(n=t.calendar),n||(n=e.getTaskCalendar())}else n=this.$disabledCalendar;return n},getWorkHours:function(t){return t=this.argumentsHelper.getWorkHoursArguments.apply(this.argumentsHelper,arguments),this._getCalendar(t).getWorkHours(t.date)},setWorkTime:function(t,n){return t=this.argumentsHelper.setWorkTimeArguments.apply(this.argumentsHelper,arguments),n||(n=this.calendarManager.getCalendar()),n.setWorkTime(t)},unsetWorkTime:function(t,n){return t=this.argumentsHelper.unsetWorkTimeArguments.apply(this.argumentsHelper,arguments),n||(n=this.calendarManager.getCalendar()),n.unsetWorkTime(t)},isWorkTime:function(t,n,e,i){var r=this.argumentsHelper.isWorkTimeArguments.apply(this.argumentsHelper,arguments);return(i=this._getCalendar(r)).isWorkTime(r)},getClosestWorkTime:function(t){return t=this.argumentsHelper.getClosestWorkTimeArguments.apply(this.argumentsHelper,arguments),this._getCalendar(t).getClosestWorkTime(t)},calculateDuration:function(){var t=this.argumentsHelper.getDurationArguments.apply(this.argumentsHelper,arguments);return this._getCalendar(t).calculateDuration(t)},hasDuration:function(){var t=this.argumentsHelper.hasDurationArguments.apply(this.argumentsHelper,arguments);return this._getCalendar(t).hasDuration(t)},calculateEndDate:function(t){return t=this.argumentsHelper.calculateEndDateArguments.apply(this.argumentsHelper,arguments),this._getCalendar(t).calculateEndDate(t)}};const Wv={create:function(t,n){return{getWorkHours:function(e){return n.getWorkHours(e)},setWorkTime:function(e){return n.setWorkTime(e)},unsetWorkTime:function(e){n.unsetWorkTime(e)},isWorkTime:function(e,i,r){return n.isWorkTime(e,i,r)},getClosestWorkTime:function(e){return n.getClosestWorkTime(e)},calculateDuration:function(e,i,r){return n.calculateDuration(e,i,r)},_hasDuration:function(e,i,r){return n.hasDuration(e,i,r)},calculateEndDate:function(e,i,r,a){return n.calculateEndDate(e,i,r,a)},mergeCalendars:_t(t.mergeCalendars,t),createCalendar:_t(t.createCalendar,t),addCalendar:_t(t.addCalendar,t),getCalendar:_t(t.getCalendar,t),getCalendars:_t(t.getCalendars,t),getResourceCalendar:_t(t.getResourceCalendar,t),getTaskCalendar:_t(t.getTaskCalendar,t),deleteCalendar:_t(t.deleteCalendar,t)}}};function Fv(t){t.isUnscheduledTask=function(s){return t.assert(s&&s instanceof Object,"Invalid argument <b>task</b>="+s+" of gantt.isUnscheduledTask. Task object was expected"),!!s.unscheduled||!s.start_date},t._isAllowedUnscheduledTask=function(s){return!(!s.unscheduled||!t.config.show_unscheduled)},t._isTaskInTimelineLimits=function(s){var l=s.start_date?s.start_date.valueOf():null,c=s.end_date?s.end_date.valueOf():null;return!!(l&&c&&l<=this._max_date.valueOf()&&c>=this._min_date.valueOf())},t.isTaskVisible=function(s){if(!this.isTaskExists(s))return!1;var l=this.getTask(s);return!(!this._isAllowedUnscheduledTask(l)&&!this._isTaskInTimelineLimits(l))&&this.getGlobalTaskIndex(s)>=0},t._getProjectEnd=function(){if(t.config.project_end)return t.config.project_end;var s=t.getTaskByTime();return(s=s.sort(function(l,c){return+l.end_date>+c.end_date?1:-1})).length?s[s.length-1].end_date:null},t._getProjectStart=function(){if(t.config.project_start)return t.config.project_start;if(t.config.start_date)return t.config.start_date;if(t.getState().min_date)return t.getState().min_date;var s=t.getTaskByTime();return(s=s.sort(function(l,c){return+l.start_date>+c.start_date?1:-1})).length?s[0].start_date:null};var n=function(s,l){var c=!!(l&&l!=t.config.root_id&&t.isTaskExists(l))&&t.getTask(l),u=null;if(c)if(t.config.schedule_from_end)u=t.calculateEndDate({start_date:c.end_date,duration:-t.config.duration_step,task:s});else{if(!c.start_date)return n(c,t.getParent(c));u=c.start_date}else if(t.config.schedule_from_end)u=t.calculateEndDate({start_date:t._getProjectEnd(),duration:-t.config.duration_step,task:s});else{const h=t.getTaskByIndex(0),_=t.config.start_date||t.getState().min_date;u=h?h.start_date?h.start_date:h.end_date?t.calculateEndDate({start_date:h.end_date,duration:-t.config.duration_step,task:s}):_:_}return t.assert(u,"Invalid dates"),new Date(u)};t._set_default_task_timing=function(s){s.start_date=s.start_date||n(s,t.getParent(s)),s.duration=s.duration||t.config.duration_step,s.end_date=s.end_date||t.calculateEndDate(s)},t.createTask=function(s,l,c){if(s=s||{},t.defined(s.id)||(s.id=t.uid()),s.start_date||(s.start_date=n(s,l)),s.text===void 0&&(s.text=t.locale.labels.new_task),s.duration===void 0&&(s.duration=1),this.isTaskExists(l)){this.setParent(s,l,!0);var u=this.getTask(l);u.$open=!0,this.config.details_on_create||this.callEvent("onAfterParentExpand",[l,u])}return this.callEvent("onTaskCreated",[s])?(this.config.details_on_create?(t.isTaskExists(s.id)?t.getTask(s.id).$index!=s.$index&&(s.start_date&&typeof s.start_date=="string"&&(s.start_date=this.date.parseDate(s.start_date,"parse_date")),s.end_date&&typeof s.end_date=="string"&&(s.end_date=this.date.parseDate(s.end_date,"parse_date")),this.$data.tasksStore.updateItem(s.id,s)):(s.$new=!0,this.silent(function(){t.$data.tasksStore.addItem(s,c)})),this.selectTask(s.id),this.refreshData(),this.showLightbox(s.id)):this.addTask(s,l,c)&&(this.showTask(s.id),this.selectTask(s.id)),s.id):null},t._update_flags=function(s,l){var c=t.$data.tasksStore;s===void 0?(this._lightbox_id=null,c.silent(function(){c.unselect()}),this.getSelectedTasks&&this._multiselect.reset(),this._tasks_dnd&&this._tasks_dnd.drag&&(this._tasks_dnd.drag.id=null)):(this._lightbox_id==s&&(this._lightbox_id=l),c.getSelectedId()==s&&c.silent(function(){c.unselect(s),c.select(l)}),this._tasks_dnd&&this._tasks_dnd.drag&&this._tasks_dnd.drag.id==s&&(this._tasks_dnd.drag.id=l))};var e=function(s,l){var c=t.getTaskType(s.type),u={type:c,$no_start:!1,$no_end:!1,scheduled_summary:!1};return c===t.config.types.project&&s.auto_scheduling===!1&&(u.scheduled_summary=!0),l||c!=s.$rendered_type?(c==t.config.types.project?u.$no_end=u.$no_start=!0:c!=t.config.types.milestone&&(u.$no_end=!(s.end_date||s.duration),u.$no_start=!s.start_date,t._isAllowedUnscheduledTask(s)&&(u.$no_end=u.$no_start=!1)),u):(u.$no_start=s.$no_start,u.$no_end=s.$no_end,u)};function i(s){s.$effective_calendar=t.getTaskCalendar(s).id,s.start_date=t.getClosestWorkTime({dir:"future",date:s.start_date,unit:t.config.duration_unit,task:s}),s.end_date=t.calculateEndDate(s)}function r(s,l,c,u){const h={start:"start_date",end:"end_date"},_={start:"$auto_start_date",end:"$auto_end_date"};let g;g=s.type===t.config.types.project&&s.auto_scheduling===!1?_:h,l.$no_start&&(s[g.start]=c?new Date(c):n(s,this.getParent(s))),l.$no_end&&(s[g.end]=u?new Date(u):this.calculateEndDate({start_date:s[g.start],duration:this.config.duration_step,task:s})),(l.$no_start||l.$no_end)&&this._init_task_timing(s)}function a(s){var l=null,c=null,u=s!==void 0?s:t.config.root_id,h=[];return t.eachTask(function(_){const g=t.getTaskType(_.type)==t.config.types.project&&_.auto_scheduling===!1;t.getTaskType(_.type)==t.config.types.project&&!g||t.isUnscheduledTask(_)||(_.rollup&&h.push(_.id),!_.start_date||_.$no_start&&!g||l&&!(l>_.start_date.valueOf())||(l=_.start_date.valueOf()),!_.end_date||_.$no_end&&!g||c&&!(c<_.end_date.valueOf())||(c=_.end_date.valueOf()))},u),{start_date:l?new Date(l):null,end_date:c?new Date(c):null,rollup:h}}t._init_task_timing=function(s){var l=e(s,!0),c=s.$rendered_type!=l.type,u=l.type;c&&(s.$no_start=l.$no_start,s.$no_end=l.$no_end,s.$rendered_type=l.type),c&&u!=this.config.types.milestone&&u==this.config.types.project&&(this._set_default_task_timing(s),s.$calculate_duration=!1),u==this.config.types.milestone&&(s.end_date=s.start_date),s.start_date&&s.end_date&&s.$calculate_duration!==!1&&(s.duration=this.calculateDuration(s)),s.$calculate_duration||(s.$calculate_duration=!0),s.end_date||(s.end_date=s.start_date),s.duration=s.duration||0,this.config.min_duration===0&&s.duration===0&&(s.$no_end=!1);var h=this.getTaskCalendar(s);s.$effective_calendar&&s.$effective_calendar!==h.id&&(i(s),this.config.inherit_calendar&&this.isSummaryTask(s)&&this.eachTask(function(_){i(_)},s.id)),s.$effective_calendar=h.id},t.isSummaryTask=function(s){t.assert(s&&s instanceof Object,"Invalid argument <b>task</b>="+s+" of gantt.isSummaryTask. Task object was expected");var l=e(s);return!(!l.$no_end&&!l.$no_start)},t.resetProjectDates=function(s){var l=e(s);if(l.$no_end||l.$no_start){var c=a(s.id);r.call(this,s,l,c.start_date,c.end_date),s.$rollup=c.rollup}},t.getSubtaskDuration=function(s){var l=0,c=s!==void 0?s:t.config.root_id;return this.eachTask(function(u){this.getTaskType(u.type)==t.config.types.project||this.isUnscheduledTask(u)||(l+=u.duration)},c),l},t.getSubtaskDates=function(s){var l=a(s);return{start_date:l.start_date,end_date:l.end_date}},t._update_parents=function(s,l,c){if(s){var u=this.getTask(s);u.rollup&&(c=!0);var h=this.getParent(u),_=e(u),g=!0;if(c||u.start_date&&u.end_date&&(_.$no_start||_.$no_end)){const $=u.$auto_start_date?"$auto_start_date":"start_date",x=u.$auto_end_date?"$auto_end_date":"end_date";var m=u[$].valueOf(),v=u[x].valueOf();t.resetProjectDates(u),c||m!=u[$].valueOf()||v!=u[x].valueOf()||(g=!1),g&&!l&&this.refreshTask(u.id,!0),_.scheduled_summary&&(g=!0)}g&&h&&this.isTaskExists(h)&&this._update_parents(h,l,c)}},t.roundDate=function(s){var l=t.getScale();de(s)&&(s={date:s,unit:l?l.unit:t.config.duration_unit,step:l?l.step:t.config.duration_step});var c,u,h,_=s.date,g=s.step,m=s.unit;if(!l)return _;if(m==l.unit&&g==l.step&&+_>=+l.min_date&&+_<=+l.max_date)h=Math.floor(t.columnIndexByDate(_)),l.trace_x[h]||(h-=1,l.rtl&&(h=0)),u=new Date(l.trace_x[h]),c=t.date.add(u,g,m);else{for(h=Math.floor(t.columnIndexByDate(_)),c=t.date[m+"_start"](new Date(l.min_date)),l.trace_x[h]&&(c=t.date[m+"_start"](l.trace_x[h]));+c<+_;){var v=(c=t.date[m+"_start"](t.date.add(c,g,m))).getTimezoneOffset();c=t._correct_dst_change(c,v,c,m),t.date[m+"_start"]&&(c=t.date[m+"_start"](c))}u=t.date.add(c,-1*g,m)}return s.dir&&s.dir=="future"?c:s.dir&&s.dir=="past"||Math.abs(_-u)<Math.abs(c-_)?u:c},t.correctTaskWorkTime=function(s){t.config.work_time&&t.config.correct_work_time&&(this.isWorkTime(s.start_date,void 0,s)?this.isWorkTime(new Date(+s.end_date-1),void 0,s)||(s.end_date=this.calculateEndDate(s)):(s.start_date=this.getClosestWorkTime({date:s.start_date,dir:"future",task:s}),s.end_date=this.calculateEndDate(s)))},t.attachEvent("onBeforeTaskUpdate",function(s,l){return t._init_task_timing(l),!0}),t.attachEvent("onBeforeTaskAdd",function(s,l){return t._init_task_timing(l),!0}),t.attachEvent("onAfterTaskMove",function(s,l,c){return t._init_task_timing(t.getTask(s)),!0})}function uc(t,n){var e,i=t.config.container_resize_timeout||20;let r=hc(t);if(t.config.container_resize_method=="timeout")c();else try{t.event(n,"resize",function(){if(t.$scrollbarRepaint)t.$scrollbarRepaint=null;else{let u=hc(t);if(r.x==u.x&&r.y==u.y)return;r=u,a()}})}catch{c()}function a(){clearTimeout(e),e=setTimeout(function(){t.$destroyed||t.render()},i)}var s=t.$root.offsetHeight,l=t.$root.offsetWidth;function c(){t.$root.offsetHeight==s&&t.$root.offsetWidth==l||a(),s=t.$root.offsetHeight,l=t.$root.offsetWidth,setTimeout(c,i)}}function hc(t){return{x:t.$root.offsetWidth,y:t.$root.offsetHeight}}function Uv(t){t.assert=function(a){return function(s,l){s||a.config.show_errors&&a.callEvent("onError",[l])!==!1&&(a.message?a.message({type:"error",text:l,expire:-1}):console.log(l))}}(t);var n="Invalid value of the first argument of `gantt.init`. Supported values: HTMLElement, String (element id).This error means that either invalid object is passed into `gantt.init` or that the element with the specified ID doesn't exist on the page when `gantt.init` is called.";function e(a){if(!a||typeof a=="string"&&document.getElementById(a)||function(s){try{s.cloneNode(!1)}catch{return!1}return!0}(a))return!0;throw t.assert(!1,n),new Error(n)}t.init=function(a,s,l){t.env.isNode?a=null:e(a),s&&l&&(this.config.start_date=this._min_date=new Date(s),this.config.end_date=this._max_date=new Date(l)),this.date.init(),this.init=function(c){t.env.isNode?c=null:e(c),this.$container&&this.$container.parentNode&&(this.$container.parentNode.removeChild(this.$container),this.$container=null),this.$layout&&this.$layout.clear(),this._reinit(c)},this._reinit(a)},t._quickRefresh=function(a){for(var s=this._getDatastores.call(this),l=0;l<s.length;l++)s[l]._quick_refresh=!0;for(a(),l=0;l<s.length;l++)s[l]._quick_refresh=!1};var i=(function(){this._clearTaskLayers&&this._clearTaskLayers(),this._clearLinkLayers&&this._clearLinkLayers(),this.$layout&&(this.$layout.destructor(),this.$layout=null,this.$ui.reset())}).bind(t),r=(function(){Bt(t)||(this.$root.innerHTML="",this.$root.gantt=this,ss(this),this.config.layout.id="main",this.$layout=this.$ui.createView("layout",this.$root,this.config.layout),this.$layout.attachEvent("onBeforeResize",function(){for(var a=t.$services.getService("datastores"),s=0;s<a.length;s++)t.getDatastore(a[s]).filter(),t.$data.tasksStore._skipTaskRecalculation?t.$data.tasksStore._skipTaskRecalculation!="lightbox"&&(t.$data.tasksStore._skipTaskRecalculation=!1):t.getDatastore(a[s]).callEvent("onBeforeRefreshAll",[])}),this.$layout.attachEvent("onResize",function(){t._quickRefresh(function(){t.refreshData()})}),this.callEvent("onGanttLayoutReady",[]),this.$layout.render(),this.$container=this.$layout.$container.firstChild,function(a){window.getComputedStyle(a.$root).getPropertyValue("position")=="static"&&(a.$root.style.position="relative");var s=document.createElement("iframe");s.className="gantt_container_resize_watcher",s.tabIndex=-1,a.config.wai_aria_attributes&&(s.setAttribute("role","none"),s.setAttribute("aria-hidden",!0)),(window.Sfdc||window.$A||window.Aura)&&(a.config.container_resize_method="timeout"),a.$root.appendChild(s),s.contentWindow?uc(a,s.contentWindow):(a.$root.removeChild(s),uc(a,window))}(this))}).bind(t);t.resetLayout=function(){i(),r(),this.render()},t._reinit=function(a){this.callEvent("onBeforeGanttReady",[]),this._update_flags(),this.$services.getService("templateLoader").initTemplates(this),i(),this.$root=null,a&&(this.$root=ms(a),r(),this.$mouseEvents.reset(this.$root),function(s){s.$container&&!s.config.autosize&&s.$root.offsetHeight<50&&console.warn(`The Gantt container has a small height, so you cannot see its content. If it is not intended, you need to set the 'height' style rule to the container:
https://docs.dhtmlx.com/gantt/faq.html#theganttchartisntrenderedcorrectly`)}(t)),this.callEvent("onTemplatesReady",[]),this.callEvent("onGanttReady",[]),this.render()},t.$click={buttons:{edit:function(a){t.isReadonly(t.getTask(a))||t.showLightbox(a)},delete:function(a){var s=t.getTask(a);if(!t.isReadonly(s)){var l=t.locale.labels.confirm_deleting,c=t.locale.labels.confirm_deleting_title;t._simple_confirm(l,c,function(){t.isTaskExists(a)&&(s.$new?(t.$data.tasksStore._skipTaskRecalculation="lightbox",t.silent(function(){t.deleteTask(a,!0)}),t.$data.tasksStore._skipTaskRecalculation=!1,t.refreshData()):(t.$data.tasksStore._skipTaskRecalculation=!0,t.deleteTask(a))),t.hideLightbox()})}}}},t.render=function(){var a;if(this.callEvent("onBeforeGanttRender",[]),!Bt(t)){!this.config.sort&&this._sort&&(this._sort=void 0),this.$root&&(this.config.rtl?(this.$root.classList.add("gantt_rtl"),this.$root.firstChild.classList.add("gantt_rtl")):(this.$root.classList.remove("gantt_rtl"),this.$root.firstChild.classList.remove("gantt_rtl")));var s=this.getScrollState(),l=s?s.x:0;this._getHorizontalScrollbar()&&(l=this._getHorizontalScrollbar().$config.codeScrollLeft||l||0),a=null,l&&(a=t.dateFromPos(l+this.config.task_scroll_offset))}if(ss(this),Bt(t))t.refreshData();else{this.$layout.$config.autosize=this.config.autosize;var c=this.config.preserve_scroll;if(this.config.preserve_scroll=!1,this.$layout.resize(),this.config.preserve_scroll=c,this.config.preserve_scroll&&s){if(l||s.y){var u=t.getScrollState();if(+a!=+t.dateFromPos(u.x)||u.y!=s.y){l=null;var h=null;a&&(l=Math.max(t.posFromDate(a)-t.config.task_scroll_offset,0)),s.y&&(h=s.y),t.scrollTo(l,h)}}this.$layout.getScrollbarsInfo().forEach(_=>{const g=t.$ui.getView(_.id),m=t.utils.dom.isChildOf(g.$view,t.$container);_.boundViews.forEach(v=>{const $=t.$ui.getView(v);_.y&&_.y!=s.y&&$&&!m&&$.scrollTo(void 0,0)})})}}this.callEvent("onGanttRender",[])},t.setSizes=t.render,t.getTaskRowNode=function(a){for(var s=this.$grid_data.childNodes,l=this.config.task_attribute,c=0;c<s.length;c++)if(s[c].getAttribute&&s[c].getAttribute(l)==a)return s[c];return null},t.changeLightboxType=function(a){if(this.getLightboxType()==a)return!0;t._silent_redraw_lightbox(a)},t._get_link_type=function(a,s){var l=null;return a&&s?l=t.config.links.start_to_start:!a&&s?l=t.config.links.finish_to_start:a||s?a&&!s&&(l=t.config.links.start_to_finish):l=t.config.links.finish_to_finish,l},t.isLinkAllowed=function(a,s,l,c){var u=null;if(!(u=typeof a=="object"?a:{source:a,target:s,type:this._get_link_type(l,c)})||!(u.source&&u.target&&u.type)||u.source==u.target)return!1;var h=!0;return this.checkEvent("onLinkValidation")&&(h=this.callEvent("onLinkValidation",[u])),h},t._correct_dst_change=function(a,s,l,c){var u=gr(c)*l;if(u>3600&&u<86400){var h=a.getTimezoneOffset()-s;h&&(a=t.date.add(a,h,"minute"))}return a},t.isSplitTask=function(a){return t.assert(a&&a instanceof Object,"Invalid argument <b>task</b>="+a+" of gantt.isSplitTask. Task object was expected"),this.$data.tasksStore._isSplitItem(a)},t._is_icon_open_click=function(a){if(!a)return!1;var s=a.target||a.srcElement;if(!s||!s.className)return!1;var l=ce(s);return l.indexOf("gantt_tree_icon")!==-1&&(l.indexOf("gantt_close")!==-1||l.indexOf("gantt_open")!==-1)}}const Vv={date:{month_full:[" ","","","","","","","",""," "," "," "],month_short:["","","","","","","","","","","",""],day_full:["","","","","","",""],day_short:["","","","","","",""]},labels:{new_task:" ",icon_save:"",icon_cancel:"",icon_details:"",icon_edit:"",icon_delete:"",confirm_closing:"  ,   ",confirm_deleting:"       ",section_description:"",section_time:" ",section_type:"Type",section_deadline:"Deadline",section_baselines:"Baselines",column_wbs:"WBS",column_text:"Task name",column_start_date:"Start time",column_duration:"Duration",column_add:"",link:"Link",confirm_link_deleting:"will be deleted",link_start:" (start)",link_end:" (end)",type_task:"Task",type_project:"Project",type_milestone:"Milestone",minutes:"Minutes",hours:"Hours",days:"Days",weeks:"Week",months:"Months",years:"Years",message_ok:"OK",message_cancel:"",section_constraint:"Constraint",constraint_type:"Constraint type",constraint_date:"Constraint date",asap:"As Soon As Possible",alap:"As Late As Possible",snet:"Start No Earlier Than",snlt:"Start No Later Than",fnet:"Finish No Earlier Than",fnlt:"Finish No Later Than",mso:"Must Start On",mfo:"Must Finish On",resources_filter_placeholder:"type to filter",resources_filter_label:"hide empty",empty_state_text_link:"Click here",empty_state_text_description:"to create your first task",baselines_section_placeholder:"Start adding a new baseline",baselines_add_button:"Add Baseline",baselines_remove_button:"Remove",baselines_remove_all_button:"Remove All",deadline_enable_button:"Set",deadline_disable_button:"Remove"}},jv={date:{month_full:["","","","","Ma","","","","","","",""],month_short:["","","","","Ma","","","","","","",""],day_full:["","","","","","",""],day_short:["","","","","","",""]},labels:{new_task:" ",icon_save:"",icon_cancel:"",icon_details:"",icon_edit:"",icon_delete:"",confirm_closing:"",confirm_deleting:"   , ?",section_description:"",section_time:" ",section_type:"",section_deadline:"Deadline",section_baselines:"Baselines",column_wbs:"",column_text:"",column_start_date:"",column_duration:"",column_add:"",link:"",confirm_link_deleting:" ",link_start:"()",link_end:"()",type_task:"Task",type_project:"Project",type_milestone:"Milestone",minutes:"ii",hours:"i",days:"",weeks:"",months:"",years:"",message_ok:"OK",message_cancel:"",section_constraint:"Constraint",constraint_type:"Constraint type",constraint_date:"Constraint date",asap:"As Soon As Possible",alap:"As Late As Possible",snet:"Start No Earlier Than",snlt:"Start No Later Than",fnet:"Finish No Earlier Than",fnlt:"Finish No Later Than",mso:"Must Start On",mfo:"Must Finish On",resources_filter_placeholder:"type to filter",resources_filter_label:"hide empty",empty_state_text_link:"Click here",empty_state_text_description:"to create your first task",baselines_section_placeholder:"Start adding a new baseline",baselines_add_button:"Add Baseline",baselines_remove_button:"Remove",baselines_remove_all_button:"Remove All",deadline_enable_button:"Set",deadline_disable_button:"Remove"}},Gv={date:{month_full:["Gener","Febrer","Mar","Abril","Maig","Juny","Juliol","Agost","Setembre","Octubre","Novembre","Desembre"],month_short:["Gen","Feb","Mar","Abr","Mai","Jun","Jul","Ago","Set","Oct","Nov","Des"],day_full:["Diumenge","Dilluns","Dimarts","Dimecres","Dijous","Divendres","Dissabte"],day_short:["Dg","Dl","Dm","Dc","Dj","Dv","Ds"]},labels:{new_task:"Nova tasca",icon_save:"Guardar",icon_cancel:"Cancellar",icon_details:"Detalls",icon_edit:"Editar",icon_delete:"Esborrar",confirm_closing:"",confirm_deleting:"L'esdeveniment s'esborrar definitivament, continuar ?",section_description:"Descripci",section_time:"Periode de temps",section_type:"Type",section_deadline:"Deadline",section_baselines:"Baselines",column_wbs:"WBS",column_text:"Task name",column_start_date:"Start time",column_duration:"Duration",column_add:"",link:"Link",confirm_link_deleting:"will be deleted",link_start:" (start)",link_end:" (end)",type_task:"Task",type_project:"Project",type_milestone:"Milestone",minutes:"Minutes",hours:"Hours",days:"Days",weeks:"Week",months:"Months",years:"Years",message_ok:"OK",message_cancel:"Cancellar",section_constraint:"Constraint",constraint_type:"Constraint type",constraint_date:"Constraint date",asap:"As Soon As Possible",alap:"As Late As Possible",snet:"Start No Earlier Than",snlt:"Start No Later Than",fnet:"Finish No Earlier Than",fnlt:"Finish No Later Than",mso:"Must Start On",mfo:"Must Finish On",resources_filter_placeholder:"type to filter",resources_filter_label:"hide empty",empty_state_text_link:"Click here",empty_state_text_description:"to create your first task",baselines_section_placeholder:"Start adding a new baseline",baselines_add_button:"Add Baseline",baselines_remove_button:"Remove",baselines_remove_all_button:"Remove All",deadline_enable_button:"Set",deadline_disable_button:"Remove"}},qv={date:{month_full:["","","","","","","","","","","",""],month_short:["1","2","3","4","5","6","7","8","9","10","11","12"],day_full:["","","","","","",""],day_short:["","","","","","",""]},labels:{new_task:"",icon_save:"",icon_cancel:"",icon_details:"",icon_edit:"",icon_delete:"",confirm_closing:"!",confirm_deleting:"?",section_description:"",section_time:"",section_type:"",section_deadline:"Deadline",section_baselines:"Baselines",column_wbs:"",column_text:"",column_start_date:"",column_duration:"",column_add:"",link:"",confirm_link_deleting:"",link_start:" ()",link_end:" ()",type_task:"",type_project:"",type_milestone:"",minutes:"",hours:"",days:"",weeks:"",months:"",years:"",message_ok:"OK",message_cancel:"",section_constraint:"Constraint",constraint_type:"Constraint type",constraint_date:"Constraint date",asap:"As Soon As Possible",alap:"As Late As Possible",snet:"Start No Earlier Than",snlt:"Start No Later Than",fnet:"Finish No Earlier Than",fnlt:"Finish No Later Than",mso:"Must Start On",mfo:"Must Finish On",resources_filter_placeholder:"type to filter",resources_filter_label:"hide empty",empty_state_text_link:"Click here",empty_state_text_description:"to create your first task",baselines_section_placeholder:"Start adding a new baseline",baselines_add_button:"Add Baseline",baselines_remove_button:"Remove",baselines_remove_all_button:"Remove All",deadline_enable_button:"Set",deadline_disable_button:"Remove"}},Yv={date:{month_full:["Leden","nor","Bezen","Duben","Kvten","erven","ervenec","Srpen","Z","jen","Listopad","Prosinec"],month_short:["Led","n","Be","Dub","Kv","er","ec","Srp","Z","j","List","Pro"],day_full:["Nedle","Pondl","ter","Steda","tvrtek","Ptek","Sobota"],day_short:["Ne","Po","t","St","t","P","So"]},labels:{new_task:"Nov prce",icon_save:"Uloit",icon_cancel:"Zpt",icon_details:"Detail",icon_edit:"Edituj",icon_delete:"Smazat",confirm_closing:"",confirm_deleting:"Udlost bude trvale smazna, opravdu?",section_description:"Poznmky",section_time:"Doba platnosti",section_type:"Type",section_deadline:"Deadline",section_baselines:"Baselines",column_wbs:"WBS",column_text:"Task name",column_start_date:"Start time",column_duration:"Duration",column_add:"",link:"Link",confirm_link_deleting:"will be deleted",link_start:" (start)",link_end:" (end)",type_task:"Task",type_project:"Project",type_milestone:"Milestone",minutes:"Minutes",hours:"Hours",days:"Days",weeks:"Week",months:"Months",years:"Years",message_ok:"OK",message_cancel:"Zpt",section_constraint:"Constraint",constraint_type:"Constraint type",constraint_date:"Constraint date",asap:"As Soon As Possible",alap:"As Late As Possible",snet:"Start No Earlier Than",snlt:"Start No Later Than",fnet:"Finish No Earlier Than",fnlt:"Finish No Later Than",mso:"Must Start On",mfo:"Must Finish On",resources_filter_placeholder:"type to filter",resources_filter_label:"hide empty",empty_state_text_link:"Click here",empty_state_text_description:"to create your first task",baselines_section_placeholder:"Start adding a new baseline",baselines_add_button:"Add Baseline",baselines_remove_button:"Remove",baselines_remove_all_button:"Remove All",deadline_enable_button:"Set",deadline_disable_button:"Remove"}},Kv={date:{month_full:["Januar","Februar","Marts","April","Maj","Juni","Juli","August","September","Oktober","November","December"],month_short:["Jan","Feb","Mar","Apr","Maj","Jun","Jul","Aug","Sep","Okt","Nov","Dec"],day_full:["Sndag","Mandag","Tirsdag","Onsdag","Torsdag","Fredag","Lrdag"],day_short:["Sn","Man","Tir","Ons","Tor","Fre","Lr"]},labels:{new_task:"Ny opgave",icon_save:"Gem",icon_cancel:"Fortryd",icon_details:"Detaljer",icon_edit:"Tilret",icon_delete:"Slet",confirm_closing:"Dine rettelser vil g tabt.. Er dy sikker?",confirm_deleting:"Bigivenheden vil blive slettet permanent. Er du sikker?",section_description:"Beskrivelse",section_time:"Tidsperiode",section_type:"Type",section_deadline:"Deadline",section_baselines:"Baselines",column_wbs:"WBS",column_text:"Task name",column_start_date:"Start time",column_duration:"Duration",column_add:"",link:"Link",confirm_link_deleting:"will be deleted",link_start:" (start)",link_end:" (end)",type_task:"Task",type_project:"Project",type_milestone:"Milestone",minutes:"Minutes",hours:"Hours",days:"Days",weeks:"Week",months:"Months",years:"Years",message_ok:"OK",message_cancel:"Fortryd",section_constraint:"Constraint",constraint_type:"Constraint type",constraint_date:"Constraint date",asap:"As Soon As Possible",alap:"As Late As Possible",snet:"Start No Earlier Than",snlt:"Start No Later Than",fnet:"Finish No Earlier Than",fnlt:"Finish No Later Than",mso:"Must Start On",mfo:"Must Finish On",resources_filter_placeholder:"type to filter",resources_filter_label:"hide empty",empty_state_text_link:"Click here",empty_state_text_description:"to create your first task",baselines_section_placeholder:"Start adding a new baseline",baselines_add_button:"Add Baseline",baselines_remove_button:"Remove",baselines_remove_all_button:"Remove All",deadline_enable_button:"Set",deadline_disable_button:"Remove"}},Jv={date:{month_full:[" Januar"," Februar"," Mrz "," April"," Mai"," Juni"," Juli"," August"," September "," Oktober"," November "," Dezember"],month_short:["Jan","Feb","Mr","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez"],day_full:["Sonntag","Montag","Dienstag"," Mittwoch"," Donnerstag","Freitag","Samstag"],day_short:["So","Mo","Di","Mi","Do","Fr","Sa"]},labels:{new_task:"Neue Aufgabe",icon_save:"Speichern",icon_cancel:"Abbrechen",icon_details:"Details",icon_edit:"ndern",icon_delete:"Lschen",confirm_closing:"",confirm_deleting:"Der Eintrag wird gelscht",section_description:"Beschreibung",section_time:"Zeitspanne",section_type:"Type",section_deadline:"Deadline",section_baselines:"Baselines",column_wbs:"PSP",column_text:"Task-Namen",column_start_date:"Startzeit",column_duration:"Dauer",column_add:"",link:"Link",confirm_link_deleting:"werden gelscht",link_start:"(starten)",link_end:"(ende)",type_task:"Task",type_project:"Project",type_milestone:"Milestone",minutes:"Minuten",hours:"Stunden",days:"Tage",weeks:"Wochen",months:"Monate",years:"Jahre",message_ok:"OK",message_cancel:"Abbrechen",section_constraint:"Regel",constraint_type:"Regel",constraint_date:"Regel - Datum",asap:"So bald wie mglich",alap:"So spt wie mglich",snet:"Beginn nicht vor",snlt:"Beginn nicht spter als",fnet:"Fertigstellung nicht vor",fnlt:"Fertigstellung nicht spter als",mso:"Muss beginnen am",mfo:"Muss fertig sein am",resources_filter_placeholder:"type to filter",resources_filter_label:"hide empty",empty_state_text_link:"Click here",empty_state_text_description:"to create your first task",baselines_section_placeholder:"Start adding a new baseline",baselines_add_button:"Add Baseline",baselines_remove_button:"Remove",baselines_remove_all_button:"Remove All",deadline_enable_button:"Set",deadline_disable_button:"Remove"}},Xv={date:{month_full:["","","","","","","","","","","",""],month_short:["","","","","","","","","","","",""],day_full:["","","","","","",""],day_short:["","","","","","",""]},labels:{new_task:" ",icon_save:"",icon_cancel:"",icon_details:"",icon_edit:"",icon_delete:"",confirm_closing:"",confirm_deleting:"    .   ;",section_description:"",section_time:" ",section_type:"Type",section_deadline:"Deadline",section_baselines:"Baselines",column_wbs:"WBS",column_text:"Task name",column_start_date:"Start time",column_duration:"Duration",column_add:"",link:"Link",confirm_link_deleting:"will be deleted",link_start:" (start)",link_end:" (end)",type_task:"Task",type_project:"Project",type_milestone:"Milestone",minutes:"Minutes",hours:"Hours",days:"Days",weeks:"Week",months:"Months",years:"Years",message_ok:"OK",message_cancel:"",section_constraint:"Constraint",constraint_type:"Constraint type",constraint_date:"Constraint date",asap:"As Soon As Possible",alap:"As Late As Possible",snet:"Start No Earlier Than",snlt:"Start No Later Than",fnet:"Finish No Earlier Than",fnlt:"Finish No Later Than",mso:"Must Start On",mfo:"Must Finish On",resources_filter_placeholder:"type to filter",resources_filter_label:"hide empty",empty_state_text_link:"Click here",empty_state_text_description:"to create your first task",baselines_section_placeholder:"Start adding a new baseline",baselines_add_button:"Add Baseline",baselines_remove_button:"Remove",baselines_remove_all_button:"Remove All",deadline_enable_button:"Set",deadline_disable_button:"Remove"}},Zv={date:{month_full:["January","February","March","April","May","June","July","August","September","October","November","December"],month_short:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],day_full:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],day_short:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},labels:{new_task:"New task",icon_save:"Save",icon_cancel:"Cancel",icon_details:"Details",icon_edit:"Edit",icon_delete:"Delete",confirm_closing:"",confirm_deleting:"Task will be deleted permanently, are you sure?",section_description:"Description",section_time:"Time period",section_type:"Type",section_deadline:"Deadline",section_baselines:"Baselines",column_wbs:"WBS",column_text:"Task name",column_start_date:"Start time",column_duration:"Duration",column_add:"",link:"Link",confirm_link_deleting:"will be deleted",link_start:" (start)",link_end:" (end)",type_task:"Task",type_project:"Project",type_milestone:"Milestone",minutes:"Minutes",hours:"Hours",days:"Days",weeks:"Week",months:"Months",years:"Years",message_ok:"OK",message_cancel:"Cancel",section_constraint:"Constraint",constraint_type:"Constraint type",constraint_date:"Constraint date",asap:"As Soon As Possible",alap:"As Late As Possible",snet:"Start No Earlier Than",snlt:"Start No Later Than",fnet:"Finish No Earlier Than",fnlt:"Finish No Later Than",mso:"Must Start On",mfo:"Must Finish On",resources_filter_placeholder:"type to filter",resources_filter_label:"hide empty",empty_state_text_link:"Click here",empty_state_text_description:"to create your first task",baselines_section_placeholder:"Start adding a new baseline",baselines_add_button:"Add Baseline",baselines_remove_button:"Remove",baselines_remove_all_button:"Remove All",deadline_enable_button:"Set",deadline_disable_button:"Remove"}},Qv={date:{month_full:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],month_short:["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"],day_full:["Domingo","Lunes","Martes","Mircoles","Jueves","Viernes","Sbado"],day_short:["Dom","Lun","Mar","Mi","Jue","Vie","Sb"]},labels:{new_task:"Nueva tarea",icon_save:"Guardar",icon_cancel:"Cancelar",icon_details:"Detalles",icon_edit:"Editar",icon_delete:"Eliminar",confirm_closing:"",confirm_deleting:"El evento se borrar definitivamente, continuar?",section_description:"Descripcin",section_time:"Perodo",section_type:"Tipo",section_deadline:"Deadline",section_baselines:"Baselines",column_wbs:"EDT",column_text:"Tarea",column_start_date:"Inicio",column_duration:"Duracin",column_add:"",link:"Enlace",confirm_link_deleting:"ser borrada",link_start:" (inicio)",link_end:" (fin)",type_task:"Tarea",type_project:"Proyecto",type_milestone:"Hito",minutes:"Minutos",hours:"Horas",days:"Das",weeks:"Semanas",months:"Meses",years:"Aos",message_ok:"OK",message_cancel:"Cancelar",section_constraint:"Constraint",constraint_type:"Constraint type",constraint_date:"Constraint date",asap:"As Soon As Possible",alap:"As Late As Possible",snet:"Start No Earlier Than",snlt:"Start No Later Than",fnet:"Finish No Earlier Than",fnlt:"Finish No Later Than",mso:"Must Start On",mfo:"Must Finish On",resources_filter_placeholder:"type to filter",resources_filter_label:"hide empty",empty_state_text_link:"Click here",empty_state_text_description:"to create your first task",baselines_section_placeholder:"Start adding a new baseline",baselines_add_button:"Add Baseline",baselines_remove_button:"Remove",baselines_remove_all_button:"Remove All",deadline_enable_button:"Set",deadline_disable_button:"Remove"}},tk={date:{month_full:["","","","","","","","","","","",""],month_short:["1","2","3","4","5","6","7","8","9","10","11","12"],day_full:["","","","","","",""],day_short:["","","","","","",""]},labels:{new_task:" ",icon_save:"",icon_cancel:"",icon_details:"",icon_edit:"",icon_delete:"",confirm_closing:"       ",confirm_deleting:"         ",section_description:"",section_time:" ",section_type:"",section_deadline:"Deadline",section_baselines:"Baselines",column_wbs:"WBS",column_text:"",column_start_date:" ",column_duration:"",column_add:"",link:"",confirm_link_deleting:"  ",link_start:" ()",link_end:" ()",type_task:"",type_project:"",type_milestone:"",minutes:"",hours:"",days:"",weeks:"",months:"",years:"",message_ok:"",message_cancel:"",section_constraint:"Constraint",constraint_type:"Constraint type",constraint_date:"Constraint date",asap:"As Soon As Possible",alap:"As Late As Possible",snet:"Start No Earlier Than",snlt:"Start No Later Than",fnet:"Finish No Earlier Than",fnlt:"Finish No Later Than",mso:"Must Start On",mfo:"Must Finish On",resources_filter_placeholder:"type to filter",resources_filter_label:"hide empty",empty_state_text_link:"Click here",empty_state_text_description:"to create your first task",baselines_section_placeholder:"Start adding a new baseline",baselines_add_button:"Add Baseline",baselines_remove_button:"Remove",baselines_remove_all_button:"Remove All",deadline_enable_button:"Set",deadline_disable_button:"Remove"}},ek={date:{month_full:["Tammikuu","Helmikuu","Maaliskuu","Huhtikuu","Toukokuu","Kes&auml;kuu","Hein&auml;kuu","Elokuu","Syyskuu","Lokakuu","Marraskuu","Joulukuu"],month_short:["Tam","Hel","Maa","Huh","Tou","Kes","Hei","Elo","Syy","Lok","Mar","Jou"],day_full:["Sunnuntai","Maanantai","Tiistai","Keskiviikko","Torstai","Perjantai","Lauantai"],day_short:["Su","Ma","Ti","Ke","To","Pe","La"]},labels:{new_task:"Uusi tehtv",icon_save:"Tallenna",icon_cancel:"Peru",icon_details:"Tiedot",icon_edit:"Muokkaa",icon_delete:"Poista",confirm_closing:"",confirm_deleting:"Haluatko varmasti poistaa tapahtuman?",section_description:"Kuvaus",section_time:"Aikajakso",section_type:"Type",section_deadline:"Deadline",section_baselines:"Baselines",column_wbs:"WBS",column_text:"Task name",column_start_date:"Start time",column_duration:"Duration",column_add:"",link:"Link",confirm_link_deleting:"will be deleted",link_start:" (start)",link_end:" (end)",type_task:"Task",type_project:"Project",type_milestone:"Milestone",minutes:"Minutes",hours:"Hours",days:"Days",weeks:"Week",months:"Months",years:"Years",message_ok:"OK",message_cancel:"Peru",section_constraint:"Constraint",constraint_type:"Constraint type",constraint_date:"Constraint date",asap:"As Soon As Possible",alap:"As Late As Possible",snet:"Start No Earlier Than",snlt:"Start No Later Than",fnet:"Finish No Earlier Than",fnlt:"Finish No Later Than",mso:"Must Start On",mfo:"Must Finish On",resources_filter_placeholder:"type to filter",resources_filter_label:"hide empty",empty_state_text_link:"Click here",empty_state_text_description:"to create your first task",baselines_section_placeholder:"Start adding a new baseline",baselines_add_button:"Add Baseline",baselines_remove_button:"Remove",baselines_remove_all_button:"Remove All",deadline_enable_button:"Set",deadline_disable_button:"Remove"}},nk={date:{month_full:["Janvier","Fvrier","Mars","Avril","Mai","Juin","Juillet","Aot","Septembre","Octobre","Novembre","Dcembre"],month_short:["Jan","Fv","Mar","Avr","Mai","Juin","Juil","Ao","Sep","Oct","Nov","Dc"],day_full:["Dimanche","Lundi","Mardi","Mercredi","Jeudi","Vendredi","Samedi"],day_short:["Dim","Lun","Mar","Mer","Jeu","Ven","Sam"]},labels:{new_task:"Nouvelle tche",icon_save:"Enregistrer",icon_cancel:"Annuler",icon_details:"Dtails",icon_edit:"Modifier",icon_delete:"Effacer",confirm_closing:"",confirm_deleting:"L'vnement sera effac sans appel, tes-vous sr ?",section_description:"Description",section_time:"Priode",section_type:"Type",section_deadline:"Deadline",section_baselines:"Baselines",column_wbs:"OTP",column_text:"Nom de la tche",column_start_date:"Date initiale",column_duration:"Dure",column_add:"",link:"Le lien",confirm_link_deleting:"sera supprim",link_start:"(dbut)",link_end:"(fin)",type_task:"Task",type_project:"Project",type_milestone:"Milestone",minutes:"Minutes",hours:"Heures",days:"Jours",weeks:"Semaines",months:"Mois",years:"Annes",message_ok:"OK",message_cancel:"Annuler",section_constraint:"Constraint",constraint_type:"Constraint type",constraint_date:"Constraint date",asap:"As Soon As Possible",alap:"As Late As Possible",snet:"Start No Earlier Than",snlt:"Start No Later Than",fnet:"Finish No Earlier Than",fnlt:"Finish No Later Than",mso:"Must Start On",mfo:"Must Finish On",resources_filter_placeholder:"type to filter",resources_filter_label:"hide empty",empty_state_text_link:"Click here",empty_state_text_description:"to create your first task",baselines_section_placeholder:"Start adding a new baseline",baselines_add_button:"Add Baseline",baselines_remove_button:"Remove",baselines_remove_all_button:"Remove All",deadline_enable_button:"Set",deadline_disable_button:"Remove"}},ik={date:{month_full:["","","","","","","","","","","",""],month_short:["","","","","","","","","","","",""],day_full:["","","","","","",""],day_short:["","","","","","",""]},labels:{new_task:" ",icon_save:"",icon_cancel:"",icon_details:"",icon_edit:"",icon_delete:"",confirm_closing:"",confirm_deleting:"  .?",section_description:"",section_time:"",section_type:"Type",section_deadline:"Deadline",section_baselines:"Baselines",column_wbs:"WBS",column_text:"Task name",column_start_date:"Start time",column_duration:"Duration",column_add:"",link:"Link",confirm_link_deleting:"will be deleted",link_start:" (start)",link_end:" (end)",type_task:"Task",type_project:"Project",type_milestone:"Milestone",minutes:"Minutes",hours:"Hours",days:"Days",weeks:"Week",months:"Months",years:"Years",message_ok:"OK",message_cancel:"",section_constraint:"Constraint",constraint_type:"Constraint type",constraint_date:"Constraint date",asap:"As Soon As Possible",alap:"As Late As Possible",snet:"Start No Earlier Than",snlt:"Start No Later Than",fnet:"Finish No Earlier Than",fnlt:"Finish No Later Than",mso:"Must Start On",mfo:"Must Finish On",resources_filter_placeholder:"type to filter",resources_filter_label:"hide empty",empty_state_text_link:"Click here",empty_state_text_description:"to create your first task",baselines_section_placeholder:"Start adding a new baseline",baselines_add_button:"Add Baseline",baselines_remove_button:"Remove",baselines_remove_all_button:"Remove All",deadline_enable_button:"Set",deadline_disable_button:"Remove"}},rk={date:{month_full:["Sijeanj","Veljaa","Oujak","Travanj","Svibanj","Lipanj","Srpanj","Kolovoz","Rujan","Listopad","Studeni","Prosinac"],month_short:["Sij","Velj","Ou","Tra","Svi","Lip","Srp","Kol","Ruj","Lis","Stu","Pro"],day_full:["Nedjelja","Ponedjeljak","Utorak","Srijeda","etvrtak","Petak","Subota"],day_short:["Ned","Pon","Uto","Sri","et","Pet","Sub"]},labels:{new_task:"Novi Zadatak",icon_save:"Spremi",icon_cancel:"Odustani",icon_details:"Detalji",icon_edit:"Izmjeni",icon_delete:"Obrii",confirm_closing:"",confirm_deleting:"Zadatak e biti trajno izbrisan, jeste li sigurni?",section_description:"Opis",section_time:"Vremenski Period",section_type:"Tip",section_deadline:"Deadline",section_baselines:"Baselines",column_wbs:"WBS",column_text:"Naziv Zadatka",column_start_date:"Poetno Vrijeme",column_duration:"Trajanje",column_add:"",link:"Poveznica",confirm_link_deleting:"e biti izbrisan",link_start:" (poetak)",link_end:" (kraj)",type_task:"Zadatak",type_project:"Projekt",type_milestone:"Milestone",minutes:"Minute",hours:"Sati",days:"Dani",weeks:"Tjedni",months:"Mjeseci",years:"Godine",message_ok:"OK",message_cancel:"Odustani",section_constraint:"Constraint",constraint_type:"Constraint type",constraint_date:"Constraint date",asap:"As Soon As Possible",alap:"As Late As Possible",snet:"Start No Earlier Than",snlt:"Start No Later Than",fnet:"Finish No Earlier Than",fnlt:"Finish No Later Than",mso:"Must Start On",mfo:"Must Finish On",resources_filter_placeholder:"type to filter",resources_filter_label:"hide empty",empty_state_text_link:"Click here",empty_state_text_description:"to create your first task",baselines_section_placeholder:"Start adding a new baseline",baselines_add_button:"Add Baseline",baselines_remove_button:"Remove",baselines_remove_all_button:"Remove All",deadline_enable_button:"Set",deadline_disable_button:"Remove"}},ak={date:{month_full:["Janur","Februr","Mrcius","prilis","Mjus","Jnius","Jlius","Augusztus","Szeptember","Oktber","November","December"],month_short:["Jan","Feb","Mr","pr","Mj","Jn","Jl","Aug","Sep","Okt","Nov","Dec"],day_full:["Vasrnap","Htf","Kedd","Szerda","Cstrtk","Pntek","szombat"],day_short:["Va","H","Ke","Sze","Cs","P","Szo"]},labels:{new_task:"j feladat",icon_save:"Ments",icon_cancel:"Mgse",icon_details:"Rszletek",icon_edit:"Szerkeszts",icon_delete:"Trls",confirm_closing:"",confirm_deleting:"Az esemny trlve lesz, biztosan folytatja?",section_description:"Lers",section_time:"Idszak",section_type:"Type",section_deadline:"Deadline",section_baselines:"Baselines",column_wbs:"WBS",column_text:"Task name",column_start_date:"Start time",column_duration:"Duration",column_add:"",link:"Link",confirm_link_deleting:"will be deleted",link_start:" (start)",link_end:" (end)",type_task:"Task",type_project:"Project",type_milestone:"Milestone",minutes:"Minutes",hours:"Hours",days:"Days",weeks:"Week",months:"Months",years:"Years",message_ok:"OK",message_cancel:"Mgse",section_constraint:"Constraint",constraint_type:"Constraint type",constraint_date:"Constraint date",asap:"As Soon As Possible",alap:"As Late As Possible",snet:"Start No Earlier Than",snlt:"Start No Later Than",fnet:"Finish No Earlier Than",fnlt:"Finish No Later Than",mso:"Must Start On",mfo:"Must Finish On",resources_filter_placeholder:"type to filter",resources_filter_label:"hide empty",empty_state_text_link:"Click here",empty_state_text_description:"to create your first task",baselines_section_placeholder:"Start adding a new baseline",baselines_add_button:"Add Baseline",baselines_remove_button:"Remove",baselines_remove_all_button:"Remove All",deadline_enable_button:"Set",deadline_disable_button:"Remove"}},sk={date:{month_full:["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"],month_short:["Jan","Feb","Mar","Apr","Mei","Jun","Jul","Ags","Sep","Okt","Nov","Des"],day_full:["Minggu","Senin","Selasa","Rabu","Kamis","Jumat","Sabtu"],day_short:["Ming","Sen","Sel","Rab","Kam","Jum","Sab"]},labels:{new_task:"Tugas baru",icon_save:"Simpan",icon_cancel:"Batal",icon_details:"Detail",icon_edit:"Edit",icon_delete:"Hapus",confirm_closing:"",confirm_deleting:"Acara akan dihapus",section_description:"Keterangan",section_time:"Periode",section_type:"Type",section_deadline:"Deadline",section_baselines:"Baselines",column_wbs:"WBS",column_text:"Task name",column_start_date:"Start time",column_duration:"Duration",column_add:"",link:"Link",confirm_link_deleting:"will be deleted",link_start:" (start)",link_end:" (end)",type_task:"Task",type_project:"Project",type_milestone:"Milestone",minutes:"Minutes",hours:"Hours",days:"Days",weeks:"Week",months:"Months",years:"Years",message_ok:"OK",message_cancel:"Batal",section_constraint:"Constraint",constraint_type:"Constraint type",constraint_date:"Constraint date",asap:"As Soon As Possible",alap:"As Late As Possible",snet:"Start No Earlier Than",snlt:"Start No Later Than",fnet:"Finish No Earlier Than",fnlt:"Finish No Later Than",mso:"Must Start On",mfo:"Must Finish On",resources_filter_placeholder:"type to filter",resources_filter_label:"hide empty",empty_state_text_link:"Click here",empty_state_text_description:"to create your first task",baselines_section_placeholder:"Start adding a new baseline",baselines_add_button:"Add Baseline",baselines_remove_button:"Remove",baselines_remove_all_button:"Remove All",deadline_enable_button:"Set",deadline_disable_button:"Remove"}},ok={date:{month_full:["Gennaio","Febbraio","Marzo","Aprile","Maggio","Giugno","Luglio","Agosto","Settembre","Ottobre","Novembre","Dicembre"],month_short:["Gen","Feb","Mar","Apr","Mag","Giu","Lug","Ago","Set","Ott","Nov","Dic"],day_full:["Domenica","Luned","Marted","Mercoled","Gioved","Venerd","Sabato"],day_short:["Dom","Lun","Mar","Mer","Gio","Ven","Sab"]},labels:{new_task:"Nuovo compito",icon_save:"Salva",icon_cancel:"Chiudi",icon_details:"Dettagli",icon_edit:"Modifica",icon_delete:"Elimina",confirm_closing:"",confirm_deleting:"Sei sicuro di confermare l'eliminazione?",section_description:"Descrizione",section_time:"Periodo di tempo",section_type:"Tipo",section_deadline:"Deadline",section_baselines:"Baselines",column_wbs:"WBS",column_text:"Nome Attivit",column_start_date:"Inizio",column_duration:"Durata",column_add:"",link:"Link",confirm_link_deleting:"sar eliminato",link_start:" (inizio)",link_end:" (fine)",type_task:"Task",type_project:"Project",type_milestone:"Milestone",minutes:"Minuti",hours:"Ore",days:"Giorni",weeks:"Settimane",months:"Mesi",years:"Anni",message_ok:"OK",message_cancel:"Chiudi",section_constraint:"Constraint",constraint_type:"Constraint type",constraint_date:"Constraint date",asap:"As Soon As Possible",alap:"As Late As Possible",snet:"Start No Earlier Than",snlt:"Start No Later Than",fnet:"Finish No Earlier Than",fnlt:"Finish No Later Than",mso:"Must Start On",mfo:"Must Finish On",resources_filter_placeholder:"type to filter",resources_filter_label:"hide empty",empty_state_text_link:"Click here",empty_state_text_description:"to create your first task",baselines_section_placeholder:"Start adding a new baseline",baselines_add_button:"Add Baseline",baselines_remove_button:"Remove",baselines_remove_all_button:"Remove All",deadline_enable_button:"Set",deadline_disable_button:"Remove"}},lk={date:{month_full:["1","2","3","4","5","6","7","8","9","10","11","12"],month_short:["1","2","3","4","5","6","7","8","9","10","11","12"],day_full:["","","","","","",""],day_short:["","","","","","",""]},labels:{new_task:"",icon_save:"",icon_cancel:"",icon_details:"",icon_edit:"",icon_delete:"",confirm_closing:"",confirm_deleting:"",section_description:"",section_time:"",section_type:"Type",section_deadline:"Deadline",section_baselines:"Baselines",column_wbs:"WBS",column_text:"Task name",column_start_date:"Start time",column_duration:"Duration",column_add:"",link:"Link",confirm_link_deleting:"will be deleted",link_start:" (start)",link_end:" (end)",type_task:"Task",type_project:"Project",type_milestone:"Milestone",minutes:"Minutes",hours:"Hours",days:"Days",weeks:"Week",months:"Months",years:"Years",message_ok:"OK",message_cancel:"",section_constraint:"Constraint",constraint_type:"Constraint type",constraint_date:"Constraint date",asap:"As Soon As Possible",alap:"As Late As Possible",snet:"Start No Earlier Than",snlt:"Start No Later Than",fnet:"Finish No Earlier Than",fnlt:"Finish No Later Than",mso:"Must Start On",mfo:"Must Finish On",resources_filter_placeholder:"type to filter",resources_filter_label:"hide empty",empty_state_text_link:"Click here",empty_state_text_description:"to create your first task",baselines_section_placeholder:"Start adding a new baseline",baselines_add_button:"Add Baseline",baselines_remove_button:"Remove",baselines_remove_all_button:"Remove All",deadline_enable_button:"Set",deadline_disable_button:"Remove"}},ck={date:{month_full:["1","2","3","4","5","6","7","8","9","10","11","12"],month_short:["1","2","3","4","5","6","7","8","9","10","11","12"],day_full:["","","","","","",""],day_short:["","","","","","",""]},labels:{new_task:" ",icon_save:"",icon_cancel:"",icon_details:" ",icon_edit:"",icon_delete:"",confirm_closing:"",confirm_deleting:" ?",section_description:"",section_time:"",section_type:"Type",section_deadline:"Deadline",section_baselines:"Baselines",column_wbs:"WBS",column_text:"",column_start_date:"",column_duration:"",column_add:"",link:"",confirm_link_deleting:" ?",link_start:" (start)",link_end:" (end)",type_task:"",type_project:"",type_milestone:"",minutes:"",hours:"",days:"",weeks:"",months:"",years:"",message_ok:"OK",message_cancel:"",section_constraint:"Constraint",constraint_type:"Constraint type",constraint_date:"Constraint date",asap:"As Soon As Possible",alap:"As Late As Possible",snet:"Start No Earlier Than",snlt:"Start No Later Than",fnet:"Finish No Earlier Than",fnlt:"Finish No Later Than",mso:"Must Start On",mfo:"Must Finish On",resources_filter_placeholder:"type to filter",resources_filter_label:"hide empty",empty_state_text_link:"Click here",empty_state_text_description:"to create your first task",baselines_section_placeholder:"Start adding a new baseline",baselines_add_button:"Add Baseline",baselines_remove_button:"Remove",baselines_remove_all_button:"Remove All",deadline_enable_button:"Set",deadline_disable_button:"Remove"}};class dk{constructor(n){this.addLocale=(e,i)=>{this._locales[e]=i},this.getLocale=e=>this._locales[e],this._locales={};for(const e in n)this._locales[e]=n[e]}}const uk={date:{month_full:["Januar","Februar","Mars","April","Mai","Juni","Juli","August","September","Oktober","November","Desember"],month_short:["Jan","Feb","Mar","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Des"],day_full:["Sndag","Mandag","Tirsdag","Onsdag","Torsdag","Fredag","Lrdag"],day_short:["Sn","Mon","Tir","Ons","Tor","Fre","Lr"]},labels:{new_task:"Ny oppgave",icon_save:"Lagre",icon_cancel:"Avbryt",icon_details:"Detaljer",icon_edit:"Rediger",icon_delete:"Slett",confirm_closing:"",confirm_deleting:"Hendelsen vil bli slettet permanent. Er du sikker?",section_description:"Beskrivelse",section_time:"Tidsperiode",section_type:"Type",section_deadline:"Deadline",section_baselines:"Baselines",column_wbs:"WBS",column_text:"Task name",column_start_date:"Start time",column_duration:"Duration",column_add:"",link:"Link",confirm_link_deleting:"will be deleted",link_start:" (start)",link_end:" (end)",type_task:"Task",type_project:"Project",type_milestone:"Milestone",minutes:"Minutes",hours:"Hours",days:"Days",weeks:"Week",months:"Months",years:"Years",message_ok:"OK",message_cancel:"Avbryt",section_constraint:"Constraint",constraint_type:"Constraint type",constraint_date:"Constraint date",asap:"As Soon As Possible",alap:"As Late As Possible",snet:"Start No Earlier Than",snlt:"Start No Later Than",fnet:"Finish No Earlier Than",fnlt:"Finish No Later Than",mso:"Must Start On",mfo:"Must Finish On",resources_filter_placeholder:"type to filter",resources_filter_label:"hide empty",empty_state_text_link:"Click here",empty_state_text_description:"to create your first task",baselines_section_placeholder:"Start adding a new baseline",baselines_add_button:"Add Baseline",baselines_remove_button:"Remove",baselines_remove_all_button:"Remove All",deadline_enable_button:"Set",deadline_disable_button:"Remove"}},hk={date:{month_full:["Januari","Februari","Maart","April","Mei","Juni","Juli","Augustus","September","Oktober","November","December"],month_short:["Jan","Feb","mrt","Apr","Mei","Jun","Jul","Aug","Sep","Okt","Nov","Dec"],day_full:["Zondag","Maandag","Dinsdag","Woensdag","Donderdag","Vrijdag","Zaterdag"],day_short:["Zo","Ma","Di","Wo","Do","Vr","Za"]},labels:{new_task:"Nieuwe taak",icon_save:"Opslaan",icon_cancel:"Annuleren",icon_details:"Details",icon_edit:"Bewerken",icon_delete:"Verwijderen",confirm_closing:"",confirm_deleting:"Item zal permanent worden verwijderd, doorgaan?",section_description:"Beschrijving",section_time:"Tijd periode",section_type:"Type",section_deadline:"Deadline",section_baselines:"Baselines",column_wbs:"WBS",column_text:"Taak omschrijving",column_start_date:"Startdatum",column_duration:"Duur",column_add:"",link:"Koppeling",confirm_link_deleting:"zal worden verwijderd",link_start:" (start)",link_end:" (eind)",type_task:"Task",type_project:"Project",type_milestone:"Milestone",minutes:"minuten",hours:"uren",days:"dagen",weeks:"weken",months:"maanden",years:"jaren",message_ok:"OK",message_cancel:"Annuleren",section_constraint:"Constraint",constraint_type:"Constraint type",constraint_date:"Constraint date",asap:"As Soon As Possible",alap:"As Late As Possible",snet:"Start No Earlier Than",snlt:"Start No Later Than",fnet:"Finish No Earlier Than",fnlt:"Finish No Later Than",mso:"Must Start On",mfo:"Must Finish On",resources_filter_placeholder:"type to filter",resources_filter_label:"hide empty",empty_state_text_link:"Click here",empty_state_text_description:"to create your first task",baselines_section_placeholder:"Start adding a new baseline",baselines_add_button:"Add Baseline",baselines_remove_button:"Remove",baselines_remove_all_button:"Remove All",deadline_enable_button:"Set",deadline_disable_button:"Remove"}},_k={date:{month_full:["Januar","Februar","Mars","April","Mai","Juni","Juli","August","September","Oktober","November","Desember"],month_short:["Jan","Feb","Mar","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Des"],day_full:["Sndag","Mandag","Tirsdag","Onsdag","Torsdag","Fredag","Lrdag"],day_short:["Sn","Man","Tir","Ons","Tor","Fre","Lr"]},labels:{new_task:"Ny oppgave",icon_save:"Lagre",icon_cancel:"Avbryt",icon_details:"Detaljer",icon_edit:"Endre",icon_delete:"Slett",confirm_closing:"Endringer blir ikke lagret, er du sikker?",confirm_deleting:"Oppfringen vil bli slettet, er du sikker?",section_description:"Beskrivelse",section_time:"Tidsperiode",section_type:"Type",section_deadline:"Deadline",section_baselines:"Baselines",column_wbs:"WBS",column_text:"Task name",column_start_date:"Start time",column_duration:"Duration",column_add:"",link:"Link",confirm_link_deleting:"will be deleted",link_start:" (start)",link_end:" (end)",type_task:"Task",type_project:"Project",type_milestone:"Milestone",minutes:"Minutes",hours:"Hours",days:"Days",weeks:"Week",months:"Months",years:"Years",message_ok:"OK",message_cancel:"Avbryt",section_constraint:"Constraint",constraint_type:"Constraint type",constraint_date:"Constraint date",asap:"As Soon As Possible",alap:"As Late As Possible",snet:"Start No Earlier Than",snlt:"Start No Later Than",fnet:"Finish No Earlier Than",fnlt:"Finish No Later Than",mso:"Must Start On",mfo:"Must Finish On",resources_filter_placeholder:"type to filter",resources_filter_label:"hide empty",empty_state_text_link:"Click here",empty_state_text_description:"to create your first task",baselines_section_placeholder:"Start adding a new baseline",baselines_add_button:"Add Baseline",baselines_remove_button:"Remove",baselines_remove_all_button:"Remove All",deadline_enable_button:"Set",deadline_disable_button:"Remove"}},fk={date:{month_full:["Stycze","Luty","Marzec","Kwiecie","Maj","Czerwiec","Lipiec","Sierpie","Wrzesie","Padziernik","Listopad","Grudzie"],month_short:["Sty","Lut","Mar","Kwi","Maj","Cze","Lip","Sie","Wrz","Pa","Lis","Gru"],day_full:["Niedziela","Poniedziaek","Wtorek","roda","Czwartek","Pitek","Sobota"],day_short:["Nie","Pon","Wto","ro","Czw","Pi","Sob"]},labels:{new_task:"Nowe zadanie",icon_save:"Zapisz",icon_cancel:"Anuluj",icon_details:"Szczegy",icon_edit:"Edytuj",icon_delete:"Usu",confirm_closing:"",confirm_deleting:"Zdarzenie zostanie usunite na zawsze, kontynuowa?",section_description:"Opis",section_time:"Okres czasu",section_type:"Typ",section_deadline:"Deadline",section_baselines:"Baselines",column_wbs:"WBS",column_text:"Nazwa zadania",column_start_date:"Pocztek",column_duration:"Czas trwania",column_add:"",link:"Link",confirm_link_deleting:"zostanie usunity",link_start:" (pocztek)",link_end:" (koniec)",type_task:"Zadanie",type_project:"Projekt",type_milestone:"Milestone",minutes:"Minuty",hours:"Godziny",days:"Dni",weeks:"Tydzie",months:"Miesice",years:"Lata",message_ok:"OK",message_cancel:"Anuluj",section_constraint:"Constraint",constraint_type:"Constraint type",constraint_date:"Constraint date",asap:"As Soon As Possible",alap:"As Late As Possible",snet:"Start No Earlier Than",snlt:"Start No Later Than",fnet:"Finish No Earlier Than",fnlt:"Finish No Later Than",mso:"Must Start On",mfo:"Must Finish On",resources_filter_placeholder:"type to filter",resources_filter_label:"hide empty",empty_state_text_link:"Click here",empty_state_text_description:"to create your first task",baselines_section_placeholder:"Start adding a new baseline",baselines_add_button:"Add Baseline",baselines_remove_button:"Remove",baselines_remove_all_button:"Remove All",deadline_enable_button:"Set",deadline_disable_button:"Remove"}},gk={date:{month_full:["Janeiro","Fevereiro","Maro","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],month_short:["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"],day_full:["Domingo","Segunda","Tera","Quarta","Quinta","Sexta","Sbado"],day_short:["Dom","Seg","Ter","Qua","Qui","Sex","Sab"]},labels:{new_task:"Nova tarefa",icon_save:"Salvar",icon_cancel:"Cancelar",icon_details:"Detalhes",icon_edit:"Editar",icon_delete:"Excluir",confirm_closing:"",confirm_deleting:"As tarefas sero excluidas permanentemente, confirme?",section_description:"Descrio",section_time:"Perodo",section_type:"Tipo",section_deadline:"Deadline",section_baselines:"Baselines",column_wbs:"EAP",column_text:"Nome tarefa",column_start_date:"Data incio",column_duration:"Durao",column_add:"",link:"Link",confirm_link_deleting:"Ser excludo!",link_start:" (incio)",link_end:" (fim)",type_task:"Task",type_project:"Projeto",type_milestone:"Marco",minutes:"Minutos",hours:"Horas",days:"Dias",weeks:"Semanas",months:"Meses",years:"Anos",message_ok:"OK",message_cancel:"Cancelar",section_constraint:"Restrio",constraint_type:"Tipo Restrio",constraint_date:"Data restrio",asap:"Mais breve possvel",alap:"Mais tarde possvel",snet:"No comear antes de",snlt:"No comear depois de",fnet:"No terminar antes de",fnlt:"No terminar depois de",mso:"Precisa comear em",mfo:"Precisa terminar em",resources_filter_placeholder:"Tipo de filtros",resources_filter_label:"Ocultar vazios",empty_state_text_link:"Click here",empty_state_text_description:"to create your first task",baselines_section_placeholder:"Start adding a new baseline",baselines_add_button:"Add Baseline",baselines_remove_button:"Remove",baselines_remove_all_button:"Remove All",deadline_enable_button:"Set",deadline_disable_button:"Remove"}},pk={date:{month_full:["Ianuarie","Februarie","Martie","Aprilie","Mai","Iunie","Iulie","August","Septembrie","Octombrie","November","December"],month_short:["Ian","Feb","Mar","Apr","Mai","Iun","Iul","Aug","Sep","Oct","Nov","Dec"],day_full:["Duminica","Luni","Marti","Miercuri","Joi","Vineri","Sambata"],day_short:["Du","Lu","Ma","Mi","Jo","Vi","Sa"]},labels:{new_task:"Sarcina noua",icon_save:"Salveaza",icon_cancel:"Anuleaza",icon_details:"Detalii",icon_edit:"Editeaza",icon_delete:"Sterge",confirm_closing:"Schimbarile nu vor fi salvate, esti sigur?",confirm_deleting:"Evenimentul va fi sters permanent, esti sigur?",section_description:"Descriere",section_time:"Interval",section_type:"Type",section_deadline:"Deadline",section_baselines:"Baselines",column_wbs:"WBS",column_text:"Task name",column_start_date:"Start time",column_duration:"Duration",column_add:"",link:"Link",confirm_link_deleting:"will be deleted",link_start:" (start)",link_end:" (end)",type_task:"Task",type_project:"Project",type_milestone:"Milestone",minutes:"Minutes",hours:"Hours",days:"Days",weeks:"Week",months:"Months",years:"Years",message_ok:"OK",message_cancel:"Anuleaza",section_constraint:"Constraint",constraint_type:"Constraint type",constraint_date:"Constraint date",asap:"As Soon As Possible",alap:"As Late As Possible",snet:"Start No Earlier Than",snlt:"Start No Later Than",fnet:"Finish No Earlier Than",fnlt:"Finish No Later Than",mso:"Must Start On",mfo:"Must Finish On",resources_filter_placeholder:"type to filter",resources_filter_label:"hide empty",empty_state_text_link:"Click here",empty_state_text_description:"to create your first task",baselines_section_placeholder:"Start adding a new baseline",baselines_add_button:"Add Baseline",baselines_remove_button:"Remove",baselines_remove_all_button:"Remove All",deadline_enable_button:"Set",deadline_disable_button:"Remove"}},mk={date:{month_full:["","","","","Ma","","","","","O","",""],month_short:["","","Ma","A","Ma","","","A","","","",""],day_full:["","","","","","",""],day_short:["","","","","","",""]},labels:{new_task:" ",icon_save:"",icon_cancel:"",icon_details:"",icon_edit:"",icon_delete:"",confirm_closing:"",confirm_deleting:"   , ?",section_description:"",section_time:" ",section_type:"",section_deadline:"Deadline",section_baselines:"Baselines",column_wbs:"",column_text:"",column_start_date:"",column_duration:"",column_add:"",link:"",confirm_link_deleting:" ",link_start:" ()",link_end:" ()",type_task:"Task",type_project:"Project",type_milestone:"Milestone",minutes:"",hours:"",days:"",weeks:"",months:"",years:"",message_ok:"OK",message_cancel:"",section_constraint:"Constraint",constraint_type:"Constraint type",constraint_date:"Constraint date",asap:"As Soon As Possible",alap:"As Late As Possible",snet:"Start No Earlier Than",snlt:"Start No Later Than",fnet:"Finish No Earlier Than",fnlt:"Finish No Later Than",mso:"Must Start On",mfo:"Must Finish On",resources_filter_placeholder:"    ",resources_filter_label:"  ",empty_state_text_link:"Click here",empty_state_text_description:"to create your first task",baselines_section_placeholder:"Start adding a new baseline",baselines_add_button:"Add Baseline",baselines_remove_button:"Remove",baselines_remove_all_button:"Remove All",deadline_enable_button:"Set",deadline_disable_button:"Remove"}},vk={date:{month_full:["Januar","Februar","Marec","April","Maj","Junij","Julij","Avgust","September","Oktober","November","December"],month_short:["Jan","Feb","Mar","Apr","Maj","Jun","Jul","Aug","Sep","Okt","Nov","Dec"],day_full:["Nedelja","Ponedeljek","Torek","Sreda","etrtek","Petek","Sobota"],day_short:["Ned","Pon","Tor","Sre","et","Pet","Sob"]},labels:{new_task:"Nova naloga",icon_save:"Shrani",icon_cancel:"Preklii",icon_details:"Podrobnosti",icon_edit:"Uredi",icon_delete:"Izbrii",confirm_closing:"",confirm_deleting:"Dogodek bo izbrisan. elite nadaljevati?",section_description:"Opis",section_time:"asovni okvir",section_type:"Type",section_deadline:"Deadline",section_baselines:"Baselines",column_wbs:"WBS",column_text:"Task name",column_start_date:"Start time",column_duration:"Duration",column_add:"",link:"Link",confirm_link_deleting:"will be deleted",link_start:" (start)",link_end:" (end)",type_task:"Task",type_project:"Project",type_milestone:"Milestone",minutes:"Minutes",hours:"Hours",days:"Days",weeks:"Week",months:"Months",years:"Years",message_ok:"OK",message_cancel:"Preklii",section_constraint:"Constraint",constraint_type:"Constraint type",constraint_date:"Constraint date",asap:"As Soon As Possible",alap:"As Late As Possible",snet:"Start No Earlier Than",snlt:"Start No Later Than",fnet:"Finish No Earlier Than",fnlt:"Finish No Later Than",mso:"Must Start On",mfo:"Must Finish On",resources_filter_placeholder:"type to filter",resources_filter_label:"hide empty",empty_state_text_link:"Click here",empty_state_text_description:"to create your first task",baselines_section_placeholder:"Start adding a new baseline",baselines_add_button:"Add Baseline",baselines_remove_button:"Remove",baselines_remove_all_button:"Remove All",deadline_enable_button:"Set",deadline_disable_button:"Remove"}},kk={date:{month_full:["Janur","Februr","Marec","Aprl","Mj","Jn","Jl","August","September","Oktber","November","December"],month_short:["Jan","Feb","Mar","Apr","Mj","Jn","Jl","Aug","Sept","Okt","Nov","Dec"],day_full:["Nedea","Pondelok","Utorok","Streda","tvrtok","Piatok","Sobota"],day_short:["Ne","Po","Ut","St","t","Pi","So"]},labels:{new_task:"Nov loha",icon_save:"Uloi",icon_cancel:"Sp",icon_details:"Detail",icon_edit:"Edituj",icon_delete:"Zmaza",confirm_closing:"Vae zmeny nebud uloen. Skutone?",confirm_deleting:"Udalos bude natrvalo vymazan. Skutone?",section_description:"Poznmky",section_time:"Doba platnosti",section_type:"Type",section_deadline:"Deadline",section_baselines:"Baselines",column_wbs:"WBS",column_text:"Task name",column_start_date:"Start time",column_duration:"Duration",column_add:"",link:"Link",confirm_link_deleting:"will be deleted",link_start:" (start)",link_end:" (end)",type_task:"Task",type_project:"Project",type_milestone:"Milestone",minutes:"Minutes",hours:"Hours",days:"Days",weeks:"Week",months:"Months",years:"Years",message_ok:"OK",message_cancel:"Sp",section_constraint:"Constraint",constraint_type:"Constraint type",constraint_date:"Constraint date",asap:"As Soon As Possible",alap:"As Late As Possible",snet:"Start No Earlier Than",snlt:"Start No Later Than",fnet:"Finish No Earlier Than",fnlt:"Finish No Later Than",mso:"Must Start On",mfo:"Must Finish On",resources_filter_placeholder:"type to filter",resources_filter_label:"hide empty",empty_state_text_link:"Click here",empty_state_text_description:"to create your first task",baselines_section_placeholder:"Start adding a new baseline",baselines_add_button:"Add Baseline",baselines_remove_button:"Remove",baselines_remove_all_button:"Remove All",deadline_enable_button:"Set",deadline_disable_button:"Remove"}},yk={date:{month_full:["Januari","Februari","Mars","April","Maj","Juni","Juli","Augusti","September","Oktober","November","December"],month_short:["Jan","Feb","Mar","Apr","Maj","Jun","Jul","Aug","Sep","Okt","Nov","Dec"],day_full:["Sndag","Mndag","Tisdag","Onsdag","Torsdag","Fredag","Lrdag"],day_short:["Sn","Mn","Tis","Ons","Tor","Fre","Lr"]},labels:{new_task:"Ny uppgift",icon_save:"Spara",icon_cancel:"Avbryt",icon_details:"Detajer",icon_edit:"ndra",icon_delete:"Ta bort",confirm_closing:"",confirm_deleting:"r du sker p att du vill ta bort hndelsen permanent?",section_description:"Beskrivning",section_time:"Tid",section_type:"Typ",section_deadline:"Deadline",section_baselines:"Baselines",column_wbs:"WBS",column_text:"Uppgiftsnamn",column_start_date:"Starttid",column_duration:"Varaktighet",column_add:"",link:"Lnk",confirm_link_deleting:"kommer tas bort",link_start:" (start)",link_end:" (slut)",type_task:"Uppgift",type_project:"Projekt",type_milestone:"Milstolpe",minutes:"Minuter",hours:"Timmar",days:"Dagar",weeks:"Veckor",months:"Mnader",years:"r",message_ok:"OK",message_cancel:"Avbryt",section_constraint:"Constraint",constraint_type:"Constraint type",constraint_date:"Constraint date",asap:"As Soon As Possible",alap:"As Late As Possible",snet:"Start No Earlier Than",snlt:"Start No Later Than",fnet:"Finish No Earlier Than",fnlt:"Finish No Later Than",mso:"Must Start On",mfo:"Must Finish On",resources_filter_placeholder:"type to filter",resources_filter_label:"hide empty",empty_state_text_link:"Click here",empty_state_text_description:"to create your first task",baselines_section_placeholder:"Start adding a new baseline",baselines_add_button:"Add Baseline",baselines_remove_button:"Remove",baselines_remove_all_button:"Remove All",deadline_enable_button:"Set",deadline_disable_button:"Remove"}},bk={date:{month_full:["Ocak","ubat","Mart","Nisan","Mays","Haziran","Temmuz","Austos","Eyll","Ekim","Kasm","Aralk"],month_short:["Oca","ub","Mar","Nis","May","Haz","Tem","Au","Eyl","Eki","Kas","Ara"],day_full:["Pazar","Pazartesi","Sal","aramba","Perembe","Cuma","Cumartesi"],day_short:["Paz","Pzt","Sal","ar","Per","Cum","Cmt"]},labels:{new_task:"Yeni grev",icon_save:"Kaydet",icon_cancel:"ptal",icon_details:"Detaylar",icon_edit:"Dzenle",icon_delete:"Sil",confirm_closing:"",confirm_deleting:"Grev silinecek, emin misiniz?",section_description:"Aklama",section_time:"Zaman Aral",section_type:"Tip",section_deadline:"Deadline",section_baselines:"Baselines",column_wbs:"WBS",column_text:"Grev Ad",column_start_date:"Balang",column_duration:"Sre",column_add:"",link:"Balant",confirm_link_deleting:"silinecek",link_start:" (balang)",link_end:" (biti)",type_task:"Grev",type_project:"Proje",type_milestone:"Kilometreta",minutes:"Dakika",hours:"Saat",days:"Gn",weeks:"Hafta",months:"Ay",years:"Yl",message_ok:"OK",message_cancel:"ptal",section_constraint:"Constraint",constraint_type:"Constraint type",constraint_date:"Constraint date",asap:"As Soon As Possible",alap:"As Late As Possible",snet:"Start No Earlier Than",snlt:"Start No Later Than",fnet:"Finish No Earlier Than",fnlt:"Finish No Later Than",mso:"Must Start On",mfo:"Must Finish On",resources_filter_placeholder:"type to filter",resources_filter_label:"hide empty",empty_state_text_link:"Click here",empty_state_text_description:"to create your first task",baselines_section_placeholder:"Start adding a new baseline",baselines_add_button:"Add Baseline",baselines_remove_button:"Remove",baselines_remove_all_button:"Remove All",deadline_enable_button:"Set",deadline_disable_button:"Remove"}},xk={date:{month_full:["","","","","","","","","","","",""],month_short:["","","","","","","","","","","",""],day_full:["","","","","","'",""],day_short:["","","","","","",""]},labels:{new_task:" ",icon_save:"",icon_cancel:"",icon_details:"",icon_edit:"",icon_delete:"",confirm_closing:"",confirm_deleting:"  .  ?",section_description:"",section_time:" ",section_type:"",section_deadline:"Deadline",section_baselines:"Baselines",column_wbs:"WBS",column_text:"Task name",column_start_date:"Start time",column_duration:"Duration",column_add:"",link:"Link",confirm_link_deleting:"will be deleted",link_start:" (start)",link_end:" (end)",type_task:"Task",type_project:"Project",type_milestone:"Milestone",minutes:"Minutes",hours:"Hours",days:"Days",weeks:"Week",months:"Months",years:"Years",message_ok:"OK",message_cancel:"",section_constraint:"Constraint",constraint_type:"Constraint type",constraint_date:"Constraint date",asap:"As Soon As Possible",alap:"As Late As Possible",snet:"Start No Earlier Than",snlt:"Start No Later Than",fnet:"Finish No Earlier Than",fnlt:"Finish No Later Than",mso:"Must Start On",mfo:"Must Finish On",resources_filter_placeholder:"type to filter",resources_filter_label:"hide empty",empty_state_text_link:"Click here",empty_state_text_description:"to create your first task",baselines_section_placeholder:"Start adding a new baseline",baselines_add_button:"Add Baseline",baselines_remove_button:"Remove",baselines_remove_all_button:"Remove All",deadline_enable_button:"Set",deadline_disable_button:"Remove"}};function wk(){this.constants=ov,this.version="9.0.5",this.license="gpl",this.templates={},this.ext={},this.keys={edit_save:this.constants.KEY_CODES.ENTER,edit_cancel:this.constants.KEY_CODES.ESC}}function $k(t){var n=new wk,e=new lv(t),i={};n.plugins=function(c){for(var u in c)if(c[u]&&!i[u]){var h=e.getExtension(u);h&&(h(n),i[u]=!0)}return i},n.$services=function(){var c={};return{services:{},setService:function(u,h){c[u]=h},getService:function(u){return c[u]?c[u]():null},dropService:function(u){c[u]&&delete c[u]},destructor:function(){for(var u in c)if(c[u]){var h=c[u];h&&h.destructor&&h.destructor()}c=null}}}(),n.config=cv(),n.ajax=function(c){return{cache:!0,method:"get",parse:function(u){return typeof u!="string"?u:(u=u.replace(/^[\s]+/,""),typeof DOMParser>"u"||ln.isIE?Oe.ActiveXObject!==void 0&&((h=new Oe.ActiveXObject("Microsoft.XMLDOM")).async="false",h.loadXML(u)):h=new DOMParser().parseFromString(u,"text/xml"),h);var h},xmltop:function(u,h,_){if(h.status===void 0||h.status<400){var g=h.responseXML?h.responseXML||h:this.parse(h.responseText||h);if(g&&g.documentElement!==null&&!g.getElementsByTagName("parsererror").length)return g.getElementsByTagName(u)[0]}return _!==-1&&c.callEvent("onLoadXMLError",["Incorrect XML",arguments[1],_]),document.createElement("DIV")},xpath:function(u,h){if(h.nodeName||(h=h.responseXML||h),ln.isIE)return h.selectNodes(u)||[];for(var _,g=[],m=(h.ownerDocument||h).evaluate(u,h,null,XPathResult.ANY_TYPE,null);_=m.iterateNext();)g.push(_);return g},query:function(u){return this._call(u.method||"GET",u.url,u.data||"",u.async||!0,u.callback,u.headers)},get:function(u,h,_){var g=zn("GET",arguments);return this.query(g)},getSync:function(u,h){var _=zn("GET",arguments);return _.async=!1,this.query(_)},put:function(u,h,_,g){var m=zn("PUT",arguments);return this.query(m)},del:function(u,h,_){var g=zn("DELETE",arguments);return this.query(g)},post:function(u,h,_,g){arguments.length==1?h="":arguments.length==2&&typeof h=="function"&&(_=h,h="");var m=zn("POST",arguments);return this.query(m)},postSync:function(u,h,_){h=h===null?"":String(h);var g=zn("POST",arguments);return g.async=!1,this.query(g)},_call:function(u,h,_,g,m,v){return new c.Promise(function($,x){var S=typeof XMLHttpRequest!==void 0?new XMLHttpRequest:new Oe.ActiveXObject("Microsoft.XMLHTTP"),p=navigator.userAgent.match(/AppleWebKit/)!==null&&navigator.userAgent.match(/Qt/)!==null&&navigator.userAgent.match(/Safari/)!==null;g&&(S.onreadystatechange=function(){if(S.readyState==4||p&&S.readyState==3){if((S.status!=200||S.responseText==="")&&!c.callEvent("onAjaxError",[S]))return;setTimeout(function(){typeof m=="function"&&m.apply(Oe,[{xmlDoc:S,filePath:h}]),$(S),typeof m=="function"&&(m=null,S=null)},0)}});var b=!this||!this.cache;if(u=="GET"&&b&&(h+=(h.indexOf("?")>=0?"&":"?")+"dhxr"+new Date().getTime()+"=1"),S.open(u,h,g),v)for(var k in v)S.setRequestHeader(k,v[k]);else u.toUpperCase()=="POST"||u=="PUT"||u=="DELETE"?S.setRequestHeader("Content-Type","application/x-www-form-urlencoded"):u=="GET"&&(_=null);if(S.setRequestHeader("X-Requested-With","XMLHttpRequest"),S.send(_),!g)return{xmlDoc:S,filePath:h}})},urlSeparator:function(u){return u.indexOf("?")!=-1?"&":"?"}}}(n),n.date=dv(n),n.RemoteEvents=hv;var r=function(c){function u(_){return{target:_.target||_.srcElement,pageX:_.pageX,pageY:_.pageY,clientX:_.clientX,clientY:_.clientY,metaKey:_.metaKey,shiftKey:_.shiftKey,ctrlKey:_.ctrlKey,altKey:_.altKey}}function h(_,g){this._obj=_,this._settings=g||{},Le(this);var m=this.getInputMethods();this._drag_start_timer=null,c.attachEvent("onGanttScroll",_t(function(x,S){this.clearDragTimer()},this));for(var v={passive:!1},$=0;$<m.length;$++)_t(function(x){c.event(_,x.down,_t(function(p){x.accessor(p)&&(p.button!==void 0&&p.button!==0||(g.preventDefault&&g.selector&&He(p.target,g.selector)&&p.preventDefault(),c.config.touch&&p.timeStamp&&p.timeStamp-0<300||(this._settings.original_target=u(p),this._settings.original_element_sizes={...Ie(p,Ac(_)),width:p.target.offsetWidth,height:p.target.offsetHeight},c.config.touch?(this.clearDragTimer(),this._drag_start_timer=setTimeout(_t(function(){c.getState().lightbox||this.dragStart(_,p,x)},this),c.config.touch_drag)):this.dragStart(_,p,x))))},this),v);var S=document.body;c.event(S,x.up,_t(function(p){x.accessor(p)&&this.clearDragTimer()},this),v)},this)(m[$])}return h.prototype={traceDragEvents:function(_,g){var m=_t(function(b){return this.dragMove(_,b,g.accessor)},this);_t(function(b){return this.dragScroll(_,b)},this);var v=_t(function(b){if(!this.config.started||!Mt(this.config.updates_per_second)||Rc(this,this.config.updates_per_second)){var k=m(b);if(k)try{b&&b.preventDefault&&b.cancelable&&b.preventDefault()}catch{}return k}},this),$=yn(c.$root),x=this.config.mousemoveContainer||yn(c.$root),S={passive:!1},p=_t(function(b){return c.eventRemove(x,g.move,v),c.eventRemove($,g.up,p,S),this.dragEnd(_)},this);c.event(x,g.move,v,S),c.event($,g.up,p,S)},checkPositionChange:function(_){var g=_.x-this.config.pos.x,m=_.y-this.config.pos.y;return Math.sqrt(Math.pow(Math.abs(g),2)+Math.pow(Math.abs(m),2))>this.config.sensitivity},initDnDMarker:function(){var _=this.config.marker=document.createElement("div");_.className="gantt_drag_marker",_.innerHTML="",document.body.appendChild(_)},backupEventTarget:function(_,g){if(c.config.touch){var m=g(_),v=m.target||m.srcElement,$=v.cloneNode(!0);this.config.original_target=u(m),this.config.original_target.target=$,this.config.backup_element=v,v.parentNode.appendChild($),v.style.display="none",(this.config.mousemoveContainer||document.body).appendChild(v)}},getInputMethods:function(){var _=[];if(_.push({move:"mousemove",down:"mousedown",up:"mouseup",accessor:function(m){return m}}),c.config.touch){var g=!0;try{document.createEvent("TouchEvent")}catch{g=!1}g?_.push({move:"touchmove",down:"touchstart",up:"touchend",accessor:function(m){return m.touches&&m.touches.length>1?null:m.touches[0]?{target:document.elementFromPoint(m.touches[0].clientX,m.touches[0].clientY),pageX:m.touches[0].pageX,pageY:m.touches[0].pageY,clientX:m.touches[0].clientX,clientY:m.touches[0].clientY}:m}}):Oe.navigator.pointerEnabled?_.push({move:"pointermove",down:"pointerdown",up:"pointerup",accessor:function(m){return m.pointerType=="mouse"?null:m}}):Oe.navigator.msPointerEnabled&&_.push({move:"MSPointerMove",down:"MSPointerDown",up:"MSPointerUp",accessor:function(m){return m.pointerType==m.MSPOINTER_TYPE_MOUSE?null:m}})}return _},clearDragTimer:function(){this._drag_start_timer&&(clearTimeout(this._drag_start_timer),this._drag_start_timer=null)},dragStart:function(_,g,m){this.config&&this.config.started||(this.config={obj:_,marker:null,started:!1,pos:this.getPosition(g),sensitivity:4},this._settings&&ut(this.config,this._settings,!0),this.traceDragEvents(_,m),c._prevent_touch_scroll=!0,document.body.classList.add("gantt_noselect"),c.config.touch&&this.dragMove(_,g,m.accessor))},dragMove:function(_,g,m){var v=m(g);if(!v)return!1;if(!this.config.marker&&!this.config.started){var $=this.getPosition(v);if(c.config.touch||this.checkPositionChange($)){if(this.config.started=!0,this.config.ignore=!1,c._touch_drag=!0,this.callEvent("onBeforeDragStart",[_,this.config.original_target])===!1)return this.config.ignore=!0,!1;this.backupEventTarget(g,m),this.initDnDMarker(),c._touch_feedback(),this.callEvent("onAfterDragStart",[_,this.config.original_target])}else this.config.ignore=!0}return this.config.ignore?!1:g.targetTouches&&!v.target?void 0:(v.pos=this.getPosition(v),this.config.marker.style.left=v.pos.x+"px",this.config.marker.style.top=v.pos.y+"px",this.callEvent("onDragMove",[_,v]),!0)},dragEnd:function(_){var g=this.config.backup_element;g&&g.parentNode&&g.parentNode.removeChild(g),c._prevent_touch_scroll=!1,this.config.marker&&(this.config.marker.parentNode.removeChild(this.config.marker),this.config.marker=null,this.callEvent("onDragEnd",[])),this.config.started=!1,c._touch_drag=!1,document.body.classList.remove("gantt_noselect")},getPosition:function(_){var g=0,m=0;return _.pageX||_.pageY?(g=_.pageX,m=_.pageY):(_.clientX||_.clientY)&&(g=_.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,m=_.clientY+document.body.scrollTop+document.documentElement.scrollTop),{x:g,y:m}}},h}(n);n.$services.setService("dnd",function(){return r});var a=function(c){var u={};function h(_,g,m){m=m||_;var v=c.config,$=c.templates;c.config[_]&&u[m]!=v[_]&&(g&&$[m]||($[m]=c.date.date_to_str(v[_]),u[m]=v[_]))}return{initTemplates:function(){var _=c.locale.labels;_.gantt_save_btn=_.icon_save,_.gantt_cancel_btn=_.icon_cancel,_.gantt_delete_btn=_.icon_delete;var g=c.date,m=g.date_to_str,v=c.config,$=m(v.xml_date||v.date_format,v.server_utc),x=g.str_to_date(v.xml_date||v.date_format,v.server_utc);h("date_scale",!0,void 0,c.config,c.templates),h("date_grid",!0,"grid_date_format",c.config,c.templates),h("task_date",!0,void 0,c.config,c.templates),c.mixin(c.templates,{xml_format:void 0,format_date:$,xml_date:void 0,parse_date:x,progress_text:function(S,p,b){return""},grid_header_class:function(S,p){return""},task_text:function(S,p,b){return b.text},task_class:function(S,p,b){return""},task_end_date:function(S){return c.templates.task_date(S)},grid_row_class:function(S,p,b){return""},task_row_class:function(S,p,b){return""},timeline_cell_class:function(S,p){return""},timeline_cell_content:function(S,p){return""},scale_cell_class:function(S){return""},scale_row_class:function(S){return""},grid_indent:function(S){return"<div class='gantt_tree_indent'></div>"},grid_folder:function(S){return"<div class='gantt_tree_icon gantt_folder_"+(S.$open?"open":"closed")+"'></div>"},grid_file:function(S){return"<div class='gantt_tree_icon gantt_file'></div>"},grid_open:function(S){return"<div class='gantt_tree_icon gantt_"+(S.$open?"close":"open")+"'></div>"},grid_blank:function(S){return"<div class='gantt_tree_icon gantt_blank'></div>"},date_grid:function(S,p,b){return p&&c.isUnscheduledTask(p)&&c.config.show_unscheduled?c.templates.task_unscheduled_time(p):c.templates.grid_date_format(S,b)},task_time:function(S,p,b){return c.isUnscheduledTask(b)&&c.config.show_unscheduled?c.templates.task_unscheduled_time(b):c.templates.task_date(S)+" - "+c.templates.task_end_date(p)},task_unscheduled_time:function(S){return""},time_picker:m(v.time_picker),link_class:function(S){return""},link_description:function(S){var p=c.getTask(S.source),b=c.getTask(S.target);return"<b>"+p.text+"</b> &ndash;  <b>"+b.text+"</b>"},drag_link:function(S,p,b,k){S=c.getTask(S);var w=c.locale.labels,A="<b>"+S.text+"</b> "+(p?w.link_start:w.link_end)+"<br/>";return b&&(A+="<b> "+(b=c.getTask(b)).text+"</b> "+(k?w.link_start:w.link_end)+"<br/>"),A},drag_link_class:function(S,p,b,k){var w="";return S&&b&&(w=" "+(c.isLinkAllowed(S,b,p,k)?"gantt_link_allow":"gantt_link_deny")),"gantt_link_tooltip"+w},tooltip_date_format:g.date_to_str("%Y-%m-%d"),tooltip_text:function(S,p,b){return`<div>Task: ${b.text}</div>
				<div>Start date: ${c.templates.tooltip_date_format(S)}</div>
				<div>End date: ${c.templates.tooltip_date_format(p)}</div>`},baseline_text:function(S,p,b){return""}})},initTemplate:h}}(n);n.$services.setService("templateLoader",function(){return a}),Le(n);var s=new _v;s.registerProvider("global",function(){var c={min_date:n._min_date,max_date:n._max_date,selected_task:null};return n.$data&&n.$data.tasksStore&&(c.selected_task=n.$data.tasksStore.getSelectedId()),c}),n.getState=s.getState,n.$services.setService("state",function(){return s}),ut(n,ev),n.Promise=fv,n.env=ln,function(c){var u=pv.create();ut(c,u);var h,_=c.createDatastore({name:"task",type:"treeDatastore",rootId:function(){return c.config.root_id},initItem:_t(function(p){this.defined(p.id)||(p.id=this.uid()),p.start_date&&(p.start_date=c.date.parseDate(p.start_date,"parse_date")),p.end_date&&(p.end_date=c.date.parseDate(p.end_date,"parse_date"));var b=null;(p.duration||p.duration===0)&&(p.duration=b=1*p.duration),b&&(p.start_date&&!p.end_date?p.end_date=this.calculateEndDate(p):!p.start_date&&p.end_date&&(p.start_date=this.calculateEndDate({start_date:p.end_date,duration:-p.duration,task:p}))),c.config.deadlines!==!1&&p.deadline&&(p.deadline=c.date.parseDate(p.deadline,"parse_date")),p.progress=Number(p.progress)||0,this._isAllowedUnscheduledTask(p)&&this._set_default_task_timing(p),this._init_task_timing(p),p.start_date&&p.end_date&&this.correctTaskWorkTime(p),p.$source=[],p.$target=[];var k=this.$data.tasksStore.getItem(p.id);return k&&!Mt(p.open)&&(p.$open=k.$open),p.parent===void 0&&(p.parent=this.config.root_id),p.open&&(p.$open=!0),p},c),getConfig:function(){return c.config}}),g=c.createDatastore({name:"link",initItem:_t(function(p){return this.defined(p.id)||(p.id=this.uid()),p},c)});function m(p){var b=c.isTaskVisible(p);if(!b&&c.isTaskExists(p)){var k=c.getParent(p);c.isTaskExists(k)&&c.isTaskVisible(k)&&(k=c.getTask(k),c.isSplitTask(k)&&(b=!0))}return b}function v(p){if(c.isTaskExists(p.source)){var b=c.getTask(p.source);b.$source=b.$source||[],b.$source.push(p.id)}if(c.isTaskExists(p.target)){var k=c.getTask(p.target);k.$target=k.$target||[],k.$target.push(p.id)}}function $(p){if(c.isTaskExists(p.source)){for(var b=c.getTask(p.source),k=0;k<b.$source.length;k++)if(b.$source[k]==p.id){b.$source.splice(k,1);break}}if(c.isTaskExists(p.target)){var w=c.getTask(p.target);for(k=0;k<w.$target.length;k++)if(w.$target[k]==p.id){w.$target.splice(k,1);break}}}function x(){for(var p=null,b=c.$data.tasksStore.getItems(),k=0,w=b.length;k<w;k++)(p=b[k]).$source=[],p.$target=[];var A=c.$data.linksStore.getItems();for(k=0,w=A.length;k<w;k++)v(A[k])}function S(p){var b=p.source,k=p.target;for(var w in p.events)(function(A,I){b.attachEvent(A,function(){return k.callEvent(I,Array.prototype.slice.call(arguments))},I)})(w,p.events[w])}c.attachEvent("onDestroy",function(){_.destructor(),g.destructor()}),c.attachEvent("onLinkValidation",function(p){if(c.isLinkExists(p.id)||p.id==="predecessor_generated")return!0;for(var b=c.getTask(p.source).$source,k=0;k<b.length;k++){var w=c.getLink(b[k]),A=p.source==w.source,I=p.target==w.target,C=p.type==w.type;if(A&&I&&C)return!1}return!0}),_.attachEvent("onBeforeRefreshAll",function(){if(!_._skipTaskRecalculation)for(var p=_.getVisibleItems(),b=0;b<p.length;b++){var k=p[b];k.$index=b,k.$local_index=c.getTaskIndex(k.id),c.resetProjectDates(k)}}),_.attachEvent("onFilterItem",function(p,b){if(c.config.show_tasks_outside_timescale)return!0;var k=null,w=null;if(c.config.start_date&&c.config.end_date){if(c._isAllowedUnscheduledTask(b))return!0;if(k=c.config.start_date.valueOf(),w=c.config.end_date.valueOf(),+b.start_date>w||+b.end_date<+k)return!1}return!0}),_.attachEvent("onIdChange",function(p,b){c._update_flags(p,b);var k=c.getTask(b);_.isSilent()||(k.$split_subtask||k.rollup)&&c.eachParent(function(w){c.refreshTask(w.id)},b)}),_.attachEvent("onAfterUpdate",function(p){if(c._update_parents(p),c.getState("batchUpdate").batch_update)return!0;var b=_.getItem(p);b.$source||(b.$source=[]);for(var k=0;k<b.$source.length;k++)g.refresh(b.$source[k]);for(b.$target||(b.$target=[]),k=0;k<b.$target.length;k++)g.refresh(b.$target[k])}),_.attachEvent("onBeforeItemMove",function(p,b,k){return!vi(p,c,_)||(console.log("The placeholder task cannot be moved to another position."),!1)}),_.attachEvent("onAfterItemMove",function(p,b,k){var w=c.getTask(p);this.getNextSibling(p)!==null?w.$drop_target=this.getNextSibling(p):this.getPrevSibling(p)!==null?w.$drop_target="next:"+this.getPrevSibling(p):w.$drop_target="next:null"}),_.attachEvent("onStoreUpdated",function(p,b,k){if(k=="delete"&&c._update_flags(p,null),!c.$services.getService("state").getState("batchUpdate").batch_update){if(c.config.fit_tasks&&k!=="paint"){var w=c.getState();ss(c);var A=c.getState();if(+w.min_date!=+A.min_date||+w.max_date!=+A.max_date)return c.render(),c.callEvent("onScaleAdjusted",[]),!0}k=="add"||k=="move"||k=="delete"?c.$layout&&(this.$config.name!="task"||k!="add"&&k!="delete"||this._skipTaskRecalculation!="lightbox"&&(this._skipTaskRecalculation=!0),c.$layout.resize()):p||g.refresh()}}),g.attachEvent("onAfterAdd",function(p,b){v(b)}),g.attachEvent("onAfterUpdate",function(p,b){x()}),g.attachEvent("onAfterDelete",function(p,b){$(b)}),g.attachEvent("onAfterSilentDelete",function(p,b){$(b)}),g.attachEvent("onBeforeIdChange",function(p,b){$(c.mixin({id:p},c.$data.linksStore.getItem(b))),v(c.$data.linksStore.getItem(b))}),g.attachEvent("onFilterItem",function(p,b){if(!c.config.show_links)return!1;var k=m(b.source),w=m(b.target);return!(!k||!w||c._isAllowedUnscheduledTask(c.getTask(b.source))||c._isAllowedUnscheduledTask(c.getTask(b.target)))&&c.callEvent("onBeforeLinkDisplay",[p,b])}),h={},c.attachEvent("onBeforeTaskDelete",function(p,b){return h[p]=os.getSubtreeLinks(c,p),!0}),c.attachEvent("onAfterTaskDelete",function(p,b){h[p]&&c.$data.linksStore.silent(function(){for(var k in h[p])c.isLinkExists(k)&&c.$data.linksStore.removeItem(k),$(h[p][k]);h[p]=null})}),c.attachEvent("onAfterLinkDelete",function(p,b){c.refreshTask(b.source),c.refreshTask(b.target)}),c.attachEvent("onParse",x),S({source:g,target:c,events:{onItemLoading:"onLinkLoading",onBeforeAdd:"onBeforeLinkAdd",onAfterAdd:"onAfterLinkAdd",onBeforeUpdate:"onBeforeLinkUpdate",onAfterUpdate:"onAfterLinkUpdate",onBeforeDelete:"onBeforeLinkDelete",onAfterDelete:"onAfterLinkDelete",onIdChange:"onLinkIdChange"}}),S({source:_,target:c,events:{onItemLoading:"onTaskLoading",onBeforeAdd:"onBeforeTaskAdd",onAfterAdd:"onAfterTaskAdd",onBeforeUpdate:"onBeforeTaskUpdate",onAfterUpdate:"onAfterTaskUpdate",onBeforeDelete:"onBeforeTaskDelete",onAfterDelete:"onAfterTaskDelete",onIdChange:"onTaskIdChange",onBeforeItemMove:"onBeforeTaskMove",onAfterItemMove:"onAfterTaskMove",onFilterItem:"onBeforeTaskDisplay",onItemOpen:"onTaskOpened",onItemClose:"onTaskClosed",onBeforeSelect:"onBeforeTaskSelected",onAfterSelect:"onTaskSelected",onAfterUnselect:"onTaskUnselected"}}),c.$data={tasksStore:_,linksStore:g}}(n),n.dataProcessor=dc.DEPRECATED_api,n.createDataProcessor=dc.createDataProcessor,function(c){c.ext||(c.ext={});for(var u=[yv,xv,$v,Sv,Tv,Ev,Av,Dv,Lv],h=0;h<u.length;h++)u[h]&&u[h](c)}(n),function(c){c.getGridColumn=function(u){for(var h=c.config.columns,_=0;_<h.length;_++)if(h[_].name==u)return h[_];return null},c.getGridColumns=function(){return c.config.columns.slice()}}(n),function(c){c.isReadonly=function(u){return typeof u!="number"&&typeof u!="string"||!c.isTaskExists(u)||(u=c.getTask(u)),(!u||!u[this.config.editable_property])&&(u&&u[this.config.readonly_property]||this.config.readonly)}}(n),Nv(n),function(c){var u=new zc(c),h=new Wc(u);ut(c,Wv.create(u,h))}(n),Fv(n),function(c){c.getTaskType=function(u){return"task"}}(n),function(c){function u(){return c._cached_functions.update_if_changed(c),c._cached_functions.active||c._cached_functions.activate(),!0}c._cached_functions={cache:{},mode:!1,critical_path_mode:!1,wrap_methods:function(_,g){if(g._prefetch_originals)for(var m in g._prefetch_originals)g[m]=g._prefetch_originals[m];for(g._prefetch_originals={},m=0;m<_.length;m++)this.prefetch(_[m],g)},prefetch:function(_,g){var m=g[_];if(m){var v=this;g._prefetch_originals[_]=m,g[_]=function(){for(var $=new Array(arguments.length),x=0,S=arguments.length;x<S;x++)$[x]=arguments[x];if(v.active){var p=v.get_arguments_hash(Array.prototype.slice.call($));v.cache[_]||(v.cache[_]={});var b=v.cache[_];if(v.has_cached_value(b,p))return v.get_cached_value(b,p);var k=m.apply(this,$);return v.cache_value(b,p,k),k}return m.apply(this,$)}}return m},cache_value:function(_,g,m){this.is_date(m)&&(m=new Date(m)),_[g]=m},has_cached_value:function(_,g){return _.hasOwnProperty(g)},get_cached_value:function(_,g){var m=_[g];return this.is_date(m)&&(m=new Date(m)),m},is_date:function(_){return _&&_.getUTCDate},get_arguments_hash:function(_){for(var g=[],m=0;m<_.length;m++)g.push(this.stringify_argument(_[m]));return"("+g.join(";")+")"},stringify_argument:function(_){return(_.id?_.id:this.is_date(_)?_.valueOf():_)+""},activate:function(){this.clear(),this.active=!0},deactivate:function(){this.clear(),this.active=!1},clear:function(){this.cache={}},setup:function(_){var g=[],m=["_isProjectEnd","_getProjectEnd","_getSlack"];this.mode=="auto"?_.config.highlight_critical_path&&(g=m):this.mode===!0&&(g=m),this.wrap_methods(g,_)},update_if_changed:function(_){(this.critical_path_mode!=_.config.highlight_critical_path||this.mode!==_.config.optimize_render)&&(this.critical_path_mode=_.config.highlight_critical_path,this.mode=_.config.optimize_render,this.setup(_))}},c.attachEvent("onBeforeGanttRender",u),c.attachEvent("onBeforeDataRender",u),c.attachEvent("onBeforeSmartRender",function(){u()}),c.attachEvent("onBeforeParse",u),c.attachEvent("onDataRender",function(){c._cached_functions.deactivate()});var h=null;c.attachEvent("onSmartRender",function(){h&&clearTimeout(h),h=setTimeout(function(){c._cached_functions.deactivate()},1e3)}),c.attachEvent("onBeforeGanttReady",function(){return c._cached_functions.update_if_changed(c),!0})}(n),Uv(n),function(c){c.destructor=function(){for(var u in this.clearAll(),this.callEvent("onDestroy",[]),this.$root&&delete this.$root.gantt,this._eventRemoveAll&&this._eventRemoveAll(),this.$layout&&this.$layout.destructor(),this.resetLightbox&&this.resetLightbox(),this.ext.inlineEditors&&this.ext.inlineEditors.destructor(),this._dp&&this._dp.destructor&&this._dp.destructor(),this.$services.destructor(),this.detachAllEvents(),this)u.indexOf("$")===0&&delete this[u];this.$destroyed=!0}}(n);var l=new dk({en:Zv,ar:Vv,be:jv,ca:Gv,cn:qv,cs:Yv,da:Kv,de:Jv,el:Xv,es:Qv,fa:tk,fi:ek,fr:nk,he:ik,hr:rk,hu:ak,id:sk,it:ok,jp:lk,kr:ck,nb:uk,nl:hk,no:_k,pl:fk,pt:gk,ro:pk,ru:mk,si:vk,sk:kk,sv:yk,tr:bk,ua:xk});return n.i18n={addLocale:l.addLocale,setLocale:function(c){if(typeof c=="string"){var u=l.getLocale(c);u||(u=l.getLocale("en")),n.locale=u}else if(c)if(n.locale)for(var h in c)c[h]&&typeof c[h]=="object"?(n.locale[h]||(n.locale[h]={}),n.mixin(n.locale[h],c[h],!0)):n.locale[h]=c[h];else n.locale=c},getLocale:l.getLocale},n.i18n.setLocale("en"),n}function Sk(t){var n="data-dhxbox",e=null;function i(p,b){var k=p.callback;$.hide(p.box),e=p.box=null,k&&k(b)}function r(p){if(e){var b=p.which||p.keyCode,k=!1;if(x.keyboard){if(b==13||b==32){var w=p.target||p.srcElement;ce(w).indexOf("gantt_popup_button")>-1&&w.click?w.click():(i(e,!0),k=!0)}b==27&&(i(e,!1),k=!0)}return k?(p.preventDefault&&p.preventDefault(),!(p.cancelBubble=!0)):void 0}}var a=yn(t.$root)||document;function s(p){s.cover||(s.cover=document.createElement("div"),s.cover.onkeydown=r,s.cover.className="dhx_modal_cover",document.body.appendChild(s.cover)),s.cover.style.display=p?"inline-block":"none"}function l(p,b,k){return"<div "+t._waiAria.messageButtonAttrString(p)+" class='gantt_popup_button "+("gantt_"+b.toLowerCase().replace(/ /g,"_")+"_button")+"' data-result='"+k+"' result='"+k+"' ><div>"+p+"</div></div>"}function c(){for(var p=[].slice.apply(arguments,[0]),b=0;b<p.length;b++)if(p[b])return p[b]}function u(p,b,k){var w=p.tagName?p:function(C,M,N){var P=document.createElement("div"),B=Me();t._waiAria.messageModalAttr(P,B),P.className=" gantt_modal_box gantt-"+C.type,P.setAttribute(n,1);var W="";if(C.width&&(P.style.width=C.width),C.height&&(P.style.height=C.height),C.title&&(W+='<div class="gantt_popup_title">'+C.title+"</div>"),W+='<div class="gantt_popup_text" id="'+B+'"><span>'+(C.content?"":C.text)+'</span></div><div  class="gantt_popup_controls">',M&&(W+=l(c(C.ok,t.locale.labels.message_ok,"OK"),"ok",!0)),N&&(W+=l(c(C.cancel,t.locale.labels.message_cancel,"Cancel"),"cancel",!1)),C.buttons)for(var j=0;j<C.buttons.length;j++){var q=C.buttons[j];W+=typeof q=="object"?l(q.label,q.css||"gantt_"+q.label.toLowerCase()+"_button",q.value||j):l(q,q,j)}if(W+="</div>",P.innerHTML=W,C.content){var Y=C.content;typeof Y=="string"&&(Y=document.getElementById(Y)),Y.style.display=="none"&&(Y.style.display=""),P.childNodes[C.title?1:0].appendChild(Y)}return P.onclick=function(Z){var it=Z.target||Z.srcElement;if(it.className||(it=it.parentNode),He(it,".gantt_popup_button")){var mt=it.getAttribute("data-result");i(C,mt=mt=="true"||mt!="false"&&mt)}},C.box=P,(M||N)&&(e=C),P}(p,b,k);p.hidden||s(!0),document.body.appendChild(w);var A=Math.abs(Math.floor(((window.innerWidth||document.documentElement.offsetWidth)-w.offsetWidth)/2)),I=Math.abs(Math.floor(((window.innerHeight||document.documentElement.offsetHeight)-w.offsetHeight)/2));return p.position=="top"?w.style.top="-3px":w.style.top=I+"px",w.style.left=A+"px",w.onkeydown=r,$.focus(w),p.hidden&&$.hide(w),t.callEvent("onMessagePopup",[w]),w}function h(p){return u(p,!0,!1)}function _(p){return u(p,!0,!0)}function g(p){return u(p)}function m(p,b,k){return typeof p!="object"&&(typeof b=="function"&&(k=b,b=""),p={text:p,type:b,callback:k}),p}function v(p,b,k,w){return typeof p!="object"&&(p={text:p,type:b,expire:k,id:w}),p.id=p.id||Me(),p.expire=p.expire||x.expire,p}t.event(a,"keydown",r,!0);var $=function(){var p=m.apply(this,arguments);return p.type=p.type||"alert",g(p)};$.hide=function(p){for(;p&&p.getAttribute&&!p.getAttribute(n);)p=p.parentNode;p&&(p.parentNode.removeChild(p),s(!1),t.callEvent("onAfterMessagePopup",[p]))},$.focus=function(p){setTimeout(function(){var b=ps(p);b.length&&b[0].focus&&b[0].focus()},1)};var x=function(p,b,k,w){switch((p=v.apply(this,arguments)).type=p.type||"info",p.type.split("-")[0]){case"alert":return h(p);case"confirm":return _(p);case"modalbox":return g(p);default:return function(A){x.area||(x.area=document.createElement("div"),x.area.className="gantt_message_area",x.area.style[x.position]="5px",document.body.appendChild(x.area)),x.hide(A.id);var I=document.createElement("div");return I.innerHTML="<div>"+A.text+"</div>",I.className="gantt-info gantt-"+A.type,I.onclick=function(){x.hide(A.id),A=null},t._waiAria.messageInfoAttr(I),x.position=="bottom"&&x.area.firstChild?x.area.insertBefore(I,x.area.firstChild):x.area.appendChild(I),A.expire>0&&(x.timers[A.id]=window.setTimeout(function(){x&&x.hide(A.id)},A.expire)),x.pull[A.id]=I,I=null,A.id}(p)}};x.seed=new Date().valueOf(),x.uid=Me,x.expire=4e3,x.keyboard=!0,x.position="top",x.pull={},x.timers={},x.hideAll=function(){for(var p in x.pull)x.hide(p)},x.hide=function(p){var b=x.pull[p];b&&b.parentNode&&(window.setTimeout(function(){b.parentNode.removeChild(b),b=null},2e3),b.className+=" hidden",x.timers[p]&&window.clearTimeout(x.timers[p]),delete x.pull[p])};var S=[];return t.attachEvent("onMessagePopup",function(p){S.push(p)}),t.attachEvent("onAfterMessagePopup",function(p){for(var b=0;b<S.length;b++)S[b]===p&&(S.splice(b,1),b--)}),t.attachEvent("onDestroy",function(){s.cover&&s.cover.parentNode&&s.cover.parentNode.removeChild(s.cover);for(var p=0;p<S.length;p++)S[p].parentNode&&S[p].parentNode.removeChild(S[p]);S=null,x.area&&x.area.parentNode&&x.area.parentNode.removeChild(x.area),x=null}),{alert:function(){var p=m.apply(this,arguments);return p.type=p.type||"confirm",h(p)},confirm:function(){var p=m.apply(this,arguments);return p.type=p.type||"alert",_(p)},message:x,modalbox:$}}function _c(t,n){var e=this.$config[t];return e?(e.$extendedConfig||(e.$extendedConfig=!0,Object.setPrototypeOf(e,n)),e):n}function Tk(t,n){var e,i,r;ut(t,(e=n,{$getConfig:function(){return i||(i=e?e.$getConfig():this.$gantt.config),this.$config.config?_c.call(this,"config",i):i},$getTemplates:function(){return r||(r=e?e.$getTemplates():this.$gantt.templates),this.$config.templates?_c.call(this,"templates",r):r}}))}const Ek=function(t){var n={},e={};function i(r,a,s,l){var c=n[r];if(!c||!c.create)return!1;r!="resizer"||s.mode||(l.$config.cols?s.mode="x":s.mode="y"),r!="viewcell"||s.view!="scrollbar"||s.scroll||(l.$config.cols?s.scroll="y":s.scroll="x"),(s=qt(s)).id||e[s.view]||(s.id=s.view),s.id&&!s.css&&(s.css=s.id+"_cell");var u=new c.create(a,s,this,t);return c.configure&&c.configure(u),Tk(u,l),u.$id||(u.$id=s.id||t.uid()),u.$parent||typeof a!="object"||(u.$parent=a),u.$config||(u.$config=s),e[u.$id]&&(u.$id=t.uid()),e[u.$id]=u,u}return{initUI:function(r,a){var s="cell";return r.view?s="viewcell":r.resizer?s="resizer":r.rows||r.cols?s="layout":r.views&&(s="multiview"),i.call(this,s,null,r,a)},reset:function(){e={}},registerView:function(r,a,s){n[r]={create:a,configure:s}},createView:i,getView:function(r){return e[r]}}};var Ck=function(t){return function(n){var e={click:{},doubleclick:{},contextMenu:{}};function i(g,m,v,$){e[g][m]||(e[g][m]=[]),e[g][m].push({handler:v,root:$})}function r(g){g=g||window.event;var m=n.locate(g),v=s(g,e.click),$=!0;if(m!==null?$=!n.checkEvent("onTaskClick")||n.callEvent("onTaskClick",[m,g]):n.callEvent("onEmptyClick",[g]),$){if(!l(v,g,m))return;switch(g.target.nodeName){case"SELECT":case"INPUT":return}m&&n.getTask(m)&&!n._multiselect&&n.config.select_task&&n.selectTask(m)}}function a(g){var m=(g=g||window.event).target||g.srcElement,v=n.locate(m),$=n.locate(m,n.config.link_attribute),x=!n.checkEvent("onContextMenu")||n.callEvent("onContextMenu",[v,$,g]);return x||(g.preventDefault?g.preventDefault():g.returnValue=!1),x}function s(g,m){for(var v=g.target||g.srcElement,$=[];v;){var x=t.getClassName(v);if(x){x=x.split(" ");for(var S=0;S<x.length;S++)if(x[S]&&m[x[S]])for(var p=m[x[S]],b=0;b<p.length;b++)p[b].root&&!t.isChildOf(v,p[b].root)||$.push(p[b].handler)}v=v.parentNode}return $}function l(g,m,v){for(var $=!0,x=0;x<g.length;x++){var S=g[x].call(n,m,v,m.target||m.srcElement);$=$&&!(S!==void 0&&S!==!0)}return $}function c(g){g=g||window.event;var m=n.locate(g),v=s(g,e.doubleclick),$=!n.checkEvent("onTaskDblClick")||m===null||n.callEvent("onTaskDblClick",[m,g]);if($){if(!l(v,g,m))return;m!==null&&n.getTask(m)&&$&&n.config.details_on_dblclick&&!n.isReadonly(m)&&n.showLightbox(m)}}function u(g){if(n.checkEvent("onMouseMove")){var m=n.locate(g);n._last_move_event=g,n.callEvent("onMouseMove",[m,g])}}var h=n._createDomEventScope();function _(g){h.detachAll(),g&&(h.attach(g,"click",r),h.attach(g,"dblclick",c),h.attach(g,"mousemove",u),h.attach(g,"contextmenu",a))}return{reset:_,global:function(g,m,v){i(g,m,v,null)},delegate:i,detach:function(g,m,v,$){if(e[g]&&e[g][m]){for(var x=e[g],S=x[m],p=0;p<S.length;p++)S[p].root==$&&(S.splice(p,1),p--);S.length||delete x[m]}},callHandler:function(g,m,v,$){var x=e[g][m];if(x)for(var S=0;S<x.length;S++)(v||x[S].root)&&x[S].root!==v||x[S].handler.apply(this,$)},onDoubleClick:c,onMouseMove:u,onContextMenu:a,onClick:r,destructor:function(){_(),e=null,h=null}}}}(Ic);const Ak={init:Ck};function fc(t,n,e){return!!n&&!(n.left>t.x_end||n.left+n.width<t.x)&&!(n.top>t.y_end||n.top+n.height<t.y)}function mi(t){return t.config.smart_rendering&&t._smart_render}function kr(t,n,e){return{top:n.getItemTop(t.id),height:n.getItemHeight(t.id),left:0,right:1/0}}function sn(t,n,e,i,r){var a=n.getItemIndexByTopPosition(r.y)||0,s=n.getItemIndexByTopPosition(r.y_end)||i.count(),l=Math.max(0,a-1),c=Math.min(i.count(),s+1);const u=[];if(t.config.keyboard_navigation&&t.getSelectedId()&&t.getTask(t.getSelectedId()).$expanded_branch&&u.push(t.getSelectedId()),t.$ui.getView("grid")&&t.ext.inlineEditors&&t.ext.inlineEditors.getState().id){let h=t.ext.inlineEditors.getState().id;i.exists(h)&&u.push(h)}return{start:l,end:c,ids:u}}var Dk=function(t){var n=function(e){var i={},r={};function a(l){var c=null;return typeof l.view=="string"?c=e.$ui.getView(l.view):l.view&&(c=l.view),c}function s(l,c,u){if(r[l])return r[l];c.renderer||e.assert(!1,"Invalid renderer call");var h=null,_=null,g=null,m=null,v=null;typeof c.renderer=="function"?(h=c.renderer,g=kr):(h=c.renderer.render,_=c.renderer.update,m=c.renderer.onrender,c.renderer.isInViewPort?v=c.renderer.isInViewPort:g=c.renderer.getRectangle,g||g===null||(g=kr));var $=c.filter;return u&&u.setAttribute(e.config.layer_attribute,!0),r[l]={render_item:function(x,S,p,b,k){if(S=S||u,!$||$(x)){var w=b||a(c),A=k||(w?w.$getConfig():null),I=p;!I&&A&&A.smart_rendering&&(I=w.getViewPort());var C=null;!mi(e)&&(g||v)&&I?(v?v(x,I,w,A,e):fc(I,g(x,w,A,e)))&&(C=h.call(e,x,w,A,I)):C=h.call(e,x,w,A,I),this.append(x,C,S);var M=S.nodeType==11;m&&!M&&C&&m.call(e,x,C,w)}else this.remove_item(x.id)},clear:function(x){this.rendered=i[l]={},c.append||this.clear_container(x)},clear_container:function(x){(x=x||u)&&(x.innerHTML="")},get_visible_range:function(x){var S,p,b=a(c),k=b?b.$getConfig():null;return k&&k.smart_rendering&&(S=b.getViewPort()),b&&S&&(typeof c.renderer=="function"?p=sn(e,b,0,x,S):c.renderer&&c.renderer.getVisibleRange&&(p=c.renderer.getVisibleRange(e,b,k,x,S))),p||(p={start:0,end:x.count()}),p},prepare_data:function(x){if(c.renderer&&c.renderer.prepareData)return c.renderer.prepareData(x,e,c)},render_items:function(x,S){S=S||u;var p=document.createDocumentFragment();this.clear(S);var b=null,k=a(c),w=k?k.$getConfig():null;w&&w.smart_rendering&&(b=k.getViewPort());for(var A=0,I=x.length;A<I;A++)this.render_item(x[A],p,b,k,w);S.appendChild(p,S);var C={};x.forEach(function(P){C[P.id]=P});var M={};if(m){var N={};for(var A in this.rendered)M[A]||(N[A]=this.rendered[A],m.call(e,C[A],this.rendered[A],k))}},update_items:function(x,S){var p=a(c),b=p?p.$getConfig():null;if(p&&p.$getConfig().smart_rendering&&!mi(e)&&this.rendered&&(g||v)){S=S||u;var k=document.createDocumentFragment(),w=null;p&&(w=p.getViewPort());var A={};x.forEach(function(q){A[q.id]=q});var I={},C={};for(var M in this.rendered)C[M]=!0,I[M]=!0;for(var N={},P=(M=0,x.length);M<P;M++){var B=x[M],W=this.rendered[B.id];C[B.id]=!1,W&&W.parentNode?(v?v(B,w,p,b,e):fc(w,g(B,p,b,e)))?(_&&_.call(e,B,W,p,b,w),this.restore(B,k)):C[B.id]=!0:(N[x[M].id]=!0,this.render_item(x[M],k,w,p,b))}for(var M in C)C[M]&&this.hide(M);if(k.childNodes.length&&S.appendChild(k,S),m){var j={};for(var M in this.rendered)I[M]&&!N[M]||(j[M]=this.rendered[M],m.call(e,A[M],this.rendered[M],p))}}},append:function(x,S,p){this.rendered&&(S?(this.rendered[x.id]&&this.rendered[x.id].parentNode?this.replace_item(x.id,S):p.appendChild(S),this.rendered[x.id]=S):this.rendered[x.id]&&this.remove_item(x.id))},replace_item:function(x,S){var p=this.rendered[x];p&&p.parentNode&&p.parentNode.replaceChild(S,p),this.rendered[x]=S},remove_item:function(x){this.hide(x),delete this.rendered[x]},hide:function(x){var S=this.rendered[x];S&&S.parentNode&&S.parentNode.removeChild(S)},restore:function(x,S){var p=this.rendered[x.id];p?p.parentNode||this.append(x,p,S||u):this.render_item(x,S||u)},change_id:function(x,S){this.rendered[S]=this.rendered[x],delete this.rendered[x]},rendered:i[l],node:u,destructor:function(){this.clear(),delete r[l],delete i[l]}},r[l]}return{getRenderer:s,clearRenderers:function(){for(var l in r)s(l).destructor()}}}(t);return{createGroup:function(e,i,r,a){var s={tempCollection:[],renderers:{},container:e,filters:[],getLayers:function(){this._add();var l=[];for(var c in this.renderers)l.push(this.renderers[c]);return l},getLayer:function(l){return this.renderers[l]},_add:function(l){l&&(l.id=l.id||Me(),this.tempCollection.push(l));for(var c=this.container(),u=this.tempCollection,h=0;h<u.length;h++)if(l=u[h],this.container()||l&&l.container&&Qt(l.container,document.body)){var _=l.container,g=l.id,m=l.topmost;if(!_.parentNode)if(m)c.appendChild(_);else{var v=i?i():c.firstChild;v&&v.parentNode==c?c.insertBefore(_,v):c.appendChild(_)}this.renderers[g]=n.getRenderer(g,l,_),a&&a(l,t),this.tempCollection.splice(h,1),h--}},addLayer:function(l){if(l){typeof l=="function"&&(l={renderer:l}),l.filter===void 0?l.filter=gc(r||[]):l.filter instanceof Array&&(l.filter.push(r),l.filter=gc(l.filter)),l.container||(l.container=document.createElement("div"));var c=this;l.requestUpdate=function(){t.config.smart_rendering&&!mi(t)&&c.renderers[l.id]&&c.onUpdateRequest(c.renderers[l.id])}}return this._add(l),l?l.id:void 0},onUpdateRequest:function(l){},eachLayer:function(l){for(var c in this.renderers)l(this.renderers[c])},removeLayer:function(l){this.renderers[l]&&(this.renderers[l].destructor(),delete this.renderers[l])},clear:function(){for(var l in this.renderers)this.renderers[l].destructor();this.renderers={}}};return t.attachEvent("onDestroy",function(){s.clear(),s=null}),s}}};function gc(t){return t instanceof Array||(t=Array.prototype.slice.call(arguments,0)),function(n){for(var e=!0,i=0,r=t.length;i<r;i++){var a=t[i];a&&(e=e&&a(n.id,n)!==!1)}return e}}function pc(t,n,e){if(!t.start_date||!t.end_date)return null;var i=n.posFromDate(t.start_date),r=n.posFromDate(t.end_date),a=Math.min(i,r)-200,s=Math.max(i,r)+200;return{top:n.getItemTop(t.id),height:n.getItemHeight(t.id),left:a,width:s-a}}function Fc(){var t=[],n=!1;function e(){t=[],n=!1}function i(a,s,l){s.$getConfig(),a.getVisibleItems().forEach(function(c){var u=function(h,_,g,m){if(!m.isTaskExists(h.source)||!m.isTaskExists(h.target))return null;var v=pc(m.getTask(h.source),_),$=pc(m.getTask(h.target),_);if(!v||!$)return null;var x=100,S=Math.min(v.left,$.left)-x,p=Math.max(v.left+v.width,$.left+$.width)+x,b=Math.min(v.top,$.top)-x,k=Math.max(v.top+v.height,$.top+$.height)+x;return{top:b,height:k-b,bottom:k,left:S,width:p-S,right:p}}(c,s,0,l);u&&t.push({id:c.id,rec:u})}),t.sort(function(c,u){return c.rec.right<u.rec.right?-1:1}),n=!0}var r=!1;return function(a,s,l,c,u){(function(v){r||(r=!0,v.attachEvent("onPreFilter",e),v.attachEvent("onStoreUpdated",e),v.attachEvent("onClearAll",e),v.attachEvent("onBeforeStoreUpdate",e))})(c),n||i(c,s,a);for(var h=[],_=0;_<t.length;_++){var g=t[_],m=g.rec;m.right<u.x||m.left<u.x_end&&m.right>u.x&&m.top<u.y_end&&m.bottom>u.y&&h.push(g.id)}return{ids:h}}}function Uc(t,n,e,i,r){var a=e.$gantt.getTask(t.source),s=e.$gantt.getTask(t.target),l=e.getItemTop(a.id),c=e.getItemHeight(a.id),u=e.getItemTop(s.id),h=e.getItemHeight(s.id);if(n.y>l+c&&n.y>u+h||n.y_end<u&&n.y_end<l)return!1;var _=100,g=e.posFromDate(a.start_date),m=e.posFromDate(a.end_date),v=e.posFromDate(s.start_date),$=e.posFromDate(s.end_date);if(g>m){var x=m;m=g,g=x}return v>$&&(x=$,$=v,v=x),g+=-100,m+=_,v+=-100,$+=_,!(n.x>m&&n.x>$)&&!(n.x_end<g&&n.x_end<v)}function Ik(t,n){if(t.view){var e=t.view;typeof e=="string"&&(e=n.$ui.getView(e)),e&&e.attachEvent&&e.attachEvent("onScroll",function(){n.$services.getService("state").getState("batchUpdate").batch_update||e.$config.$skipSmartRenderOnScroll||t.requestUpdate&&t.requestUpdate()})}}var ki=function(){function t(n,e,i,r){n&&(this.$container=ms(n),this.$parent=n),this.$config=ut(e,{headerHeight:33}),this.$gantt=r,this.$domEvents=r._createDomEventScope(),this.$id=e.id||"c"+Me(),this.$name="cell",this.$factory=i,Le(this)}return t.prototype.destructor=function(){this.$parent=this.$container=this.$view=null,this.$gantt.$services.getService("mouseEvents").detach("click","gantt_header_arrow",this._headerClickHandler),this.$domEvents.detachAll(),this.callEvent("onDestroy",[]),this.detachAllEvents()},t.prototype.cell=function(n){return null},t.prototype.scrollTo=function(n,e){var i=this.$view;this.$config.html&&(i=this.$view.firstChild),1*n==n&&(i.scrollLeft=n),1*e==e&&(i.scrollTop=e)},t.prototype.clear=function(){this.getNode().innerHTML="",this.getNode().className="gantt_layout_content",this.getNode().style.padding="0"},t.prototype.resize=function(n){if(this.$parent)return this.$parent.resize(n);n===!1&&(this.$preResize=!0);var e=this.$container,i=e.offsetWidth,r=e.offsetHeight,a=this.getSize();e===document.body&&(i=document.body.offsetWidth,r=document.body.offsetHeight),i<a.minWidth&&(i=a.minWidth),i>a.maxWidth&&(i=a.maxWidth),r<a.minHeight&&(r=a.minHeight),r>a.maxHeight&&(r=a.maxHeight),this.setSize(i,r),this.$preResize,this.$preResize=!1},t.prototype.hide=function(){this._hide(!0),this.resize()},t.prototype.show=function(n){this._hide(!1),n&&this.$parent&&this.$parent.show(),this.resize()},t.prototype._hide=function(n){if(n===!0&&this.$view.parentNode)this.$view.parentNode.removeChild(this.$view);else if(n===!1&&!this.$view.parentNode){var e=this.$parent.cellIndex(this.$id);this.$parent.moveView(this,e)}this.$config.hidden=n},t.prototype.$toHTML=function(n,e){n===void 0&&(n=""),e=[e||"",this.$config.css||""].join(" ");var i=this.$config,r="";return i.raw?n=typeof i.raw=="string"?i.raw:"":(n||(n="<div class='gantt_layout_content' "+(e?" class='"+e+"' ":"")+" >"+(i.html||"")+"</div>"),i.header&&(r="<div class='gantt_layout_header'>"+(i.canCollapse?"<div class='gantt_layout_header_arrow'></div>":"")+"<div class='gantt_layout_header_content'>"+i.header+"</div></div>")),"<div class='gantt_layout_cell "+e+"' data-cell-id='"+this.$id+"'>"+r+n+"</div>"},t.prototype.$fill=function(n,e){this.$view=n,this.$parent=e,this.init()},t.prototype.getNode=function(){return this.$view.querySelector("gantt_layout_cell")||this.$view},t.prototype.init=function(){var n=this;this._headerClickHandler=function(e){ye(e,"data-cell-id")==n.$id&&n.toggle()},this.$gantt.$services.getService("mouseEvents").delegate("click","gantt_header_arrow",this._headerClickHandler),this.callEvent("onReady",[])},t.prototype.toggle=function(){this.$config.collapsed=!this.$config.collapsed,this.resize()},t.prototype.getSize=function(){var n={height:this.$config.height||0,width:this.$config.width||0,gravity:this.$config.gravity||1,minHeight:this.$config.minHeight||0,minWidth:this.$config.minWidth||0,maxHeight:this.$config.maxHeight||1e11,maxWidth:this.$config.maxWidth||1e11};if(this.$config.collapsed){var e=this.$config.mode==="x";n[e?"width":"height"]=n[e?"maxWidth":"maxHeight"]=this.$config.headerHeight}return n},t.prototype.getContentSize=function(){var n=this.$lastSize.contentX;n!==1*n&&(n=this.$lastSize.width);var e=this.$lastSize.contentY;return e!==1*e&&(e=this.$lastSize.height),{width:n,height:e}},t.prototype._getBorderSizes=function(){var n={top:0,right:0,bottom:0,left:0,horizontal:0,vertical:0};return this._currentBorders&&(this._currentBorders[this._borders.left]&&(n.left=1,n.horizontal++),this._currentBorders[this._borders.right]&&(n.right=1,n.horizontal++),this._currentBorders[this._borders.top]&&(n.top=1,n.vertical++),this._currentBorders[this._borders.bottom]&&(n.bottom=1,n.vertical++)),n},t.prototype.setSize=function(n,e){this.$view.style.width=n+"px",this.$view.style.height=e+"px";var i=this._getBorderSizes(),r=e-i.vertical,a=n-i.horizontal;this.$lastSize={x:n,y:e,contentX:a,contentY:r},this.$config.header?this._sizeHeader():this._sizeContent()},t.prototype._borders={left:"gantt_layout_cell_border_left",right:"gantt_layout_cell_border_right",top:"gantt_layout_cell_border_top",bottom:"gantt_layout_cell_border_bottom"},t.prototype._setBorders=function(n,e){e||(e=this);var i=e.$view;for(var r in this._borders)vr(i,this._borders[r]);typeof n=="string"&&(n=[n]);var a={};for(r=0;r<n.length;r++)Fn(i,n[r]),a[n[r]]=!0;e._currentBorders=a},t.prototype._sizeContent=function(){var n=this.$view.childNodes[0];n&&n.className=="gantt_layout_content"&&(n.style.height=this.$lastSize.contentY+"px")},t.prototype._sizeHeader=function(){var n=this.$lastSize;n.contentY-=this.$config.headerHeight;var e=this.$view.childNodes[0],i=this.$view.childNodes[1],r=this.$config.mode==="x";if(this.$config.collapsed)if(i.style.display="none",r){e.className="gantt_layout_header collapsed_x",e.style.width=n.y+"px";var a=Math.floor(n.y/2-n.x/2);e.style.transform="rotate(90deg) translate("+a+"px, "+a+"px)",i.style.display="none"}else e.className="gantt_layout_header collapsed_y";else e.className=r?"gantt_layout_header":"gantt_layout_header vertical",e.style.width="auto",e.style.transform="",i.style.display="",i.style.height=n.contentY+"px";e.style.height=this.$config.headerHeight+"px"},t}();function Dt(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e]);function i(){this.constructor=t}t.prototype=n===null?Object.create(n):(i.prototype=n.prototype,new i)}var Vc=function(t){function n(e,i,r){var a=t.apply(this,arguments)||this;return e&&(a.$root=!0),a._parseConfig(i),a.$name="layout",a}return Dt(n,t),n.prototype.destructor=function(){this.$container&&this.$view&&Tc(this.$view);for(var e=0;e<this.$cells.length;e++)this.$cells[e].destructor();this.$cells=[],t.prototype.destructor.call(this)},n.prototype._resizeScrollbars=function(e,i){var r=!1,a=[],s=[];const l=[];function c(v){v.$parent.show(),r=!0,a.push(v)}function u(v){v.$parent.hide(),r=!0,s.push(v)}for(var h,_=0;_<i.length;_++)e[(h=i[_]).$config.scroll]?u(h):h.shouldHide()?l.push(h):h.shouldShow()?c(h):h.isVisible()?a.push(h):s.push(h);var g={};for(_=0;_<a.length;_++)a[_].$config.group&&(g[a[_].$config.group]=!0);for(l.forEach(function(v){v.$config.group&&g[v.$config.group]||u(v)}),_=0;_<s.length;_++)if((h=s[_]).$config.group&&g[h.$config.group]){c(h);for(var m=0;m<a.length;m++)if(a[m]==h){this.$gantt.$scrollbarRepaint=!0;break}}return r},n.prototype.getScrollbarsInfo=function(){const e=this.getCellsByType("scroller"),i=[];return e.forEach(r=>{let a={};const{visible:s,direction:l,size:c,scrollSize:u,position:h}=r.getScrollState();let _=r._getLinkedViews().map(g=>g.$config.id);a.id=r.$id,a.visible=s,a.boundViews=_,l==="x"?(a.x=c,a.x_inner=u,a.x_pos=h||0):(a.y=c,a.y_inner=u,a.y_pos=h||0),i.push(a)}),i},n.prototype._syncCellSizes=function(e,i){if(e){var r={};return this._eachChild(function(a){a.$config.group&&a.$name!="scrollbar"&&a.$name!="resizer"&&(r[a.$config.group]||(r[a.$config.group]=[]),r[a.$config.group].push(a))}),r[e]&&this._syncGroupSize(r[e],i),r[e]}},n.prototype._syncGroupSize=function(e,i){if(e.length)for(var r=e[0].$parent._xLayout?"width":"height",a=e[0].$parent.getNextSibling(e[0].$id)?1:-1,s=i.value,l=i.isGravity,c=0;c<e.length;c++){var u=e[c].getSize(),h=a>0?e[c].$parent.getNextSibling(e[c].$id):e[c].$parent.getPrevSibling(e[c].$id);h.$name=="resizer"&&(h=a>0?h.$parent.getNextSibling(h.$id):h.$parent.getPrevSibling(h.$id));var _=h.getSize();if(l)e[c].$config.gravity=s;else if(h[r]){var g=u.gravity+_.gravity,m=u[r]+_[r],v=g/m;e[c].$config.gravity=v*s,h.$config[r]=m-s,h.$config.gravity=g-v*s}else e[c].$config[r]=s;var $=this.$gantt.$ui.getView("grid");!$||e[c].$content!==$||$.$config.scrollable||l||(this.$gantt.config.grid_width=s)}},n.prototype.resize=function(e){var i=!1;if(this.$root&&!this._resizeInProgress&&(this.callEvent("onBeforeResize",[]),i=!0,this._resizeInProgress=!0),t.prototype.resize.call(this,!0),t.prototype.resize.call(this,!1),i){var r=[];r=(r=(r=r.concat(this.getCellsByType("viewCell"))).concat(this.getCellsByType("viewLayout"))).concat(this.getCellsByType("hostCell"));for(var a=this.getCellsByType("scroller"),s=0;s<r.length;s++)r[s].$config.hidden||r[s].setContentSize();var l=this._getAutosizeMode(this.$config.autosize),c=this._resizeScrollbars(l,a);if(this.$config.autosize&&(this.autosize(this.$config.autosize),r.forEach(function(u){const h=u.$parent,_=h.getContentSize(l);l.x&&(h.$config.$originalWidthStored||(h.$config.$originalWidthStored=!0,h.$config.$originalWidth=h.$config.width),h.$config.width=_.width),l.y&&(h.$config.$originalHeightStored||(h.$config.$originalHeightStored=!0,h.$config.$originalHeight=h.$config.height),h.$config.height=_.height)}),c=!0),c)for(this.resize(),s=0;s<r.length;s++)r[s].$config.hidden||r[s].setContentSize();this.callEvent("onResize",[])}i&&(this._resizeInProgress=!1)},n.prototype._eachChild=function(e,i){if(e(i=i||this),i.$cells)for(var r=0;r<i.$cells.length;r++)this._eachChild(e,i.$cells[r])},n.prototype.isChild=function(e){var i=!1;return this._eachChild(function(r){r!==e&&r.$content!==e||(i=!0)}),i},n.prototype.getCellsByType=function(e){var i=[];if(e===this.$name&&i.push(this),this.$content&&this.$content.$name==e&&i.push(this.$content),this.$cells)for(var r=0;r<this.$cells.length;r++){var a=n.prototype.getCellsByType.call(this.$cells[r],e);a.length&&i.push.apply(i,a)}return i},n.prototype.getNextSibling=function(e){var i=this.cellIndex(e);return i>=0&&this.$cells[i+1]?this.$cells[i+1]:null},n.prototype.getPrevSibling=function(e){var i=this.cellIndex(e);return i>=0&&this.$cells[i-1]?this.$cells[i-1]:null},n.prototype.cell=function(e){for(var i=0;i<this.$cells.length;i++){var r=this.$cells[i];if(r.$id===e)return r;var a=r.cell(e);if(a)return a}},n.prototype.cellIndex=function(e){for(var i=0;i<this.$cells.length;i++)if(this.$cells[i].$id===e)return i;return-1},n.prototype.moveView=function(e,i){if(this.$cells[i]!==e)return window.alert("Not implemented");i+=this.$config.header?1:0;var r=this.$view;i>=r.childNodes.length?r.appendChild(e.$view):r.insertBefore(e.$view,r.childNodes[i])},n.prototype._parseConfig=function(e){this.$cells=[],this._xLayout=!e.rows;for(var i=e.rows||e.cols||e.views,r=0;r<i.length;r++){var a=i[r];a.mode=this._xLayout?"x":"y";var s=this.$factory.initUI(a,this);s?(s.$parent=this,this.$cells.push(s)):(i.splice(r,1),r--)}},n.prototype.getCells=function(){return this.$cells},n.prototype.render=function(){var e=Sc(this.$container,this.$toHTML());this.$fill(e,null),this.callEvent("onReady",[]),this.resize(),this.render=this.resize},n.prototype.$fill=function(e,i){this.$view=e,this.$parent=i;for(var r=Ec(e,"gantt_layout_cell"),a=r.length-1;a>=0;a--){var s=this.$cells[a];s.$fill(r[a],this),s.$config.hidden&&s.$view.parentNode.removeChild(s.$view)}},n.prototype.$toHTML=function(){for(var e=this._xLayout?"x":"y",i=[],r=0;r<this.$cells.length;r++)i.push(this.$cells[r].$toHTML());return t.prototype.$toHTML.call(this,i.join(""),(this.$root?"gantt_layout_root ":"")+"gantt_layout gantt_layout_"+e)},n.prototype.getContentSize=function(e){for(var i,r,a,s=0,l=0,c=0;c<this.$cells.length;c++)(r=this.$cells[c]).$config.hidden||(i=r.getContentSize(e),r.$config.view==="scrollbar"&&e[r.$config.scroll]&&(i.height=0,i.width=0),r.$config.resizer&&(this._xLayout?i.height=0:i.width=0),a=r._getBorderSizes(),this._xLayout?(s+=i.width+a.horizontal,l=Math.max(l,i.height+a.vertical)):(s=Math.max(s,i.width+a.horizontal),l+=i.height+a.vertical));return{width:s+=(a=this._getBorderSizes()).horizontal,height:l+=a.vertical}},n.prototype._cleanElSize=function(e){return 1*(e||"").toString().replace("px","")||0},n.prototype._getBoxStyles=function(e){var i=null,r=["width","height","paddingTop","paddingBottom","paddingLeft","paddingRight","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"],a={boxSizing:(i=window.getComputedStyle?window.getComputedStyle(e,null):{width:e.clientWidth,height:e.clientHeight}).boxSizing=="border-box"};i.MozBoxSizing&&(a.boxSizing=i.MozBoxSizing=="border-box");for(var s=0;s<r.length;s++)a[r[s]]=i[r[s]]?this._cleanElSize(i[r[s]]):0;var l={horPaddings:a.paddingLeft+a.paddingRight+a.borderLeftWidth+a.borderRightWidth,vertPaddings:a.paddingTop+a.paddingBottom+a.borderTopWidth+a.borderBottomWidth,borderBox:a.boxSizing,innerWidth:a.width,innerHeight:a.height,outerWidth:a.width,outerHeight:a.height};return l.borderBox?(l.innerWidth-=l.horPaddings,l.innerHeight-=l.vertPaddings):(l.outerWidth+=l.horPaddings,l.outerHeight+=l.vertPaddings),l},n.prototype._getAutosizeMode=function(e){var i={x:!1,y:!1};return e==="xy"?i.x=i.y=!0:e==="y"||e===!0?i.y=!0:e==="x"&&(i.x=!0),i},n.prototype.autosize=function(e){var i=this._getAutosizeMode(e),r=this._getBoxStyles(this.$container),a=this.getContentSize(e),s=this.$container;i.x&&(r.borderBox&&(a.width+=r.horPaddings),s.style.width=a.width+"px"),i.y&&(r.borderBox&&(a.height+=r.vertPaddings),s.style.height=a.height+"px")},n.prototype.getSize=function(){this._sizes=[];for(var e=0,i=0,r=1e11,a=0,s=1e11,l=0,c=0;c<this.$cells.length;c++){var u=this._sizes[c]=this.$cells[c].getSize();this.$cells[c].$config.hidden||(this._xLayout?(!u.width&&u.minWidth?e+=u.minWidth:e+=u.width,r+=u.maxWidth,i+=u.minWidth,a=Math.max(a,u.height),s=Math.min(s,u.maxHeight),l=Math.max(l,u.minHeight)):(!u.height&&u.minHeight?a+=u.minHeight:a+=u.height,s+=u.maxHeight,l+=u.minHeight,e=Math.max(e,u.width),r=Math.min(r,u.maxWidth),i=Math.max(i,u.minWidth)))}var h=t.prototype.getSize.call(this);return h.maxWidth>=1e5&&(h.maxWidth=r),h.maxHeight>=1e5&&(h.maxHeight=s),h.minWidth=h.minWidth!=h.minWidth?0:h.minWidth,h.minHeight=h.minHeight!=h.minHeight?0:h.minHeight,this._xLayout?(h.minWidth+=this.$config.margin*this.$cells.length||0,h.minWidth+=2*this.$config.padding||0,h.minHeight+=2*this.$config.padding||0):(h.minHeight+=this.$config.margin*this.$cells.length||0,h.minHeight+=2*this.$config.padding||0),h},n.prototype._calcFreeSpace=function(e,i,r){var a=r?i.minWidth:i.minHeight,s=i.maxWidth,l=e;return l?(l>s&&(l=s),l<a&&(l=a),this._free-=l):((l=Math.floor(this._free/this._gravity*i.gravity))>s&&(l=s,this._free-=l,this._gravity-=i.gravity),l<a&&(l=a,this._free-=l,this._gravity-=i.gravity)),l},n.prototype._calcSize=function(e,i,r){var a=e,s=r?i.minWidth:i.minHeight,l=r?i.maxWidth:i.maxHeight;return a||(a=Math.floor(this._free/this._gravity*i.gravity)),a>l&&(a=l),a<s&&(a=s),a},n.prototype._configureBorders=function(){this.$root&&this._setBorders([this._borders.left,this._borders.top,this._borders.right,this._borders.bottom],this);for(var e=this._xLayout?this._borders.right:this._borders.bottom,i=this.$cells,r=i.length-1,a=r;a>=0;a--)if(!i[a].$config.hidden){r=a;break}for(a=0;a<i.length;a++)if(!i[a].$config.hidden){var s=a>=r,l="";!s&&i[a+1]&&i[a+1].$config.view=="scrollbar"&&(this._xLayout?s=!0:l="gantt_layout_cell_border_transparent"),this._setBorders(s?[]:[e,l],i[a])}},n.prototype._updateCellVisibility=function(){for(var e=this._visibleCells||{},i=!this._visibleCells,r={},a=null,s=[],l=0;l<this._sizes.length;l++)(a=this.$cells[l]).$config.hide_empty&&s.push(a),!i&&a.$config.hidden&&e[a.$id]?a._hide(!0):a.$config.hidden||e[a.$id]||a._hide(!1),a.$config.hidden||(r[a.$id]=!0);for(this._visibleCells=r,l=0;l<s.length;l++){var c=(a=s[l]).$cells,u=!0;c.forEach(function(h){h.$config.hidden||h.$config.resizer||(u=!1)}),a.$config.hidden=u}},n.prototype.setSize=function(e,i){this._configureBorders(),t.prototype.setSize.call(this,e,i),i=this.$lastSize.contentY,e=this.$lastSize.contentX;var r,a,s=this.$config.padding||0;this.$view.style.padding=s+"px",this._gravity=0,this._free=this._xLayout?e:i,this._free-=2*s,this._updateCellVisibility();for(var l=0;l<this._sizes.length;l++)if(!(r=this.$cells[l]).$config.hidden){var c=this.$config.margin||0;r.$name!="resizer"||c||(c=-1);var u=r.$view,h=this._xLayout?"marginRight":"marginBottom";l!==this.$cells.length-1&&(u.style[h]=c+"px",this._free-=c),a=this._sizes[l],this._xLayout?a.width||(this._gravity+=a.gravity):a.height||(this._gravity+=a.gravity)}for(l=0;l<this._sizes.length;l++)if(!(r=this.$cells[l]).$config.hidden){var _=(a=this._sizes[l]).width,g=a.height;this._xLayout?this._calcFreeSpace(_,a,!0):this._calcFreeSpace(g,a,!1)}for(l=0;l<this.$cells.length;l++)if(!(r=this.$cells[l]).$config.hidden){a=this._sizes[l];var m=void 0,v=void 0;this._xLayout?(m=this._calcSize(a.width,a,!0),v=i-2*s):(m=e-2*s,v=this._calcSize(a.height,a,!1)),r.setSize(m,v)}},n}(ki),Mk=function(t){function n(e,i,r){for(var a=t.apply(this,arguments)||this,s=0;s<a.$cells.length;s++)a.$cells[s].$config.hidden=s!==0;return a.$cell=a.$cells[0],a.$name="viewLayout",a}return Dt(n,t),n.prototype.cell=function(e){var i=t.prototype.cell.call(this,e);return i.$view||this.$fill(null,this),i},n.prototype.moveView=function(e){var i=this.$view;this.$cell&&(this.$cell.$config.hidden=!0,i.removeChild(this.$cell.$view)),this.$cell=e,i.appendChild(e.$view)},n.prototype.setSize=function(e,i){ki.prototype.setSize.call(this,e,i)},n.prototype.setContentSize=function(){var e=this.$lastSize;this.$cell.setSize(e.contentX,e.contentY)},n.prototype.getSize=function(){var e=t.prototype.getSize.call(this);if(this.$cell){var i=this.$cell.getSize();if(this.$config.byMaxSize)for(var r=0;r<this.$cells.length;r++){var a=this.$cells[r].getSize();for(var s in i)i[s]=Math.max(i[s],a[s])}for(var l in e)e[l]=e[l]||i[l];e.gravity=Math.max(e.gravity,i.gravity)}return e},n}(Vc),Lk=function(t){function n(e,i,r){var a=t.apply(this,arguments)||this;if(i.view){i.id&&(this.$id=Me());var s=qt(i);if(delete s.config,delete s.templates,this.$content=this.$factory.createView(i.view,this,s,this),!this.$content)return!1}return a.$name="viewCell",a}return Dt(n,t),n.prototype.destructor=function(){this.clear(),t.prototype.destructor.call(this)},n.prototype.clear=function(){if(this.$initialized=!1,this.$content){var e=this.$content.unload||this.$content.destructor;e&&e.call(this.$content)}t.prototype.clear.call(this)},n.prototype.scrollTo=function(e,i){this.$content&&this.$content.scrollTo?this.$content.scrollTo(e,i):t.prototype.scrollTo.call(this,e,i)},n.prototype._setContentSize=function(e,i){var r=this._getBorderSizes();if(typeof e=="number"){var a=e+r.horizontal;this.$config.width=a}if(typeof i=="number"){var s=i+r.vertical;this.$config.height=s}},n.prototype.setSize=function(e,i){if(t.prototype.setSize.call(this,e,i),!this.$preResize&&this.$content&&!this.$initialized){this.$initialized=!0;var r=this.$view.childNodes[0],a=this.$view.childNodes[1];a||(a=r),this.$content.init(a)}},n.prototype.setContentSize=function(){!this.$preResize&&this.$content&&this.$initialized&&this.$content.setSize(this.$lastSize.contentX,this.$lastSize.contentY)},n.prototype.getContentSize=function(){var e=t.prototype.getContentSize.call(this);if(this.$content&&this.$initialized){var i=this.$content.getSize();e.width=i.contentX===void 0?i.width:i.contentX,e.height=i.contentY===void 0?i.height:i.contentY}var r=this._getBorderSizes();return e.width+=r.horizontal,e.height+=r.vertical,e},n}(ki),Nk=function(t){var n=["altKey","shiftKey","metaKey"];function e(r,a,s,l){var c=t.apply(this,arguments)||this;this.$config=ut(a,{scroll:"x"}),c._scrollHorizontalHandler=_t(c._scrollHorizontalHandler,c),c._scrollVerticalHandler=_t(c._scrollVerticalHandler,c),c._outerScrollVerticalHandler=_t(c._outerScrollVerticalHandler,c),c._outerScrollHorizontalHandler=_t(c._outerScrollHorizontalHandler,c),c._mouseWheelHandler=_t(c._mouseWheelHandler,c),this.$config.hidden=!0;var u=l.config.scroll_size;return l.env.isIE&&(u+=1),this._isHorizontal()?(c.$config.height=u,c.$parent.$config.height=u):(c.$config.width=u,c.$parent.$config.width=u),this.$config.scrollPosition=0,c.$name="scroller",c}function i(r,a){if(a.push(r),r.$cells)for(var s=0;s<r.$cells.length;s++)i(r.$cells[s],a)}return Dt(e,t),e.prototype.init=function(r){r.innerHTML=this.$toHTML(),this.$view=r.firstChild,this.$view||this.init(),this._isVertical()?this._initVertical():this._initHorizontal(),this._initMouseWheel(),this._initLinkedViews()},e.prototype.$toHTML=function(){return"<div class='gantt_layout_cell "+(this._isHorizontal()?"gantt_hor_scroll":"gantt_ver_scroll")+"'><div style='"+(this._isHorizontal()?"width:2000px":"height:2000px")+"'></div></div>"},e.prototype._getRootParent=function(){for(var r=this.$parent;r&&r.$parent;)r=r.$parent;if(r)return r},e.prototype._eachView=function(){var r=[];return i(this._getRootParent(),r),r},e.prototype._getLinkedViews=function(){for(var r=this._eachView(),a=[],s=0;s<r.length;s++)r[s].$config&&(this._isVertical()&&r[s].$config.scrollY==this.$id||this._isHorizontal()&&r[s].$config.scrollX==this.$id)&&a.push(r[s]);return a},e.prototype._initHorizontal=function(){this.$scroll_hor=this.$view,this.$domEvents.attach(this.$view,"scroll",this._scrollHorizontalHandler)},e.prototype._initLinkedViews=function(){for(var r=this._getLinkedViews(),a=this._isVertical()?"gantt_layout_outer_scroll gantt_layout_outer_scroll_vertical":"gantt_layout_outer_scroll gantt_layout_outer_scroll_horizontal",s=0;s<r.length;s++)Fn(r[s].$view||r[s].getNode(),a)},e.prototype._initVertical=function(){this.$scroll_ver=this.$view,this.$domEvents.attach(this.$view,"scroll",this._scrollVerticalHandler)},e.prototype._updateLinkedViews=function(){},e.prototype._initMouseWheel=function(){ln.isFF?this.$domEvents.attach(this._getRootParent().$view,"wheel",this._mouseWheelHandler,{passive:!1}):this.$domEvents.attach(this._getRootParent().$view,"mousewheel",this._mouseWheelHandler,{passive:!1})},e.prototype.scrollHorizontally=function(r){if(!this._scrolling){this._scrolling=!0,this.$scroll_hor.scrollLeft=r,this.$config.codeScrollLeft=r,r=this.$scroll_hor.scrollLeft;for(var a=this._getLinkedViews(),s=0;s<a.length;s++)a[s].scrollTo&&a[s].scrollTo(r,void 0);var l=this.$config.scrollPosition;this.$config.scrollPosition=r,this.callEvent("onScroll",[l,r,this.$config.scroll]),this._scrolling=!1}},e.prototype.scrollVertically=function(r){if(!this._scrolling){this._scrolling=!0,this.$scroll_ver.scrollTop=r,r=this.$scroll_ver.scrollTop;for(var a=this._getLinkedViews(),s=0;s<a.length;s++)a[s].scrollTo&&a[s].scrollTo(void 0,r);var l=this.$config.scrollPosition;this.$config.scrollPosition=r,this.callEvent("onScroll",[l,r,this.$config.scroll]),this._scrolling=!1}},e.prototype._isVertical=function(){return this.$config.scroll=="y"},e.prototype._isHorizontal=function(){return this.$config.scroll=="x"},e.prototype._scrollHorizontalHandler=function(r){if(!this._isVertical()&&!this._scrolling){if(new Date-(this._wheel_time||0)<100)return!0;var a=this.$scroll_hor.scrollLeft;this.scrollHorizontally(a),this._oldLeft=this.$scroll_hor.scrollLeft}},e.prototype._outerScrollHorizontalHandler=function(r){this._isVertical()},e.prototype.show=function(){this.$parent.show()},e.prototype.hide=function(){this.$parent.hide()},e.prototype._getScrollSize=function(){for(var r,a=0,s=0,l=this._isHorizontal(),c=this._getLinkedViews(),u=l?"scrollWidth":"scrollHeight",h=l?"contentX":"contentY",_=l?"x":"y",g=this._getScrollOffset(),m=0;m<c.length;m++)if((r=c[m])&&r.$content&&r.$content.getSize&&!r.$config.hidden){var v,$=r.$content.getSize();if(v=$.hasOwnProperty(u)?$[u]:$[h],g)$[h]>$[_]&&$[h]>a&&v>$[_]-g+2&&(a=v+(l?0:2),s=$[_]);else{var x=Math.max($[h]-v,0);(v+=x)>Math.max($[_]-x,0)&&v>a&&(a=v,s=$[_])}}return{outerScroll:s,innerScroll:a}},e.prototype.scroll=function(r){this._isHorizontal()?this.scrollHorizontally(r):this.scrollVertically(r)},e.prototype.getScrollState=function(){return{visible:this.isVisible(),direction:this.$config.scroll,size:this.$config.outerSize,scrollSize:this.$config.scrollSize||0,position:this.$config.scrollPosition||0}},e.prototype.setSize=function(r,a){t.prototype.setSize.apply(this,arguments);var s=this._getScrollSize(),l=(this._isVertical()?a:r)-this._getScrollOffset()+(this._isHorizontal()?1:0);s.innerScroll&&l>s.outerScroll&&(s.innerScroll+=l-s.outerScroll),this.$config.scrollSize=s.innerScroll,this.$config.width=r,this.$config.height=a,this._setScrollSize(s.innerScroll)},e.prototype.isVisible=function(){return!(!this.$parent||!this.$parent.$view.parentNode)},e.prototype.shouldShow=function(){var r=this._getScrollSize();return!(!r.innerScroll&&this.$parent&&this.$parent.$view.parentNode)&&!(!r.innerScroll||this.$parent&&this.$parent.$view.parentNode)},e.prototype.shouldHide=function(){return!(this._getScrollSize().innerScroll||!this.$parent||!this.$parent.$view.parentNode)},e.prototype.toggleVisibility=function(){this.shouldHide()?this.hide():this.shouldShow()&&this.show()},e.prototype._getScaleOffset=function(r){var a=0;return!r||r.$config.view!="timeline"&&r.$config.view!="grid"||(a=r.$content.$getConfig().scale_height),a},e.prototype._getScrollOffset=function(){var r=0;if(this._isVertical()){var a=this.$parent.$parent;r=Math.max(this._getScaleOffset(a.getPrevSibling(this.$parent.$id)),this._getScaleOffset(a.getNextSibling(this.$parent.$id)))}else for(var s=this._getLinkedViews(),l=0;l<s.length;l++){var c=s[l].$parent.$cells,u=c[c.length-1];if(u&&u.$config.view=="scrollbar"&&u.$config.hidden===!1){r=u.$config.width;break}}return r||0},e.prototype._setScrollSize=function(r){var a=this._isHorizontal()?"width":"height",s=this._isHorizontal()?this.$scroll_hor:this.$scroll_ver,l=this._getScrollOffset(),c=s.firstChild;l?this._isVertical()?(this.$config.outerSize=this.$config.height-l+3,s.style.height=this.$config.outerSize+"px",s.style.top=l-1+"px",Fn(s,this.$parent._borders.top),Fn(s.parentNode,"gantt_task_vscroll")):(this.$config.outerSize=this.$config.width-l+1,s.style.width=this.$config.outerSize+"px"):(s.style.top="auto",vr(s,this.$parent._borders.top),vr(s.parentNode,"gantt_task_vscroll"),this.$config.outerSize=this.$config.height),c.style[a]=r+"px"},e.prototype._scrollVerticalHandler=function(r){if(!this._scrollHorizontalHandler()&&!this._scrolling){var a=this.$scroll_ver.scrollTop;a!=this._oldTop&&(this.scrollVertically(a),this._oldTop=this.$scroll_ver.scrollTop)}},e.prototype._outerScrollVerticalHandler=function(r){this._scrollHorizontalHandler()},e.prototype._checkWheelTarget=function(r){for(var a=this._getLinkedViews().concat(this),s=0;s<a.length;s++)if(Qt(r,a[s].$view))return!0;return!1},e.prototype._mouseWheelHandler=function(r){var a=r.target||r.srcElement;if(this._checkWheelTarget(a)){this._wheel_time=new Date;var s={},l={x:1,y:1},c=this.$gantt.config.wheel_scroll_sensitivity;typeof c=="number"&&c?l={x:c,y:c}:{}.toString.apply(c)=="[object Object]"&&(l={x:c.x,y:c.y});var u=ln.isFF,h=u?r.deltaX:r.wheelDeltaX,_=u?r.deltaY:r.wheelDelta,g=-20;u&&(g=r.deltaMode!==0?-40:-10);var m=u?h*g*l.x:2*h*l.x,v=u?_*g*l.y:_*l.y,$=this.$gantt.config.horizontal_scroll_key;if($!==!1&&n.indexOf($)>=0&&(!r[$]||r.deltaX||r.wheelDeltaX||(m=2*v,v=0)),m&&Math.abs(m)>Math.abs(v)){if(this._isVertical())return;if(s.x||!this.$scroll_hor||!this.$scroll_hor.offsetWidth)return!0;var x=m/-40,S=this._oldLeft,p=S+30*x;if(this.scrollHorizontally(p),this.$scroll_hor.scrollLeft=p,S==this.$scroll_hor.scrollLeft)return!0;this._oldLeft=this.$scroll_hor.scrollLeft}else{if(this._isHorizontal())return;if(s.y||!this.$scroll_ver||!this.$scroll_ver.offsetHeight)return!0;x=v/-40,v===void 0&&(x=r.detail);var b=this._oldTop,k=this.$scroll_ver.scrollTop+30*x;if(this.scrollVertically(k),this.$scroll_ver.scrollTop=k,b==this.$scroll_ver.scrollTop)return!0;this._oldTop=this.$scroll_ver.scrollTop}return r.preventDefault&&r.preventDefault(),r.cancelBubble=!0,!1}},e}(ki);function jc(t){var n={},e={},i=null,r=-1,a=null,s=function(l){var c=-1,u=-1;return{resetCache:function(){c=-1,u=-1},_getRowHeight:function(){return c===-1&&(c=l.$getConfig().row_height),c},_refreshState:function(){this.resetCache(),u=!0;var h=l.$config.rowStore;if(h)for(var _=this._getRowHeight(),g=0;g<h.fullOrder.length;g++){var m=h.getItem(h.fullOrder[g]);if(m&&m.row_height&&m.row_height!==_){u=!1;break}}},canUseSimpleCalculation:function(){return u===-1&&this._refreshState(),u},getRowTop:function(h){return l.$config.rowStore?h*this._getRowHeight():0},getItemHeight:function(h){return this._getRowHeight()},getTotalHeight:function(){return l.$config.rowStore?l.$config.rowStore.countVisible()*this._getRowHeight():0},getItemIndexByTopPosition:function(h){return l.$config.rowStore?Math.floor(h/this._getRowHeight()):0}}}(t);return{_resetTopPositionHeight:function(){n={},e={},s.resetCache()},_resetHeight:function(){var l=this.$config.rowStore,c=this.getCacheStateTotalHeight(l);a?this.shouldClearHeightCache(a,c)&&(a=c,i=null):a=c,r=-1,s.resetCache()},getRowTop:function(l){if(s.canUseSimpleCalculation())return s.getRowTop(l);var c=this.$config.rowStore;if(!c)return 0;if(e[l]!==void 0)return e[l];for(var u=c.getIndexRange(),h=0,_=0,g=0;g<u.length;g++)e[g]=h,h+=this.getItemHeight(u[g].id),g<l&&(_=h);return _},getItemTop:function(l){if(this.$config.rowStore){if(n[l]!==void 0)return n[l];var c=this.$config.rowStore;if(!c)return 0;var u=c.getIndexById(l);if(u===-1&&c.getParent&&c.exists(l)){var h=c.getParent(l);if(c.exists(h)){var _=c.getItem(h);if(this.$gantt.isSplitTask(_))return this.getItemTop(h)}}return n[l]=this.getRowTop(u),n[l]}return 0},getItemHeight:function(l){if(s.canUseSimpleCalculation())return s.getItemHeight(l);if(!i&&this.$config.rowStore&&this._fillHeightCache(this.$config.rowStore),i[l]!==void 0)return i[l];var c=this.$getConfig().row_height;if(this.$config.rowStore){var u=this.$config.rowStore;if(!u)return c;var h=u.getItem(l);return i[l]=h&&h.row_height||c}return c},_fillHeightCache:function(l){if(l){i={};var c=this.$getConfig().row_height;l.eachItem(function(u){return i[u.id]=u&&u.row_height||c})}},getCacheStateTotalHeight:function(l){var c=this.$getConfig().row_height,u={},h=[],_=0;return l&&l.eachItem(function(g){h.push(g),u[g.id]=g.row_height,_+=g.row_height||c}),{globalHeight:c,items:h,count:h.length,sumHeight:_}},shouldClearHeightCache:function(l,c){if(l.count!=c.count||l.globalHeight!=c.globalHeight||l.sumHeight!=c.sumHeight)return!0;for(var u in l.items){var h=c.items[u];if(h!==void 0&&h!=l.items[u])return!0}return!1},getTotalHeight:function(){if(s.canUseSimpleCalculation())return s.getTotalHeight();if(r!=-1)return r;if(this.$config.rowStore){var l=this.$config.rowStore;this._fillHeightCache(l);var c=this.getItemHeight.bind(this),u=l.getVisibleItems(),h=0;return u.forEach(function(_){h+=c(_.id)}),r=h,h}return 0},getItemIndexByTopPosition:function(l){if(this.$config.rowStore){if(s.canUseSimpleCalculation())return s.getItemIndexByTopPosition(l);for(var c=this.$config.rowStore,u=0;u<c.countVisible();u++){var h=this.getRowTop(u),_=this.getRowTop(u+1);if(!_){var g=c.getIdByIndex(u);_=h+this.getItemHeight(g)}if(l>=h&&l<_)return u}return c.countVisible()+2}return 0}}}const Rk=function(){return{render:function(){},destroy:function(){}}};var pr=function(t,n,e,i){this.$config=ut({},n||{}),this.$scaleHelper=new as(i),this.$gantt=i,this._posFromDateCache={},this._timelineDragScroll=null,ut(this,jc(this)),Le(this)};pr.prototype={init:function(t){t.innerHTML+="<div class='gantt_task' style='width:inherit;height:inherit;'></div>",this.$task=t.childNodes[0],this.$task.innerHTML="<div class='gantt_task_scale'></div><div class='gantt_data_area'></div>",this.$task_scale=this.$task.childNodes[0],this.$task_data=this.$task.childNodes[1],this.$task_data.innerHTML="<div class='gantt_task_bg'></div><div class='gantt_task_baselines'></div><div class='gantt_links_area'></div><div class='gantt_bars_area'></div><div class='gantt_task_constraints'></div><div class='gantt_task_deadlines'></div>",this.$task_bg=this.$task_data.childNodes[0],this.$task_baselines=this.$task_data.childNodes[1],this.$task_links=this.$task_data.childNodes[2],this.$task_bars=this.$task_data.childNodes[3],this.$task_constraints=this.$task_data.childNodes[4],this.$task_deadlines=this.$task_data.childNodes[5],this._tasks={col_width:0,width:[],full_width:0,trace_x:[],rendered:{}};var n=this.$getConfig(),e=n[this.$config.bind+"_attribute"],i=n[this.$config.bindLinks+"_attribute"];!e&&this.$config.bind&&(e="data-"+this.$config.bind+"-id"),!i&&this.$config.bindLinks&&(i="data-"+this.$config.bindLinks+"-id"),this.$config.item_attribute=e||null,this.$config.link_attribute=i||null;var r=this._createLayerConfig();this.$config.layers||(this.$config.layers=r.tasks),this.$config.linkLayers||(this.$config.linkLayers=r.links),this._attachLayers(this.$gantt),this.callEvent("onReady",[]),this.$gantt.ext.dragTimeline&&(this._timelineDragScroll=this.$gantt.ext.dragTimeline.create(),this._timelineDragScroll.attach(this))},setSize:function(t,n){var e=this.$getConfig();if(1*t===t&&(this.$config.width=t),1*n===n){this.$config.height=n;var i=Math.max(this.$config.height-e.scale_height);this.$task_data.style.height=i+"px"}this.refresh(),this.$task_bg.style.backgroundImage="",e.smart_rendering&&this.$config.rowStore?this.$task_bg.style.height=this.getTotalHeight()+"px":this.$task_bg.style.height="";for(var r=this._tasks,a=this.$task_data.childNodes,s=0,l=a.length;s<l;s++){var c=a[s];c.hasAttribute("data-layer")&&c.style&&(c.style.width=r.full_width+"px")}},isVisible:function(){return this.$parent&&this.$parent.$config?!this.$parent.$config.hidden:this.$task.offsetWidth},getSize:function(){var t=this.$getConfig(),n=this.$config.rowStore?this.getTotalHeight():0,e=this.isVisible()?this._tasks.full_width:0;return{x:this.isVisible()?this.$config.width:0,y:this.isVisible()?this.$config.height:0,contentX:this.isVisible()?e:0,contentY:this.isVisible()?t.scale_height+n:0,scrollHeight:this.isVisible()?n:0,scrollWidth:this.isVisible()?e:0}},scrollTo:function(t,n){if(this.isVisible()){var e=!1;this.$config.scrollTop=this.$config.scrollTop||0,this.$config.scrollLeft=this.$config.scrollLeft||0,1*n===n&&(this.$config.scrollTop=n,this.$task_data.scrollTop=this.$config.scrollTop,e=!0),1*t===t&&(this.$task.scrollLeft=t,this.$config.scrollLeft=this.$task.scrollLeft,this._refreshScales(),e=!0),e&&this.callEvent("onScroll",[this.$config.scrollLeft,this.$config.scrollTop])}},_refreshScales:function(){if(this.isVisible()&&this.$getConfig().smart_scales){var t=this.getViewPort(),n=this._scales;this.$task_scale.innerHTML=this._getScaleChunkHtml(n,t.x,t.x_end)}},getViewPort:function(){var t=this.$config.scrollLeft||0,n=this.$config.scrollTop||0,e=this.$config.height||0,i=this.$config.width||0;return{y:n,y_end:n+e,x:t,x_end:t+i,height:e,width:i}},_createLayerConfig:function(){var t=this,n=function(){return t.isVisible()};this.$gantt;var e=[{expose:!0,renderer:this.$gantt.$ui.layers.taskBar(),container:this.$task_bars,filter:[n,function(i,r){return!r.hide_bar}]}];return e.push({renderer:this.$gantt.$ui.layers.taskBg(),container:this.$task_bg,filter:[n]}),{tasks:e,links:[{expose:!0,renderer:this.$gantt.$ui.layers.link(),container:this.$task_links,filter:[n]}]}},_attachLayers:function(t){this._taskLayers=[],this._linkLayers=[];var n=this,e=this.$gantt.$services.getService("layers");if(this.$config.bind){this._bindStore();var i=e.getDataRender(this.$config.bind);i||(i=e.createDataRender({name:this.$config.bind,defaultContainer:function(){return n.$task_data}})),i.container=function(){return n.$task_data};for(var r=this.$config.layers,a=0;r&&a<r.length;a++){typeof(u=r[a])=="string"&&(u=this.$gantt.$ui.layers[u]()),(typeof u=="function"||u&&u.render&&u.update)&&(u={renderer:u}),u.view=this;var s=i.addLayer(u);this._taskLayers.push(s),u.expose&&(this._taskRenderer=i.getLayer(s))}this._initStaticBackgroundRender()}if(this.$config.bindLinks){n.$config.linkStore=n.$gantt.getDatastore(n.$config.bindLinks);var l=e.getDataRender(this.$config.bindLinks);l||(l=e.createDataRender({name:this.$config.bindLinks,defaultContainer:function(){return n.$task_data}}));var c=this.$config.linkLayers;for(a=0;c&&a<c.length;a++){var u;typeof u=="string"&&(u=this.$gantt.$ui.layers[u]()),(u=c[a]).view=this;var h=l.addLayer(u);this._taskLayers.push(h),c[a].expose&&(this._linkRenderer=l.getLayer(h))}}},_initStaticBackgroundRender:function(){var t=this,n=Rk(),e=t.$config.rowStore;e&&(this._staticBgHandler=e.attachEvent("onStoreUpdated",function(i,r,a){if(i===null&&t.isVisible()){var s=t.$getConfig();if(s.static_background||s.timeline_placeholder){var l=t.$gantt.getDatastore(t.$config.bind),c=t.$task_bg_static;if(c||((c=document.createElement("div")).className="gantt_task_bg",t.$task_bg_static=c,t.$task_bg.nextSibling?t.$task_data.insertBefore(c,t.$task_bg.nextSibling):t.$task_data.appendChild(c)),l){var u=t.getTotalHeight();s.timeline_placeholder&&(u=s.timeline_placeholder.height||t.$task_data.offsetHeight||99999),n.render(c,s,t.getScale(),u,t.getItemHeight(r?r.id:null))}}else s.static_background&&t.$task_bg_static&&t.$task_bg_static.parentNode&&t.$task_bg_static.parentNode.removeChild(t.$task_bg_static)}}),this.attachEvent("onDestroy",function(){}),this._initStaticBackgroundRender=function(){})},_clearLayers:function(t){var n=this.$gantt.$services.getService("layers"),e=n.getDataRender(this.$config.bind),i=n.getDataRender(this.$config.bindLinks);if(this._taskLayers)for(var r=0;r<this._taskLayers.length;r++)e.removeLayer(this._taskLayers[r]);if(this._linkLayers)for(r=0;r<this._linkLayers.length;r++)i.removeLayer(this._linkLayers[r]);this._linkLayers=[],this._taskLayers=[]},_render_tasks_scales:function(){var t=this.$getConfig(),n="",e=0,i=0,r=this.$gantt.getState();if(this.isVisible()){var a=this.$scaleHelper,s=this._getScales();i=t.scale_height;var l=this.$config.width;t.autosize!="x"&&t.autosize!="xy"||(l=Math.max(t.autosize_min_width,0));var c=a.prepareConfigs(s,t.min_column_width,l,i-1,r.min_date,r.max_date,t.rtl),u=this._tasks=c[c.length-1];this._scales=c,this._posFromDateCache={},n=this._getScaleChunkHtml(c,0,this.$config.width),e=u.full_width+"px",i+="px"}this.$task_scale.style.height=i,this.$task_data.style.width=this.$task_scale.style.width=e,this.$task_scale.innerHTML=n},_getScaleChunkHtml:function(t,n,e){for(var i=[],r=this.$gantt.templates.scale_row_class,a=0;a<t.length;a++){var s="gantt_scale_line",l=r(t[a]);l&&(s+=" "+l),i.push('<div class="'+s+'" style="height:'+t[a].height+"px;position:relative;line-height:"+t[a].height+'px">'+this._prepareScaleHtml(t[a],n,e,a)+"</div>")}return i.join("")},_prepareScaleHtml:function(t,n,e,i){var r=this.$getConfig(),a=this.$gantt.templates,s=[],l=null,c=null,u=t.format||t.template||t.date;typeof u=="string"&&(u=this.$gantt.date.date_to_str(u));var h=0,_=t.count;!r.smart_scales||isNaN(n)||isNaN(e)||(h=fi(t.left,n),_=fi(t.left,e)+1),c=t.css||function(){},!t.css&&r.inherit_scale_class&&(c=a.scale_cell_class);for(var g=h;g<_&&t.trace_x[g];g++){l=new Date(t.trace_x[g]);var m=u.call(this,l),v=t.width[g];t.height;var $=t.left[g],x="",S="",p="";if(v){x="width:"+v+"px;"+(r.smart_scales?"position:absolute;left:"+$+"px":"");const k=this.getViewPort(),w=(r.scales[i]||{}).sticky;let A="";const I=70;if(w!==!1&&v>I||w===!0){if($<k.x&&$+v/2-I/2<k.x)A=` style='position:absolute;left: ${k.x-$+10}px;' `;else if($+v/2+I/2>k.x_end&&v>I){let C=k.x_end-$-10,M="-100%";C<I&&(C=I,M=`-${C}px`),A=` style='position:absolute;left: ${C}px;transform: translate(${M},0);' `}}p="gantt_scale_cell"+(g==t.count-1?" gantt_last_cell":""),(S=c.call(this,l))&&(p+=" "+S);var b=`<div class='${p}' ${this.$gantt._waiAria.getTimelineCellAttr(m)} style='${x}'><span ${A}>${m}</span></div>`;s.push(b)}}return s.join("")},dateFromPos:function(t){var n=this._tasks;if(t<0||t>n.full_width||!n.full_width)return null;var e=fi(this._tasks.left,t),i=this._tasks.left[e],r=n.width[e]||n.col_width,a=0;r&&(a=(t-i)/r,n.rtl&&(a=1-a));var s=0;return a&&(s=this._getColumnDuration(n,n.trace_x[e])),new Date(n.trace_x[e].valueOf()+Math.round(a*s))},posFromDate:function(t){if(!this.isVisible()||!t)return 0;var n=String(t.valueOf());if(this._posFromDateCache[n]!==void 0)return this._posFromDateCache[n];var e=this.columnIndexByDate(t);this.$gantt.assert(e>=0,"Invalid day index");var i=Math.floor(e),r=e%1,a=this._tasks.left[Math.min(i,this._tasks.width.length-1)];i==this._tasks.width.length&&(a+=this._tasks.width[this._tasks.width.length-1]),r&&(i<this._tasks.width.length?a+=this._tasks.width[i]*(r%1):a+=1);var s=Math.round(a);return this._posFromDateCache[n]=s,Math.round(s)},_getNextVisibleColumn:function(t,n,e){for(var i=+n[t],r=t;e[i];)i=+n[++r];return r},_getPrevVisibleColumn:function(t,n,e){for(var i=+n[t],r=t;e[i];)i=+n[--r];return r},_getClosestVisibleColumn:function(t,n,e){var i=this._getNextVisibleColumn(t,n,e);return n[i]||(i=this._getPrevVisibleColumn(t,n,e)),i},columnIndexByDate:function(t){var n=new Date(t).valueOf(),e=this._tasks.trace_x_ascending,i=this._tasks.ignore_x,r=this.$gantt.getState();if(n<=r.min_date)return this._tasks.rtl?e.length:0;if(n>=r.max_date)return this._tasks.rtl?0:e.length;var a=fi(e,n),s=this._getClosestVisibleColumn(a,e,i),l=e[s],c=this._tasks.trace_index_transition;if(!l)return c?c[0]:0;var u=(t-e[s])/this._getColumnDuration(this._tasks,e[s]);return c?c[s]+(1-u):s+u},getItemPosition:function(t,n,e){var i,r,a;let s=n||t.start_date||t.$auto_start_date,l=e||t.end_date||t.$auto_end_date;return this._tasks.rtl?(r=this.posFromDate(s),i=this.posFromDate(l)):(i=this.posFromDate(s),r=this.posFromDate(l)),a=Math.max(r-i,0),{left:i,top:this.getItemTop(t.id),height:this.getBarHeight(t.id),width:a,rowHeight:this.getItemHeight(t.id)}},getBarHeight:function(t,n){var e=this.$getConfig(),i=this.$config.rowStore.getItem(t),r=i.task_height||i.bar_height||e.bar_height||e.task_height,a=this.getItemHeight(t);return r=="full"&&(r=a-(e.bar_height_padding||3)),r=Math.min(r,a),n&&(r=Math.round(r/Math.sqrt(2))),Math.max(r,0)},getScale:function(){return this._tasks},_getScales:function(){var t=this.$getConfig(),n=this.$scaleHelper,e=[n.primaryScale(t)].concat(n.getSubScales(t));return n.sortScales(e),e},_getColumnDuration:function(t,n){return this.$gantt.date.add(n,t.step,t.unit)-n},_bindStore:function(){if(this.$config.bind){var t=this.$gantt.getDatastore(this.$config.bind);if(this.$config.rowStore=t,t&&!t._timelineCacheAttached){var n=this;t._timelineCacheAttached=t.attachEvent("onBeforeFilter",function(){n._resetTopPositionHeight()})}}},_unbindStore:function(){if(this.$config.bind){var t=this.$gantt.getDatastore(this.$config.bind);t&&t._timelineCacheAttached&&(t.detachEvent(t._timelineCacheAttached),t._timelineCacheAttached=!1)}},refresh:function(){this._bindStore(),this.$config.bindLinks&&(this.$config.linkStore=this.$gantt.getDatastore(this.$config.bindLinks)),this._resetTopPositionHeight(),this._resetHeight(),this._initStaticBackgroundRender(),this._render_tasks_scales()},destructor:function(){var t=this.$gantt;this._clearLayers(t),this._unbindStore(),this.$task=null,this.$task_scale=null,this.$task_data=null,this.$task_bg=null,this.$task_links=null,this.$task_bars=null,this.$gantt=null,this.$config.rowStore&&(this.$config.rowStore.detachEvent(this._staticBgHandler),this.$config.rowStore=null),this.$config.linkStore&&(this.$config.linkStore=null),this._timelineDragScroll&&(this._timelineDragScroll.destructor(),this._timelineDragScroll=null),this.callEvent("onDestroy",[]),this.detachAllEvents()}};class Pk{constructor(n){this._scrollOrder=0;const{gantt:e,grid:i,dnd:r,getCurrentX:a}=n;this.$gantt=e,this.$grid=i,this._dnd=r,this.getCurrentX=a,this._scrollView=this.$gantt.$ui.getView(this.$grid.$config.scrollX),this.attachEvents()}attachEvents(){this.isScrollable()&&(this._dnd.attachEvent("onDragMove",(n,e)=>{const i=this.$grid.$grid.getBoundingClientRect(),r=i.right,a=i.left,s=this.getCurrentX(e.clientX);return s>=r-20&&(this.autoscrollRight(),this.autoscrollStart()),s<=a+20&&(this.autoscrollLeft(),this.autoscrollStart()),s<r-20&&s>a+20&&this.autoscrollStop(),!0}),this._dnd.attachEvent("onDragEnd",()=>{this.autoscrollStop()}))}autoscrollStart(){if(this._scrollOrder===0)return;const n=10*this._scrollOrder,e=this._scrollView.getScrollState();this._scrollView.scrollTo(e.position+n),setTimeout(()=>{this.autoscrollStart()},50)}autoscrollRight(){this._scrollOrder=1}autoscrollLeft(){this._scrollOrder=-1}autoscrollStop(){this._scrollOrder=0}getCorrection(){return this.isScrollable()?this._scrollView.getScrollState().position:0}isScrollable(){return!!this.$grid.$config.scrollable}}const mc="data-column-id";class Ok{constructor(n,e){this._targetMarker=null,this.calculateCurrentPosition=i=>{const r=this.$grid.$grid.getBoundingClientRect(),a=r.right,s=r.left;let l=i;return l>a&&(l=a),l<s&&(l=s),l},this.$gantt=n,this.$grid=e}init(){const n=this.$gantt.$services.getService("dnd");this._dnd=new n(this.$grid.$grid_scale,{updates_per_second:60}),this._scrollableGrid=new Pk({gantt:this.$gantt,grid:this.$grid,dnd:this._dnd,getCurrentX:this.calculateCurrentPosition}),this.attachEvents()}attachEvents(){this._dnd.attachEvent("onBeforeDragStart",(n,e)=>{if(this._draggedCell=this.$gantt.utils.dom.closest(e.target,".gantt_grid_head_cell"),!this._draggedCell)return;const i=this.$grid.$getConfig().columns,r=this._draggedCell.getAttribute(mc);let a,s;return i.map(function(l,c){l.name===r&&(a=l,s=c)}),this.$grid.callEvent("onBeforeColumnDragStart",[{draggedColumn:a,draggedIndex:s}])!==!1&&!(!this._draggedCell||!a)&&(this._gridConfig=this.$grid.$getConfig(),this._originAutoscroll=this.$gantt.config.autoscroll,this.$gantt.config.autoscroll=!1,!0)}),this._dnd.attachEvent("onAfterDragStart",(n,e)=>{this._draggedCell&&(this._dnd.config.column=this._draggedCell.getAttribute(mc),this._dnd.config.marker.innerHTML=this._draggedCell.outerHTML,this._dnd.config.marker.classList.add("gantt_column_drag_marker"),this._dnd.config.marker.style.height=this._gridConfig.scale_height+"px",this._dnd.config.marker.style.lineHeight=this._gridConfig.scale_height+"px",this._draggedCell.classList.add("gantt_grid_head_cell_dragged"))}),this._dnd.attachEvent("onDragMove",(n,e)=>{if(!this._draggedCell)return;this._dragX=e.clientX;const i=this.calculateCurrentPosition(e.clientX),r=this.findColumnsIndexes(),a=r.targetIndex,s=r.draggedIndex,l=this.$grid.$getConfig().columns,c=l[s],u=l[a];return this.$grid.callEvent("onColumnDragMove",[{draggedColumn:c,targetColumn:u,draggedIndex:s,targetIndex:a}])===!1?(this.cleanTargetMarker(),!1):(this.setMarkerPosition(i),this.drawTargetMarker(r),!0)}),this._dnd.attachEvent("onDragEnd",()=>{this._draggedCell&&(this.$gantt.config.autoscroll=this._originAutoscroll,this._draggedCell.classList.remove("gantt_grid_head_cell_dragged"),this.cleanTargetMarker(),this.reorderColumns())})}reorderColumns(){const{targetIndex:n,draggedIndex:e}=this.findColumnsIndexes(),i=this.$grid.$getConfig().columns,r=i[e],a=i[n];this.$grid.callEvent("onBeforeColumnReorder",[{draggedColumn:r,targetColumn:a,draggedIndex:e,targetIndex:n}])!==!1&&n!==e&&(i.splice(e,1),i.splice(n,0,r),this.$gantt.render(),this.$grid.callEvent("onAfterColumnReorder",[{draggedColumn:r,targetColumn:a,draggedIndex:e,targetIndex:n}]))}findColumnsIndexes(){const n=this._dnd.config.column,e=this.$grid.$getConfig().columns;let i,r,a,s;const l={startX:0,endX:0};let c,u=0,h=e.length-1,_=(v,$)=>v<=$,g=v=>++v;this.$gantt.config.rtl&&(u=e.length-1,h=0,_=(v,$)=>v>=$,g=v=>--v);const m=this._dragX-this.$grid.$grid.getBoundingClientRect().left+this._scrollableGrid.getCorrection();for(let v=u;_(v,h)&&(i===void 0||r===void 0);v=g(v))e[v].hide||(l.startX=l.endX,l.endX+=e[v].width,m>=l.startX&&(m<=l.endX||!_(g(v),h))&&(i=v,a=l.startX,s=l.endX,c=(m-l.startX)/(l.endX-l.startX)),n===e[v].name&&(r=v));return{targetIndex:i,draggedIndex:r,xBefore:a,xAfter:s,columnRelativePos:c}}setMarkerPosition(n,e=10){const{marker:i}=this._dnd.config,r=this._dnd._obj.getBoundingClientRect();i.style.top=`${r.y+e}px`,i.style.left=`${n}px`}drawTargetMarker({targetIndex:n,draggedIndex:e,xBefore:i,xAfter:r,columnRelativePos:a}){let s;this._targetMarker||(this._targetMarker=document.createElement("div"),Fn(this._targetMarker,"gantt_grid_target_marker"),this._targetMarker.style.display="none",this._targetMarker.style.height=`${this._gridConfig.scale_height}px`),this._targetMarker.parentNode||this.$grid.$grid_scale.appendChild(this._targetMarker),s=n>e?r:n<e?i:a>.5?r:i,this._targetMarker.style.left=`${s}px`,this._targetMarker.style.display="block"}cleanTargetMarker(){this._targetMarker&&this._targetMarker.parentNode&&this.$grid.$grid_scale.removeChild(this._targetMarker),this._targetMarker=null}}function ys(t){var n=[];return{delegate:function(e,i,r,a){n.push([e,i,r,a]),t.$services.getService("mouseEvents").delegate(e,i,r,a)},destructor:function(){for(var e=t.$services.getService("mouseEvents"),i=0;i<n.length;i++){var r=n[i];e.detach(r[0],r[1],r[2],r[3])}n=[]}}}var fs=function(t,n,e,i){this.$config=ut({},n||{}),this.$gantt=i,this.$parent=t,Le(this),this.$state={},ut(this,jc(this))};fs.prototype={init:function(t){var n=this.$gantt,e=n._waiAria.gridAttrString(),i=n._waiAria.gridDataAttrString(),r=this.$getConfig(),a=r.reorder_grid_columns||!1;this.$config.reorder_grid_columns!==void 0&&(a=this.$config.reorder_grid_columns),t.innerHTML="<div class='gantt_grid' style='height:inherit;width:inherit;' "+e+"></div>",this.$grid=t.childNodes[0],this.$grid.innerHTML="<div class='gantt_grid_scale' "+n._waiAria.gridScaleRowAttrString()+"></div><div class='gantt_grid_data' "+i+"></div>",this.$grid_scale=this.$grid.childNodes[0],this.$grid_data=this.$grid.childNodes[1];var s=r[this.$config.bind+"_attribute"];if(!s&&this.$config.bind&&(s="data-"+this.$config.bind+"-id"),this.$config.item_attribute=s||null,!this.$config.layers){var l=this._createLayerConfig();this.$config.layers=l}var c={init:function(){},doOnRender:function(){}};this._renderHeaderResizers=c.doOnRender,this._mouseDelegates=ys(n);var u=function(h,_){var g={row_before_start:h.bind(function(m,v,$){var x=_.$getConfig(),S=_.$config.rowStore;if(!ye($,x.task_grid_row_resizer_attribute))return!1;var p=this.locate($,x.task_grid_row_resizer_attribute),b=S.getItem(p);return _.callEvent("onBeforeRowResize",[b])!==!1&&void 0},h),row_after_start:h.bind(function(m,v,$){var x=_.$getConfig(),S=this.locate($,x.task_grid_row_resizer_attribute);m.config.marker.innerHTML="",m.config.marker.className+=" gantt_row_grid_resize_area",m.config.marker.style.width=_.$grid.offsetWidth+"px",m.config.drag_id=S},h),row_drag_move:h.bind(function(m,v,$){var x=_.$config.rowStore,S=_.$getConfig(),p=m.config,b=p.drag_id,k=_.getItemHeight(b),w=_.getItemTop(b)-v.scrollTop,A=Ft(_.$grid_data),I=parseInt(p.marker.style.top,10),C=w+A.y,M=0,N=S.min_task_grid_row_height;return(M=I-C)<N&&(M=N),p.marker.style.left=A.x+"px",p.marker.style.top=C-1+"px",p.marker.style.height=Math.abs(M)+1+"px",p.marker_height=M,_.callEvent("onRowResize",[b,x.getItem(b),M+k]),!0},h),row_drag_end:h.bind(function(m,v,$){var x=_.$config.rowStore,S=m.config,p=S.drag_id,b=x.getItem(p),k=_.getItemHeight(p),w=S.marker_height;_.callEvent("onBeforeRowResizeEnd",[p,b,w])!==!1&&b.row_height!=w&&(b.row_height=w,x.updateItem(p),_.callEvent("onAfterRowResize",[p,b,k,w]),this.render())},h)};return{init:function(){var m=h.$services.getService("dnd"),v=_.$getConfig(),$=new m(_.$grid_data,{updates_per_second:60});h.defined(v.dnd_sensitivity)&&($.config.sensitivity=v.dnd_sensitivity),$.attachEvent("onBeforeDragStart",function(x,S){return g.row_before_start($,x,S)}),$.attachEvent("onAfterDragStart",function(x,S){return g.row_after_start($,x,S)}),$.attachEvent("onDragMove",function(x,S){return g.row_drag_move($,x,S)}),$.attachEvent("onDragEnd",function(x,S){return g.row_drag_end($,x,S)})}}}(n,this);u.init(),this._addLayers(this.$gantt),this._initEvents(),a&&(this._columnDND=new Ok(n,this),this._columnDND.init()),this.callEvent("onReady",[])},_validateColumnWidth:function(t,n){var e=t[n];if(e&&e!="*"){var i=this.$gantt,r=1*e;isNaN(r)?i.assert(!1,"Wrong "+n+" value of column "+t.name):t[n]=r}},setSize:function(t,n){this.$config.width=this.$state.width=t,this.$config.height=this.$state.height=n;for(var e,i=this.getGridColumns(),r=0,a=(u=this.$getConfig()).grid_elastic_columns,s=0,l=i.length;s<l;s++)this._validateColumnWidth(i[s],"min_width"),this._validateColumnWidth(i[s],"max_width"),this._validateColumnWidth(i[s],"width"),r+=1*i[s].width;if(!isNaN(r)&&this.$config.scrollable||(r=e=this._setColumnsWidth(t+1)),this.$config.scrollable&&a&&!isNaN(r)){let _="width";a=="min_width"&&(_="min_width");let g=0;i.forEach(function(m){g+=m[_]||u.min_grid_column_width});var c=Math.max(g,t);r=this._setColumnsWidth(c),e=t}this.$config.scrollable?(this.$grid_scale.style.width=r+"px",this.$grid_data.style.width=r+"px"):(this.$grid_scale.style.width="inherit",this.$grid_data.style.width="inherit"),this.$config.width-=1;var u=this.$getConfig();e!==t&&(e!==void 0?(u.grid_width=e,this.$config.width=e-1):isNaN(r)||(this._setColumnsWidth(r),u.grid_width=r,this.$config.width=r-1));var h=Math.max(this.$state.height-u.scale_height,0);this.$grid_data.style.height=h+"px",this.refresh()},getSize:function(){var t=this.$getConfig(),n=this.$config.rowStore?this.getTotalHeight():0,e=this._getGridWidth();return{x:this.$state.width,y:this.$state.height,contentX:this.isVisible()?e:0,contentY:this.isVisible()?t.scale_height+n:0,scrollHeight:this.isVisible()?n:0,scrollWidth:this.isVisible()?e:0}},_bindStore:function(){if(this.$config.bind){var t=this.$gantt.getDatastore(this.$config.bind);if(this.$config.rowStore=t,t&&!t._gridCacheAttached){var n=this;t._gridCacheAttached=t.attachEvent("onBeforeFilter",function(){n._resetTopPositionHeight()})}}},_unbindStore:function(){if(this.$config.bind){var t=this.$gantt.getDatastore(this.$config.bind);t&&t._gridCacheAttached&&(t.detachEvent(t._gridCacheAttached),t._gridCacheAttached=!1)}},refresh:function(){this._bindStore(),this._resetTopPositionHeight(),this._resetHeight(),this._initSmartRenderingPlaceholder(),this._calculateGridWidth(),this._renderGridHeader()},getViewPort:function(){var t=this.$config.scrollLeft||0,n=this.$config.scrollTop||0,e=this.$config.height||0,i=this.$config.width||0;return{y:n,y_end:n+e,x:t,x_end:t+i,height:e,width:i}},scrollTo:function(t,n){if(this.isVisible()){var e=!1;this.$config.scrollTop=this.$config.scrollTop||0,this.$config.scrollLeft=this.$config.scrollLeft||0,1*t==t&&(this.$config.scrollLeft=this.$state.scrollLeft=this.$grid.scrollLeft=t,e=!0),1*n==n&&(this.$config.scrollTop=this.$state.scrollTop=this.$grid_data.scrollTop=n,e=!0),e&&this.callEvent("onScroll",[this.$config.scrollLeft,this.$config.scrollTop])}},getColumnIndex:function(t,n){for(var e=this.$getConfig().columns,i=0,r=0;r<e.length;r++)if(n&&e[r].hide&&i++,e[r].name==t)return r-i;return null},getColumn:function(t){var n=this.getColumnIndex(t);return n===null?null:this.$getConfig().columns[n]},getGridColumns:function(){return this.$getConfig().columns.slice()},isVisible:function(){return this.$parent&&this.$parent.$config?!this.$parent.$config.hidden:this.$grid.offsetWidth},_createLayerConfig:function(){var t=this.$gantt,n=this;return[{renderer:t.$ui.layers.gridLine(),container:this.$grid_data,filter:[function(){return n.isVisible()}]},{renderer:t.$ui.layers.gridTaskRowResizer(),container:this.$grid_data,append:!0,filter:[function(){return t.config.resize_rows}]}]},_addLayers:function(t){if(this.$config.bind){this._taskLayers=[];var n=this,e=this.$gantt.$services.getService("layers"),i=e.getDataRender(this.$config.bind);i||(i=e.createDataRender({name:this.$config.bind,defaultContainer:function(){return n.$grid_data}}));for(var r=this.$config.layers,a=0;r&&a<r.length;a++){var s=r[a];s.view=this;var l=i.addLayer(s);this._taskLayers.push(l)}this._bindStore(),this._initSmartRenderingPlaceholder()}},_refreshPlaceholderOnStoreUpdate:function(t){var n=this.$getConfig(),e=this.$config.rowStore;if(e&&t===null&&this.isVisible()&&n.smart_rendering){var i;if(this.$config.scrollY){var r=this.$gantt.$ui.getView(this.$config.scrollY);r&&(i=r.getScrollState().scrollSize)}if(i||(i=e?this.getTotalHeight():0),i){this.$rowsPlaceholder&&this.$rowsPlaceholder.parentNode&&this.$rowsPlaceholder.parentNode.removeChild(this.$rowsPlaceholder);var a=this.$rowsPlaceholder=document.createElement("div");a.style.visibility="hidden",a.style.height=i+"px",a.style.width="1px",this.$grid_data.appendChild(a)}}},_initSmartRenderingPlaceholder:function(){var t=this.$config.rowStore;t&&(this._initSmartRenderingPlaceholder=function(){},this._staticBgHandler=t.attachEvent("onStoreUpdated",_t(this._refreshPlaceholderOnStoreUpdate,this)))},_initEvents:function(){var t=this.$gantt;this._mouseDelegates.delegate("click","gantt_close",t.bind(function(n,e,i){var r=this.$config.rowStore;if(!r)return!0;var a=ye(n,this.$config.item_attribute);return a&&r.close(a.getAttribute(this.$config.item_attribute)),!1},this),this.$grid),this._mouseDelegates.delegate("click","gantt_open",t.bind(function(n,e,i){var r=this.$config.rowStore;if(!r)return!0;var a=ye(n,this.$config.item_attribute);return a&&r.open(a.getAttribute(this.$config.item_attribute)),!1},this),this.$grid)},_clearLayers:function(t){var n=this.$gantt.$services.getService("layers").getDataRender(this.$config.bind);if(this._taskLayers)for(var e=0;e<this._taskLayers.length;e++)n.removeLayer(this._taskLayers[e]);this._taskLayers=[]},_getColumnWidth:function(t,n,e){var i=t.min_width||n.min_grid_column_width,r=Math.max(e,i||10);return t.max_width&&(r=Math.min(r,t.max_width)),r},_checkGridColumnMinWidthLimits:function(t,n){for(var e=0,i=t.length;e<i;e++){var r=1*t[e].width;!t[e].min_width&&r<n.min_grid_column_width&&(t[e].min_width=r)}},_getGridWidthLimits:function(){for(var t=this.$getConfig(),n=this.getGridColumns(),e=0,i=0,r=0;r<n.length;r++)e+=n[r].min_width?n[r].min_width:t.min_grid_column_width,i!==void 0&&(i=n[r].max_width?i+n[r].max_width:void 0);return this._checkGridColumnMinWidthLimits(n,t),[e,i]},_setColumnsWidth:function(t,n){var e=this.$getConfig(),i=this.getGridColumns(),r=0,a=t;n=window.isNaN(n)?-1:n;for(var s=0,l=i.length;s<l;s++)r+=1*i[s].width;if(window.isNaN(r))for(this._calculateGridWidth(),r=0,s=0,l=i.length;s<l;s++)r+=1*i[s].width;var c=a-r,u=0;for(s=0;s<n+1;s++)u+=i[s].width;for(r-=u,s=n+1;s<i.length;s++){var h=i[s],_=Math.round(c*(h.width/r));c<0?h.min_width&&h.width+_<h.min_width?_=h.min_width-h.width:!h.min_width&&e.min_grid_column_width&&h.width+_<e.min_grid_column_width&&(_=e.min_grid_column_width-h.width):h.max_width&&h.width+_>h.max_width&&(_=h.max_width-h.width),r-=h.width,h.width+=_,c-=_}for(var g=c>0?1:-1;c>0&&g===1||c<0&&g===-1;){var m=c;for(s=n+1;s<i.length;s++){var v;if((v=i[s].width+g)==this._getColumnWidth(i[s],e,v)&&(c-=g,i[s].width=v),!c)break}if(m==c)break}return c&&n>-1&&(v=i[n].width+c)==this._getColumnWidth(i[n],e,v)&&(i[n].width=v),this._getColsTotalWidth()},_getColsTotalWidth:function(){for(var t=this.getGridColumns(),n=0,e=0;e<t.length;e++){var i=parseFloat(t[e].width);if(window.isNaN(i))return!1;n+=i}return n},_calculateGridWidth:function(){for(var t=this.$getConfig(),n=this.getGridColumns(),e=0,i=[],r=[],a=0;a<n.length;a++){var s=parseFloat(n[a].width);window.isNaN(s)&&(s=t.min_grid_column_width||10,i.push(a)),r[a]=s,e+=s}var l=this._getGridWidth()+1;if(t.autofit||i.length){var c=l-e;if(t.autofit&&!t.grid_elastic_columns)for(a=0;a<r.length;a++){var u=Math.round(c/(r.length-a));r[a]+=u,(h=this._getColumnWidth(n[a],t,r[a]))!=r[a]&&(u=h-r[a],r[a]=h),c-=u}else if(i.length)for(a=0;a<i.length;a++){u=Math.round(c/(i.length-a));var h,_=i[a];r[_]+=u,(h=this._getColumnWidth(n[_],t,r[_]))!=r[_]&&(u=h-r[_],r[_]=h),c-=u}for(a=0;a<r.length;a++)n[a].width=r[a]}else{var g=l!=e;this.$config.width=e-1,t.grid_width=e,g&&this.$parent._setContentSize(this.$config.width,null)}},_renderGridHeader:function(){var t=this.$gantt,n=this.$getConfig(),e=this.$gantt.locale,i=this.$gantt.templates,r=this.getGridColumns();n.rtl&&(r=r.reverse());for(var a=[],s=0,l=e.labels,c=n.scale_height-1,u=0;u<r.length;u++){var h=u==r.length-1,_=r[u];_.name||(_.name=t.uid()+"");var g=1*_.width,m=this._getGridWidth();h&&m>s+g&&(_.width=g=m-s),s+=g;var v=t._sort&&_.name==t._sort.name?`<div data-column-id="${_.name}" class="gantt_sort gantt_${t._sort.direction}"></div>`:"",$=["gantt_grid_head_cell","gantt_grid_head_"+_.name,h?"gantt_last_cell":"",i.grid_header_class(_.name,_)].join(" "),x="width:"+(g-(h?1:0))+"px;",S=_.label||l["column_"+_.name]||l[_.name];S=S||"";var p="<div class='"+$+"' style='"+x+"' "+t._waiAria.gridScaleCellAttrString(_,S)+" data-column-id='"+_.name+"' column_id='"+_.name+"' data-column-name='"+_.name+"' data-column-index='"+u+"'>"+S+v+"</div>";a.push(p)}this.$grid_scale.style.height=n.scale_height+"px",this.$grid_scale.style.lineHeight=c+"px",this.$grid_scale.innerHTML=a.join(""),this._renderHeaderResizers&&this._renderHeaderResizers()},_getGridWidth:function(){return this.$config.width},destructor:function(){this._clearLayers(this.$gantt),this._mouseDelegates&&(this._mouseDelegates.destructor(),this._mouseDelegates=null),this._unbindStore(),this.$grid=null,this.$grid_scale=null,this.$grid_data=null,this.$gantt=null,this.$config.rowStore&&(this.$config.rowStore.detachEvent(this._staticBgHandler),this.$config.rowStore=null),this.callEvent("onDestroy",[]),this.detachAllEvents()}};const Hk={init:function(t,n){var e=n.$gantt;e.attachEvent("onTaskClick",function(i,r){if(e._is_icon_open_click(r))return!0;var a=t.getState(),s=t.locateCell(r.target);return!s||!t.getEditorConfig(s.columnName)||(t.isVisible()&&a.id==s.id&&a.columnName==s.columnName||t.startEdit(s.id,s.columnName),!1)}),e.attachEvent("onEmptyClick",function(){return t.isVisible()&&t.isChanged()?t.save():t.hide(),!0}),e.attachEvent("onTaskDblClick",function(i,r){var a=t.getState(),s=t.locateCell(r.target);return!s||!t.isVisible()||s.columnName!=a.columnName})},onShow:function(t,n,e){var i=e.$gantt;i.ext&&i.ext.keyboardNavigation&&i.ext.keyboardNavigation.attachEvent("onKeyDown",function(r,a){var s=i.constants.KEY_CODES,l=!1;return a.keyCode===s.SPACE&&t.isVisible()&&(l=!0),!l}),n.onkeydown=function(r){r=r||window.event;var a=i.constants.KEY_CODES;if(!(r.defaultPrevented||r.shiftKey&&r.keyCode!=a.TAB)){var s=!0;switch(r.keyCode){case i.keys.edit_save:t.save();break;case i.keys.edit_cancel:t.hide();break;case a.UP:case a.DOWN:t.isVisible()&&(t.hide(),s=!1);break;case a.TAB:r.shiftKey?t.editPrevCell(!0):t.editNextCell(!0);break;default:s=!1}s&&r.preventDefault()}}},onHide:function(){},destroy:function(){}},Bk={init:function(t,n){var e=t,i=n.$gantt,r=null,a=i.ext.keyboardNavigation;a.attachEvent("onBeforeFocus",function(s){var l=t.locateCell(s);if(clearTimeout(r),l){var c=l.columnName,u=l.id,h=e.getState();if(e.isVisible()&&h.id==u&&h.columnName===c)return!1}return!0}),a.attachEvent("onFocus",function(s){var l=t.locateCell(s),c=t.getState();return clearTimeout(r),!l||l.id==c.id&&l.columnName==c.columnName||e.isVisible()&&e.save(),!0}),t.attachEvent("onHide",function(){clearTimeout(r)}),a.attachEvent("onBlur",function(){return r=setTimeout(function(){e.save()}),!0}),i.attachEvent("onTaskDblClick",function(s,l){var c=t.getState(),u=t.locateCell(l.target);return!u||!t.isVisible()||u.columnName!=c.columnName}),i.attachEvent("onTaskClick",function(s,l){if(i._is_icon_open_click(l))return!0;var c=t.getState(),u=t.locateCell(l.target);return!u||!t.getEditorConfig(u.columnName)||(t.isVisible()&&c.id==u.id&&c.columnName==u.columnName||t.startEdit(u.id,u.columnName),!1)}),i.attachEvent("onEmptyClick",function(){return e.save(),!0}),a.attachEvent("onKeyDown",function(s,l){var c=t.locateCell(l.target),u=!!c&&t.getEditorConfig(c.columnName),h=t.getState(),_=i.constants.KEY_CODES,g=l.keyCode,m=!1;switch(g){case _.ENTER:t.isVisible()?(t.save(),l.preventDefault(),m=!0):u&&!(l.ctrlKey||l.metaKey||l.shiftKey)&&(e.startEdit(c.id,c.columnName),l.preventDefault(),m=!0);break;case _.ESC:t.isVisible()&&(t.hide(),l.preventDefault(),m=!0);break;case _.UP:case _.DOWN:break;case _.LEFT:case _.RIGHT:(u&&t.isVisible()||h.editorType==="date")&&(m=!0);break;case _.SPACE:t.isVisible()&&(m=!0),u&&!t.isVisible()&&(e.startEdit(c.id,c.columnName),l.preventDefault(),m=!0);break;case _.DELETE:u&&!t.isVisible()?(e.startEdit(c.id,c.columnName),m=!0):u&&t.isVisible()&&(m=!0);break;case _.TAB:if(t.isVisible()){l.shiftKey?t.editPrevCell(!0):t.editNextCell(!0);var v=t.getState();v.id&&a.focus({type:"taskCell",id:v.id,column:v.columnName}),l.preventDefault(),m=!0}break;default:if(t.isVisible())m=!0;else if(g>=48&&g<=57||g>95&&g<112||g>=64&&g<=91||g>185&&g<193||g>218&&g<223){var $=s.modifiers,x=$.alt||$.ctrl||$.meta||$.shift;$.alt||x&&a.getCommandHandler(s,"taskCell")||u&&!t.isVisible()&&(e.startEdit(c.id,c.columnName),m=!0)}}return!m})},onShow:function(t,n,e){},onHide:function(t,n,e){const i=e.$gantt;i&&i.focus()},destroy:function(){}};function Un(t){var n=function(){};return n.prototype={show:function(e,i,r,a){},hide:function(){},set_value:function(e,i,r,a){this.get_input(a).value=e},get_value:function(e,i,r){return this.get_input(r).value||""},is_changed:function(e,i,r,a){var s=this.get_value(i,r,a);return s&&e&&s.valueOf&&e.valueOf?s.valueOf()!=e.valueOf():s!=e},is_valid:function(e,i,r,a){return!0},save:function(e,i,r){},get_input:function(e){return e.querySelector("input")},focus:function(e){var i=this.get_input(e);i&&(i.focus&&i.focus(),i.select&&i.select())}},n}function zk(t){var n=Un();function e(){return n.apply(this,arguments)||this}return Dt(e,n),ut(e.prototype,{show:function(i,r,a,s){var l=`<div role='cell'><input type='text' name='${r.name}' title='${r.name}'></div>`;s.innerHTML=l}},!0),e}function Wk(t){var n=Un();function e(){return n.apply(this,arguments)||this}return Dt(e,n),ut(e.prototype,{show:function(i,r,a,s){var l=a.min||0,c=a.max||100,u=`<div role='cell'><input type='number' min='${l}' max='${c}' name='${r.name}' title='${r.name}'></div>`;s.innerHTML=u,s.oninput=function(h){+h.target.value<l&&(h.target.value=l),+h.target.value>c&&(h.target.value=c)}},get_value:function(i,r,a){return this.get_input(a).value||""},is_valid:function(i,r,a,s){return!isNaN(parseInt(i,10))}},!0),e}function Fk(t){var n=Un();function e(){return n.apply(this,arguments)||this}return Dt(e,n),ut(e.prototype,{show:function(i,r,a,s){for(var l=`<div role='cell'><select name='${r.name}' title='${r.name}'>`,c=[],u=a.options||[],h=0;h<u.length;h++)c.push("<option value='"+a.options[h].key+"'>"+u[h].label+"</option>");l+=c.join("")+"</select></div>",s.innerHTML=l},get_input:function(i){return i.querySelector("select")}},!0),e}function Uk(t){var n=Un(),e="%Y-%m-%d",i=null,r=null;function a(){return n.apply(this,arguments)||this}return Dt(a,n),ut(a.prototype,{show:function(s,l,c,u){i||(i=t.date.date_to_str(e)),r||(r=t.date.str_to_date(e));var h=null,_=null;h=typeof c.min=="function"?c.min(s,l):c.min,_=typeof c.max=="function"?c.max(s,l):c.max;var g=`<div style='width:140px' role='cell'><input type='date' ${h?" min='"+i(h)+"' ":""} ${_?" max='"+i(_)+"' ":""} name='${l.name}' title='${l.name}'></div>`;u.innerHTML=g,u.oninput=function(m){m.target.value&&(h||_)&&(+t.date.str_to_date("%Y-%m-%d")(m.target.value)<+h&&(m.target.value=t.date.date_to_str("%Y-%m-%d")(h)),+t.date.str_to_date("%Y-%m-%d")(m.target.value)>+_&&(m.target.value=t.date.date_to_str("%Y-%m-%d")(_)))}},set_value:function(s,l,c,u){s&&s.getFullYear?this.get_input(u).value=i(s):this.get_input(u).value=s},is_valid:function(s,l,c,u){return!(!s||isNaN(s.getTime()))},get_value:function(s,l,c){var u;try{u=r(this.get_input(c).value||"")}catch{u=null}return u}},!0),a}function Vk(t){var n=Un();function e(){return n.apply(this,arguments)||this}function i(c){return c.formatter||t.ext.formatters.linkFormatter()}function r(c,u){for(var h=(c||"").split(u.delimiter||","),_=0;_<h.length;_++){var g=h[_].trim();g?h[_]=g:(h.splice(_,1),_--)}return h.sort(),h}function a(c,u,h){for(var _=c.$target,g=[],m=0;m<_.length;m++){var v=h.getLink(_[m]);g.push(i(u).format(v))}return g.join((u.delimiter||",")+" ")}function s(c){return c.source+"_"+c.target+"_"+c.type+"_"+(c.lag||0)}function l(c,u,h){var _=function(x,S,p){var b=[];return[...new Set(S)].forEach(function(k){var w=i(p).parse(k);w&&(w.target=x,w.id="predecessor_generated",t.isLinkAllowed(w)&&(w.id=void 0,b.push(w)))}),b}(c.id,u,h),g={};c.$target.forEach(function(x){var S=t.getLink(x);g[s(S)]=S.id});var m=[];_.forEach(function(x){var S=s(x);g[S]?delete g[S]:m.push(x)});var v=[];for(var $ in g)v.push(g[$]);return{add:m,remove:v}}return Dt(e,n),ut(e.prototype,{show:function(c,u,h,_){var g=`<div role='cell'><input type='text' name='${u.name}' title='${u.name}'></div>`;_.innerHTML=g},hide:function(){},set_value:function(c,u,h,_){this.get_input(_).value=a(c,h.editor,t)},get_value:function(c,u,h){return r(this.get_input(h).value||"",u.editor)},save:function(c,u,h){var _=l(t.getTask(c),this.get_value(c,u,h),u.editor);(_.add.length||_.remove.length)&&t.batchUpdate(function(){_.add.forEach(function(g){t.addLink(g)}),_.remove.forEach(function(g){t.deleteLink(g)}),t.autoSchedule&&t.autoSchedule()})},is_changed:function(c,u,h,_){var g=this.get_value(u,h,_),m=r(a(c,h.editor,t),h.editor);return g.join()!==m.join()}},!0),e}function jk(t){var n=Un();function e(){return n.apply(this,arguments)||this}function i(r){return r.formatter||t.ext.formatters.durationFormatter()}return Dt(e,n),ut(e.prototype,{show:function(r,a,s,l){var c=`<div role='cell'><input type='text' name='${a.name}' title='${a.name}'></div>`;l.innerHTML=c},set_value:function(r,a,s,l){this.get_input(l).value=i(s.editor).format(r)},get_value:function(r,a,s){return i(a.editor).parse(this.get_input(s).value||"")}},!0),e}function Gk(t){return function(e,i,r){r=="keepDates"?function(a,s){s=="duration"?a.end_date=t.calculateEndDate(a):s!="end_date"&&s!="start_date"||(a.duration=t.calculateDuration(a))}(e,i):r=="keepDuration"?function(a,s){s=="end_date"?a.start_date=n(a):s!="start_date"&&s!="duration"||(a.end_date=t.calculateEndDate(a))}(e,i):function(a,s){t.config.schedule_from_end?s=="end_date"||s=="duration"?a.start_date=n(a):s=="start_date"&&(a.duration=t.calculateDuration(a)):s=="start_date"||s=="duration"?a.end_date=t.calculateEndDate(a):s=="end_date"&&(a.duration=t.calculateDuration(a))}(e,i)};function n(e){return t.calculateEndDate({start_date:e.end_date,duration:-e.duration,task:e})}}function qk(t){t.config.editor_types={text:new(zk()),number:new(Wk()),select:new(Fk()),date:new(Uk(t)),predecessor:new(Vk(t)),duration:new(jk(t))}}function Yk(t){var n=function(r){var a=null;return{setMapping:function(s){a=s},getMapping:function(){return a||(r.config.keyboard_navigation_cells&&r.ext.keyboardNavigation?Bk:Hk)}}}(t),e={};Le(e);var i={init:qk,createEditors:function(r){function a(_,g){var m=r.$getConfig(),v=function(S,p){for(var b=r.$getConfig(),k=r.getItemTop(S),w=r.getItemHeight(S),A=r.getGridColumns(),I=0,C=0,M=0,N=0;N<A.length;N++){if(A[N].name==p){M=A[N].width;break}b.rtl?C+=A[N].width:I+=A[N].width}return b.rtl?{top:k,right:C,height:w,width:M}:{top:k,left:I,height:w,width:M}}(_,g),$=document.createElement("div");$.className="gantt_grid_editor_placeholder",$.setAttribute(r.$config.item_attribute,_),$.setAttribute(r.$config.bind+"_id",_),$.setAttribute("data-column-name",g);var x=function(S,p){for(var b=S.getGridColumns(),k=0;k<b.length;k++)if(b[k].name==p)return k;return 0}(r,g);return $.setAttribute("data-column-index",x),t._waiAria.inlineEditorAttr($),m.rtl?$.style.cssText=["top:"+v.top+"px","right:"+v.right+"px","width:"+v.width+"px","height:"+v.height+"px"].join(";"):$.style.cssText=["top:"+v.top+"px","left:"+v.left+"px","width:"+v.width+"px","height:"+v.height+"px"].join(";"),$}var s=Gk(t),l=[],c=[],u=null,h={_itemId:null,_columnName:null,_editor:null,_editorType:null,_placeholder:null,locateCell:function(_){if(!Qt(_,r.$grid))return null;var g=ye(_,r.$config.item_attribute),m=ye(_,"data-column-name");if(g&&m){var v=m.getAttribute("data-column-name");return{id:g.getAttribute(r.$config.item_attribute),columnName:v}}return null},getEditorConfig:function(_){return r.getColumn(_).editor},init:function(){var _=n.getMapping();_.init&&_.init(this,r),u=r.$gantt.getDatastore(r.$config.bind);var g=this;l.push(u.attachEvent("onIdChange",function(m,v){g._itemId==m&&(g._itemId=v)})),l.push(u.attachEvent("onStoreUpdated",function(){r.$gantt.getState("batchUpdate").batch_update||g.isVisible()&&!u.isVisible(g._itemId)&&g.hide()})),c.push(t.attachEvent("onDataRender",function(){g._editor&&g._placeholder&&!Qt(g._placeholder,t.$root)&&r.$grid_data.appendChild(g._placeholder)})),this.init=function(){}},getState:function(){return{editor:this._editor,editorType:this._editorType,placeholder:this._placeholder,id:this._itemId,columnName:this._columnName}},startEdit:function(_,g){if(this.isVisible()&&this.save(),u.exists(_)){var m={id:_,columnName:g};t.isReadonly(u.getItem(_))?this.callEvent("onEditPrevent",[m]):this.callEvent("onBeforeEditStart",[m])!==!1?(this.show(m.id,m.columnName),this.setValue(),this.callEvent("onEditStart",[m])):this.callEvent("onEditPrevent",[m])}},isVisible:function(){return!(!this._editor||!Qt(this._placeholder,t.$root))},show:function(_,g){this.isVisible()&&this.save();var m={id:_,columnName:g},v=r.getColumn(m.columnName),$=this.getEditorConfig(v.name);if($){var x=r.$getConfig().editor_types[$.type],S=a(m.id,m.columnName);r.$grid_data.appendChild(S),x.show(m.id,v,$,S),this._editor=x,this._placeholder=S,this._itemId=m.id,this._columnName=m.columnName,this._editorType=$.type;var p=n.getMapping();p.onShow&&p.onShow(this,S,r)}},setValue:function(){var _=this.getState(),g=_.id,m=_.columnName,v=r.getColumn(m),$=u.getItem(g),x=this.getEditorConfig(m);if(x){var S=$[x.map_to];x.map_to=="auto"&&(S=u.getItem(g)),this._editor.set_value(S,g,v,this._placeholder),this.focus()}},focus:function(){this._editor.focus(this._placeholder)},getValue:function(){var _=r.getColumn(this._columnName);return this._editor.get_value(this._itemId,_,this._placeholder)},_getItemValue:function(){var _=this.getEditorConfig(this._columnName);if(_){var g=t.getTask(this._itemId)[_.map_to];return _.map_to=="auto"&&(g=u.getItem(this._itemId)),g}},isChanged:function(){var _=r.getColumn(this._columnName),g=this._getItemValue();return this._editor.is_changed(g,this._itemId,_,this._placeholder)},hide:function(){if(this._itemId){var _=this._itemId,g=this._columnName,m=n.getMapping();m.onHide&&m.onHide(this,this._placeholder,r),this._itemId=null,this._columnName=null,this._editorType=null,this._placeholder&&(this._editor&&this._editor.hide&&this._editor.hide(this._placeholder),this._editor=null,this._placeholder.parentNode&&this._placeholder.parentNode.removeChild(this._placeholder),this._placeholder=null,this.callEvent("onEditEnd",[{id:_,columnName:g}]))}},save:function(){if(this.isVisible()&&u.exists(this._itemId)&&this.isChanged()){var _=this._itemId,g=this._columnName;if(u.exists(_)){var m=u.getItem(_),v=this.getEditorConfig(g),$={id:_,columnName:g,newValue:this.getValue(),oldValue:this._getItemValue()};if(this.callEvent("onBeforeSave",[$])!==!1&&(!this._editor.is_valid||this._editor.is_valid($.newValue,$.id,r.getColumn(g),this._placeholder))){var x=v.map_to,S=$.newValue;x!="auto"?(m[x]=S,s(m,x,t.config.inline_editors_date_processing),u.updateItem(_)):this._editor.save(_,r.getColumn(g),this._placeholder),this.callEvent("onSave",[$])}this.hide()}}else this.hide()},_findEditableCell:function(_,g){var m=_,v=r.getGridColumns()[m],$=v?v.name:null;if($){for(;$&&!this.getEditorConfig($);)$=this._findEditableCell(_+g,g);return $}return null},getNextCell:function(_){return this._findEditableCell(r.getColumnIndex(this._columnName,!0)+_,_)},getFirstCell:function(){return this._findEditableCell(0,1)},getLastCell:function(){return this._findEditableCell(r.getGridColumns().length-1,-1)},editNextCell:function(_){var g=this.getNextCell(1);if(g){var m=this.getNextCell(1);m&&this.getEditorConfig(m)&&this.startEdit(this._itemId,m)}else if(_&&this.moveRow(1)){var v=this.moveRow(1);(g=this.getFirstCell())&&this.getEditorConfig(g)&&this.startEdit(v,g)}},editPrevCell:function(_){var g=this.getNextCell(-1);if(g){var m=this.getNextCell(-1);m&&this.getEditorConfig(m)&&this.startEdit(this._itemId,m)}else if(_&&this.moveRow(-1)){var v=this.moveRow(-1);(g=this.getLastCell())&&this.getEditorConfig(g)&&this.startEdit(v,g)}},moveRow:function(_){for(var g=_>0?t.getNext:t.getPrev,m=(g=t.bind(g,t))(this._itemId);t.isTaskExists(m)&&t.isReadonly(t.getTask(m));)m=g(m);return m},editNextRow:function(_){var g=this.getState().id;if(t.isTaskExists(g)){var m=null;m=_?this.moveRow(1):t.getNext(g),t.isTaskExists(m)&&this.startEdit(m,this._columnName)}},editPrevRow:function(_){var g=this.getState().id;if(t.isTaskExists(g)){var m=null;m=_?this.moveRow(-1):t.getPrev(g),t.isTaskExists(m)&&this.startEdit(m,this._columnName)}},detachStore:function(){l.forEach(function(_){u.detachEvent(_)}),c.forEach(function(_){t.detachEvent(_)}),l=[],c=[],u=null,this.hide()},destructor:function(){this.detachStore(),this.detachAllEvents()}};return ut(h,n),ut(h,e),h}};return ut(i,n),ut(i,e),i}function gs(t,n,e,i,r){if(!t.start_date||!t.end_date)return null;var a=e.getItemTop(t.id),s=e.getItemHeight(t.id);if(a>n.y_end||a+s<n.y)return!1;var l=e.posFromDate(t.start_date),c=e.posFromDate(t.end_date),u=Math.min(l,c)-200,h=Math.max(l,c)+200;return!(u>n.x_end||h<n.x)}function Gc(t){function n(a,s,l){if(t._isAllowedUnscheduledTask(a)||!t._isTaskInTimelineLimits(a))return;var c=s.getItemPosition(a),u=l,h=s.$getTemplates(),_=t.getTaskType(a.type),g=s.getBarHeight(a.id,_==u.types.milestone),m=0;_==u.types.milestone&&(m=(g-c.height)/2);var v=Math.floor((s.getItemHeight(a.id)-g)/2);const $=t.config.baselines&&a.baselines&&a.baselines.length,x=t.config.baselines&&(t.config.baselines.render_mode=="separateRow"||t.config.baselines.render_mode=="individualRow");if($&&x&&a.bar_height!=="full"&&a.bar_height<a.row_height)if(_===u.types.milestone){let C=s.getBarHeight(a.id,!0),M=Math.sqrt(2*C*C);v=Math.floor((M-g)/2)+2}else v=2;_==u.types.milestone&&(c.left-=Math.round(g/2),c.width=g);var S=document.createElement("div"),p=Math.round(c.width);s.$config.item_attribute&&(S.setAttribute(s.$config.item_attribute,a.id),S.setAttribute(s.$config.bind+"_id",a.id)),u.show_progress&&_!=u.types.milestone&&function(C,M,N,P,B){var W=1*C.progress||0;N=Math.max(N-2,0);var j=document.createElement("div"),q=Math.round(N*W);q=Math.min(N,q),j.style.width=q+"px",j.className="gantt_task_progress",j.innerHTML=B.progress_text(C.start_date,C.end_date,C),P.rtl&&(j.style.position="absolute",j.style.right="0px");var Y=document.createElement("div");if(Y.className="gantt_task_progress_wrapper",Y.appendChild(j),M.appendChild(Y),t.config.drag_progress&&!t.isReadonly(C)){var Z=document.createElement("div"),it=q;P.rtl&&(it=N-q),Z.style.left=it+"px",Z.className="gantt_task_progress_drag",Z.innerHTML=`<svg xmlns="http://www.w3.org/2000/svg" width="12" height="9" viewBox="0 0 12 9" fill="none">
<path d="M5.58397 1.52543C5.78189 1.22856 6.21811 1.22856 6.41602 1.52543L10.5475 7.72265C10.769 8.05493 10.5308 8.5 10.1315 8.5L1.86852 8.5C1.46917 8.5 1.23097 8.05493 1.45249 7.72265L5.58397 1.52543Z" fill="var(--dhx-gantt-progress-handle-background)" stroke="var(--dhx-gantt-progress-handle-border)"/>
</svg>`,j.appendChild(Z),M.appendChild(Z)}}(a,S,p,u,h);var b=function(C,M,N){var P=document.createElement("div");return t.getTaskType(C.type)!=t.config.types.milestone?P.innerHTML=N.task_text(C.start_date,C.end_date,C):t.getTaskType(C.type)==t.config.types.milestone&&M&&(P.style.height=P.style.width=M+"px"),P.className="gantt_task_content",P}(a,p,h);S.appendChild(b);var k=function(C,M,N,P){var B=P.$getConfig(),W=[C];M&&W.push(M);var j=t.getState(),q=t.getTask(N);if(t.getTaskType(q.type)==B.types.milestone?W.push("gantt_milestone"):t.getTaskType(q.type)==B.types.project&&W.push("gantt_project"),W.push("gantt_bar_"+t.getTaskType(q.type)),t.isSummaryTask(q)&&W.push("gantt_dependent_task"),t.isSplitTask(q)&&(B.open_split_tasks&&!q.$open||!B.open_split_tasks)&&W.push("gantt_split_parent"),B.select_task&&t.isSelectedTask(N)&&W.push("gantt_selected"),N==j.drag_id&&(W.push("gantt_drag_"+j.drag_mode),j.touch_drag&&W.push("gantt_touch_"+j.drag_mode)),j.link_source_id==N&&(W.push("gantt_link_source"),j.link_from_start?W.push("gantt_link_from_start"):W.push("gantt_link_from_end")),j.link_target_id==N&&W.push("gantt_link_target"),B.highlight_critical_path&&t.isCriticalTask&&t.isCriticalTask(q)&&W.push("gantt_critical_task"),j.link_landing_area&&j.link_target_id&&j.link_source_id&&j.link_target_id!=j.link_source_id&&(j.link_target_id==N||j.link_source_id==N)){var Y=j.link_source_id,Z=j.link_from_start,it=j.link_to_start,mt="";mt=t.isLinkAllowed(Y,N,Z,it)?it?"link_start_allow":"link_finish_allow":it?"link_start_deny":"link_finish_deny",W.push(mt)}return W.join(" ")}("gantt_task_line",h.task_class(a.start_date,a.end_date,a),a.id,s);(a.color||a.progressColor||a.textColor)&&(k+=" gantt_task_inline_color"),c.width<20&&(k+=" gantt_thin_task"),S.className=k;var w=["left:"+c.left+"px","top:"+(v+c.top)+"px","height:"+g+"px","line-height:"+Math.max(g<30?g-2:g,0)+"px","width:"+p+"px"];S.style.cssText=w.join(";"),a.color&&S.style.setProperty("--dhx-gantt-task-background",a.color),a.textColor&&S.style.setProperty("--dhx-gantt-task-color",a.textColor),a.progressColor&&S.style.setProperty("--dhx-gantt-task-progress-color",a.progressColor);var A=function(C,M,N,P){var B="gantt_left "+i(!M.rtl,C),W=null;return P&&(W={type:"marginRight",value:P}),e(C,N.leftside_text,B,W)}(a,u,h,m);A&&S.appendChild(A),A=function(C,M,N,P){var B="gantt_right "+i(!!M.rtl,C),W=null;return P&&(W={type:"marginLeft",value:P}),e(C,N.rightside_text,B,W)}(a,u,h,m),A&&S.appendChild(A),t._waiAria.setTaskBarAttr(a,S);var I=t.getState();return t.isReadonly(a)||(u.drag_resize&&!t.isSummaryTask(a)&&_!=u.types.milestone&&r(S,"gantt_task_drag",a,function(C){var M=document.createElement("div");return M.className=C,M},u),u.drag_links&&u.show_links&&r(S,"gantt_link_control",a,function(C){var M=document.createElement("div");M.className=C,M.style.cssText=["height:"+g+"px","line-height:"+g+"px"].join(";");var N=document.createElement("div");N.className="gantt_link_point";var P=!1;return I.link_source_id&&u.touch&&(P=!0),N.style.display=P?"block":"",M.appendChild(N),M},u,m)),S}function e(a,s,l,c){if(!s)return null;var u=s(a.start_date,a.end_date,a);if(!u)return null;var h=document.createElement("div");return h.className="gantt_side_content "+l,h.innerHTML=u,c&&(h.style[c.type]=Math.abs(c.value)+"px"),h}function i(a,s){var l=a?{$source:[t.config.links.start_to_start],$target:[t.config.links.start_to_start,t.config.links.finish_to_start]}:{$source:[t.config.links.finish_to_start,t.config.links.finish_to_finish],$target:[t.config.links.finish_to_finish]};for(var c in l)for(var u=s[c],h=0;h<u.length;h++)for(var _=t.getLink(u[h]),g=0;g<l[c].length;g++)if(_.type==l[c][g])return"gantt_link_crossing";return""}function r(a,s,l,c,u,h){var _,g=t.getState();+l.start_date>=+g.min_date&&((_=c([s,u.rtl?"task_right":"task_left","task_start_date"].join(" "))).setAttribute("data-bind-property","start_date"),h&&(_.style.marginLeft=h+"px"),a.appendChild(_)),+l.end_date<=+g.max_date&&((_=c([s,u.rtl?"task_left":"task_right","task_end_date"].join(" "))).setAttribute("data-bind-property","end_date"),h&&(_.style.marginRight=h+"px"),a.appendChild(_))}return function(a,s,l){var c=(l=s.$getConfig()).type_renderers[t.getTaskType(a.type)],u=n;return c?c.call(t,a,function(h){return u.call(t,h,s,l)},s):u.call(t,a,s,l)}}function vc(t){return{render:Gc(t),update:null,isInViewPort:gs,getVisibleRange:sn}}function hi(){return console.error("You are trying to use a Pro feature that is not available in the GPL version."),{render:function(){},isInViewPort:function(){},getVisibleRange:function(){}}}function kc(t,n,e){return{top:n.getItemTop(t.id),height:n.getItemHeight(t.id),left:0,right:1/0}}function _r(t,n){var e=0,i=t.left.length-1;if(n)for(var r=0;r<t.left.length;r++){var a=t.left[r];if(a<n.x&&(e=r),a>n.x_end){i=r;break}}return{start:e,end:i}}function Ja(t,n,e,i){var r=n.width[t];if(r<=0)return!1;if(!i.config.smart_rendering||mi(i))return!0;var a=n.left[t]-r,s=n.left[t]+r;return a<=e.x_end&&s>=e.x}function Kk(t,n){var e=n.config.timeline_placeholder;if(t=t||[],e&&t.filter(c=>c.id==="timeline_placeholder_task").length===0){var i=n.getState(),r=null,a=i.min_date,s=i.max_date;t.length&&(r=t[t.length-1].id);var l={start_date:a,end_date:s,row_height:e.height||0,id:"timeline_placeholder_task",unscheduled:!0,lastTaskId:r,calendar_id:e.calendar||"global",$source:[],$target:[]};t.push(l)}}function Jk(t){var n={current_pos:null,dirs:{left:"left",right:"right",up:"up",down:"down"},path:[],clear:function(){this.current_pos=null,this.path=[]},point:function(r){this.current_pos=t.copy(r)},get_lines:function(r){this.clear(),this.point(r[0]);for(var a=1;a<r.length;a++)this.line_to(r[a]);return this.get_path()},line_to:function(r){var a=t.copy(r),s=this.current_pos,l=this._get_line(s,a);this.path.push(l),this.current_pos=a},get_path:function(){return this.path},get_wrapper_sizes:function(r,a,s){var l,c=a.$getConfig().link_wrapper_width,u=r.y-c/2;switch(r.direction){case this.dirs.left:l={top:u,height:c,lineHeight:c,left:r.x-r.size-c/2,width:r.size+c};break;case this.dirs.right:l={top:u,lineHeight:c,height:c,left:r.x-c/2,width:r.size+c};break;case this.dirs.up:l={top:u-r.size,lineHeight:r.size+c,height:r.size+c,left:r.x-c/2,width:c};break;case this.dirs.down:l={top:u,lineHeight:r.size+c,height:r.size+c,left:r.x-c/2,width:c}}return l},get_line_sizes:function(r,a){var s,l=a.$getConfig(),c=l.link_line_width,u=l.link_wrapper_width,h=r.size+c;switch(r.direction){case this.dirs.left:case this.dirs.right:s={height:c,width:h,marginTop:(u-c)/2,marginLeft:(u-c)/2};break;case this.dirs.up:case this.dirs.down:s={height:h,width:c,marginTop:(u-c)/2,marginLeft:(u-c)/2}}return s},render_line:function(r,a,s,l){var c=this.get_wrapper_sizes(r,s,l),u=document.createElement("div");u.style.cssText=["top:"+c.top+"px","left:"+c.left+"px","height:"+c.height+"px","width:"+c.width+"px"].join(";"),u.className="gantt_line_wrapper";var h=this.get_line_sizes(r,s),_=document.createElement("div");return _.style.cssText=["height:"+h.height+"px","width:"+h.width+"px","margin-top:"+h.marginTop+"px","margin-left:"+h.marginLeft+"px"].join(";"),_.className="gantt_link_line_"+r.direction,u.appendChild(_),u},render_corner:function(r,a){const s=r.radius,l=a.$getConfig(),c=l.link_line_width||2,u=document.createElement("div");let h,_;return u.classList.add("gantt_link_corner"),u.classList.add(`gantt_link_corner_${r.direction.from}_${r.direction.to}`),u.style.width=`${s}px`,u.style.height=`${s}px`,r.direction.from==="right"&&r.direction.to==="down"?(h="Right",_="Top",u.style.left=r.x-l.link_line_width/2+"px",u.style.top=`${r.y}px`):r.direction.from==="down"&&r.direction.to==="right"?(h="Left",_="Bottom",u.style.left=r.x-l.link_line_width/2+"px",u.style.top=`${r.y}px`):r.direction.from==="right"&&r.direction.to==="up"?(h="Right",_="Bottom",u.style.left=r.x-l.link_line_width/2+"px",u.style.top=r.y-s+"px"):r.direction.from==="up"&&r.direction.to==="right"?(h="Left",_="Top",u.style.left=r.x-l.link_line_width/2+"px",u.style.top=r.y-s+"px"):r.direction.from==="left"&&r.direction.to==="down"?(h="Left",_="Top",u.style.left=r.x-s-l.link_line_width/2+"px",u.style.top=`${r.y}px`):r.direction.from==="down"&&r.direction.to==="left"?(h="Right",_="Bottom",u.style.left=r.x-s-l.link_line_width/2+"px",u.style.top=`${r.y}px`):r.direction.from==="left"&&r.direction.to==="up"?(h="Left",_="Bottom",u.style.left=r.x-s-l.link_line_width/2+"px",u.style.top=r.y-s+"px"):r.direction.from==="up"&&r.direction.to==="left"&&(h="Right",_="Top",u.style.left=r.x-s-l.link_line_width/2+"px",u.style.top=r.y-s+"px"),u.style[`border${_}Width`]=`${c}px`,u.style[`border${h}Width`]=`${c}px`,u.style[`border${h}Style`]="solid",u.style[`border${_}Style`]="solid",u.style[`border${_}${h}Radius`]=`${s}px`,u},render_arrow(r,a){var s=document.createElement("div"),l=r.y,c=r.x,u=a.link_arrow_size;s.style.setProperty("--dhx-gantt-icon-size",`${u}px`);var h="gantt_link_arrow gantt_link_arrow_"+r.direction;return s.style.top=l+"px",s.style.left=c+"px",s.className=h,s},_get_line:function(r,a){var s=this.get_direction(r,a),l={x:r.x,y:r.y,direction:this.get_direction(r,a)};return s==this.dirs.left||s==this.dirs.right?l.size=Math.abs(r.x-a.x):l.size=Math.abs(r.y-a.y),l},get_direction:function(r,a){return a.x<r.x?this.dirs.left:a.x>r.x?this.dirs.right:a.y>r.y?this.dirs.down:this.dirs.up}},e={path:[],clear:function(){this.path=[]},current:function(){return this.path[this.path.length-1]},point:function(r){return r?(this.path.push(t.copy(r)),r):this.current()},point_to:function(r,a,s){s=s?{x:s.x,y:s.y}:t.copy(this.point());var l=n.dirs;switch(r){case l.left:s.x-=a;break;case l.right:s.x+=a;break;case l.up:s.y-=a;break;case l.down:s.y+=a}return this.point(s)},get_points:function(r,a,s,l){var c=this.get_endpoint(r,a,s,l),u=t.config,h=c.e_y-c.y,_=c.e_x-c.x,g=n.dirs,m=a.getItemHeight(r.source);this.clear(),this.point({x:c.x,y:c.y});var v=2*u.link_arrow_size,$=this.get_line_type(r,a.$getConfig()),x=c.e_x>c.x;if($.from_start&&$.to_start)this.point_to(g.left,v),x?(this.point_to(g.down,h),this.point_to(g.right,_)):(this.point_to(g.right,_),this.point_to(g.down,h)),this.point_to(g.right,v);else if(!$.from_start&&$.to_start)if(h!==0&&(x=c.e_x>c.x+2*v),this.point_to(g.right,v),x)_-=v,this.point_to(g.down,h),this.point_to(g.right,_);else{_-=2*v;var S=h>0?1:-1;this.point_to(g.down,S*(m/2)),this.point_to(g.right,_),this.point_to(g.down,S*(Math.abs(h)-m/2)),this.point_to(g.right,v)}else $.from_start||$.to_start?$.from_start&&!$.to_start&&(h!==0&&(x=c.e_x>c.x-2*v),this.point_to(g.left,v),x?(_+=2*v,S=h>0?1:-1,this.point_to(g.down,S*(m/2)),this.point_to(g.right,_),this.point_to(g.down,S*(Math.abs(h)-m/2)),this.point_to(g.left,v)):(_+=v,this.point_to(g.down,h),this.point_to(g.right,_))):(this.point_to(g.right,v),x?(this.point_to(g.right,_),this.point_to(g.down,h)):(this.point_to(g.down,h),this.point_to(g.right,_)),this.point_to(g.left,v));return this.path},get_line_type:function(r,a){var s=a.links,l=!1,c=!1;return r.type==s.start_to_start?l=c=!0:r.type==s.finish_to_finish?l=c=!1:r.type==s.finish_to_start?(l=!1,c=!0):r.type==s.start_to_finish?(l=!0,c=!1):t.assert(!1,"Invalid link type"),a.rtl&&(l=!l,c=!c),{from_start:l,to_start:c}},get_endpoint:function(r,a,s,l){var c=a.$getConfig(),u=this.get_line_type(r,c),h=u.from_start,_=u.to_start,g=i(s,a,c),m=i(l,a,c);return{x:h?g.left:g.left+g.width,e_x:_?m.left:m.left+m.width,y:g.top+g.rowHeight/2-1,e_y:m.top+m.rowHeight/2-1}}};function i(r,a,s){var l=a.getItemPosition(r);let c=Mv(t,a,r),u=c.maxHeight,h=c.splitChild;const _=t.config.baselines&&(t.config.baselines.render_mode=="separateRow"||t.config.baselines.render_mode=="individualRow")&&r.baselines&&r.baselines.length;let g;c.shrinkHeight&&(l.rowHeight=u);let m=t.getTaskType(r.type)==s.types.milestone;if(m){let v=a.getBarHeight(r.id,!0);g=Math.sqrt(2*v*v),c.shrinkHeight&&u<v&&(v=u,g=u),l.left-=g/2,l.width=g}if(h)if(u>=l.height){const v=Iv(t,r.parent);_||v?m?(l.rowHeight=l.height+4,l.left+=(l.width-l.rowHeight+4)/2,l.width=l.rowHeight-3):l.rowHeight=l.height+6:m&&(l.left+=(g-l.height)/2)}else l.rowHeight=u+2,m&&(l.left+=(l.width-l.rowHeight+4)/2,l.width=l.rowHeight-3);else _&&(l.rowHeight=l.height+4);return l}return{render:function(r,a,s){var l=t.getTask(r.source);if(l.hide_bar)return;var c=t.getTask(r.target);if(c.hide_bar)return;var u=e.get_endpoint(r,a,l,c),h=u.e_y-u.y;if(!(u.e_x-u.x)&&!h)return null;var _=e.get_points(r,a,l,c);const g=function(x,S){const p=S.link_radius||4,b=S.link_arrow_size||6,k=[];for(let A=0;A<x.length;A++){const I=x[A],C=x[A+1];if(!C||S.link_radius<=1)k.push({type:"line",data:I});else if(I.direction!==C.direction){if(I.size<p||C.size<p){k.push({type:"line",data:I});continue}I.size-=p,k.push({type:"line",data:I});let M=I.x,N=I.y-S.link_line_width/2;switch(I.direction){case"right":M+=I.size;break;case"left":M-=I.size;break;case"down":N+=I.size;break;case"up":N-=I.size}const P={x:M,y:N,direction:{from:I.direction,to:C.direction},radius:p};switch(k.push({type:"corner",data:P}),C.direction){case"right":C.x+=p,C.size-=p;break;case"left":C.x-=p,C.size-=p;break;case"down":C.y+=p,C.size-=p;break;case"up":C.y-=p,C.size-=p}}else k.push({type:"line",data:I})}const w=x[x.length-1];if(w.direction==="right"||w.direction==="left"){w.size-=3*b/4;let A=w.direction==="right"?w.x+w.size:w.x-w.size-b/2,I=w.y-S.link_line_width/2-b/2+1;w.direction==="left"?(I-=1,A-=2):A-=1;const C={x:A,y:I,size:b,direction:w.direction};k.push({type:"line",data:w}),k.push({type:"arrow",data:C})}else k.push({type:"line",data:w});return k}(n.get_lines(_,a).filter(x=>x.size>0),s),m=function(x,S,p,b){const k=document.createElement("div");return x.forEach(w=>{let A;w.type==="line"?A=n.render_line(w.data,null,S,p.source):w.type==="corner"?A=n.render_corner(w.data,S):w.type==="arrow"&&(A=n.render_arrow(w.data,b)),k.appendChild(A)}),k}(g,a,r,s);var v="gantt_task_link";r.color&&(v+=" gantt_link_inline_color");var $=t.templates.link_class?t.templates.link_class(r):"";return $&&(v+=" "+$),s.highlight_critical_path&&t.isCriticalLink&&t.isCriticalLink(r)&&(v+=" gantt_critical_link"),m.className=v,a.$config.link_attribute&&(m.setAttribute(a.$config.link_attribute,r.id),m.setAttribute("link_id",r.id)),r.color&&m.style.setProperty("--dhx-gantt-link-background",r.color),t._waiAria.linkAttr(r,m),m},update:null,isInViewPort:Uc,getVisibleRange:Fc()}}function Xk(t,n,e,i,r){if(r.$ui.getView("grid")&&(r.config.keyboard_navigation&&r.getSelectedId()||r.ext.inlineEditors&&r.ext.inlineEditors.getState().id))return!!t.$expanded_branch;var a=e.getItemTop(t.id),s=e.getItemHeight(t.id);return!(a>n.y_end||a+s<n.y)}function Zk(t){let n={};return t.$data.tasksStore.attachEvent("onStoreUpdated",function(){n={}}),function(e,i,r,a){const s=e.id+"_"+i+"_"+r.unit+"_"+r.step;let l;return l=n[s]?n[s]:n[s]=function(c,u,h,_){let g,m=!1,v={};t.config.process_resource_assignments&&u===t.config.resource_property?(g=c.$role=="task"?t.getResourceAssignments(c.$resource_id,c.$task_id):t.getResourceAssignments(c.id),m=!0):g=c.$role=="task"?[]:t.getTaskBy(u,c.id),v=function(C,M,N){const P=M.unit,B=M.step,W={},j={};for(let q=0;q<C.length;q++){const Y=C[q];let Z=Y;if(N&&(Z=t.getTask(Y.task_id)),Z.unscheduled)continue;let it=Y.start_date||Z.start_date,mt=Y.end_date||Z.end_date;N&&(Y.start_date&&(it=new Date(Math.max(Y.start_date.valueOf(),Z.start_date.valueOf()))),Y.end_date&&(mt=new Date(Math.min(Y.end_date.valueOf(),Z.end_date.valueOf()))),Y.mode&&Y.mode=="fixedDates"&&(it=Y.start_date,mt=Y.end_date));let It=fi(M.trace_x,it.valueOf()),Lt=new Date(M.trace_x[It]||t.date[P+"_start"](new Date(it))),vt=new Date(Math.min(it.valueOf(),Lt.valueOf())),Yt=t.config.work_time?t.getTaskCalendar(Z):t;for(j[Yt.id]={};vt<mt;){const Ut=j[Yt.id],gt=vt.valueOf();vt=t.date.add(vt,B,P),Ut[gt]!==!1&&(W[gt]||(W[gt]={tasks:[],assignments:[]}),W[gt].tasks.push(Z),N&&W[gt].assignments.push(Y))}}return W}(g,h,m);const $=h.unit,x=h.step,S=[];let p,b,k,w,A;const I=_.$getConfig();for(let C=0;C<h.trace_x.length;C++)p=new Date(h.trace_x[C]),b=t.date.add(p,x,$),A=v[p.valueOf()]||{},k=A.tasks||[],w=A.assignments||[],k.length||I.resource_render_empty_cells?S.push({start_date:p,end_date:b,tasks:k,assignments:w}):S.push(null);return S}(e,i,r,a),l}}const Qk={init:function(t,n){var e=t.$services.getService("dnd");if(n.$config.bind&&t.getDatastore(n.$config.bind)){var i=new e(n.$grid_data,{updates_per_second:60});t.defined(n.$getConfig().dnd_sensitivity)&&(i.config.sensitivity=n.$getConfig().dnd_sensitivity),i.attachEvent("onBeforeDragStart",t.bind(function(l,c){var u=r(c);if(!u||(t.hideQuickInfo&&t.hideQuickInfo(),He(c.target,".gantt_grid_editor_placeholder")))return!1;var h=u.getAttribute(n.$config.item_attribute);if(s(h))return!1;var _=a().getItem(h);return!t.isReadonly(_)&&(i.config.initial_open_state=_.$open,!!t.callEvent("onRowDragStart",[h,c.target||c.srcElement,c])&&void 0)},t)),i.attachEvent("onAfterDragStart",t.bind(function(l,c){var u=r(c);i.config.marker.innerHTML=u.outerHTML;var h=i.config.marker.firstChild;h&&(h.style.position="static"),i.config.id=u.getAttribute(n.$config.item_attribute);var _=a(),g=_.getItem(i.config.id);i.config.index=_.getBranchIndex(i.config.id),i.config.parent=g.parent,g.$open=!1,g.$transparent=!0,this.refreshData()},t)),i.lastTaskOfLevel=function(l){for(var c=null,u=a().getItems(),h=0,_=u.length;h<_;h++)u[h].$level==l&&(c=u[h]);return c?c.id:null},i._getGridPos=t.bind(function(l){var c=Ft(n.$grid_data),u=c.x+n.$grid.scrollLeft,h=l.pos.y-10,_=n.getItemHeight(i.config.id);h<c.y&&(h=c.y);var g=n.getTotalHeight();h>c.y+g-_&&(h=c.y+g-_);const m=c.y+c.height;return h>m-_&&(h=m-_),c.x=u,c.y=h,c},t),i._getTargetY=t.bind(function(l){var c=Ft(n.$grid_data),u=n.$state.scrollTop||0,h=t.$grid_data.getBoundingClientRect().height+u,_=l.pageY-c.y+u;return _>h?_=h:_<u&&(_=u),_},t),i._getTaskByY=t.bind(function(l,c){var u=a();l=l||0;var h=n.getItemIndexByTopPosition(l);return(h=c<h?h-1:h)>u.countVisible()-1?null:u.getIdByIndex(h)},t),i.attachEvent("onDragMove",t.bind(function(l,c){var u=t.$grid_data.getBoundingClientRect(),h=u.height+u.y+(n.$state.scrollTop||0)+window.scrollY,_=i.config,g=i._getGridPos(c);t._waiAria.reorderMarkerAttr(_.marker);var m=n.$getConfig(),v=a();g.y<h?_.marker.style.top=g.y+"px":_.marker.style.top=h+"px",_.marker.style.left=g.x+10+"px";const $=Ft(t.$root);g.width>$.width&&(_.marker.style.width=$.width-10-2+"px",_.marker.style.overflow="hidden");var x=v.getItem(i.config.id),S=i._getTargetY(c),p=i._getTaskByY(S,v.getIndexById(x.id));function b(W,j){return!v.isChildOf(k.id,j.id)&&(W.$level==j.$level||m.order_branch_free)}if(v.exists(p)||(p=i.lastTaskOfLevel(m.order_branch_free?x.$level:0))==i.config.id&&(p=null),v.exists(p)){var k=v.getItem(p),w=n.getItemTop(k.id),A=n.getItemHeight(k.id);if(w+A/2<S){var I=v.getIndexById(k.id),C=v.getNext(k.id),M=v.getItem(C);if(s(C)){var N=v.getPrev(M.id);M=v.getItem(N)}if(M){if(M.id==x.id)return m.order_branch_free&&v.isChildOf(x.id,k.id)&&v.getChildren(k.id).length==1?void v.move(x.id,v.getBranchIndex(k.id)+1,v.getParent(k.id)):void 0;k=M}else if(C=v.getIdByIndex(I),M=v.getItem(C),s(C)&&(N=v.getPrev(M.id),M=v.getItem(N)),b(M,x)&&M.id!=x.id)return void v.move(x.id,-1,v.getParent(M.id))}else if(m.order_branch_free&&k.id!=x.id&&b(k,x)&&!s(k.id)){if(!v.hasChild(k.id))return k.$open=!0,void v.move(x.id,-1,k.id);if(v.getIndexById(k.id)||A/3<S)return}I=v.getIndexById(k.id),N=v.getIdByIndex(I-1);for(var P=v.getItem(N),B=1;(!P||P.id==k.id)&&I-B>=0;)N=v.getIdByIndex(I-B),P=v.getItem(N),B++;if(x.id==k.id||s(k.id))return;b(k,x)&&x.id!=k.id?v.move(x.id,0,0,k.id):k.$level!=x.$level-1||v.getChildren(k.id).length?P&&b(P,x)&&x.id!=P.id&&v.move(x.id,-1,v.getParent(P.id)):v.move(x.id,0,k.id)}return!0},t)),i.attachEvent("onDragEnd",t.bind(function(){var l=a(),c=l.getItem(i.config.id);c.$transparent=!1,c.$open=i.config.initial_open_state,this.callEvent("onBeforeRowDragEnd",[i.config.id,i.config.parent,i.config.index])===!1?(l.move(i.config.id,i.config.index,i.config.parent),c.$drop_target=null):this.callEvent("onRowDragEnd",[i.config.id,c.$drop_target]),t.render(),this.refreshData()},t))}function r(l){return ye(l,n.$config.item_attribute)}function a(){return t.getDatastore(n.$config.bind)}function s(l){return vi(l,t,a())}}},le={createDropTargetObject:function(t){var n={targetParent:null,targetIndex:0,targetId:null,child:!1,nextSibling:!1,prevSibling:!1};return t&&ut(n,t,!0),n},nextSiblingTarget:function(t,n,e){var i=this.createDropTargetObject();return i.targetId=n,i.nextSibling=!0,i.targetParent=e.getParent(i.targetId),i.targetIndex=e.getBranchIndex(i.targetId),(e.getParent(t)!=i.targetParent||i.targetIndex<e.getBranchIndex(t))&&(i.targetIndex+=1),i},prevSiblingTarget:function(t,n,e){var i=this.createDropTargetObject();return i.targetId=n,i.prevSibling=!0,i.targetParent=e.getParent(i.targetId),i.targetIndex=e.getBranchIndex(i.targetId),e.getParent(t)==i.targetParent&&i.targetIndex>e.getBranchIndex(t)&&(i.targetIndex-=1),i},firstChildTarget:function(t,n,e){var i=this.createDropTargetObject();return i.targetId=n,i.targetParent=i.targetId,i.targetIndex=0,i.child=!0,i},lastChildTarget:function(t,n,e){var i=e.getChildren(n),r=this.createDropTargetObject();return r.targetId=i[i.length-1],r.targetParent=n,r.targetIndex=i.length,r.nextSibling=!0,r}};function qc(t,n,e,i,r){for(var a=n;i.exists(a);){var s=i.calculateItemLevel(i.getItem(a));if((s===e||s===e-1)&&i.getBranchIndex(a)>-1)break;a=r?i.getPrev(a):i.getNext(a)}return i.exists(a)?i.calculateItemLevel(i.getItem(a))===e?r?le.nextSiblingTarget(t,a,i):le.prevSiblingTarget(t,a,i):le.firstChildTarget(t,a,i):null}function Xa(t,n,e,i){return qc(t,n,e,i,!0)}function yc(t,n,e,i){return qc(t,n,e,i,!1)}function bc(t,n,e,i,r,a){var s;if(n!==r.$getRootId()){var l=r.getItem(n),c=r.calculateItemLevel(l);if(c===a){var u=r.getPrevSibling(n);e<.5&&!u?s=le.prevSiblingTarget(t,n,r):(e<.5&&(n=u),s=le.nextSiblingTarget(t,n,r))}else if(c>a)r.eachParent(function(v){r.calculateItemLevel(v)===a&&(n=v.id)},l),s=Xa(t,n,a,r);else{var h=Xa(t,n,a,r),_=yc(t,n,a,r);s=e<.5?h:_}}else{var g=r.$getRootId(),m=r.getChildren(g);s=le.createDropTargetObject(),s=m.length&&i>=0?Xa(t,function(v){for(var $=v.getNext();v.exists($);){var x=v.getNext($);if(!v.exists(x))return $;$=x}return null}(r),a,r):yc(t,g,a,r)}return s}function xc(t,n){var e=Ft(n.$grid_data);return t.x+=e.x+n.$grid.scrollLeft,t.y+=e.y-n.$grid_data.scrollTop,t}function Za(t,n,e=0){const i=Ft(t.$root);return n>i.width&&(n=i.width-e-2),n}const wc={removeLineHighlight:function(t){t.markerLine&&t.markerLine.parentNode&&t.markerLine.parentNode.removeChild(t.markerLine),t.markerLine=null},highlightPosition:function(t,n,e){var i=function(a,s){var l=Ft(s.$grid_data),c=Ie(a,s.$grid_data),u=l.x+s.$grid.scrollLeft,h=c.y-10,_=s.getItemHeight(a.targetId);h<l.y&&(h=l.y);var g=s.getTotalHeight();return h>l.y+g-_&&(h=l.y+g-_),l.x=u,l.y=h,l.width=Za(s.$gantt,l.width,9),l}(t,e);n.marker.style.left=i.x+9+"px",n.marker.style.width=i.width+"px",n.marker.style.overflow="hidden";var r=n.markerLine;r||((r=document.createElement("div")).className="gantt_drag_marker gantt_grid_dnd_marker",r.innerHTML="<div class='gantt_grid_dnd_marker_line'></div>",r.style.pointerEvents="none"),t.child?function(a,s,l){var c=a.targetParent,u=xc({x:0,y:l.getItemTop(c)},l),h=l.$grid_data.getBoundingClientRect().bottom+window.scrollY;let _=Za(l.$gantt,l.$grid_data.offsetWidth);s.innerHTML="<div class='gantt_grid_dnd_marker_folder'></div>",s.style.width=_+"px",s.style.top=u.y+"px",s.style.left=u.x+"px",s.style.height=l.getItemHeight(c)+"px",u.y>h&&(s.style.top=h+"px")}(t,r,e):function(a,s,l){var c=function(_,g){var m=g.$config.rowStore,v={x:0,y:0},$=g.$grid_data.querySelector(".gantt_tree_indent"),x=15,S=0;$&&(x=$.offsetWidth);var p=40;if(_.targetId!==m.$getRootId()){var b=g.getItemTop(_.targetId),k=g.getItemHeight(_.targetId);if(S=m.exists(_.targetId)?m.calculateItemLevel(m.getItem(_.targetId)):0,_.prevSibling)v.y=b;else if(_.nextSibling){var w=0;m.eachItem(function(A){m.getIndexById(A.id)!==-1&&w++},_.targetId),v.y=b+k+w*k}else v.y=b+k,S+=1}return v.x=p+S*x,v.width=Za(g.$gantt,Math.max(g.$grid_data.offsetWidth-v.x,0),v.x),xc(v,g)}(a,l),u=l.$grid_data.getBoundingClientRect().bottom+window.scrollY;s.innerHTML="<div class='gantt_grid_dnd_marker_line'></div>",s.style.left=c.x+"px",s.style.height="4px";var h=c.y-2;s.style.top=h+"px",s.style.width=c.width+"px",h>u&&(s.style.top=u+"px")}(t,r,e),n.markerLine||(document.body.appendChild(r),n.markerLine=r)}},ty={init:function(t,n){var e=t.$services.getService("dnd");if(n.$config.bind&&t.getDatastore(n.$config.bind)){var i=new e(n.$grid_data,{updates_per_second:60});t.defined(n.$getConfig().dnd_sensitivity)&&(i.config.sensitivity=n.$getConfig().dnd_sensitivity),i.attachEvent("onBeforeDragStart",t.bind(function(l,c){var u=r(c);if(!u||(t.hideQuickInfo&&t.hideQuickInfo(),He(c.target,".gantt_grid_editor_placeholder")))return!1;var h=u.getAttribute(n.$config.item_attribute),_=n.$config.rowStore.getItem(h);return!t.isReadonly(_)&&!a(h)&&(i.config.initial_open_state=_.$open,!!t.callEvent("onRowDragStart",[h,c.target||c.srcElement,c])&&void 0)},t)),i.attachEvent("onAfterDragStart",t.bind(function(l,c){var u=r(c);i.config.marker.innerHTML=u.outerHTML;var h=i.config.marker.firstChild;h&&(i.config.marker.style.opacity=.4,h.style.position="static",h.style.pointerEvents="none"),i.config.id=u.getAttribute(n.$config.item_attribute);var _=n.$config.rowStore,g=_.getItem(i.config.id);i.config.level=_.calculateItemLevel(g),i.config.drop_target=le.createDropTargetObject({targetParent:_.getParent(g.id),targetIndex:_.getBranchIndex(g.id),targetId:g.id,nextSibling:!0}),g.$open=!1,g.$transparent=!0,this.refreshData()},t)),i.attachEvent("onDragMove",t.bind(function(l,c){var u=s(c);return u&&t.callEvent("onBeforeRowDragMove",[i.config.id,u.targetParent,u.targetIndex])!==!1||(u=le.createDropTargetObject(i.config.drop_target)),wc.highlightPosition(u,i.config,n),i.config.drop_target=u,t._waiAria.reorderMarkerAttr(i.config.marker),this.callEvent("onRowDragMove",[i.config.id,u.targetParent,u.targetIndex]),!0},t)),i.attachEvent("onDragEnd",t.bind(function(){var l=n.$config.rowStore,c=l.getItem(i.config.id);wc.removeLineHighlight(i.config),c.$transparent=!1,c.$open=i.config.initial_open_state;var u=i.config.drop_target;this.callEvent("onBeforeRowDragEnd",[i.config.id,u.targetParent,u.targetIndex])===!1?c.$drop_target=null:(l.move(i.config.id,u.targetIndex,u.targetParent),t.render(),this.callEvent("onRowDragEnd",[i.config.id,u.targetParent,u.targetIndex])),l.refresh(c.id)},t))}function r(l){return ye(l,n.$config.item_attribute)}function a(l){return vi(l,t,t.getDatastore(n.$config.bind))}function s(l){var c,u=function(v){var $=Ie(v,n.$grid_data).y,x=n.$config.rowStore;document.doctype||($+=window.scrollY),$=$||0;var S=n.$state.scrollTop||0,p=t.$grid_data.getBoundingClientRect().height+S+window.scrollY,b=S,k=n.getItemIndexByTopPosition(n.$state.scrollTop);if(x.exists(k)||(k=x.countVisible()-1),k<0)return x.$getRootId();var w=x.getIdByIndex(k),A=n.$state.scrollTop/n.getItemHeight(w),I=A-Math.floor(A);I>.1&&I<.9&&(p-=n.getItemHeight(w)*I,b+=n.getItemHeight(w)*(1-I));const C=Ft(n.$grid_data),M=C.y+C.height,N=i.config.marker.offsetHeight;$+N+window.scrollY>=p&&(i.config.marker.style.top=M-N+"px"),$>=p?$=p:$<=b&&($=b,i.config.marker.style.top=C.y+"px");var P=n.getItemIndexByTopPosition($);if(P>x.countVisible()-1||P<0)return x.$getRootId();var B=x.getIdByIndex(P);return a(B)?x.getPrevSibling(B):x.getIdByIndex(P)}(l),h=null,_=n.$config.rowStore,g=!n.$getConfig().order_branch_free,m=Ie(l,n.$grid_data).y;return document.doctype||(m+=window.scrollY),u!==_.$getRootId()&&(h=(m-n.getItemTop(u))/n.getItemHeight(u)),g?(c=bc(i.config.id,u,h,m,_,i.config.level))&&c.targetParent&&a(c.targetParent)&&(u=_.getPrevSibling(c.targetParent),c=bc(i.config.id,u,h,m,_,i.config.level)):c=function(v,$,x,S,p){var b;if($!==p.$getRootId())b=x<.25?le.prevSiblingTarget(v,$,p):!(x>.6)||p.hasChild($)&&p.getItem($).$open?le.firstChildTarget(v,$,p):le.nextSiblingTarget(v,$,p);else{var k=p.$getRootId();b=p.hasChild(k)&&S>=0?le.lastChildTarget(v,k,p):le.firstChildTarget(v,k,p)}return b}(i.config.id,u,h,m,_),c}}};var ey=function(t){return{onCreated:function(n){n.$config=ut(n.$config,{bind:"task"}),n.$config.id=="grid"&&(this.extendGantt(n),t.ext.inlineEditors=t.ext._inlineEditors.createEditors(n),t.ext.inlineEditors.init()),this._mouseDelegates=ys(t)},onInitialized:function(n){var e=n.$getConfig();e.order_branch&&(e.order_branch=="marker"?ty.init(n.$gantt,n):Qk.init(n.$gantt,n)),this.initEvents(n,t),n.$config.id=="grid"&&this.extendDom(n)},onDestroyed:function(n){n.$config.id=="grid"&&t.ext.inlineEditors.detachStore(),this.clearEvents(n,t)},initEvents:function(n,e){this._mouseDelegates.delegate("click","gantt_row",e.bind(function(i,r,a){var s=n.$getConfig();if(r!==null){var l=this.getTask(r);s.scroll_on_click&&!e._is_icon_open_click(i)&&this.showDate(l.start_date),e.callEvent("onTaskRowClick",[r,a])}},e),n.$grid),this._mouseDelegates.delegate("click","gantt_grid_head_cell",e.bind(function(i,r,a){var s=a.getAttribute("data-column-id");if(e.callEvent("onGridHeaderClick",[s,i])){var l=n.$getConfig();if(s!="add"){if(l.sort&&s){for(var c,u=s,h=0;h<l.columns.length;h++)if(l.columns[h].name==s){c=l.columns[h];break}if(c&&c.sort!==void 0&&c.sort!==!0&&!(u=c.sort))return;var _=this._sort&&this._sort.direction&&this._sort.name==s?this._sort.direction:"desc";_=_=="desc"?"asc":"desc",this._sort={name:s,direction:_},this.sort(u,_=="desc")}}else e.$services.getService("mouseEvents").callHandler("click","gantt_add",n.$grid,[i,l.root_id])}},e),n.$grid),this._mouseDelegates.delegate("click","gantt_add",e.bind(function(i,r,a){if(!n.$getConfig().readonly)return this.createTask({},r||e.config.root_id),!1},e),n.$grid)},clearEvents:function(n,e){this._mouseDelegates.destructor(),this._mouseDelegates=null},extendDom:function(n){t.$grid=n.$grid,t.$grid_scale=n.$grid_scale,t.$grid_data=n.$grid_data},extendGantt:function(n){t.getGridColumns=t.bind(n.getGridColumns,n),n.attachEvent("onColumnResizeStart",function(){return t.callEvent("onColumnResizeStart",arguments)}),n.attachEvent("onColumnResize",function(){return t.callEvent("onColumnResize",arguments)}),n.attachEvent("onColumnResizeEnd",function(){return t.callEvent("onColumnResizeEnd",arguments)}),n.attachEvent("onColumnResizeComplete",function(e,i){t.config.grid_width=i}),n.attachEvent("onBeforeRowResize",function(){return t.callEvent("onBeforeRowResize",arguments)}),n.attachEvent("onRowResize",function(){return t.callEvent("onRowResize",arguments)}),n.attachEvent("onBeforeRowResizeEnd",function(){return t.callEvent("onBeforeRowResizeEnd",arguments)}),n.attachEvent("onAfterRowResize",function(){return t.callEvent("onAfterRowResize",arguments)})}}};const ny={createTaskDND:function(){var t;return{extend:function(n){n.roundTaskDates=function(e){t.round_task_dates(e)}},init:function(n,e){return t=function(i,r){var a=r.$services;return{drag:null,dragMultiple:{},_events:{before_start:{},before_finish:{},after_finish:{}},_handlers:{},init:function(){this._domEvents=r._createDomEventScope(),this.clear_drag_state();var s=r.config.drag_mode;this.set_actions(),a.getService("state").registerProvider("tasksDnd",_t(function(){return{drag_id:this.drag?this.drag.id:void 0,drag_mode:this.drag?this.drag.mode:void 0,drag_from_start:this.drag?this.drag.left:void 0}},this));var l={before_start:"onBeforeTaskDrag",before_finish:"onBeforeTaskChanged",after_finish:"onAfterTaskDrag"};for(var c in this._events)for(var u in s)this._events[c][u]=l[c];this._handlers[s.move]=this._move,this._handlers[s.resize]=this._resize,this._handlers[s.progress]=this._resize_progress},set_actions:function(){var s=i.$task_data;this._domEvents.attach(s,"mousemove",r.bind(function(l){this.on_mouse_move(l)},this)),this._domEvents.attach(s,"mousedown",r.bind(function(l){this.on_mouse_down(l)},this)),this._domEvents.attach(document.body,"mouseup",r.bind(function(l){this.on_mouse_up(l)},this))},clear_drag_state:function(){this.drag={id:null,mode:null,pos:null,start_x:null,start_y:null,obj:null,left:null},this.dragMultiple={}},_resize:function(s,l,c){var u=i.$getConfig(),h=this._drag_task_coords(s,c);c.left?(s.start_date=r.dateFromPos(h.start+l),s.start_date||(s.start_date=new Date(r.getState().min_date))):(s.end_date=r.dateFromPos(h.end+l),s.end_date||(s.end_date=new Date(r.getState().max_date)));var _=this._calculateMinDuration(u.min_duration,u.duration_unit);s.end_date-s.start_date<u.min_duration&&(c.left?s.start_date=r.calculateEndDate(s.end_date,-_,u.duration_unit,s):s.end_date=r.calculateEndDate(s.start_date,_,u.duration_unit,s)),r._init_task_timing(s)},_calculateMinDuration:function(s,l){return Math.ceil(s/{minute:6e4,hour:36e5,day:864e5,week:6048e5,month:24192e5,year:31356e6}[l])},_resize_progress:function(s,l,c){var u=this._drag_task_coords(s,c),h=i.$getConfig().rtl?u.start-c.pos.x:c.pos.x-u.start,_=Math.max(0,h);s.progress=Math.min(1,_/Math.abs(u.end-u.start))},_find_max_shift:function(s,l){var c;for(var u in s){var h=s[u],_=r.getTask(h.id),g=this._drag_task_coords(_,h),m=r.posFromDate(new Date(r.getState().min_date)),v=r.posFromDate(new Date(r.getState().max_date));if(g.end+l>v){var $=v-g.end;($<c||c===void 0)&&(c=$)}else if(g.start+l<m){var x=m-g.start;(x>c||c===void 0)&&(c=x)}}return c},_move:function(s,l,c,u){var h=this._drag_task_coords(s,c),_=null,g=null;u?(_=new Date(+c.obj.start_date+u),g=new Date(+c.obj.end_date+u)):(_=r.dateFromPos(h.start+l),g=r.dateFromPos(h.end+l)),_?g?(s.start_date=_,s.end_date=g):(s.end_date=new Date(r.getState().max_date),s.start_date=r.dateFromPos(r.posFromDate(s.end_date)-(h.end-h.start))):(s.start_date=new Date(r.getState().min_date),s.end_date=r.dateFromPos(r.posFromDate(s.start_date)+(h.end-h.start)))},_drag_task_coords:function(s,l){return{start:l.obj_s_x=l.obj_s_x||r.posFromDate(s.start_date),end:l.obj_e_x=l.obj_e_x||r.posFromDate(s.end_date)}},_mouse_position_change:function(s,l){var c=s.x-l.x,u=s.y-l.y;return Math.sqrt(c*c+u*u)},_is_number:function(s){return!isNaN(parseFloat(s))&&isFinite(s)},on_mouse_move:function(s){if(this.drag.start_drag){var l=Ie(s,r.$task_data),c=this.drag.start_drag.start_x,u=this.drag.start_drag.start_y;(Date.now()-this.drag.timestamp>50||this._is_number(c)&&this._is_number(u)&&this._mouse_position_change({x:c,y:u},l)>20)&&this._start_dnd(s)}if(this.drag.mode){if(!Rc(this,40))return;this._update_on_move(s)}},_update_item_on_move:function(s,l,c,u,h,_){var g=r.getTask(l),m=r.mixin({},g),v=r.mixin({},g);this._handlers[c].apply(this,[v,s,u,_]),r.mixin(g,v,!0),r.callEvent("onTaskDrag",[g.id,c,v,m,h]),r.mixin(g,v,!0),r.refreshTask(l)},_update_on_move:function(s){var l=this.drag,c=i.$getConfig();if(l.mode){var u=Ie(s,i.$task_data);if(l.pos&&l.pos.x==u.x)return;l.pos=u;var h=r.dateFromPos(u.x);if(!h||isNaN(h.getTime()))return;var _=u.x-l.start_x,g=r.getTask(l.id);if(this._handlers[l.mode]){if(l.mode===c.drag_mode.move){var m={};this._isMultiselect()&&r.getSelectedTasks().indexOf(l.id)>=0&&(m=this.dragMultiple);var v=!1;if(r.isSummaryTask(g)&&r.config.drag_project){var $={};$[l.id]=qt(l),v=!0,m=ut($,this.dragMultiple)}var x=this._find_max_shift(m,_);for(var S in x!==void 0&&(_=x),this._update_item_on_move(_,l.id,l.mode,l,s),m){var p=m[S];if(v&&p.id!=l.id&&(r._bulk_dnd=!0),x===void 0&&(v||Object.keys(m).length>1))var b=h-r.dateFromPos(l.start_x);this._update_item_on_move(_,p.id,p.mode,p,s,b)}r._bulk_dnd=!1}else this._update_item_on_move(_,l.id,l.mode,l,s);r._update_parents(l.id)}}},on_mouse_down:function(s,l){if(s.button!=2||s.button===void 0){var c=i.$getConfig(),u=r.locate(s),h=null;if(r.isTaskExists(u)&&(h=r.getTask(u)),!r.isReadonly(h)&&!this.drag.mode){this.clear_drag_state();var _=ce(l=l||s.target||s.srcElement),g=this._get_drag_mode(_,l);if(!_||!g)return l.parentNode?this.on_mouse_down(s,l.parentNode):void 0;if(g)if(g.mode&&g.mode!=c.drag_mode.ignore&&c["drag_"+g.mode]){if(u=r.locate(l),h=r.copy(r.getTask(u)||{}),r.isReadonly(h))return this.clear_drag_state(),!1;if(r.isSummaryTask(h)&&h.auto_scheduling!==!1&&!c.drag_project&&g.mode!=c.drag_mode.progress)return void this.clear_drag_state();g.id=u;var m=Ie(s,r.$task_data);g.start_x=m.x,g.start_y=m.y,g.obj=h,this.drag.start_drag=g,this.drag.timestamp=Date.now()}else this.clear_drag_state();else if(r.checkEvent("onMouseDown")&&r.callEvent("onMouseDown",[_.split(" ")[0]])&&l.parentNode)return this.on_mouse_down(s,l.parentNode)}}},_fix_dnd_scale_time:function(s,l){var c=i.$getConfig(),u=r.getScale().unit,h=r.getScale().step;function _(g){if(r.config.correct_work_time){var m=i.$getConfig();r.isWorkTime(g.start_date,void 0,g)||(g.start_date=r.calculateEndDate({start_date:g.start_date,duration:-1,unit:m.duration_unit,task:g}))}}c.round_dnd_dates||(u="minute",h=c.time_step),l.mode==c.drag_mode.resize?l.left?(s.start_date=r.roundDate({date:s.start_date,unit:u,step:h}),_(s)):(s.end_date=r.roundDate({date:s.end_date,unit:u,step:h}),function(g){if(r.config.correct_work_time){var m=i.$getConfig();r.isWorkTime(new Date(g.end_date-1),void 0,g)||(g.end_date=r.calculateEndDate({start_date:g.end_date,duration:1,unit:m.duration_unit,task:g}))}}(s)):l.mode==c.drag_mode.move&&(s.start_date=r.roundDate({date:s.start_date,unit:u,step:h}),_(s),s.end_date=r.calculateEndDate(s))},_fix_working_times:function(s,l){var c=i.$getConfig();(l=l||{mode:c.drag_mode.move}).mode==c.drag_mode.resize?l.left?s.start_date=r.getClosestWorkTime({date:s.start_date,dir:"future",task:s}):s.end_date=r.getClosestWorkTime({date:s.end_date,dir:"past",task:s}):l.mode==c.drag_mode.move&&r.correctTaskWorkTime(s)},_finalize_mouse_up:function(s,l,c,u){var h=r.getTask(s);if(l.work_time&&l.correct_work_time&&this._fix_working_times(h,c),this._fix_dnd_scale_time(h,c),this._fireEvent("before_finish",c.mode,[s,c.mode,r.copy(c.obj),u])){var _=s;r._init_task_timing(h),this.clear_drag_state(),r.updateTask(h.id),this._fireEvent("after_finish",c.mode,[_,c.mode,u])}else this.clear_drag_state(),s==c.id&&(c.obj._dhx_changed=!1,r.mixin(h,c.obj,!0)),r.refreshTask(h.id)},on_mouse_up:function(s){var l=this.drag;if(l.mode&&l.id){var c=i.$getConfig(),u=r.getTask(l.id),h=this.dragMultiple,_=!1,g=0;l.mode===c.drag_mode.move&&(r.isSummaryTask(u)&&c.drag_project||this._isMultiselect())&&(_=!0,g=Object.keys(h).length);var m=function(){if(_)for(var v in h)h[v].id!=l.id&&this._finalize_mouse_up(h[v].id,c,h[v],s);this._finalize_mouse_up(l.id,c,l,s)};_&&g>10?r.batchUpdate((function(){m.call(this)}).bind(this)):m.call(this)}this.clear_drag_state()},_get_drag_mode:function(s,l){var c=i.$getConfig().drag_mode,u={mode:null,left:null};switch((s||"").split(" ")[0]){case"gantt_task_line":case"gantt_task_content":u.mode=c.move;break;case"gantt_task_drag":u.mode=c.resize;var h=l.getAttribute("data-bind-property");u.left=h=="start_date";break;case"gantt_task_progress_drag":u.mode=c.progress;break;case"gantt_link_control":case"gantt_link_point":u.mode=c.ignore;break;default:u=null}return u},_start_dnd:function(s){var l=this.drag=this.drag.start_drag;delete l.start_drag;var c=i.$getConfig(),u=l.id;if(c["drag_"+l.mode]&&r.callEvent("onBeforeDrag",[u,l.mode,s])&&this._fireEvent("before_start",l.mode,[u,l.mode,s])){delete l.start_drag;var h=r.getTask(u);if(r.isReadonly(h))return void this.clear_drag_state();if(this._isMultiselect()){var _=r.getSelectedTasks();_.indexOf(l.id)>=0&&bn(_,r.bind(function(g){var m=r.getTask(g);r.isSummaryTask(m)&&r.config.drag_project&&l.mode==c.drag_mode.move&&this._addSubtasksToDragMultiple(m.id),this.dragMultiple[g]=r.mixin({id:m.id,obj:r.copy(m)},this.drag)},this))}r.isSummaryTask(h)&&r.config.drag_project&&l.mode==c.drag_mode.move&&this._addSubtasksToDragMultiple(h.id),r.callEvent("onTaskDragStart",[])}else this.clear_drag_state()},_fireEvent:function(s,l,c){r.assert(this._events[s],"Invalid stage:{"+s+"}");var u=this._events[s][l];return r.assert(u,"Unknown after drop mode:{"+l+"}"),r.assert(c,"Invalid event arguments"),!r.checkEvent(u)||r.callEvent(u,c)},round_task_dates:function(s){var l=this.drag,c=i.$getConfig();l||(l={mode:c.drag_mode.move}),this._fix_dnd_scale_time(s,l)},destructor:function(){this._domEvents.detachAll()},_isMultiselect:function(){return r.config.drag_multiple&&!!(r.getSelectedTasks&&r.getSelectedTasks().length>0)},_addSubtasksToDragMultiple:function(s){r.eachTask(function(l){this.dragMultiple[l.id]=r.mixin({id:l.id,obj:r.copy(l)},this.drag)},s,this)}}}(n,e),n._tasks_dnd=t,t.init(e)},destructor:function(){t&&(t.destructor(),t=null)}}}};var iy=function(t,n){var e,i,r,a,s;function l(){return{link_source_id:a,link_target_id:i,link_from_start:s,link_to_start:r,link_landing_area:e}}var c=n.$services,u=c.getService("state"),h=c.getService("dnd");u.registerProvider("linksDnD",l);var _="gantt_link_point",g="gantt_link_control",m=new h(t.$task_bars,{sensitivity:0,updates_per_second:60,mousemoveContainer:n.$root,selector:"."+_,preventDefault:!0});function v(b,k){var w,A=m.getPosition(b),I=function(j){var q=0,Y=0;return j&&(q=j.offsetWidth||0,Y=j.offsetHeight||0),{width:q,height:Y}}(k),C={right:(w=n.$root).offsetWidth,bottom:w.offsetHeight},M=n.config.tooltip_offset_x||10,N=n.config.tooltip_offset_y||10,P=n.config.scroll_size||18,B=n.$container.getBoundingClientRect().y+window.scrollY,W={y:A.y+N,x:A.x+M,bottom:A.y+I.height+N+P,right:A.x+I.width+M+P};return W.bottom>C.bottom+B&&(W.y=C.bottom+B-I.height-N),W.right>C.right&&(W.x=C.right-I.width-M),W}function $(b){var k=l();k.link_source_id&&k.link_target_id&&n.isLinkAllowed(k.link_source_id,k.link_target_id,k.link_from_start,k.link_to_start);var w="<div class='"+n.templates.drag_link_class(k.link_source_id,k.link_from_start,k.link_target_id,k.link_to_start)+"'>"+n.templates.drag_link(k.link_source_id,k.link_from_start,k.link_target_id,k.link_to_start)+"</div>";b.innerHTML=w}function x(){a=s=i=null,r=!0}function S(b,k,w,A){var I=function(){return m._direction&&m._direction.parentNode||(m._direction=document.createElement("div"),t.$task_links.appendChild(m._direction)),m._direction}(),C=l(),M=["gantt_link_direction"];n.templates.link_direction_class&&M.push(n.templates.link_direction_class(C.link_source_id,C.link_from_start,C.link_target_id,C.link_to_start));var N=Math.sqrt(Math.pow(w-b,2)+Math.pow(A-k,2));if(N=Math.max(0,N-3)){I.className=M.join(" ");var P=(A-k)/(w-b),B=Math.atan(P);p(b,w,k,A)==2?B+=Math.PI:p(b,w,k,A)==3&&(B-=Math.PI);var W=Math.sin(B),j=Math.cos(B),q=Math.round(k),Y=Math.round(b),Z=["-webkit-transform: rotate("+B+"rad)","-moz-transform: rotate("+B+"rad)","-ms-transform: rotate("+B+"rad)","-o-transform: rotate("+B+"rad)","transform: rotate("+B+"rad)","width:"+Math.round(N)+"px"];if(window.navigator.userAgent.indexOf("MSIE 8.0")!=-1){Z.push('-ms-filter: "'+function(It,Lt){return"progid:DXImageTransform.Microsoft.Matrix(M11 = "+Lt+",M12 = -"+It+",M21 = "+It+",M22 = "+Lt+",SizingMethod = 'auto expand')"}(W,j)+'"');var it=Math.abs(Math.round(b-w)),mt=Math.abs(Math.round(A-k));switch(p(b,w,k,A)){case 1:q-=mt;break;case 2:Y-=it,q-=mt;break;case 3:Y-=it}}Z.push("top:"+q+"px"),Z.push("left:"+Y+"px"),I.style.cssText=Z.join(";")}}function p(b,k,w,A){return k>=b?A<=w?1:4:A<=w?2:3}m.attachEvent("onBeforeDragStart",n.bind(function(b,k){var w=k.target||k.srcElement;if(x(),n.getState("tasksDnd").drag_id)return!1;if(on(w,_)){on(w,"task_start_date")&&(s=!0);var A=n.locate(k);a=A;var I=n.getTask(A);return n.isReadonly(I)?(x(),!1):(this._dir_start={x:m.config.original_element_sizes.x+m.config.original_element_sizes.width/2,y:m.config.original_element_sizes.y+m.config.original_element_sizes.height/2},!0)}return!1},this)),m.attachEvent("onAfterDragStart",n.bind(function(b,k){n.config.touch&&n.refreshData(),$(m.config.marker)},this)),m.attachEvent("onDragMove",n.bind(function(b,k){var w=m.config,A=v(k,w.marker);(function(j,q){j.style.left=q.x+"px",j.style.top=q.y+"px"})(w.marker,A);var I=!!on(k,g),C=i,M=e,N=r,P=n.locate(k),B=!0;if(Qt(xn(k),n.$root)||(I=!1,P=null),I&&(B=!on(k,"task_end_date"),I=!!P),i=P,e=I,r=B,I){const j=on(k,g).querySelector(`.${_}`);if(j){const q=Cc(j,t.$task_bg);this._dir_end={x:q.x+j.offsetWidth/2,y:q.y+j.offsetHeight/2}}}else this._dir_end=Ie(k,t.$task_data),n.env.isEdge&&(this._dir_end.y+=window.scrollY);var W=!(M==I&&C==P&&N==B);return W&&(C&&n.refreshTask(C,!1),P&&n.refreshTask(P,!1)),W&&$(w.marker),S(this._dir_start.x,this._dir_start.y,this._dir_end.x,this._dir_end.y),!0},this)),m.attachEvent("onDragEnd",n.bind(function(){var b=l();if(b.link_source_id&&b.link_target_id&&b.link_source_id!=b.link_target_id){var k=n._get_link_type(b.link_from_start,b.link_to_start),w={source:b.link_source_id,target:b.link_target_id,type:k};w.type&&n.isLinkAllowed(w)&&n.callEvent("onLinkCreated",[w])&&n.addLink(w)}x(),n.config.touch?n.refreshData():(b.link_source_id&&n.refreshTask(b.link_source_id,!1),b.link_target_id&&n.refreshTask(b.link_target_id,!1)),m._direction&&(m._direction.parentNode&&m._direction.parentNode.removeChild(m._direction),m._direction=null)},this)),n.attachEvent("onGanttRender",n.bind(function(){m._direction&&S(this._dir_start.x,this._dir_start.y,this._dir_end.x,this._dir_end.y)},this))};const ry=function(){return{init:iy}};var ay=function(t){var n=t.$services;return{onCreated:function(e){var i=e.$config;i.bind=Mt(i.bind)?i.bind:"task",i.bindLinks=Mt(i.bindLinks)?i.bindLinks:"link",e._linksDnD=ry(),e._tasksDnD=ny.createTaskDND(),e._tasksDnD.extend(e),this._mouseDelegates=ys(t)},onInitialized:function(e){this._attachDomEvents(t),this._attachStateProvider(t,e),e._tasksDnD.init(e,t),e._linksDnD.init(e,t),e.$config.id=="timeline"&&this.extendDom(e)},onDestroyed:function(e){this._clearDomEvents(t),this._clearStateProvider(t),e._tasksDnD&&e._tasksDnD.destructor()},extendDom:function(e){t.$task=e.$task,t.$task_scale=e.$task_scale,t.$task_data=e.$task_data,t.$task_bg=e.$task_bg,t.$task_links=e.$task_links,t.$task_bars=e.$task_bars},_clearDomEvents:function(){this._mouseDelegates.destructor(),this._mouseDelegates=null},_attachDomEvents:function(e){function i(r,a){if(r&&this.callEvent("onLinkDblClick",[r,a])){var s=this.getLink(r);if(this.isReadonly(s))return;var l=this.locale.labels.link+" "+this.templates.link_description(this.getLink(r))+" "+this.locale.labels.confirm_link_deleting;window.setTimeout(function(){e._simple_confirm(l,"",function(){e.deleteLink(r)})},this.config.touch?300:1)}}this._mouseDelegates.delegate("click","gantt_task_link",e.bind(function(r,a){var s=this.locate(r,this.config.link_attribute);s&&this.callEvent("onLinkClick",[s,r])},e),this.$task),this._mouseDelegates.delegate("click","gantt_scale_cell",e.bind(function(r,a){var s=Ie(r,e.$task_data),l=e.dateFromPos(s.x),c=Math.floor(e.columnIndexByDate(l)),u=e.getScale().trace_x[c];e.callEvent("onScaleClick",[r,u])},e),this.$task),this._mouseDelegates.delegate("doubleclick","gantt_task_link",e.bind(function(r,a,s){a=this.locate(r,e.config.link_attribute),i.call(this,a,r)},e),this.$task),this._mouseDelegates.delegate("doubleclick","gantt_link_point",e.bind(function(r,a,s){a=this.locate(r);var l=this.getTask(a),c=null;return s.parentNode&&ce(s.parentNode)&&(c=ce(s.parentNode).indexOf("_left")>-1?l.$target[0]:l.$source[0]),c&&i.call(this,c,r),!1},e),this.$task)},_attachStateProvider:function(e,i){var r=i;n.getService("state").registerProvider("tasksTimeline",function(){return{scale_unit:r._tasks?r._tasks.unit:void 0,scale_step:r._tasks?r._tasks.step:void 0}})},_clearStateProvider:function(){n.getService("state").unregisterProvider("tasksTimeline")}}},sy=function(t){return{getVerticalScrollbar:function(){return t.$ui.getView("scrollVer")},getHorizontalScrollbar:function(){return t.$ui.getView("scrollHor")},_legacyGridResizerClass:function(n){for(var e=n.getCellsByType("resizer"),i=0;i<e.length;i++){var r=e[i],a=!1,s=r.$parent.getPrevSibling(r.$id);if(s&&s.$config&&s.$config.id==="grid")a=!0;else{var l=r.$parent.getNextSibling(r.$id);l&&l.$config&&l.$config.id==="grid"&&(a=!0)}a&&(r.$config.css=(r.$config.css?r.$config.css+" ":"")+"gantt_grid_resize_wrap")}},onCreated:function(n){var e=!0;this._legacyGridResizerClass(n),n.attachEvent("onBeforeResize",function(){var i=t.$ui.getView("timeline");i&&(i.$config.hidden=i.$parent.$config.hidden=!t.config.show_chart);var r=t.$ui.getView("grid");if(r){var a=r._getColsTotalWidth(),s=!t.config.show_grid||!t.config.grid_width||a===0;if(e&&!s&&a!==!1&&(t.config.grid_width=a),r.$config.hidden=r.$parent.$config.hidden=s,!r.$config.hidden){var l=r._getGridWidthLimits();if(l[0]&&t.config.grid_width<l[0]&&(t.config.grid_width=l[0]),l[1]&&t.config.grid_width>l[1]&&(t.config.grid_width=l[1]),i&&t.config.show_chart){if(r.$config.width=t.config.grid_width-1,!r.$config.scrollable&&r.$config.scrollY&&t.$root.offsetWidth){var c=r.$gantt.$layout.$container.offsetWidth,u=t.$ui.getView(r.$config.scrollY).$config.width,h=c-(r.$config.width+u)-4;h<0&&(r.$config.width+=h,t.config.grid_width+=h)}if(e)r.$parent.$config.width=t.config.grid_width,r.$parent.$config.group&&t.$layout._syncCellSizes(r.$parent.$config.group,{value:r.$parent.$config.width,isGravity:!1});else if(i&&!Qt(i.$task,n.$view)){if(!r.$config.original_grid_width){var _=t.skins[t.skin];_&&_.config&&_.config.grid_width?r.$config.original_grid_width=_.config.grid_width:r.$config.original_grid_width=0}t.config.grid_width=r.$config.original_grid_width,r.$parent.$config.width=t.config.grid_width}else r.$parent._setContentSize(r.$config.width,null),t.$layout._syncCellSizes(r.$parent.$config.group,{value:t.config.grid_width,isGravity:!1})}else i&&Qt(i.$task,n.$view)&&(r.$config.original_grid_width=t.config.grid_width),e||(r.$parent.$config.width=0)}e=!1}}),this._initScrollStateEvents(n)},_initScrollStateEvents:function(n){t._getVerticalScrollbar=this.getVerticalScrollbar,t._getHorizontalScrollbar=this.getHorizontalScrollbar;var e=this.getVerticalScrollbar(),i=this.getHorizontalScrollbar();e&&e.attachEvent("onScroll",function(r,a,s){var l=t.getScrollState();t.callEvent("onGanttScroll",[l.x,r,l.x,a])}),i&&i.attachEvent("onScroll",function(r,a,s){var l=t.getScrollState();t.callEvent("onGanttScroll",[r,l.y,a,l.y]);var c=t.$ui.getView("grid");c&&c.$grid_data&&!c.$config.scrollable&&(c.$grid_data.style.left=c.$grid.scrollLeft+"px",c.$grid_data.scrollLeft=c.$grid.scrollLeft)}),n.attachEvent("onResize",function(){e&&!t.$scroll_ver&&(t.$scroll_ver=e.$scroll_ver),i&&!t.$scroll_hor&&(t.$scroll_hor=i.$scroll_hor)})},_findGridResizer:function(n,e){for(var i,r=n.getCellsByType("resizer"),a=!0,s=0;s<r.length;s++){var l=r[s];l._getSiblings();var c=l._behind,u=l._front;if(c&&c.$content===e||c.isChild&&c.isChild(e)){i=l,a=!0;break}if(u&&u.$content===e||u.isChild&&u.isChild(e)){i=l,a=!1;break}}return{resizer:i,gridFirst:a}},onInitialized:function(n){var e=t.$ui.getView("grid"),i=this._findGridResizer(n,e);if(i.resizer){var r,a=i.gridFirst,s=i.resizer;if(s.$config.mode!=="x")return;s.attachEvent("onResizeStart",function(l,c){var u=t.$ui.getView("grid"),h=u?u.$parent:null;if(h){var _=u._getGridWidthLimits();u.$config.scrollable||(h.$config.minWidth=_[0]),h.$config.maxWidth=_[1]}return r=a?l:c,t.callEvent("onGridResizeStart",[r])}),s.attachEvent("onResize",function(l,c){var u=a?l:c;return t.callEvent("onGridResize",[r,u])}),s.attachEvent("onResizeEnd",function(l,c,u,h){var _=a?l:c,g=a?u:h,m=t.$ui.getView("grid"),v=m?m.$parent:null;v&&(v.$config.minWidth=void 0);var $=t.callEvent("onGridResizeEnd",[_,g]);return $&&g!==0&&(t.config.grid_width=g),$})}},onDestroyed:function(n){}}};const oy={init:function(t){function n(a,s){var l=s(t);l.onCreated&&l.onCreated(a),a.attachEvent("onReady",function(){l.onInitialized&&l.onInitialized(a)}),a.attachEvent("onDestroy",function(){l.onDestroyed&&l.onDestroyed(a)})}var e=Ek(t);e.registerView("cell",ki),e.registerView("resizer",null),e.registerView("scrollbar",Nk),e.registerView("layout",Vc,function(a){(a.$config?a.$config.id:null)==="main"&&n(a,sy)}),e.registerView("viewcell",Lk),e.registerView("multiview",Mk),e.registerView("timeline",pr,function(a){(a.$config?a.$config.id:null)!=="timeline"&&a.$config.bind!="task"||n(a,ay)}),e.registerView("grid",fs,function(a){(a.$config?a.$config.id:null)!=="grid"&&a.$config.bind!="task"||n(a,ey)}),e.registerView("resourceGrid",fs),e.registerView("resourceTimeline",pr),e.registerView("resourceHistogram",pr);var i=function(a){var s=Dk(a);return{getDataRender:function(l){return a.$services.getService("layer:"+l)||null},createDataRender:function(l){var c=l.name,u=l.defaultContainer,h=l.defaultContainerSibling,_=s.createGroup(u,h,function(g,m){if(!_.filters)return!0;for(var v=0;v<_.filters.length;v++)if(_.filters[v](g,m)===!1)return!1},Ik);return a.$services.setService("layer:"+c,function(){return _}),a.attachEvent("onGanttReady",function(){_.addLayer()}),_},init:function(){var l=this.createDataRender({name:"task",defaultContainer:function(){return a.$task_data?a.$task_data:a.$ui.getView("timeline")?a.$ui.getView("timeline").$task_data:void 0},defaultContainerSibling:function(){return a.$task_links?a.$task_links:a.$ui.getView("timeline")?a.$ui.getView("timeline").$task_links:void 0},filter:function(u){}},a),c=this.createDataRender({name:"link",defaultContainer:function(){return a.$task_data?a.$task_data:a.$ui.getView("timeline")?a.$ui.getView("timeline").$task_data:void 0}},a);return{addTaskLayer:function(u){const h=sn;return typeof u=="function"?u={renderer:{render:u,getVisibleRange:h}}:u.renderer&&!u.renderer.getVisibleRange&&(u.renderer.getVisibleRange=h),u.view="timeline",l.addLayer(u)},_getTaskLayers:function(){return l.getLayers()},removeTaskLayer:function(u){l.removeLayer(u)},_clearTaskLayers:function(){l.clear()},addLinkLayer:function(u){const h=Fc();return typeof u=="function"?u={renderer:{render:u,getVisibleRange:h}}:u.renderer&&!u.renderer.getVisibleRange&&(u.renderer.getVisibleRange=h),u.view="timeline",u&&u.renderer&&(u.renderer.getRectangle||u.renderer.isInViewPort||(u.renderer.isInViewPort=Uc)),c.addLayer(u)},_getLinkLayers:function(){return c.getLayers()},removeLinkLayer:function(u){c.removeLayer(u)},_clearLinkLayers:function(){c.clear()}}}}}(t),r=Yk(t);return t.ext.inlineEditors=r,t.ext._inlineEditors=r,r.init(t),{factory:e,mouseEvents:Ak.init(t),layersApi:i.init(),render:{gridLine:function(){return function(a){return{render:function(s,l,c,u){for(var h=l.getGridColumns(),_=l.$getTemplates(),g=l.$config.rowStore,m=[],v=0;v<h.length;v++){var $,x,S,p=v==h.length-1,b=h[v];b.name=="add"?(x="<div "+(M=a._waiAria.gridAddButtonAttrString(b))+" class='gantt_add'></div>",S=""):(de(x=b.template?b.template(s):s[b.name])&&(x=_.date_grid(x,s,b.name)),x==null&&(x=""),S=x,x="<div class='gantt_tree_content'>"+x+"</div>");var k="gantt_cell"+(p?" gantt_last_cell":""),w=[];if(b.tree){k+=" gantt_cell_tree";for(var A=0;A<s.$level;A++)w.push(_.grid_indent(s));!g.hasChild(s.id)||a.isSplitTask(s)&&!a.config.open_split_tasks?(w.push(_.grid_blank(s)),w.push(_.grid_file(s))):(w.push(_.grid_open(s)),w.push(_.grid_folder(s)))}var I="width:"+(b.width-(p?1:0))+"px;";if(this.defined(b.align)){var C={right:"flex-end",left:"flex-start",center:"center"}[b.align];I+="text-align:"+b.align+";justify-content:"+C+";"}var M=a._waiAria.gridCellAttrString(b,S,s);w.push(x),$="<div class='"+k+"' data-column-index='"+v+"' data-column-name='"+b.name+"' style='"+I+"' "+M+">"+w.join("")+"</div>",m.push($)}switch(k="",g.$config.name){case"task":k=a.getGlobalTaskIndex(s.id)%2==0?"":" odd";break;case"resource":k=g.visibleOrder.indexOf(s.id)%2==0?"":" odd"}if(k+=s.$transparent?" gantt_transparent":"",k+=s.$dataprocessor_class?" "+s.$dataprocessor_class:"",_.grid_row_class){var N=_.grid_row_class.call(a,s.start_date,s.end_date,s);N&&(k+=" "+N)}g.isSelected(s.id)&&(k+=" gantt_selected");var P=document.createElement("div");P.className="gantt_row"+k+" gantt_row_"+a.getTaskType(s.type);var B=l.getItemHeight(s.id);return P.style.height=B+"px",P.style.lineHeight=B+"px",c.smart_rendering&&(P.style.position="absolute",P.style.left="0px",P.style.top=l.getItemTop(s.id)+"px"),l.$config.item_attribute&&(P.setAttribute(l.$config.item_attribute,s.id),P.setAttribute(l.$config.bind+"_id",s.id)),a._waiAria.taskRowAttr(s,P),P.innerHTML=m.join(""),P},update:null,getRectangle:kr,isInViewPort:Xk,getVisibleRange:sn,onrender:function(s,l,c){for(var u=c.getGridColumns(),h=0;h<u.length;h++){var _=u[h];if(_.onrender){var g=l.querySelector("[data-column-name="+_.name+"]");if(g){var m=_.onrender(s,g);if(m&&typeof m=="string")g.innerHTML=m;else if(m&&typeof m=="object"&&a.config.external_render){var v=a.config.external_render;v.isElement(m)&&v.renderElement(m,g)}}}}}}}(t)},taskBg:function(){return function(a){var s={},l={};function c(m,v){return!(!s[m.id][v]||!s[m.id][v].parentNode)}function u(m,v){s[m]&&s[m][v]&&s[m][v].parentNode&&s[m][v].parentNode.removeChild(s[m][v])}function h(m){var v,$=m.$getTemplates();return $.task_cell_class!==void 0?(v=$.task_cell_class,(console.warn||console.log)("gantt.templates.task_cell_class template is deprecated and will be removed soon. Please use gantt.templates.timeline_cell_class instead.")):v=$.timeline_cell_class,v}function _(m){return m.$getTemplates().timeline_cell_content}function g(m,v,$,x,S,p,b,k){var w=m.width[v],A="";if(Ja(v,m,x,a)){var I=p($,m.trace_x[v]),C="";if(b&&(C=b($,m.trace_x[v])),k.static_background){var M=!(!I&&!C);if(!k.static_background_cells||!M)return null}if(s[$.id][v])return l[$.id][v]=v,s[$.id][v];var N=document.createElement("div");return N.style.width=w+"px",A="gantt_task_cell"+(v==S-1?" gantt_last_cell":""),I&&(A+=" "+I),N.className=A,C&&(N.innerHTML=C),N.style.position="absolute",N.style.left=m.left[v]+"px",s[$.id][v]=N,l[$.id][v]=v,N}return null}return{render:function(m,v,$,x){var S=v.$getTemplates(),p=v.getScale(),b=p.count;if($.static_background&&!$.static_background_cells)return null;var k,w=document.createElement("div"),A=h(v),I=_(v);if(k=x&&$.smart_rendering&&!mi(a)?_r(p,x.x):{start:0,end:b-1},$.show_task_cells){s[m.id]={},l[m.id]={};for(var C=k.start;C<=k.end;C++){var M=g(p,C,m,x,b,A,I,$);M&&w.appendChild(M)}}const N=v.$config.rowStore,P=N.getIndexById(m.id)%2!=0;var B=S.task_row_class(m.start_date,m.end_date,m),W="gantt_task_row"+(P?" odd":"")+(B?" "+B:"");if(N.isSelected(m.id)&&(W+=" gantt_selected"),w.className=W,$.smart_rendering?(w.style.position="absolute",w.style.top=v.getItemTop(m.id)+"px",w.style.width="100%"):w.style.position="relative",w.style.height=v.getItemHeight(m.id)+"px",m.id=="timeline_placeholder_task"){var j=0;m.lastTaskId&&(j=v.getItemTop(m.lastTaskId)+v.getItemHeight(m.lastTaskId));var q=(m.row_height||v.$task_data.offsetHeight)-j;q<0&&(q=0),$.smart_rendering&&(w.style.top=j+"px"),w.style.height=q+"px"}return v.$config.item_attribute&&(w.setAttribute(v.$config.item_attribute,m.id),w.setAttribute(v.$config.bind+"_id",m.id)),w},update:function(m,v,$,x,S){var p=$.getScale(),b=p.count,k=h($),w=_($);if(x.show_task_cells){s[m.id]||(s[m.id]={}),l[m.id]||(l[m.id]={});var A=_r(p,S);for(var I in l[m.id]){var C=l[m.id][I];(Number(C)<A.start||Number(C)>A.end)&&u(m.id,C)}l[m.id]={};for(var M=A.start;M<=A.end;M++){var N=g(p,M,m,S,b,k,w,x);!N&&c(m,M)?u(m.id,M):N&&!N.parentNode&&v.appendChild(N)}}},getRectangle:kc,getVisibleRange:sn,prepareData:Kk}}(t)},taskBar:function(){return vc(t)},timedProjectBar:function(){return vc(t)},taskRollupBar:function(){return function(a){const s=Gc(a),l={};function c(_,g,m,v,$){let x=!0;return v.smart_rendering&&(x=gs(_,g,m)),x}function u(_,g,m,v){const $=a.copy(a.getTask(g.id));if($.$rendered_at=_.id,a.callEvent("onBeforeRollupTaskDisplay",[$.id,$,_.id])===!1)return;const x=s($,m);if(!x)return;const S=m.getBarHeight(_.id,g.type==a.config.types.milestone),p=Math.floor((m.getItemHeight(_.id)-S)/2);return x.style.top=v.top+p+"px",x.classList.add("gantt_rollup_child"),x.setAttribute("data-rollup-parent-id",_.id),x}function h(_,g){return _+"_"+g}return{render:function(_,g,m,v){if(_.rollup!==!1&&_.$rollup&&_.$rollup.length){const $=document.createElement("div"),x=a.getTaskPosition(_);return v&&(v.y=0,v.y_end=a.$task_bg.scrollHeight),_.$rollup.forEach(function(S){if(!a.isTaskExists(S))return;const p=a.getTask(S);if(!c(p,v,g,m))return;const b=u(_,p,g,x);b?(l[h(p.id,_.id)]=b,$.appendChild(b)):l[h(p.id,_.id)]=!1}),$}return!1},update:function(_,g,m,v,$){const x=document.createElement("div"),S=a.getTaskPosition(_);$.y=0,$.y_end=a.$task_bg.scrollHeight,_.$rollup.forEach(function(p){const b=a.getTask(p),k=h(b.id,_.id);let w=c(b,$,m,v);if(w!==!!l[k])if(w){const A=u(_,b,m,S);l[k]=A||!1}else l[k]=!1;l[k]&&x.appendChild(l[k]),g.innerHTML="",g.appendChild(x)})},isInViewPort:gs,getVisibleRange:sn}}(t)},taskSplitBar:function(){return hi()},taskConstraints:function(){return hi()},taskDeadline:function(){return hi()},taskBaselines:function(){return hi()},link:function(){return Jk(t)},resourceRow:function(){return function(a){var s=Zk(a),l={};function c(h,_,g,m,v){var $=g.resource_cell_class(_.start_date,_.end_date,h,_.tasks,_.assignments),x=g.resource_cell_value(_.start_date,_.end_date,h,_.tasks,_.assignments),S=v.getItemHeight(h.id)-1;if($||x){var p=v.getItemPosition(h,_.start_date,_.end_date),b=document.createElement("div");return b.setAttribute(v.$config.item_attribute,h.id),b.className=["gantt_resource_marker",$].join(" "),b.style.cssText=["left:"+p.left+"px","width:"+p.width+"px","height:"+S+"px","line-height:"+S+"px","top:"+p.top+"px"].join(";"),x&&(b.innerHTML=x),b}return null}function u(h,_){l[h]&&l[h][_]&&l[h][_].parentNode&&l[h][_].parentNode.removeChild(l[h][_])}return{render:function(h,_,g,m){var v=_.$getTemplates(),$=_.getScale(),x=s(h,g.resource_property,_.getScale(),_),S=!!m,p=[];l[h.id]={};for(var b=_r($,m),k=b.start;k<=b.end;k++){var w=x[k];if(w&&(!S||Ja(k,$,m,a))){var A=c(h,w,v,0,_);A&&(p.push(A),l[h.id][k]=A)}}var I=null;if(p.length){I=document.createElement("div");for(var C=0;C<p.length;C++)I.appendChild(p[C])}return I},update:function(h,_,g,m,v){var $=g.$getTemplates(),x=g.getScale(),S=s(h,m.resource_property,g.getScale(),g),p=_r(x,v),b={};if(l&&l[h.id])for(var k in l[h.id])b[k]=k;for(var w=p.start;w<=p.end;w++){var A=S[w];if(b[w]=!1,A)if(Ja(w,x,v,a))if(l[h.id]&&l[h.id][w])l[h.id]&&l[h.id][w]&&!l[h.id][w].parentNode&&_.appendChild(l[h.id][w]);else{var I=c(h,A,$,0,g);I&&(_.appendChild(I),l[h.id][w]=I)}else u(h.id,w)}for(var k in b)b[k]!==!1&&u(h.id,k)},getRectangle:kc,getVisibleRange:sn}}(t)},resourceHistogram:function(){return hi()},gridTaskRowResizer:function(){return function(a){return{render:function(s,l,c){var u=l.$getConfig(),h=document.createElement("div");return h.className="gantt_task_grid_row_resize_wrap",h.style.top=l.getItemTop(s.id)+l.getItemHeight(s.id)+"px",h.innerHTML="<div class='gantt_task_grid_row_resize' role='cell'></div>",h.setAttribute(u.task_grid_row_resizer_attribute,s.id),a._waiAria.rowResizerAttr(h),h},update:null,getRectangle:kr,getVisibleRange:sn}}(t)}},layersService:{getDataRender:function(a){return i.getDataRender(a,t)},createDataRender:function(a){return i.createDataRender(a,t)}}}}};function Qa(t,n){const e=getComputedStyle(n.$root).getPropertyValue("--dhx-gantt-theme");let i,r=!!e;if(r)i=e;else{var a=n.skin;if(i=a,!a||t)for(var s=document.getElementsByTagName("link"),l=0;l<s.length;l++){var c=s[l].href.match("dhtmlxgantt_([a-z_]+).css");if(c&&(n.skins[c[1]]||!a)){i=c[1];break}}}n._theme_info={theme:i,cssVarTheme:r},n.skin=i||"terrace";var u=n.skins[n.skin]||n.skins.terrace;(function(g,m,v){for(var $ in m)(g[$]===void 0||v)&&(g[$]=m[$])})(n.config,u.config,t),r||(n.config.link_radius=1);var h=n.getGridColumns();for(h[1]&&!n.defined(h[1].width)&&(h[1].width=u._second_column_width),h[2]&&!n.defined(h[2].width)&&(h[2].width=u._third_column_width),l=0;l<h.length;l++){var _=h[l];_.name=="add"&&(_.width||(_.width=44),n.defined(_.min_width)&&n.defined(_.max_width)||(_.min_width=_.min_width||_.width,_.max_width=_.max_width||_.width),_.min_width&&(_.min_width=+_.min_width),_.max_width&&(_.max_width=+_.max_width),_.width&&(_.width=+_.width,_.width=_.min_width&&_.min_width>_.width?_.min_width:_.width,_.width=_.max_width&&_.max_width<_.width?_.max_width:_.width))}u.config.task_height&&(n.config.task_height=u.config.task_height||"full"),u.config.bar_height&&(n.config.bar_height=u.config.bar_height||"full"),u._lightbox_template&&(n._lightbox_template=u._lightbox_template),u._redefine_lightbox_buttons&&(n.config.buttons_right=u._redefine_lightbox_buttons.buttons_right,n.config.buttons_left=u._redefine_lightbox_buttons.buttons_left),n.resetLightbox()}function ly(t){var n=50,e=30,i=10,r=50,a=null,s=!1,l=null,c={started:!1},u={};function h(S){return S&&Qt(S,t.$root)&&S.offsetHeight}function _(){var S=!!document.querySelector(".gantt_drag_marker"),p=!!document.querySelector(".gantt_drag_marker.gantt_grid_resize_area")||!!document.querySelector(".gantt_drag_marker.gantt_row_grid_resize_area"),b=!!document.querySelector(".gantt_link_direction"),k=t.getState(),w=k.autoscroll;return s=S&&!p&&!b,!(!k.drag_mode&&!S||p)||w}function g(S){if(l&&(clearTimeout(l),l=null),S){var p=t.config.autoscroll_speed;p&&p<10&&(p=10),l=setTimeout(function(){a=setInterval($,p||r)},t.config.autoscroll_delay||i)}}function m(S){S?(g(!0),c.started||(c.x=u.x,c.y=u.y,c.started=!0)):(a&&(clearInterval(a),a=null),g(!1),c.started=!1)}function v(S){var p=_();if(!a&&!l||p||m(!1),!t.config.autoscroll||!p)return!1;u={x:S.clientX,y:S.clientY},S.type=="touchmove"&&(u.x=S.targetTouches[0].clientX,u.y=S.targetTouches[0].clientY),!a&&p&&m(!0)}function $(){if(!_())return m(!1),!1;var S=h(t.$task)?t.$task:h(t.$grid)?t.$grid:t.$root;if(S){var p=!1;[".gantt_drag_marker.gantt_grid_resize_area",".gantt_drag_marker .gantt_row.gantt_row_task",".gantt_drag_marker.gantt_grid_dnd_marker"].forEach(function(Y){p=p||!!document.querySelector(Y)}),p&&(S=t.$grid);var b=Ft(S),k=u.x-b.x,w=u.y-b.y+window.scrollY,A=s?0:x(k,b.width,c.x-b.x),I=x(w,b.height,c.y-b.y+window.scrollY),C=t.getScrollState(),M=C.y,N=C.inner_height,P=C.height,B=C.x,W=C.inner_width,j=C.width;(I&&!N||I<0&&!M||I>0&&M+N>=P+2)&&(I=0),(A&&!W||A<0&&!B||A>0&&B+W>=j)&&(A=0);var q=t.config.autoscroll_step;q&&q<2&&(q=2),I*=q||e,((A*=q||e)||I)&&function(Y,Z){var it=t.getScrollState(),mt=null,It=null;Y&&(mt=it.x+Y,mt=Math.min(it.width,mt),mt=Math.max(0,mt)),Z&&(It=it.y+Z,It=Math.min(it.height,It),It=Math.max(0,It)),t.scrollTo(mt,It)}(A,I)}}function x(S,p,b){return S-n<0&&S<b?-1:S>p-n&&S>b?1:0}t.attachEvent("onGanttReady",function(){if(!Bt(t)){var S=yn(t.$root)||document.body;t.eventRemove(S,"mousemove",v),t.event(S,"mousemove",v),t.eventRemove(S,"touchmove",v),t.event(S,"touchmove",v),t.eventRemove(S,"pointermove",v),t.event(S,"pointermove",v)}}),t.attachEvent("onDestroy",function(){m(!1)})}var ts,es;window.jQuery&&(ts=window.jQuery,es=[],ts.fn.dhx_gantt=function(t){if(typeof(t=t||{})!="string"){var n=[];return this.each(function(){if(this&&this.getAttribute)if(this.gantt||window.gantt.$root==this)n.push(typeof this.gantt=="object"?this.gantt:window.gantt);else{var e=window.gantt.$container&&window.Gantt?window.Gantt.getGanttInstance():window.gantt;for(var i in t)i!="data"&&(e.config[i]=t[i]);e.init(this),t.data&&e.parse(t.data),n.push(e)}}),n.length===1?n[0]:n}if(es[t])return es[t].apply(this,[]);ts.error("Method "+t+" does not exist on jQuery.dhx_gantt")});const cy=null;window.dhtmlx&&(window.dhtmlx.attaches||(window.dhtmlx.attaches={}),window.dhtmlx.attaches.attachGantt=function(t,n,e){var i=document.createElement("DIV");e=e||window.gantt,i.id="gantt_"+e.uid(),i.style.width="100%",i.style.height="100%",i.cmp="grid",document.body.appendChild(i),this.attachObject(i.id),this.dataType="gantt",this.dataObj=e;var r=this.vs[this.av];return r.grid=e,e.init(i.id,t,n),i.firstChild.style.border="none",r.gridId=i.id,r.gridObj=i,this.vs[this._viewRestore()].grid}),window.dhtmlXCellObject!==void 0&&(window.dhtmlXCellObject.prototype.attachGantt=function(t,n,e){e=e||window.gantt;var i=document.createElement("DIV");return i.id="gantt_"+e.uid(),i.style.width="100%",i.style.height="100%",i.cmp="grid",document.body.appendChild(i),this.attachObject(i.id),this.dataType="gantt",this.dataObj=e,e.init(i.id,t,n),i.firstChild.style.border="none",i=null,this.callEvent("_onContentAttach",[]),this.dataObj});const dy=null,uy=["ctrlKey","altKey","shiftKey","metaKey"],hy=[[{unit:"month",date:"%M",step:1},{unit:"day",date:"%d",step:1}],[{unit:"day",date:"%d %M",step:1}],[{unit:"day",date:"%d %M",step:1},{unit:"hour",date:"%H:00",step:8}],[{unit:"day",date:"%d %M",step:1},{unit:"hour",date:"%H:00",step:1}]];class _y{constructor(n){this.zoomIn=()=>{const e=this.getCurrentLevel()-1;e<0||this.setLevel(e)},this.zoomOut=()=>{const e=this.getCurrentLevel()+1;e>this._levels.length-1||this.setLevel(e)},this.getCurrentLevel=()=>this._activeLevelIndex,this.getLevels=()=>this._levels,this.setLevel=e=>{const i=this._getZoomIndexByName(e);i===-1&&this.$gantt.assert(i!==-1,"Invalid zoom level for gantt.ext.zoom.setLevel. "+e+" is not an expected value."),this._setLevel(i,0)},this._getZoomIndexByName=e=>{let i=-1;if(typeof e=="string"){if(!isNaN(Number(e))&&this._levels[Number(e)])i=Number(e);else for(let r=0;r<this._levels.length;r++)if(this._levels[r].name===e){i=r;break}}else i=e;return i},this._getVisibleDate=()=>{if(!this.$gantt.$task)return null;const e=this.$gantt.getScrollState().x,i=this.$gantt.$task.offsetWidth;this._visibleDate=this.$gantt.dateFromPos(e+i/2)},this._setLevel=(e,i)=>{this._activeLevelIndex=e;const r=this.$gantt,a=r.copy(this._levels[this._activeLevelIndex]),s=r.copy(a);if(delete s.name,r.mixin(r.config,s,!0),["resourceTimeline","resourceHistogram"].forEach(function(l){const c=r.$ui.getView(l);if(c){const u=c.$getConfig();u.fixed_scales||r.mixin(u,s,!0)}}),r.$root&&r.$task){if(i){const l=this.$gantt.dateFromPos(i+this.$gantt.getScrollState().x);this.$gantt.render();const c=this.$gantt.posFromDate(l);this.$gantt.scrollTo(c-i)}else{const l=this.$gantt.$task.offsetWidth;this._visibleDate||this._getVisibleDate();const c=this._visibleDate;this.$gantt.render();const u=this.$gantt.posFromDate(c);this.$gantt.scrollTo(u-l/2)}this.callEvent("onAfterZoom",[this._activeLevelIndex,a])}},this._attachWheelEvent=e=>{const i=ln.isFF?"wheel":"mousewheel";let r;r=typeof e.element=="function"?e.element():e.element,r&&this._domEvents.attach(r,i,this.$gantt.bind(function(a){if(this._useKey&&(uy.indexOf(this._useKey)<0||!a[this._useKey]))return!1;if(typeof this._handler=="function")return this._handler.apply(this,[a]),!0},this),{passive:!1})},this._defaultHandler=e=>{const i=this.$gantt.$task.getBoundingClientRect().x,r=e.clientX-i;let a=!1;(this.$gantt.env.isFF?-40*e.deltaY:e.wheelDelta)>0&&(a=!0),e.preventDefault(),e.stopPropagation(),this._setScaleSettings(a,r)},this._setScaleDates=()=>{this._initialStartDate&&this._initialEndDate&&(this.$gantt.config.start_date=this._initialStartDate,this.$gantt.config.end_date=this._initialEndDate)},this.$gantt=n,this._domEvents=this.$gantt._createDomEventScope()}init(n){this.$gantt.env.isNode||(this._initialStartDate=n.startDate,this._initialEndDate=n.endDate,this._activeLevelIndex=n.activeLevelIndex?n.activeLevelIndex:0,this._levels=this._mapScales(n.levels||hy),this._handler=n.handler||this._defaultHandler,this._minColumnWidth=n.minColumnWidth||60,this._maxColumnWidth=n.maxColumnWidth||240,this._widthStep=n.widthStep||3/8*n.minColumnWidth,this._useKey=n.useKey,this._initialized||(Le(this),this.$gantt.attachEvent("onGanttScroll",()=>{this._getVisibleDate()})),this._domEvents.detachAll(),n.trigger==="wheel"&&(this.$gantt.$root?this._attachWheelEvent(n):this.$gantt.attachEvent("onGanttReady",()=>{this._attachWheelEvent(n)})),this._initialized=!0,this.setLevel(this._activeLevelIndex))}_mapScales(n){return n.map(e=>Array.isArray(e)?{scales:e}:e)}_setScaleSettings(n,e){n?this._stepUp(e):this._stepDown(e)}_stepUp(n){if(this._activeLevelIndex>=this._levels.length-1)return;let e=this._activeLevelIndex;if(this._setScaleDates(),this._widthStep){let i=this.$gantt.config.min_column_width+this._widthStep;i>this._maxColumnWidth&&(i=this._minColumnWidth,e++),this.$gantt.config.min_column_width=i}else e++;this._setLevel(e,n)}_stepDown(n){if(this._activeLevelIndex<1)return;let e=this._activeLevelIndex;if(this._setScaleDates(),this._widthStep){let i=this.$gantt.config.min_column_width-this._widthStep;i<this._minColumnWidth&&(i=this._maxColumnWidth,e--),this.$gantt.config.min_column_width=i}else e--;this._setLevel(e,n)}}function fy(t){function n(){if(t.config.touch!="force"&&(t.config.touch=t.config.touch&&(navigator.userAgent.indexOf("Mobile")!=-1||navigator.userAgent.indexOf("iPad")!=-1||navigator.userAgent.indexOf("Android")!=-1||navigator.userAgent.indexOf("Touch")!=-1)||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1),t.config.touch){var a=!0;try{document.createEvent("TouchEvent")}catch{a=!1}a?t._touch_events(["touchmove","touchstart","touchend"],function(s){return s.touches&&s.touches.length>1?null:s.touches[0]?{target:s.target,pageX:s.touches[0].pageX,pageY:s.touches[0].pageY,clientX:s.touches[0].clientX,clientY:s.touches[0].clientY}:s},function(){return!1}):window.navigator.pointerEnabled?t._touch_events(["pointermove","pointerdown","pointerup"],function(s){return s.pointerType=="mouse"?null:s},function(s){return!s||s.pointerType=="mouse"}):window.navigator.msPointerEnabled&&t._touch_events(["MSPointerMove","MSPointerDown","MSPointerUp"],function(s){return s.pointerType==s.MSPOINTER_TYPE_MOUSE?null:s},function(s){return!s||s.pointerType==s.MSPOINTER_TYPE_MOUSE})}}function e(a){var s=a.$config.scrollX?t.$ui.getView(a.$config.scrollX):null,l=a.$config.scrollY?t.$ui.getView(a.$config.scrollY):null,c={x:null,y:null};return s&&s.getScrollState().visible&&(c.x=s.$view.scrollLeft),l&&l.getScrollState().visible&&(c.y=l.$view.scrollTop),c}function i(){var a;return t.$ui.getView("timeline")&&(a=t.$ui.getView("timeline")._tasks_dnd),a}t.config.touch_drag=75,t.config.touch=!0,t.config.touch_feedback=!0,t.config.touch_feedback_duration=1,t._prevent_touch_scroll=!1,t._touch_feedback=function(){t.config.touch_feedback&&navigator.vibrate&&navigator.vibrate(t.config.touch_feedback_duration)},t.attachEvent("onGanttReady",function(){t.$container&&n()}),t.attachEvent("onGanttLayoutReady",function(){t.$container&&t.attachEvent("onGanttRender",n,{once:!0})});var r=[];t._touch_events=function(a,s,l){var c,u=0,h=!1,_=!1,g=null,m=null,v=null,$=[],x=null;let S={};for(var p=0;p<r.length;p++)t.eventRemove(r[p][0],r[p][1],r[p][2]);(r=[]).push([t.$container,a[0],function(k){var w=i();if(!l(k)&&h){m&&clearTimeout(m);var A=s(k);if(w&&(w.drag.id||w.drag.start_drag))return w.on_mouse_move(A),k.preventDefault&&k.preventDefault(),k.cancelBubble=!0,!1;if(!t._prevent_touch_scroll){if(A&&g){var I=g.pageX-A.pageX,C=g.pageY-A.pageY;if(!_&&(Math.abs(I)>5||Math.abs(C)>5)&&(_=!0,u=0,c=x?e(x):t.getScrollState()),_){var M,N=c.x+I,P=c.y+C;if(x?(function(B,W,j){var q=B.$config.scrollX?t.$ui.getView(B.$config.scrollX):null,Y=B.$config.scrollY?t.$ui.getView(B.$config.scrollY):null;q&&q.scrollTo(W,null),Y&&Y.scrollTo(null,j)}(x,N,P),M=e(x)):(t.scrollTo(N,P),M=t.getScrollState()),c.x!=M.x&&C>2*I||c.y!=M.y&&I>2*C)return b(k)}}return b(k)}return!0}}]);try{document.addEventListener("touchmove",function(k){t._touch_drag&&b(k)},{passive:!1})}catch{console.warn("Cannot prevent touch event for the page drag")}for(r.push([this.$container,"contextmenu",function(k){if(h)return b(k)}]),r.push([this.$container,a[1],function(k){if(S=k.touches.length,document&&document.body&&document.body.classList.add("gantt_touch_active"),!l(k))if(k.touches&&k.touches.length>1)h=!1;else{g=s(k),x=function(A){for(var I=t.$layout.getCellsByType("viewCell"),C=0;C<I.length;C++){var M=I[C].$view.getBoundingClientRect();if(A.clientX>=M.left&&A.clientX<=M.right&&A.clientY<=M.bottom&&A.clientY>=M.top)return I[C]}}(g),t._locate_css(g,"gantt_hor_scroll")||t._locate_css(g,"gantt_ver_scroll")||(h=!0);var w=i();m=setTimeout(function(){var A=t.locate(g);w&&A&&!t._locate_css(g,"gantt_link_control")&&!t._locate_css(g,"gantt_grid_data")&&(w.on_mouse_down(g),w.drag&&w.drag.start_drag&&(function(I){const C=t._getTaskLayers();let M=t.getTask(I);if(M){let N=t.isTaskVisible(I);if(N){v=I;for(let P=0;P<C.length;P++)if(M=C[P].rendered[I],M&&M.getAttribute(t.config.task_attribute)&&M.getAttribute(t.config.task_attribute)==I){const B=M.cloneNode(!0);$.push(M),C[P].rendered[I]=B,M.style.display="none",B.className+=" gantt_drag_move ",M.parentNode.appendChild(B)}}else if(M.$split_subtask){let P=M.$rendered_parent;if(N=t.isTaskVisible(P),!N)return;v=I;for(let B=0;B<C.length;B++){const W=C[B].rendered[P];let j;if(W&&W.childNodes&&(j=W.querySelector(`[${t.config.task_attribute}="${M.id}"]`)),j){const q=j.cloneNode(!0);j.parentNode.appendChild(q),t.$task_bars.appendChild(j),j.style.display="none",$.push(j),j=null}}}}}(A),w._start_dnd(g),t._touch_drag=!0,t.refreshTask(A),t._touch_feedback())),m=null},t.config.touch_drag)}}]),r.push([this.$container,a[2],function(k){if(document&&document.body&&document.body.classList.remove("gantt_touch_active"),!l(k)){m&&clearTimeout(m),t._touch_drag=!1,h=!1;var w=s(k),A=i();if(A&&A.on_mouse_up(w),v&&t.isTaskExists(v)&&(t.refreshTask(v),$.length&&($.forEach(function(C){C.parentNode&&C.parentNode.removeChild(C)}),t._touch_feedback())),h=_=!1,$=[],v=null,g&&u){var I=new Date;I-u<500&&S<=1?(t.$services.getService("mouseEvents").onDoubleClick(g),b(k)):u=I}else u=new Date}}]),p=0;p<r.length;p++)t.event(r[p][0],r[p][1],r[p][2]);function b(k){return k&&k.preventDefault&&k.cancelable&&k.preventDefault(),k.cancelBubble=!0,!1}}}function fr(){console.log("Method is not implemented.")}function pi(){}function Ye(t){return pi}pi.prototype.render=fr,pi.prototype.set_value=fr,pi.prototype.get_value=fr,pi.prototype.focus=fr;var Yc={getHtmlSelect:function(t,n,e){var i="",r=this;return bn(t=t||[],function(a){var s=[{key:"value",value:a.key}];e==a.key&&(s[s.length]={key:"selected",value:"selected"}),a.attributes&&(s=s.concat(a.attributes)),i+=r.getHtmlOption({innerHTML:a.label},s)}),_i("select",{innerHTML:i},n)},getHtmlOption:function(t,n){return _i("option",t,n)},getHtmlButton:function(t,n){return _i("button",t,n)},getHtmlDiv:function(t,n){return _i("div",t,n)},getHtmlLabel:function(t,n){return _i("label",t,n)},getHtmlInput:function(t){return"<input"+Kc(t||[])+">"}};function _i(t,n,e){return n=n||[],"<"+t+Kc(e||[])+">"+(n.innerHTML||"")+"</"+t+">"}function Kc(t){var n="";return bn(t,function(e){n+=" "+e.key+"='"+e.value+"'"}),n}function mr(t){const n=Ye();function e(){return n.apply(this,arguments)||this}return Dt(e,n),e.prototype.render=function(i){const r=i.height?`height:${i.height}px;`:"";let a=`<div class='gantt_cal_ltext gantt_section_${i.name}' ${r?`style='${r}'`:""}>`;return a+=Yc.getHtmlSelect(i.options,[{key:"style",value:"width:100%;"},{key:"title",value:i.name}]),a+="</div>",a},e.prototype.set_value=function(i,r,a,s){var l=i.firstChild;!l._dhx_onchange&&s.onchange&&(l.onchange=s.onchange,l._dhx_onchange=!0),r===void 0&&(r=(l.options[0]||{}).value),l.value=r||""},e.prototype.get_value=function(i){return i.firstChild.value},e.prototype.focus=function(i){var r=i.firstChild;t._focus(r,!0)},e}function gy(t){var n=mr(t);function e(){return n.apply(this,arguments)||this}function i(r,a){var s=[],l=[];a&&(s=t.getTaskByTime(),r.allow_root&&s.unshift({id:t.config.root_id,text:r.root_label||""}),s=function(_,g,m){var v=g.filter||function(){return!0};_=_.slice(0);for(var $=0;$<_.length;$++){var x=_[$];(x.id==m||t.isChildOf(x.id,m)||v(x.id,x)===!1)&&(_.splice($,1),$--)}return _}(s,r,a),r.sort&&s.sort(r.sort));for(var c=r.template||t.templates.task_text,u=0;u<s.length;u++){var h=c.apply(t,[s[u].start_date,s[u].end_date,s[u]]);h===void 0&&(h=""),l.push({key:s[u].id,label:h})}return r.options=l,r.map_to=r.map_to||"parent",t.form_blocks.select.render.apply(this,arguments)}return Dt(e,n),e.prototype.render=function(r){return i(r,!1)},e.prototype.set_value=function(r,a,s,l){a===0&&(a="0");var c=document.createElement("div");c.innerHTML=i(l,s.id);var u=c.removeChild(c.firstChild);return r.onselect=null,r.parentNode.replaceChild(u,r),t.form_blocks.select.set_value.apply(t,[u,a,s,l])},e}function py(t){var n=function(){const p=Ye();function b(){return p.apply(this,arguments)||this}return Dt(b,p),b.prototype.render=function(k){let w=k.height?`${k.height}px`:"";return`<div class='gantt_cal_ltext gantt_cal_template gantt_section_${k.name}' ${w?`style='height:${w};'`:""}></div>`},b.prototype.set_value=function(k,w){k.innerHTML=w||""},b.prototype.get_value=function(k){return k.innerHTML||""},b.prototype.focus=function(){},b}(),e=function(p){const b=Ye();function k(){return b.apply(this,arguments)||this}return Dt(k,b),k.prototype.render=function(w){const A=(w.height||"130")+"px",I=w.placeholder?`placeholder='${w.placeholder}'`:"";return`<div class='gantt_cal_ltext gantt_section_${w.name}' style='height:${A};' ${I}><textarea></textarea></div>`},k.prototype.set_value=function(w,A){p.form_blocks.textarea._get_input(w).value=A||""},k.prototype.get_value=function(w){return p.form_blocks.textarea._get_input(w).value},k.prototype.focus=function(w){var A=p.form_blocks.textarea._get_input(w);p._focus(A,!0)},k.prototype._get_input=function(w){return w.querySelector("textarea")},k}(t),i=function(p){const b=Ye();function k(){return b.apply(this,arguments)||this}return Dt(k,b),k.prototype.render=function(w){var A=p.form_blocks.getTimePicker.call(this,w);let I="gantt_section_time";w.name!=="time"&&(I+=" gantt_section_"+w.name);var C="<div style='padding-top:0px;font-size:inherit;text-align:center;' class='"+I+"'>";return C+=A,w.single_date?(A=p.form_blocks.getTimePicker.call(this,w,!0),C+="<span></span>"):C+="<span class='gantt_section_time_spacer'> &nbsp;&ndash;&nbsp; </span>",(C+=A)+"</div>"},k.prototype.set_value=function(w,A,I,C){var M=C,N=w.getElementsByTagName("select"),P=C._time_format_order;if(M.auto_end_date)for(var B=function(){q=new Date(N[P[2]].value,N[P[1]].value,N[P[0]].value,0,0),Y=p.calculateEndDate({start_date:q,duration:1,task:I}),p.form_blocks._fill_lightbox_select(N,P.size,Y,P,M)},W=0;W<4;W++)N[W].onchange=B;var j=p._resolve_default_mapping(C);typeof j=="string"&&(j={start_date:j});var q=I[j.start_date]||new Date,Y=I[j.end_date]||p.calculateEndDate({start_date:q,duration:1,task:I});p.form_blocks._fill_lightbox_select(N,0,q,P,M),p.form_blocks._fill_lightbox_select(N,P.size,Y,P,M)},k.prototype.get_value=function(w,A,I){var C,M=w.getElementsByTagName("select"),N=I._time_format_order;return C=p.form_blocks.getTimePickerValue(M,I),typeof p._resolve_default_mapping(I)=="string"?C:{start_date:C,end_date:function(P,B,W){var j=p.form_blocks.getTimePickerValue(P,I,B.size);return j<=W&&(I.autofix_end!==!1||I.single_date)?p.date.add(W,p._get_timepicker_step(),"minute"):j}(M,N,C)}},k.prototype.focus=function(w){p._focus(w.getElementsByTagName("select")[0])},k}(t),r=mr(t),a=function(p){var b=Ye();function k(){return b.apply(this,arguments)||this}return Dt(k,b),k.prototype.render=function(w){const A=w.height?`height:${w.height}px;`:"";let I=`<div class='gantt_cal_ltext gantt_cal_lcheckbox gantt_section_${w.name}' ${A?`style='${A}'`:""}>`;if(w.options&&w.options.length)for(var C=0;C<w.options.length;C++)I+="<label><input type='checkbox' value='"+w.options[C].key+"' name='"+w.name+"'>"+w.options[C].label+"</label>";else w.single_value=!0,I+="<label><input type='checkbox' name='"+w.name+"'></label>";return I+="</div>",I},k.prototype.set_value=function(w,A,I,C){var M=Array.prototype.slice.call(w.querySelectorAll("input[type=checkbox]"));!w._dhx_onchange&&C.onchange&&(w.onchange=C.onchange,w._dhx_onchange=!0),C.single_value?M[0].checked=!!A:bn(M,function(N){N.checked=!!A&&A.indexOf(N.value)>=0})},k.prototype.get_value=function(w,A,I){return I.single_value?w.querySelector("input[type=checkbox]").checked:function(C,M){if(C.map)return C.map(M);for(var N=C.slice(),P=[],B=0;B<N.length;B++)P.push(M(N[B],B));return P}(Array.prototype.slice.call(w.querySelectorAll("input[type=checkbox]:checked")),function(C){return C.value})},k.prototype.focus=function(w){p._focus(w.querySelector("input[type=checkbox]"))},k}(t),s=function(p){const b=Ye();function k(){return b.apply(this,arguments)||this}return Dt(k,b),k.prototype.render=function(w){const A=w.height?`${w.height}px`:"";let I=`<div class='gantt_cal_ltext gantt_cal_lradio gantt_section_${w.name}' ${A?`style='height:${A};'`:""}>`;if(w.options&&w.options.length)for(var C=0;C<w.options.length;C++)I+="<label><input type='radio' value='"+w.options[C].key+"' name='"+w.name+"'>"+w.options[C].label+"</label>";return I+="</div>",I},k.prototype.set_value=function(w,A,I,C){var M;C.options&&C.options.length&&(M=w.querySelector("input[type=radio][value='"+A+"']")||w.querySelector("input[type=radio][value='"+C.default_value+"']"))&&(!w._dhx_onchange&&C.onchange&&(w.onchange=C.onchange,w._dhx_onchange=!0),M.checked=!0)},k.prototype.get_value=function(w,A){var I=w.querySelector("input[type=radio]:checked");return I?I.value:""},k.prototype.focus=function(w){p._focus(w.querySelector("input[type=radio]"))},k}(t),l=function(p){var b=Ye();function k(){return b.apply(this,arguments)||this}function w(C){return C.formatter||new ds}function A(C,M){var N=C.getElementsByTagName("select"),P=M._time_format_order,B=0,W=0;if(p.defined(P[3])){var j=N[P[3]],q=parseInt(j.value,10);isNaN(q)&&j.hasAttribute("data-value")&&(q=parseInt(j.getAttribute("data-value"),10)),B=Math.floor(q/60),W=q%60}return new Date(N[P[2]].value,N[P[1]].value,N[P[0]].value,B,W)}function I(C,M){var N=C.getElementsByTagName("input")[1];return(N=w(M).parse(N.value))&&!window.isNaN(N)||(N=1),N<0&&(N*=-1),N}return Dt(k,b),k.prototype.render=function(C){var M="<div class='gantt_time_selects'>"+p.form_blocks.getTimePicker.call(this,C)+"</div>",N=" "+p.locale.labels[p.config.duration_unit+"s"]+" ",P=C.single_date?" style='display:none'":"",B=C.readonly?" disabled='disabled'":"",W=p._waiAria.lightboxDurationInputAttrString(C),j="gantt_duration_value";C.formatter&&(N="",j+=" gantt_duration_value_formatted");var q="<div class='gantt_duration' "+P+"><div class='gantt_duration_inputs'><input type='button' class='gantt_duration_dec' value=''"+B+"><input type='text' value='5days' class='"+j+"'"+B+" "+W+"><input type='button' class='gantt_duration_inc' value='+'"+B+"></div><div class='gantt_duration_end_date'>"+N+"<span></span></div></div></div>";let Y="gantt_section_time gantt_section_duration";return C.name!=="time"&&(Y+=" gantt_section_"+C.name),"<div style='padding-top:0px;font-size:inherit;' class='"+Y+"'>"+M+" "+q+"</div>"},k.prototype.set_value=function(C,M,N,P){var B,W,j,q,Y=C.getElementsByTagName("select"),Z=C.getElementsByTagName("input"),it=Z[1],mt=[Z[0],Z[2]],It=C.getElementsByTagName("span")[0],Lt=P._time_format_order;function vt(){var Ut=A.call(p,C,P),gt=I.call(p,C,P),te=p.calculateEndDate({start_date:Ut,duration:gt,task:N}),cn=p.templates.task_end_date||p.templates.task_date;It.innerHTML=cn(te)}function Yt(Ut){var gt=it.value;gt=w(P).parse(gt),window.isNaN(gt)&&(gt=0),(gt+=Ut)<1&&(gt=1),it.value=w(P).format(gt),vt()}mt[0].onclick=p.bind(function(){Yt(-1*p.config.duration_step)},this),mt[1].onclick=p.bind(function(){Yt(1*p.config.duration_step)},this),Y[0].onchange=vt,Y[1].onchange=vt,Y[2].onchange=vt,Y[3]&&(Y[3].onchange=vt),it.onkeydown=p.bind(function(Ut){var gt;return(gt=(Ut=Ut||window.event).charCode||Ut.keyCode||Ut.which)==p.constants.KEY_CODES.DOWN?(Yt(-1*p.config.duration_step),!1):gt==p.constants.KEY_CODES.UP?(Yt(1*p.config.duration_step),!1):void window.setTimeout(vt,1)},this),it.onchange=p.bind(vt,this),typeof(B=p._resolve_default_mapping(P))=="string"&&(B={start_date:B}),W=N[B.start_date]||new Date,j=N[B.end_date]||p.calculateEndDate({start_date:W,duration:1,task:N}),q=Math.round(N[B.duration])||p.calculateDuration({start_date:W,end_date:j,task:N}),q=w(P).format(q),p.form_blocks._fill_lightbox_select(Y,0,W,Lt,P),it.value=q,vt()},k.prototype.get_value=function(C,M,N){var P=A(C,N),B=I(C,N),W=p.calculateEndDate({start_date:P,duration:B,task:M});return typeof p._resolve_default_mapping(N)=="string"?P:{start_date:P,end_date:W,duration:B}},k.prototype.focus=function(C){p._focus(C.getElementsByTagName("select")[0])},k}(t),c=gy(t),u=mr(t),h=function(p){var b=Ye();function k(){return b.apply(this,arguments)||this}function w(I){return!I||I===p.config.constraint_types.ASAP||I===p.config.constraint_types.ALAP}function A(I,C){for(var M=w(C),N=0;N<I.length;N++)I[N].disabled=M}return Dt(k,b),k.prototype.render=function(I){const C=I.height?`height:${I.height}px;`:"";let M=`<div class='gantt_cal_ltext gantt_section_${I.name}' ${C?`style='${C}'`:""}>`;var N=[];for(var P in p.config.constraint_types)N.push({key:p.config.constraint_types[P],label:p.locale.labels[p.config.constraint_types[P]]});return I.options=I.options||N,M+="<span data-constraint-type-select>"+Yc.getHtmlSelect(I.options,[{key:"data-type",value:"constraint-type"}])+"</span>",M+="<label data-constraint-time-select>"+(p.locale.labels.constraint_date||"Constraint date")+": "+p.form_blocks.getTimePicker.call(this,I)+"</label>",M+="</div>",M},k.prototype.set_value=function(I,C,M,N){var P=I.querySelector("[data-constraint-type-select] select"),B=I.querySelectorAll("[data-constraint-time-select] select"),W=N._time_format_order,j=p._resolve_default_mapping(N);P._eventsInitialized||(P.addEventListener("change",function(Z){A(B,Z.target.value)}),P._eventsInitialized=!0);var q=M[j.constraint_date]||new Date;p.form_blocks._fill_lightbox_select(B,0,q,W,N);var Y=M[j.constraint_type]||p.getConstraintType(M);P.value=Y,A(B,Y)},k.prototype.get_value=function(I,C,M){var N=I.querySelector("[data-constraint-type-select] select"),P=I.querySelectorAll("[data-constraint-time-select] select"),B=N.value,W=null;return w(B)||(W=p.form_blocks.getTimePickerValue(P,M)),{constraint_type:B,constraint_date:W}},k.prototype.focus=function(I){p._focus(I.querySelector("select"))},k}(t),_=function(p){const b=mr(p);function k(){return b.apply(this,arguments)||this}return Dt(k,b),k.prototype.render=function(w){var A=p.config.types,I=p.locale.labels,C=[],M=w.filter||function(B,W){return!A.placeholder||W!==A.placeholder};for(var N in A)!M(N,A[N])==0&&C.push({key:A[N],label:I["type_"+N]});w.options=C;var P=w.onchange;return w.onchange=function(){p._lightbox_current_type=this.value,p.changeLightboxType(this.value),typeof P=="function"&&P.apply(this,arguments)},b.prototype.render.apply(this,arguments)},k}(t),g=function(p){var b=Ye();function k(){return b.apply(this,arguments)||this}function w(M){return M.formatter||new ds}function A(M,N,P,B){const W="<div class='gantt_time_selects'>"+p.form_blocks.getTimePicker.call(p,B)+"</div>";let j=" "+p.locale.labels[p.config.duration_unit+"s"]+" ";const q=B.single_date?" style='display:none'":"",Y=B.readonly?" disabled='disabled'":"",Z=p._waiAria.lightboxDurationInputAttrString(B),it=p.locale.labels.baselines_remove_button;let mt="gantt_duration_value";B.formatter&&(j="",mt+=" gantt_duration_value_formatted");const It="<div class='gantt_duration' "+q+"><div class='gantt_duration_inputs'><input type='button' class='gantt_duration_dec' value=''"+Y+"><input type='text' value='5days' class='"+mt+"'"+Y+" "+Z+"><input type='button' class='gantt_duration_inc' value='+'"+Y+"></div><div class='gantt_duration_end_date'>"+j+"<span></span></div></div></div>",Lt=`<div><div class='baseline_delete_button gantt_custom_button'>${it}</div></div>`,vt=document.createElement("div");vt.className="gantt_section_time gantt_section_duration",vt.setAttribute("data-baseline-id",N.id),vt.innerHTML=W+It+Lt+"<br>",M.appendChild(vt);var Yt,Ut,gt,te=vt.getElementsByTagName("select"),cn=vt.getElementsByTagName("input"),be=cn[1],Ke=[cn[0],cn[2]],br=vt.getElementsByTagName("span")[0],wn=B._time_format_order;function ee(){var Tt=I.call(p,vt,B),Et=C.call(p,vt,B),xr=p.calculateEndDate({start_date:Tt,duration:Et,task:P}),xe=p.templates.task_end_date||p.templates.task_date;br.innerHTML=xe(xr)}function dn(Tt){var Et=be.value;Et=w(B).parse(Et),window.isNaN(Et)&&(Et=0),(Et+=Tt)<1&&(Et=1),be.value=w(B).format(Et),ee()}vt.querySelector(".baseline_delete_button").onclick=function(Tt){const Et=vt.parentNode;vt.innerHTML="",vt.remove(),Et.innerHTML===""&&(Et.innerHTML=p.locale.labels.baselines_section_placeholder)},Ke[0].onclick=p.bind(function(){dn(-1*p.config.duration_step)},p),Ke[1].onclick=p.bind(function(){dn(1*p.config.duration_step)},p),te[0].onchange=ee,te[1].onchange=ee,te[2].onchange=ee,te[3]&&(te[3].onchange=ee),be.onkeydown=p.bind(function(Tt){var Et;return(Et=(Tt=Tt||window.event).charCode||Tt.keyCode||Tt.which)==p.constants.KEY_CODES.DOWN?(dn(-1*p.config.duration_step),!1):Et==p.constants.KEY_CODES.UP?(dn(1*p.config.duration_step),!1):void window.setTimeout(ee,1)},p),be.onchange=p.bind(ee,p),p._resolve_default_mapping(B),Yt=N.start_date||new Date,Ut=N.end_date||p.calculateEndDate({start_date:Yt,duration:1,task:P}),gt=p.calculateDuration({start_date:Yt,end_date:Ut,task:P}),gt=w(B).format(gt),p.form_blocks._fill_lightbox_select(te,0,Yt,wn,B),be.value=gt,ee()}function I(M,N){var P=M.getElementsByTagName("select"),B=N._time_format_order,W=0,j=0;if(p.defined(B[3])){var q=P[B[3]],Y=parseInt(q.value,10);isNaN(Y)&&q.hasAttribute("data-value")&&(Y=parseInt(q.getAttribute("data-value"),10)),W=Math.floor(Y/60),j=Y%60}return new Date(P[B[2]].value,P[B[1]].value,P[B[0]].value,W,j)}function C(M,N){var P=M.getElementsByTagName("input")[1];return(P=w(N).parse(P.value))&&!window.isNaN(P)||(P=1),P<0&&(P*=-1),P}return Dt(k,b),k.prototype.render=function(M){return`<div style='height: ${M.height||100}px; padding-top:0px; font-size:inherit;' class='gantt_section_baselines'></div>`},k.prototype.set_value=function(M,N,P,B){P.baselines?(M.innerHTML="",P.baselines.forEach(W=>{A(M,W,P,B)})):M.innerHTML=p.locale.labels.baselines_section_placeholder},k.prototype.get_value=function(M,N,P){const B=[];return M.querySelectorAll("[data-baseline-id]").forEach(W=>{const j=W.dataset.baselineId;let q,Y=p.getDatastore("baselines").getItem(j);q=Y?p.copy(Y):{id:p.uid(),task_id:N.id,text:"Baseline 1"},q.start_date=I(W,P),q.duration=C(W,P),q.end_date=p.calculateEndDate({start_date:q.start_date,duration:q.duration,task:N}),B.push(q)}),B},k.prototype.button_click=function(M,N,P,B){if(p.callEvent("onSectionButton",[p._lightbox_id,P])!==!1&&(N.closest(".gantt_custom_button.gantt_remove_baselines")&&(B.innerHTML=p.locale.labels.baselines_section_placeholder),N.closest(".gantt_custom_button.gantt_add_baselines"))){B.innerHTML==p.locale.labels.baselines_section_placeholder&&(B.innerHTML="");const W=p.getTask(p._lightbox_id);A(B,{id:p.uid(),task_id:W.id,text:"Baseline 1",start_date:W.start_date,end_date:W.end_date},W,p._get_typed_lightbox_config()[M])}},k.prototype.focus=function(M){p._focus(M.getElementsByTagName("select")[0])},k}(t);t._lightbox_methods={},t._lightbox_template="<div class='gantt_cal_ltitle'><span class='gantt_mark'>&nbsp;</span><span class='gantt_time'></span><span class='gantt_title'></span></div><div class='gantt_cal_larea'></div>",t._lightbox_template=`<div class='gantt_cal_ltitle'><div class="dhx_cal_ltitle_descr"><span class='gantt_mark'>&nbsp;</span><span class='gantt_time'></span><span class='dhx_title'></span>
</div>
<div class="gantt_cal_ltitle_controls">
	<a class="gantt_cal_ltitle_close_btn dhx_gantt_icon dhx_gantt_icon_close"></a>

</div></div><div class='gantt_cal_larea'></div>`,t._lightbox_root=t.$root,t.$services.getService("state").registerProvider("lightbox",function(){return{lightbox:t._lightbox_id}}),t.showLightbox=function(p){var b=this.getTask(p);if(this.callEvent("onBeforeLightbox",[p])){var k=this.getLightbox(this.getTaskType(b.type));this.showCover(k),this._fill_lightbox(p,k),this._setLbPosition(k),this._waiAria.lightboxVisibleAttr(k),this.callEvent("onLightbox",[p])}else t.isTaskExists(p)&&t.getTask(p).$new&&this.$data.tasksStore._updateOrder()},t._get_timepicker_step=function(){if(this.config.round_dnd_dates){var p;if(function(k){var w=k.$ui.getView("timeline");return!(!w||!w.isVisible())}(this)){var b=t.getScale();p=gr(b.unit)*b.step/60}return(!p||p>=1440)&&(p=this.config.time_step),p}return this.config.time_step},t.getLabel=function(p,b){for(var k=this._get_typed_lightbox_config(),w=0;w<k.length;w++)if(k[w].map_to==p){for(var A=k[w].options,I=0;I<A.length;I++)if(A[I].key==b)return A[I].label}return""},t.updateCollection=function(p,b){b=b.slice(0);var k=t.serverList(p);if(!k)return!1;k.splice(0,k.length),k.push.apply(k,b||[]),t.resetLightbox()},t.getLightboxType=function(){return this.getTaskType(this._lightbox_type)},t.getLightbox=function(p){var b,k,w,A,I,C="";if(function(){const N=t.config.csp===!0,P=!!window.Sfdc||!!window.$A||window.Aura||"$shadowResolver$"in document.body;t._lightbox_root=N||P?t.$root:document.body}(),p===void 0&&(p=this.getLightboxType()),!this._lightbox||this.getLightboxType()!=this.getTaskType(p)){this._lightbox_type=this.getTaskType(p),b=document.createElement("div"),C="gantt_cal_light",k=this._is_lightbox_timepicker(),t.config.wide_form&&(C+=" gantt_cal_light_wide"),k&&(C+=" gantt_cal_light_full"),b.className=C,b.style.visibility="hidden",w=this._lightbox_template,w+="<div class='gantt_cal_lcontrols'>",w+=$(this.config.buttons_left),w+="<div class='gantt_cal_lcontrols_push_right'></div>",w+=$(this.config.buttons_right),w+="</div>",b.innerHTML=w,t._waiAria.lightboxAttr(b),t.config.drag_lightbox&&(b.firstChild.onmousedown=t._ready_to_dnd,b.firstChild.ontouchstart=function(N){t._ready_to_dnd(N.touches[0])},b.firstChild.onselectstart=function(){return!1},b.firstChild.style.cursor="pointer",t._init_dnd_events()),this._lightbox&&this.resetLightbox(),m(),this._cover.insertBefore(b,this._cover.firstChild),this._lightbox=b,A=this._get_typed_lightbox_config(p),w=this._render_sections(A);var M=(I=b.querySelector("div.gantt_cal_larea")).style.overflow;I.style.overflow="hidden",I.innerHTML=w,function(N){var P,B,W,j,q,Y;for(Y=0;Y<N.length;Y++)P=N[Y],W=t._lightbox_root.querySelector("#"+P.id),P.id&&W&&(B=W.querySelector("label"),(j=W.nextSibling)&&(q=j.querySelector("input, select, textarea"))&&(q.id=q.id||"input_"+t.uid(),P.inputId=q.id,B.setAttribute("for",P.inputId)))}(A),I.style.overflow=M,this._init_lightbox_events(this),b.style.display="none",b.style.visibility="visible"}return this._lightbox},t._render_sections=function(p){for(var b="",k=0;k<p.length;k++){var w=this.form_blocks[p[k].type];if(w){p[k].id="area_"+this.uid();var A=p[k].hidden?" style='display:none'":"",I="";p[k].button&&(I="<div class='gantt_custom_button' data-index='"+k+"'><div class='gantt_custom_button_"+p[k].button+"'></div><div class='gantt_custom_button_label'>"+this.locale.labels["button_"+p[k].button]+"</div></div>"),p[k].type=="baselines"&&(I="<div class='gantt_custom_button gantt_remove_baselines' data-index='"+k+"'><div class='gantt_custom_button_delete_baselines'></div><div class='gantt_custom_button_label'>"+this.locale.labels.baselines_remove_all_button+"</div></div><div class='gantt_custom_button gantt_add_baselines' data-index='"+k+"'><div class='gantt_custom_button_add_baseline'></div><div class='gantt_custom_button_label'>"+this.locale.labels.baselines_add_button+"</div></div>"),this.config.wide_form&&(b+="<div class='gantt_wrap_section' "+A+">"),b+="<div id='"+p[k].id+"' class='gantt_cal_lsection'><label>"+I+this.locale.labels["section_"+p[k].name]+"</label></div>"+w.render.call(this,p[k]),b+="</div>"}}return b},t._center_lightbox=function(p){t._setLbPosition(p)},t._setLbPosition=function(p){if(!p)return;const b=t._lightbox_root||t.$root;p.style.top=Math.max(b.offsetHeight/2-p.offsetHeight/2,0)+"px",p.style.left=Math.max(b.offsetWidth/2-p.offsetWidth/2,0)+"px"},t.showCover=function(p){p&&(p.style.display="block",this._setLbPosition(p)),m(),this._cover.style.display=""};const m=function(){t._cover||(t._cover=document.createElement("div"),t._cover.className="gantt_cal_cover",t._cover.style.display="none",t.event(t._cover,"mousemove",t._move_while_dnd),t.event(t._cover,"mouseup",t._finish_dnd),(t._lightbox_root||t.$root).appendChild(t._cover))};function v(p){for(var b in this.config.types)if(this.config.types[b]==p)return b;return"task"}function $(p,b){var k,w,A="";for(w=0;w<p.length;w++)k=t.config._migrate_buttons[p[w]]?t.config._migrate_buttons[p[w]]:p[w],A+="<div "+t._waiAria.lightboxButtonAttrString(k)+" class='gantt_btn_set gantt_left_btn_set "+k+"_set'><div dhx_button='1' data-dhx-button='1' class='"+k+"'></div><div>"+t.locale.labels[k]+"</div></div>";return A}function x(p){var b,k;return p.time_format?p.time_format:(k=["%d","%m","%Y"],gr((b=t.getScale())?b.unit:t.config.duration_unit)<gr("day")&&k.push("%H:%i"),k)}function S(p,b,k){var w,A,I,C,M,N,P="";switch(k.timeFormat[b]){case"%Y":for(p._time_format_order[2]=b,p._time_format_order.size++,p.year_range&&(isNaN(p.year_range)?p.year_range.push&&(I=p.year_range[0],C=p.year_range[1]):w=p.year_range),w=w||10,A=A||Math.floor(w/2),I=I||k.date.getFullYear()-A,C=C||t.getState().max_date.getFullYear()+A,M=I;M<=C;M++)P+="<option value='"+M+"'>"+M+"</option>";break;case"%m":for(p._time_format_order[1]=b,p._time_format_order.size++,M=0;M<12;M++)P+="<option value='"+M+"'>"+t.locale.date.month_full[M]+"</option>";break;case"%d":for(p._time_format_order[0]=b,p._time_format_order.size++,M=1;M<32;M++)P+="<option value='"+M+"'>"+M+"</option>";break;case"%H:%i":for(p._time_format_order[3]=b,p._time_format_order.size++,M=k.first,N=k.date.getDate(),p._time_values=[];M<k.last;)P+="<option value='"+M+"'>"+t.templates.time_picker(k.date)+"</option>",p._time_values.push(M),k.date.setTime(k.date.valueOf()+60*t._get_timepicker_step()*1e3),M=24*(k.date.getDate()!=N?1:0)*60+60*k.date.getHours()+k.date.getMinutes()}return P}t._init_lightbox_events=function(){t.lightbox_events={},t.lightbox_events.gantt_save_btn=function(){t._save_lightbox()},t.lightbox_events.gantt_delete_btn=function(){t._lightbox_current_type=null,t.callEvent("onLightboxDelete",[t._lightbox_id])&&(t.isTaskExists(t._lightbox_id)?t.$click.buttons.delete(t._lightbox_id):t.hideLightbox())},t.lightbox_events.gantt_cancel_btn=function(){t._cancel_lightbox()},t.lightbox_events.default=function(p,b){if(b.getAttribute("data-dhx-button"))t.callEvent("onLightboxButton",[b.className,b,p]);else{var k,w,A=ce(b);if(A.indexOf("gantt_custom_button")!=-1)if(A.indexOf("gantt_custom_button_")!=-1)for(k=b.parentNode.getAttribute("data-index"),w=b;w&&ce(w).indexOf("gantt_cal_lsection")==-1;)w=w.parentNode;else k=b.getAttribute("data-index"),w=b.closest(".gantt_cal_lsection"),b=b.firstChild;var I=t._get_typed_lightbox_config();k&&(k*=1,t.form_blocks[I[1*k].type].button_click(k,b,w,w.nextSibling))}},this.event(t.getLightbox(),"click",function(p){p.target.closest(".gantt_cal_ltitle_close_btn")&&t._cancel_lightbox();var b=xn(p),k=ce(b);return k||(k=ce(b=b.previousSibling)),b&&k&&k.indexOf("gantt_btn_set")===0&&(k=ce(b=b.firstChild)),!(!b||!k)&&(t.defined(t.lightbox_events[b.className])?t.lightbox_events[b.className]:t.lightbox_events.default)(p,b)}),t.getLightbox().onkeydown=function(p){var b=p||window.event,k=p.target||p.srcElement,w=ce(k).indexOf("gantt_btn_set")>-1;switch((p||b).keyCode){case t.constants.KEY_CODES.SPACE:if((p||b).shiftKey)return;w&&k.click&&k.click();break;case t.keys.edit_save:if((p||b).shiftKey)return;w&&k.click?k.click():t._save_lightbox();break;case t.keys.edit_cancel:t._cancel_lightbox()}}},t._cancel_lightbox=function(){var p=this.getLightboxValues();t._lightbox_current_type=null,this.callEvent("onLightboxCancel",[this._lightbox_id,p.$new]),t.isTaskExists(p.id)&&p.$new&&(this.silent(function(){t.$data.tasksStore.removeItem(p.id),t._update_flags(p.id,null)}),this.refreshData()),this.hideLightbox()},t._save_lightbox=function(){var p=this.getLightboxValues();t._lightbox_current_type=null,this.callEvent("onLightboxSave",[this._lightbox_id,p,!!p.$new])&&(t.$data.tasksStore._skipTaskRecalculation="lightbox",p.$new?(delete p.$new,this.addTask(p,p.parent,this.getTaskIndex(p.id))):this.isTaskExists(p.id)&&(this.mixin(this.getTask(p.id),p,!0),this.refreshTask(p.id),this.updateTask(p.id)),t.$data.tasksStore._skipTaskRecalculation=!1,this.refreshData(),this.hideLightbox())},t._resolve_default_mapping=function(p){var b=p.map_to;return{time:!0,time_optional:!0,duration:!0,duration_optional:!0}[p.type]?p.map_to=="auto"?b={start_date:"start_date",end_date:"end_date",duration:"duration"}:typeof p.map_to=="string"&&(b={start_date:p.map_to}):p.type==="constraint"&&(p.map_to&&typeof p.map_to!="string"||(b={constraint_type:"constraint_type",constraint_date:"constraint_date"})),b},t.getLightboxValues=function(){var p={};t.isTaskExists(this._lightbox_id)&&(p=this.mixin({},this.getTask(this._lightbox_id)));for(var b=this._get_typed_lightbox_config(),k=0;k<b.length;k++){var w=t._lightbox_root.querySelector("#"+b[k].id);w=w&&w.nextSibling;var A=this.form_blocks[b[k].type];if(A){var I=A.get_value.call(this,w,p,b[k]),C=t._resolve_default_mapping(b[k]);if(typeof C=="string"&&C!="auto")p[C]=I;else if(typeof C=="object")for(var M in C)C[M]&&(p[C[M]]=I[M])}}return t._lightbox_current_type&&(p.type=t._lightbox_current_type),p},t.hideLightbox=function(){var p=this.getLightbox();p&&(p.style.display="none"),this._waiAria.lightboxHiddenAttr(p),this._lightbox_id=null,this.hideCover(p),this.resetLightbox(),this.callEvent("onAfterLightbox",[])},t.hideCover=function(p){p&&(p.style.display="none"),this._cover&&this._cover.parentNode.removeChild(this._cover),this._cover=null},t.resetLightbox=function(){t._lightbox&&!t._custom_lightbox&&t._lightbox.remove(),t._lightbox=null},t._set_lightbox_values=function(p,b){var k=p,w=b.getElementsByTagName("span"),A=[];t.templates.lightbox_header?(A.push(""),A.push(t.templates.lightbox_header(k.start_date,k.end_date,k)),w[1].innerHTML="",w[2].innerHTML=t.templates.lightbox_header(k.start_date,k.end_date,k)):(A.push(this.templates.task_time(k.start_date,k.end_date,k)),A.push(String(this.templates.task_text(k.start_date,k.end_date,k)||"").substr(0,70)),w[1].innerHTML=this.templates.task_time(k.start_date,k.end_date,k),w[2].innerHTML=String(this.templates.task_text(k.start_date,k.end_date,k)||"").substr(0,70)),w[1].innerHTML=A[0],w[2].innerHTML=A[1],t._waiAria.lightboxHeader(b,A.join(" "));for(var I=this._get_typed_lightbox_config(this.getLightboxType()),C=0;C<I.length;C++){var M=I[C];if(this.form_blocks[M.type]){var N=t._lightbox_root.querySelector("#"+M.id).nextSibling,P=this.form_blocks[M.type],B=t._resolve_default_mapping(I[C]),W=this.defined(k[B])?k[B]:M.default_value;P.set_value.call(t,N,W,k,M),M.focus&&P.focus.call(t,N)}}t.isTaskExists(p.id)&&(t._lightbox_id=p.id)},t._fill_lightbox=function(p,b){var k=this.getTask(p);this._set_lightbox_values(k,b)},t.getLightboxSection=function(p){for(var b=this._get_typed_lightbox_config(),k=0;k<b.length&&b[k].name!=p;k++);var w=b[k];if(!w)return null;this._lightbox||this.getLightbox();var A=t._lightbox_root.querySelector("#"+w.id),I=A.nextSibling,C={section:w,header:A,node:I,getValue:function(N){return t.form_blocks[w.type].get_value.call(t,I,N||{},w)},setValue:function(N,P){return t.form_blocks[w.type].set_value.call(t,I,N,P||{},w)}},M=this._lightbox_methods["get_"+w.type+"_control"];return M?M(C):C},t._lightbox_methods.get_template_control=function(p){return p.control=p.node,p},t._lightbox_methods.get_select_control=function(p){return p.control=p.node.getElementsByTagName("select")[0],p},t._lightbox_methods.get_textarea_control=function(p){return p.control=p.node.getElementsByTagName("textarea")[0],p},t._lightbox_methods.get_time_control=function(p){return p.control=p.node.getElementsByTagName("select"),p},t._init_dnd_events=function(){var p=t._lightbox_root;this.event(p,"mousemove",t._move_while_dnd),this.event(p,"mouseup",t._finish_dnd),this.event(p,"touchmove",function(b){t._move_while_dnd(b.touches[0])}),this.event(p,"touchend",function(b){t._finish_dnd(b.touches[0])})},t._move_while_dnd=function(p){if(t._dnd_start_lb){document.gantt_unselectable||(t._lightbox_root.className+=" gantt_unselectable",document.gantt_unselectable=!0);var b=t.getLightbox(),k=[p.pageX,p.pageY];b.style.top=t._lb_start[1]+k[1]-t._dnd_start_lb[1]+"px",b.style.left=t._lb_start[0]+k[0]-t._dnd_start_lb[0]+"px"}},t._ready_to_dnd=function(p){var b=t.getLightbox();t._lb_start=[b.offsetLeft,b.offsetTop],t._dnd_start_lb=[p.pageX,p.pageY]},t._finish_dnd=function(){t._lb_start&&(t._lb_start=t._dnd_start_lb=!1,t._lightbox_root.className=t._lightbox_root.className.replace(" gantt_unselectable",""),document.gantt_unselectable=!1)},t._focus=function(p,b){if(p&&p.focus&&!t.config.touch)try{b&&p.select&&p.select(),p.focus()}catch{}},t.form_blocks={getTimePicker:function(p,b){var k,w,A,I="",C=this.config,M={first:0,last:1440,date:this.date.date_part(new Date(t._min_date.valueOf())),timeFormat:x(p)};for(p._time_format_order={size:0},t.config.limit_time_select&&(M.first=60*C.first_hour,M.last=60*C.last_hour+1,M.date.setHours(C.first_hour)),k=0;k<M.timeFormat.length;k++)k>0&&(I+=" "),(w=S(p,k,M))&&(A=t._waiAria.lightboxSelectAttrString(M.timeFormat[k]),I+="<select "+(p.readonly?"disabled='disabled'":"")+(b?" style='display:none' ":"")+A+">"+w+"</select>");return I},getTimePickerValue:function(p,b,k){var w,A=b._time_format_order,I=0,C=0,M=k||0;return t.defined(A[3])&&(w=parseInt(p[A[3]+M].value,10),I=Math.floor(w/60),C=w%60),new Date(p[A[2]+M].value,p[A[1]+M].value,p[A[0]+M].value,I,C)},_fill_lightbox_select:function(p,b,k,w){if(p[b+w[0]].value=k.getDate(),p[b+w[1]].value=k.getMonth(),p[b+w[2]].value=k.getFullYear(),t.defined(w[3])){var A=60*k.getHours()+k.getMinutes();A=Math.round(A/t._get_timepicker_step())*t._get_timepicker_step();var I=p[b+w[3]];I.value=A,I.setAttribute("data-value",A)}},template:new n,textarea:new e,select:new r,time:new i,duration:new l,parent:new c,radio:new s,checkbox:new a,resources:new u,constraint:new h,baselines:new g,typeselect:new _},t._is_lightbox_timepicker=function(){for(var p=this._get_typed_lightbox_config(),b=0;b<p.length;b++)if(p[b].name=="time"&&p[b].type=="time")return!0;return!1},t._simple_confirm=function(p,b,k,w){if(!p)return k();var A={text:p};b&&(A.title=b),w&&(A.ok=w),k&&(A.callback=function(I){I&&k()}),t.confirm(A)},t._get_typed_lightbox_config=function(p){p===void 0&&(p=this.getLightboxType());var b=v.call(this,p);return t.config.lightbox[b+"_sections"]?t.config.lightbox[b+"_sections"]:t.config.lightbox.sections},t._silent_redraw_lightbox=function(p){var b=this.getLightboxType();if(this.getState().lightbox){var k=this.getState().lightbox,w=this.getLightboxValues(),A=this.copy(this.getTask(k));this.resetLightbox();var I=this.mixin(A,w,!0),C=this.getLightbox(p||void 0);this._set_lightbox_values(I,C),this.showCover(C)}else this.resetLightbox(),this.getLightbox(p||void 0);this.callEvent("onLightboxChange",[b,this.getLightboxType()])}}function my(t){if(!ln.isNode){t.utils={arrayFind:Jm,dom:Ic};var n=ks();t.event=n.attach,t.eventRemove=n.detach,t._eventRemoveAll=n.detachAll,t._createDomEventScope=n.extend,ut(t,Sk(t));var e=oy.init(t);t.$ui=e.factory,t.$ui.layers=e.render,t.$mouseEvents=e.mouseEvents,t.$services.setService("mouseEvents",function(){return t.$mouseEvents}),t.mixin(t,e.layersApi),function(i){delete i.addTaskLayer,delete i.addLinkLayer}(t),t.$services.setService("layers",function(){return e.layersService}),t.mixin(t,function(){function i(_){return _.$ui.getView("timeline")}function r(_){return _.$ui.getView("grid")}function a(_){var g=i(_);if(g&&!g.$config.hidden)return g;var m=r(_);return m&&!m.$config.hidden?m:null}function s(_){var g=null,m=!1;return[".gantt_drag_marker.gantt_grid_resize_area",".gantt_drag_marker .gantt_row.gantt_row_task",".gantt_drag_marker.gantt_grid_dnd_marker"].forEach(function(v){m=m||!!document.querySelector(v)}),(g=m?r(_):a(_))?c(_,g,"scrollY"):null}function l(_){var g=a(_);return g&&g.id!="grid"?c(_,g,"scrollX"):null}function c(_,g,m){var v=g.$config[m];return _.$ui.getView(v)}var u="DEFAULT_VALUE";function h(_,g,m,v){var $=_(this);return $&&$.isVisible()?$[g].apply($,m):v?v():u}return{getColumnIndex:function(_){var g=h.call(this,r,"getColumnIndex",[_]);return g===u?0:g},dateFromPos:function(_){var g=h.call(this,i,"dateFromPos",Array.prototype.slice.call(arguments));return g===u?this.getState().min_date:g},posFromDate:function(_){var g=h.call(this,i,"posFromDate",[_]);return g===u?0:g},getRowTop:function(_){var g=this,m=h.call(g,i,"getRowTop",[_],function(){return h.call(g,r,"getRowTop",[_])});return m===u?0:m},getTaskTop:function(_){var g=this,m=h.call(g,i,"getItemTop",[_],function(){return h.call(g,r,"getItemTop",[_])});return m===u?0:m},getTaskPosition:function(_,g,m){var v=h.call(this,i,"getItemPosition",[_,g,m]);return v===u?{left:0,top:this.getTaskTop(_.id),height:this.getTaskBarHeight(_.id),width:0}:v},getTaskBarHeight:function(_,g){var m=this,v=h.call(m,i,"getBarHeight",[_,g],function(){return h.call(m,r,"getItemHeight",[_])});return v===u?0:v},getTaskHeight:function(_){var g=this,m=h.call(g,i,"getItemHeight",[_],function(){return h.call(g,r,"getItemHeight",[_])});return m===u?0:m},columnIndexByDate:function(_){var g=h.call(this,i,"columnIndexByDate",[_]);return g===u?0:g},roundTaskDates:function(){h.call(this,i,"roundTaskDates",[])},getScale:function(){var _=h.call(this,i,"getScale",[]);return _===u?null:_},getTaskNode:function(_){var g=i(this);if(g&&g.isVisible()){var m=g._taskRenderer.rendered[_];if(!m){var v=g.$config.item_attribute;m=g.$task_bars.querySelector("["+v+"='"+_+"']")}return m||null}return null},getLinkNode:function(_){var g=i(this);return g.isVisible()?g._linkRenderer.rendered[_]:null},scrollTo:function(_,g){var m=s(this),v=l(this),$={position:0},x={position:0};m&&(x=m.getScrollState()),v&&($=v.getScrollState());var S=v&&1*_==_,p=m&&1*g==g;if(S&&p)for(var b=m._getLinkedViews(),k=v._getLinkedViews(),w=[],A=0;A<b.length;A++)for(var I=0;I<k.length;I++)b[A].$config.id&&k[I].$config.id&&b[A].$config.id===k[I].$config.id&&w.push(b[A].$config.id);S&&(w&&w.forEach((function(N){this.$ui.getView(N).$config.$skipSmartRenderOnScroll=!0}).bind(this)),v.scroll(_),w&&w.forEach((function(N){this.$ui.getView(N).$config.$skipSmartRenderOnScroll=!1}).bind(this))),p&&m.scroll(g);var C={position:0},M={position:0};m&&(C=m.getScrollState()),v&&(M=v.getScrollState()),this.callEvent("onGanttScroll",[$.position,x.position,M.position,C.position])},showDate:function(_){var g=this.posFromDate(_),m=Math.max(g-this.config.task_scroll_offset,0);this.scrollTo(m)},showTask:function(_){var g=this.getTaskPosition(this.getTask(_)),m=g.left;this.config.rtl&&(m=g.left+g.width);var v,$=Math.max(m-this.config.task_scroll_offset,0),x=this._scroll_state().y;v=x?g.top-(x-this.getTaskBarHeight(_))/2:g.top,this.scrollTo($,v);var S=r(this),p=i(this);S&&p&&S.$config.scrollY!=p.$config.scrollY&&c(this,S,"scrollY").scrollTo(null,v)},_scroll_state:function(){var _={x:!1,y:!1,x_pos:0,y_pos:0,scroll_size:this.config.scroll_size+1,x_inner:0,y_inner:0},g=s(this),m=l(this);if(m){var v=m.getScrollState();v.visible&&(_.x=v.size,_.x_inner=v.scrollSize),_.x_pos=v.position||0}if(g){var $=g.getScrollState();$.visible&&(_.y=$.size,_.y_inner=$.scrollSize),_.y_pos=$.position||0}return _},getScrollState:function(){var _=this._scroll_state();return{x:_.x_pos,y:_.y_pos,inner_width:_.x,inner_height:_.y,width:_.x_inner,height:_.y_inner}},getLayoutView:function(_){return this.$ui.getView(_)},scrollLayoutCell:function(_,g,m){const v=this.$ui.getView(_);if(!v)return!1;if(g!==null){const $=this.$ui.getView(v.$config.scrollX);$&&$.scrollTo(g,null)}if(m!==null){const $=this.$ui.getView(v.$config.scrollY);$&&$.scrollTo(null,m)}}}}()),function(i){i.resetSkin||(i.resetSkin=function(){this.skin="",Qa(!0,this)},i.skins={},i.attachEvent("onGanttLayoutReady",function(){Qa(!1,this),a()})),i._addThemeClass=function(){document.documentElement.setAttribute("data-gantt-theme",i.skin)},i.setSkin=function(s){this.skin=s,i._addThemeClass(),a(),i.$root&&(Qa(!0,i),this.render())};let r=null;function a(){const s=i.$root;r&&clearInterval(r),s&&(r=setInterval(()=>{const l=getComputedStyle(s).getPropertyValue("--dhx-gantt-theme");l&&l!==i.skin&&i.setSkin(l)},100))}i.attachEvent("onDestroy",function(){clearInterval(r)})}(t),function(i){i.skins.skyblue={config:{grid_width:370,row_height:27,bar_height_padding:4,scale_height:27,link_line_width:1,link_arrow_size:8,link_radius:2,lightbox_additional_height:75},_second_column_width:95,_third_column_width:80}}(t),function(i){i.skins.dark={config:{grid_width:390,row_height:36,scale_height:36,link_line_width:2,link_arrow_size:12,bar_height_padding:9,lightbox_additional_height:75},_second_column_width:100,_third_column_width:70}}(t),function(i){i.skins.meadow={config:{grid_width:380,row_height:27,scale_height:30,link_line_width:2,link_arrow_size:10,bar_height_padding:4,lightbox_additional_height:72},_second_column_width:95,_third_column_width:80}}(t),function(i){i.skins.terrace={config:{grid_width:390,row_height:36,scale_height:36,link_line_width:2,link_arrow_size:12,bar_height_padding:9,lightbox_additional_height:75},_second_column_width:100,_third_column_width:70}}(t),function(i){i.skins.broadway={config:{grid_width:390,row_height:35,scale_height:35,link_line_width:1,link_arrow_size:9,bar_height_padding:4,lightbox_additional_height:86},_second_column_width:100,_third_column_width:80,_lightbox_template:"<div class='gantt_cal_ltitle'><span class='gantt_mark'>&nbsp;</span><span class='gantt_time'></span><span class='gantt_title'></span><div class='gantt_cancel_btn'></div></div><div class='gantt_cal_larea'></div>",_config_buttons_left:{},_config_buttons_right:{gantt_delete_btn:"icon_delete",gantt_save_btn:"icon_save"}}}(t),function(i){i.skins.material={config:{grid_width:411,row_height:34,scale_height:36,link_line_width:2,link_arrow_size:12,bar_height_padding:9,lightbox_additional_height:80},_second_column_width:110,_third_column_width:75,_redefine_lightbox_buttons:{buttons_left:["dhx_delete_btn"],buttons_right:["dhx_cancel_btn","dhx_save_btn"]}},i.attachEvent("onAfterTaskDrag",function(r){var a=i.getTaskNode(r);a&&(a.className+=" gantt_drag_animation",setTimeout(function(){var s=a.className.indexOf(" gantt_drag_animation");s>-1&&(a.className=a.className.slice(0,s))},200))})}(t),function(i){i.skins.contrast_black={config:{grid_width:390,row_height:35,scale_height:35,link_line_width:2,link_arrow_size:12,lightbox_additional_height:75},_second_column_width:100,_third_column_width:80}}(t),function(i){i.skins.contrast_white={config:{grid_width:390,row_height:35,scale_height:35,link_line_width:2,link_arrow_size:12,lightbox_additional_height:75},_second_column_width:100,_third_column_width:80}}(t),function(i){i.ext||(i.ext={});for(var r=[ly,cy,dy],a=0;a<r.length;a++)r[a]&&r[a](i);i.ext.zoom=new _y(i)}(t),fy(t),py(t),function(i){i._extend_to_optional=function(r){var a=r,s={render:a.render,focus:a.focus,set_value:function(l,c,u,h){var _=i._resolve_default_mapping(h);if(!u[_.start_date]||_.start_date=="start_date"&&this._isAllowedUnscheduledTask(u)){s.disable(l,h);var g={};for(var m in _)g[_[m]]=u[m];return a.set_value.call(i,l,c,g,h)}return s.enable(l,h),a.set_value.call(i,l,c,u,h)},get_value:function(l,c,u){return u.disabled?{start_date:null}:a.get_value.call(i,l,c,u)},update_block:function(l,c){if(i.callEvent("onSectionToggle",[i._lightbox_id,c]),l.style.display=c.disabled?"none":"",c.button){var u=l.previousSibling.querySelector(".gantt_custom_button_label"),h=i.locale.labels,_=c.disabled?h[c.name+"_enable_button"]:h[c.name+"_disable_button"];u.innerHTML=_}},disable:function(l,c){c.disabled=!0,s.update_block(l,c)},enable:function(l,c){c.disabled=!1,s.update_block(l,c)},button_click:function(l,c,u,h){if(i.callEvent("onSectionButton",[i._lightbox_id,u])!==!1){var _=i._get_typed_lightbox_config()[l];_.disabled?s.enable(h,_):s.disable(h,_)}}};return s},i.form_blocks.duration_optional=i._extend_to_optional(i.form_blocks.duration),i.form_blocks.time_optional=i._extend_to_optional(i.form_blocks.time)}(t),function(i){var r=new RegExp(`<(?:.|
)*?>`,"gm"),a=new RegExp(" +","gm");function s(h){return(h+"").replace(r," ").replace(a," ")}var l=new RegExp("'","gm");function c(h){return(h+"").replace(l,"&#39;")}for(var u in i._waiAria={getAttributeString:function(h){var _=[" "];for(var g in h){var m=c(s(h[g]));_.push(g+"='"+m+"'")}return _.push(" "),_.join(" ")},getTimelineCellAttr:function(h){return i._waiAria.getAttributeString({"aria-label":h})},_taskCommonAttr:function(h,_){h.start_date&&h.end_date&&(_.setAttribute("aria-label",s(i.templates.tooltip_text(h.start_date,h.end_date,h))),h.$dataprocessor_class&&_.setAttribute("aria-busy",!0))},setTaskBarAttr:function(h,_){this._taskCommonAttr(h,_),_.setAttribute("role","img"),!i.isReadonly(h)&&i.config.drag_move&&(h.id!=i.getState("tasksDnd").drag_id?_.setAttribute("aria-grabbed",!1):_.setAttribute("aria-grabbed",!0))},taskRowAttr:function(h,_){this._taskCommonAttr(h,_),!i.isReadonly(h)&&i.config.order_branch&&_.setAttribute("aria-grabbed",!1),_.setAttribute("role","row"),_.setAttribute("aria-selected",i.isSelectedTask(h.id)?"true":"false"),_.setAttribute("aria-level",h.$level+1||1),i.hasChild(h.id)&&_.setAttribute("aria-expanded",h.$open?"true":"false")},linkAttr:function(h,_){var g=i.config.links,m=h.type==g.finish_to_start||h.type==g.start_to_start,v=h.type==g.start_to_start||h.type==g.start_to_finish,$=i.locale.labels.link+" "+i.templates.drag_link(h.source,v,h.target,m);_.setAttribute("role","img"),_.setAttribute("aria-label",s($)),i.isReadonly(h)&&_.setAttribute("aria-readonly",!0)},gridSeparatorAttr:function(h){h.setAttribute("role","columnheader")},rowResizerAttr:function(h){h.setAttribute("role","row")},lightboxHiddenAttr:function(h){h.setAttribute("aria-hidden","true")},lightboxVisibleAttr:function(h){h.setAttribute("aria-hidden","false")},lightboxAttr:function(h){h.setAttribute("role","dialog"),h.setAttribute("aria-hidden","true"),h.firstChild.setAttribute("role","heading"),h.firstChild.setAttribute("aria-level","1")},lightboxButtonAttrString:function(h){return this.getAttributeString({role:"button","aria-label":i.locale.labels[h],tabindex:"0"})},lightboxHeader:function(h,_){h.setAttribute("aria-label",_)},lightboxSelectAttrString:function(h){var _="";switch(h){case"%Y":_=i.locale.labels.years;break;case"%m":_=i.locale.labels.months;break;case"%d":_=i.locale.labels.days;break;case"%H:%i":_=i.locale.labels.hours+i.locale.labels.minutes}return i._waiAria.getAttributeString({"aria-label":_})},lightboxDurationInputAttrString:function(h){return this.getAttributeString({"aria-label":i.locale.labels.column_duration,"aria-valuemin":"0",role:"spinbutton"})},inlineEditorAttr:function(h){h.setAttribute("role","row")},gridAttrString:function(){return[" role='treegrid'",i.config.multiselect?"aria-multiselectable='true'":"aria-multiselectable='false'"," "].join(" ")},gridScaleRowAttrString:function(){return"role='row'"},gridScaleCellAttrString:function(h,_){var g="";if(h.name=="add")g=this.getAttributeString({role:"columnheader","aria-label":i.locale.labels.new_task});else{var m={role:"columnheader","aria-label":_};i._sort&&i._sort.name==h.name&&(i._sort.direction=="asc"?m["aria-sort"]="ascending":m["aria-sort"]="descending"),g=this.getAttributeString(m)}return g},gridDataAttrString:function(){return"role='rowgroup'"},reorderMarkerAttr:function(h){h.setAttribute("role","grid"),h.firstChild.removeAttribute("aria-level"),h.firstChild.setAttribute("aria-grabbed","true")},gridCellAttrString:function(h,_,g){var m={role:"gridcell","aria-label":_};return h.editor&&!i.isReadonly(g)||(m["aria-readonly"]=!0),this.getAttributeString(m)},gridAddButtonAttrString:function(h){return this.getAttributeString({role:"button","aria-label":i.locale.labels.new_task})},messageButtonAttrString:function(h){return"tabindex='0' role='button' aria-label='"+h+"'"},messageInfoAttr:function(h){h.setAttribute("role","alert")},messageModalAttr:function(h,_){h.setAttribute("role","dialog"),_&&h.setAttribute("aria-labelledby",_)},quickInfoAttr:function(h){h.setAttribute("role","dialog")},quickInfoHeaderAttrString:function(){return" role='heading' aria-level='1' "},quickInfoHeader:function(h,_){h.setAttribute("aria-label",_)},quickInfoButtonAttrString:function(h){return i._waiAria.getAttributeString({role:"button","aria-label":h,tabindex:"0"})},tooltipAttr:function(h){h.setAttribute("role","tooltip")},tooltipVisibleAttr:function(h){h.setAttribute("aria-hidden","false")},tooltipHiddenAttr:function(h){h.setAttribute("aria-hidden","true")}},i._waiAria)i._waiAria[u]=function(h){return function(){return i.config.wai_aria_attributes?h.apply(this,arguments):""}}(i._waiAria[u])}(t),t.locate=function(i){var r=xn(i);if(He(r,".gantt_task_row"))return null;var a=arguments[1]||this.config.task_attribute,s=ye(r,a);return s?s.getAttribute(a):null},t._locate_css=function(i,r,a){return on(i,r,a)},t._locateHTML=function(i,r){return ye(i,r||this.config.task_attribute)}}t.attachEvent("onParse",function(){Bt(t)||t.attachEvent("onGanttRender",function(){if(t.config.initial_scroll){var i=t.getTaskByIndex(0),r=i?i.id:t.config.root_id;t.isTaskExists(r)&&t.$task&&t.utils.dom.isChildOf(t.$task,t.$container)&&t.showTask(r)}},{once:!0})}),t.attachEvent("onBeforeGanttReady",function(){this.config.scroll_size||(this.config.scroll_size=$c()||15),Bt(t)||(this._eventRemoveAll(),this.$mouseEvents.reset(),this.resetLightbox())}),t.attachEvent("onGanttReady",function(){!Bt(t)&&t.config.rtl&&t.$layout.getCellsByType("viewCell").forEach(function(i){var r=i.$config.scrollX;if(r){var a=t.$ui.getView(r);a&&a.scrollTo(a.$config.scrollSize,0)}})}),t.attachEvent("onGanttReady",function(){if(!Bt(t)){var i=t.plugins(),r={auto_scheduling:t.autoSchedule,click_drag:t.ext.clickDrag,critical_path:t.isCriticalTask,drag_timeline:t.ext.dragTimeline,export_api:t.exportToPDF,fullscreen:t.ext.fullscreen,grouping:t.groupBy,keyboard_navigation:t.ext.keyboardNavigation,marker:t.addMarker,multiselect:t.eachSelectedTask,overlay:t.ext.overlay,quick_info:t.templates.quick_info_content,tooltip:t.ext.tooltips,undo:t.undo};for(let a in r)r[a]&&!i[a]&&console.warn(`You connected the '${a}' extension via an obsolete file. 
To fix it, you need to remove the obsolete file and connect the extension via the plugins method: https://docs.dhtmlx.com/gantt/api__gantt_plugins.html`)}})}const dt=Oe.gantt=function(t){var n=$k(t);return n.env.isNode||(my(n),function(e){e.load=function(i,r,a){this._load_url=i,this.assert(arguments.length,"Invalid load arguments");var s="json",l=null;return arguments.length>=3?(s=r,l=a):typeof arguments[1]=="string"?s=arguments[1]:typeof arguments[1]=="function"&&(l=arguments[1]),this._load_type=s,this.callEvent("onLoadStart",[i,s]),this.ajax.get(i,e.bind(function(c){this.on_load(c,s),this.callEvent("onLoadEnd",[i,s]),typeof l=="function"&&l.call(this)},this))}}(n)),n}(sv);var yr={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */yr.exports;(function(t,n){(function(){var e,i="4.17.21",r=200,a="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",s="Expected a function",l="Invalid `variable` option passed into `_.template`",c="__lodash_hash_undefined__",u=500,h="__lodash_placeholder__",_=1,g=2,m=4,v=1,$=2,x=1,S=2,p=4,b=8,k=16,w=32,A=64,I=128,C=256,M=512,N=30,P="...",B=800,W=16,j=1,q=2,Y=3,Z=1/0,it=9007199254740991,mt=17976931348623157e292,It=NaN,Lt=4294967295,vt=Lt-1,Yt=Lt>>>1,Ut=[["ary",I],["bind",x],["bindKey",S],["curry",b],["curryRight",k],["flip",M],["partial",w],["partialRight",A],["rearg",C]],gt="[object Arguments]",te="[object Array]",cn="[object AsyncFunction]",be="[object Boolean]",Ke="[object Date]",br="[object DOMException]",wn="[object Error]",ee="[object Function]",dn="[object GeneratorFunction]",Tt="[object Map]",Et="[object Number]",xr="[object Null]",xe="[object Object]",bs="[object Promise]",Jc="[object Proxy]",Vn="[object RegExp]",we="[object Set]",jn="[object String]",yi="[object Symbol]",Xc="[object Undefined]",Gn="[object WeakMap]",Zc="[object WeakSet]",qn="[object ArrayBuffer]",$n="[object DataView]",wr="[object Float32Array]",$r="[object Float64Array]",Sr="[object Int8Array]",Tr="[object Int16Array]",Er="[object Int32Array]",Cr="[object Uint8Array]",Ar="[object Uint8ClampedArray]",Dr="[object Uint16Array]",Ir="[object Uint32Array]",Qc=/\b__p \+= '';/g,td=/\b(__p \+=) '' \+/g,ed=/(__e\(.*?\)|\b__t\)) \+\n'';/g,xs=/&(?:amp|lt|gt|quot|#39);/g,ws=/[&<>"']/g,nd=RegExp(xs.source),id=RegExp(ws.source),rd=/<%-([\s\S]+?)%>/g,ad=/<%([\s\S]+?)%>/g,$s=/<%=([\s\S]+?)%>/g,sd=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,od=/^\w*$/,ld=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Mr=/[\\^$.*+?()[\]{}|]/g,cd=RegExp(Mr.source),Lr=/^\s+/,dd=/\s/,ud=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,hd=/\{\n\/\* \[wrapped with (.+)\] \*/,_d=/,? & /,fd=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,gd=/[()=,{}\[\]\/\s]/,pd=/\\(\\)?/g,md=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Ss=/\w*$/,vd=/^[-+]0x[0-9a-f]+$/i,kd=/^0b[01]+$/i,yd=/^\[object .+?Constructor\]$/,bd=/^0o[0-7]+$/i,xd=/^(?:0|[1-9]\d*)$/,wd=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,bi=/($^)/,$d=/['\n\r\u2028\u2029\\]/g,xi="\\ud800-\\udfff",Sd="\\u0300-\\u036f",Td="\\ufe20-\\ufe2f",Ed="\\u20d0-\\u20ff",Ts=Sd+Td+Ed,Es="\\u2700-\\u27bf",Cs="a-z\\xdf-\\xf6\\xf8-\\xff",Cd="\\xac\\xb1\\xd7\\xf7",Ad="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Dd="\\u2000-\\u206f",Id=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",As="A-Z\\xc0-\\xd6\\xd8-\\xde",Ds="\\ufe0e\\ufe0f",Is=Cd+Ad+Dd+Id,Nr="[']",Md="["+xi+"]",Ms="["+Is+"]",wi="["+Ts+"]",Ls="\\d+",Ld="["+Es+"]",Ns="["+Cs+"]",Rs="[^"+xi+Is+Ls+Es+Cs+As+"]",Rr="\\ud83c[\\udffb-\\udfff]",Nd="(?:"+wi+"|"+Rr+")",Ps="[^"+xi+"]",Pr="(?:\\ud83c[\\udde6-\\uddff]){2}",Or="[\\ud800-\\udbff][\\udc00-\\udfff]",Sn="["+As+"]",Os="\\u200d",Hs="(?:"+Ns+"|"+Rs+")",Rd="(?:"+Sn+"|"+Rs+")",Bs="(?:"+Nr+"(?:d|ll|m|re|s|t|ve))?",zs="(?:"+Nr+"(?:D|LL|M|RE|S|T|VE))?",Ws=Nd+"?",Fs="["+Ds+"]?",Pd="(?:"+Os+"(?:"+[Ps,Pr,Or].join("|")+")"+Fs+Ws+")*",Od="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Hd="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Us=Fs+Ws+Pd,Bd="(?:"+[Ld,Pr,Or].join("|")+")"+Us,zd="(?:"+[Ps+wi+"?",wi,Pr,Or,Md].join("|")+")",Wd=RegExp(Nr,"g"),Fd=RegExp(wi,"g"),Hr=RegExp(Rr+"(?="+Rr+")|"+zd+Us,"g"),Ud=RegExp([Sn+"?"+Ns+"+"+Bs+"(?="+[Ms,Sn,"$"].join("|")+")",Rd+"+"+zs+"(?="+[Ms,Sn+Hs,"$"].join("|")+")",Sn+"?"+Hs+"+"+Bs,Sn+"+"+zs,Hd,Od,Ls,Bd].join("|"),"g"),Vd=RegExp("["+Os+xi+Ts+Ds+"]"),jd=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Gd=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],qd=-1,xt={};xt[wr]=xt[$r]=xt[Sr]=xt[Tr]=xt[Er]=xt[Cr]=xt[Ar]=xt[Dr]=xt[Ir]=!0,xt[gt]=xt[te]=xt[qn]=xt[be]=xt[$n]=xt[Ke]=xt[wn]=xt[ee]=xt[Tt]=xt[Et]=xt[xe]=xt[Vn]=xt[we]=xt[jn]=xt[Gn]=!1;var bt={};bt[gt]=bt[te]=bt[qn]=bt[$n]=bt[be]=bt[Ke]=bt[wr]=bt[$r]=bt[Sr]=bt[Tr]=bt[Er]=bt[Tt]=bt[Et]=bt[xe]=bt[Vn]=bt[we]=bt[jn]=bt[yi]=bt[Cr]=bt[Ar]=bt[Dr]=bt[Ir]=!0,bt[wn]=bt[ee]=bt[Gn]=!1;var Yd={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},Kd={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Jd={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Xd={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Zd=parseFloat,Qd=parseInt,Vs=typeof ci=="object"&&ci&&ci.Object===Object&&ci,tu=typeof self=="object"&&self&&self.Object===Object&&self,Ot=Vs||tu||Function("return this")(),Br=n&&!n.nodeType&&n,un=Br&&!0&&t&&!t.nodeType&&t,js=un&&un.exports===Br,zr=js&&Vs.process,ue=function(){try{var O=un&&un.require&&un.require("util").types;return O||zr&&zr.binding&&zr.binding("util")}catch{}}(),Gs=ue&&ue.isArrayBuffer,qs=ue&&ue.isDate,Ys=ue&&ue.isMap,Ks=ue&&ue.isRegExp,Js=ue&&ue.isSet,Xs=ue&&ue.isTypedArray;function ne(O,F,z){switch(z.length){case 0:return O.call(F);case 1:return O.call(F,z[0]);case 2:return O.call(F,z[0],z[1]);case 3:return O.call(F,z[0],z[1],z[2])}return O.apply(F,z)}function eu(O,F,z,J){for(var nt=-1,ft=O==null?0:O.length;++nt<ft;){var Nt=O[nt];F(J,Nt,z(Nt),O)}return J}function he(O,F){for(var z=-1,J=O==null?0:O.length;++z<J&&F(O[z],z,O)!==!1;);return O}function nu(O,F){for(var z=O==null?0:O.length;z--&&F(O[z],z,O)!==!1;);return O}function Zs(O,F){for(var z=-1,J=O==null?0:O.length;++z<J;)if(!F(O[z],z,O))return!1;return!0}function Je(O,F){for(var z=-1,J=O==null?0:O.length,nt=0,ft=[];++z<J;){var Nt=O[z];F(Nt,z,O)&&(ft[nt++]=Nt)}return ft}function $i(O,F){var z=O==null?0:O.length;return!!z&&Tn(O,F,0)>-1}function Wr(O,F,z){for(var J=-1,nt=O==null?0:O.length;++J<nt;)if(z(F,O[J]))return!0;return!1}function wt(O,F){for(var z=-1,J=O==null?0:O.length,nt=Array(J);++z<J;)nt[z]=F(O[z],z,O);return nt}function Xe(O,F){for(var z=-1,J=F.length,nt=O.length;++z<J;)O[nt+z]=F[z];return O}function Fr(O,F,z,J){var nt=-1,ft=O==null?0:O.length;for(J&&ft&&(z=O[++nt]);++nt<ft;)z=F(z,O[nt],nt,O);return z}function iu(O,F,z,J){var nt=O==null?0:O.length;for(J&&nt&&(z=O[--nt]);nt--;)z=F(z,O[nt],nt,O);return z}function Ur(O,F){for(var z=-1,J=O==null?0:O.length;++z<J;)if(F(O[z],z,O))return!0;return!1}var ru=Vr("length");function au(O){return O.split("")}function su(O){return O.match(fd)||[]}function Qs(O,F,z){var J;return z(O,function(nt,ft,Nt){if(F(nt,ft,Nt))return J=ft,!1}),J}function Si(O,F,z,J){for(var nt=O.length,ft=z+(J?1:-1);J?ft--:++ft<nt;)if(F(O[ft],ft,O))return ft;return-1}function Tn(O,F,z){return F===F?vu(O,F,z):Si(O,to,z)}function ou(O,F,z,J){for(var nt=z-1,ft=O.length;++nt<ft;)if(J(O[nt],F))return nt;return-1}function to(O){return O!==O}function eo(O,F){var z=O==null?0:O.length;return z?Gr(O,F)/z:It}function Vr(O){return function(F){return F==null?e:F[O]}}function jr(O){return function(F){return O==null?e:O[F]}}function no(O,F,z,J,nt){return nt(O,function(ft,Nt,yt){z=J?(J=!1,ft):F(z,ft,Nt,yt)}),z}function lu(O,F){var z=O.length;for(O.sort(F);z--;)O[z]=O[z].value;return O}function Gr(O,F){for(var z,J=-1,nt=O.length;++J<nt;){var ft=F(O[J]);ft!==e&&(z=z===e?ft:z+ft)}return z}function qr(O,F){for(var z=-1,J=Array(O);++z<O;)J[z]=F(z);return J}function cu(O,F){return wt(F,function(z){return[z,O[z]]})}function io(O){return O&&O.slice(0,oo(O)+1).replace(Lr,"")}function ie(O){return function(F){return O(F)}}function Yr(O,F){return wt(F,function(z){return O[z]})}function Yn(O,F){return O.has(F)}function ro(O,F){for(var z=-1,J=O.length;++z<J&&Tn(F,O[z],0)>-1;);return z}function ao(O,F){for(var z=O.length;z--&&Tn(F,O[z],0)>-1;);return z}function du(O,F){for(var z=O.length,J=0;z--;)O[z]===F&&++J;return J}var uu=jr(Yd),hu=jr(Kd);function _u(O){return"\\"+Xd[O]}function fu(O,F){return O==null?e:O[F]}function En(O){return Vd.test(O)}function gu(O){return jd.test(O)}function pu(O){for(var F,z=[];!(F=O.next()).done;)z.push(F.value);return z}function Kr(O){var F=-1,z=Array(O.size);return O.forEach(function(J,nt){z[++F]=[nt,J]}),z}function so(O,F){return function(z){return O(F(z))}}function Ze(O,F){for(var z=-1,J=O.length,nt=0,ft=[];++z<J;){var Nt=O[z];(Nt===F||Nt===h)&&(O[z]=h,ft[nt++]=z)}return ft}function Ti(O){var F=-1,z=Array(O.size);return O.forEach(function(J){z[++F]=J}),z}function mu(O){var F=-1,z=Array(O.size);return O.forEach(function(J){z[++F]=[J,J]}),z}function vu(O,F,z){for(var J=z-1,nt=O.length;++J<nt;)if(O[J]===F)return J;return-1}function ku(O,F,z){for(var J=z+1;J--;)if(O[J]===F)return J;return J}function Cn(O){return En(O)?bu(O):ru(O)}function $e(O){return En(O)?xu(O):au(O)}function oo(O){for(var F=O.length;F--&&dd.test(O.charAt(F)););return F}var yu=jr(Jd);function bu(O){for(var F=Hr.lastIndex=0;Hr.test(O);)++F;return F}function xu(O){return O.match(Hr)||[]}function wu(O){return O.match(Ud)||[]}var $u=function O(F){F=F==null?Ot:An.defaults(Ot.Object(),F,An.pick(Ot,Gd));var z=F.Array,J=F.Date,nt=F.Error,ft=F.Function,Nt=F.Math,yt=F.Object,Jr=F.RegExp,Su=F.String,_e=F.TypeError,Ei=z.prototype,Tu=ft.prototype,Dn=yt.prototype,Ci=F["__core-js_shared__"],Ai=Tu.toString,kt=Dn.hasOwnProperty,Eu=0,lo=function(){var o=/[^.]+$/.exec(Ci&&Ci.keys&&Ci.keys.IE_PROTO||"");return o?"Symbol(src)_1."+o:""}(),Di=Dn.toString,Cu=Ai.call(yt),Au=Ot._,Du=Jr("^"+Ai.call(kt).replace(Mr,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ii=js?F.Buffer:e,Qe=F.Symbol,Mi=F.Uint8Array,co=Ii?Ii.allocUnsafe:e,Li=so(yt.getPrototypeOf,yt),uo=yt.create,ho=Dn.propertyIsEnumerable,Ni=Ei.splice,_o=Qe?Qe.isConcatSpreadable:e,Kn=Qe?Qe.iterator:e,hn=Qe?Qe.toStringTag:e,Ri=function(){try{var o=mn(yt,"defineProperty");return o({},"",{}),o}catch{}}(),Iu=F.clearTimeout!==Ot.clearTimeout&&F.clearTimeout,Mu=J&&J.now!==Ot.Date.now&&J.now,Lu=F.setTimeout!==Ot.setTimeout&&F.setTimeout,Pi=Nt.ceil,Oi=Nt.floor,Xr=yt.getOwnPropertySymbols,Nu=Ii?Ii.isBuffer:e,fo=F.isFinite,Ru=Ei.join,Pu=so(yt.keys,yt),Rt=Nt.max,zt=Nt.min,Ou=J.now,Hu=F.parseInt,go=Nt.random,Bu=Ei.reverse,Zr=mn(F,"DataView"),Jn=mn(F,"Map"),Qr=mn(F,"Promise"),In=mn(F,"Set"),Xn=mn(F,"WeakMap"),Zn=mn(yt,"create"),Hi=Xn&&new Xn,Mn={},zu=vn(Zr),Wu=vn(Jn),Fu=vn(Qr),Uu=vn(In),Vu=vn(Xn),Bi=Qe?Qe.prototype:e,Qn=Bi?Bi.valueOf:e,po=Bi?Bi.toString:e;function E(o){if(St(o)&&!rt(o)&&!(o instanceof ct)){if(o instanceof fe)return o;if(kt.call(o,"__wrapped__"))return ml(o)}return new fe(o)}var Ln=function(){function o(){}return function(d){if(!$t(d))return{};if(uo)return uo(d);o.prototype=d;var f=new o;return o.prototype=e,f}}();function zi(){}function fe(o,d){this.__wrapped__=o,this.__actions__=[],this.__chain__=!!d,this.__index__=0,this.__values__=e}E.templateSettings={escape:rd,evaluate:ad,interpolate:$s,variable:"",imports:{_:E}},E.prototype=zi.prototype,E.prototype.constructor=E,fe.prototype=Ln(zi.prototype),fe.prototype.constructor=fe;function ct(o){this.__wrapped__=o,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Lt,this.__views__=[]}function ju(){var o=new ct(this.__wrapped__);return o.__actions__=Kt(this.__actions__),o.__dir__=this.__dir__,o.__filtered__=this.__filtered__,o.__iteratees__=Kt(this.__iteratees__),o.__takeCount__=this.__takeCount__,o.__views__=Kt(this.__views__),o}function Gu(){if(this.__filtered__){var o=new ct(this);o.__dir__=-1,o.__filtered__=!0}else o=this.clone(),o.__dir__*=-1;return o}function qu(){var o=this.__wrapped__.value(),d=this.__dir__,f=rt(o),y=d<0,T=f?o.length:0,D=a_(0,T,this.__views__),L=D.start,R=D.end,H=R-L,U=y?R:L-1,V=this.__iteratees__,G=V.length,K=0,X=zt(H,this.__takeCount__);if(!f||!y&&T==H&&X==H)return zo(o,this.__actions__);var tt=[];t:for(;H--&&K<X;){U+=d;for(var st=-1,et=o[U];++st<G;){var lt=V[st],ht=lt.iteratee,se=lt.type,Gt=ht(et);if(se==q)et=Gt;else if(!Gt){if(se==j)continue t;break t}}tt[K++]=et}return tt}ct.prototype=Ln(zi.prototype),ct.prototype.constructor=ct;function _n(o){var d=-1,f=o==null?0:o.length;for(this.clear();++d<f;){var y=o[d];this.set(y[0],y[1])}}function Yu(){this.__data__=Zn?Zn(null):{},this.size=0}function Ku(o){var d=this.has(o)&&delete this.__data__[o];return this.size-=d?1:0,d}function Ju(o){var d=this.__data__;if(Zn){var f=d[o];return f===c?e:f}return kt.call(d,o)?d[o]:e}function Xu(o){var d=this.__data__;return Zn?d[o]!==e:kt.call(d,o)}function Zu(o,d){var f=this.__data__;return this.size+=this.has(o)?0:1,f[o]=Zn&&d===e?c:d,this}_n.prototype.clear=Yu,_n.prototype.delete=Ku,_n.prototype.get=Ju,_n.prototype.has=Xu,_n.prototype.set=Zu;function Be(o){var d=-1,f=o==null?0:o.length;for(this.clear();++d<f;){var y=o[d];this.set(y[0],y[1])}}function Qu(){this.__data__=[],this.size=0}function th(o){var d=this.__data__,f=Wi(d,o);if(f<0)return!1;var y=d.length-1;return f==y?d.pop():Ni.call(d,f,1),--this.size,!0}function eh(o){var d=this.__data__,f=Wi(d,o);return f<0?e:d[f][1]}function nh(o){return Wi(this.__data__,o)>-1}function ih(o,d){var f=this.__data__,y=Wi(f,o);return y<0?(++this.size,f.push([o,d])):f[y][1]=d,this}Be.prototype.clear=Qu,Be.prototype.delete=th,Be.prototype.get=eh,Be.prototype.has=nh,Be.prototype.set=ih;function ze(o){var d=-1,f=o==null?0:o.length;for(this.clear();++d<f;){var y=o[d];this.set(y[0],y[1])}}function rh(){this.size=0,this.__data__={hash:new _n,map:new(Jn||Be),string:new _n}}function ah(o){var d=Qi(this,o).delete(o);return this.size-=d?1:0,d}function sh(o){return Qi(this,o).get(o)}function oh(o){return Qi(this,o).has(o)}function lh(o,d){var f=Qi(this,o),y=f.size;return f.set(o,d),this.size+=f.size==y?0:1,this}ze.prototype.clear=rh,ze.prototype.delete=ah,ze.prototype.get=sh,ze.prototype.has=oh,ze.prototype.set=lh;function fn(o){var d=-1,f=o==null?0:o.length;for(this.__data__=new ze;++d<f;)this.add(o[d])}function ch(o){return this.__data__.set(o,c),this}function dh(o){return this.__data__.has(o)}fn.prototype.add=fn.prototype.push=ch,fn.prototype.has=dh;function Se(o){var d=this.__data__=new Be(o);this.size=d.size}function uh(){this.__data__=new Be,this.size=0}function hh(o){var d=this.__data__,f=d.delete(o);return this.size=d.size,f}function _h(o){return this.__data__.get(o)}function fh(o){return this.__data__.has(o)}function gh(o,d){var f=this.__data__;if(f instanceof Be){var y=f.__data__;if(!Jn||y.length<r-1)return y.push([o,d]),this.size=++f.size,this;f=this.__data__=new ze(y)}return f.set(o,d),this.size=f.size,this}Se.prototype.clear=uh,Se.prototype.delete=hh,Se.prototype.get=_h,Se.prototype.has=fh,Se.prototype.set=gh;function mo(o,d){var f=rt(o),y=!f&&kn(o),T=!f&&!y&&an(o),D=!f&&!y&&!T&&On(o),L=f||y||T||D,R=L?qr(o.length,Su):[],H=R.length;for(var U in o)(d||kt.call(o,U))&&!(L&&(U=="length"||T&&(U=="offset"||U=="parent")||D&&(U=="buffer"||U=="byteLength"||U=="byteOffset")||Ve(U,H)))&&R.push(U);return R}function vo(o){var d=o.length;return d?o[da(0,d-1)]:e}function ph(o,d){return tr(Kt(o),gn(d,0,o.length))}function mh(o){return tr(Kt(o))}function ta(o,d,f){(f!==e&&!Te(o[d],f)||f===e&&!(d in o))&&We(o,d,f)}function ti(o,d,f){var y=o[d];(!(kt.call(o,d)&&Te(y,f))||f===e&&!(d in o))&&We(o,d,f)}function Wi(o,d){for(var f=o.length;f--;)if(Te(o[f][0],d))return f;return-1}function vh(o,d,f,y){return tn(o,function(T,D,L){d(y,T,f(T),L)}),y}function ko(o,d){return o&&Re(d,Pt(d),o)}function kh(o,d){return o&&Re(d,Xt(d),o)}function We(o,d,f){d=="__proto__"&&Ri?Ri(o,d,{configurable:!0,enumerable:!0,value:f,writable:!0}):o[d]=f}function ea(o,d){for(var f=-1,y=d.length,T=z(y),D=o==null;++f<y;)T[f]=D?e:Ra(o,d[f]);return T}function gn(o,d,f){return o===o&&(f!==e&&(o=o<=f?o:f),d!==e&&(o=o>=d?o:d)),o}function ge(o,d,f,y,T,D){var L,R=d&_,H=d&g,U=d&m;if(f&&(L=T?f(o,y,T,D):f(o)),L!==e)return L;if(!$t(o))return o;var V=rt(o);if(V){if(L=o_(o),!R)return Kt(o,L)}else{var G=Wt(o),K=G==ee||G==dn;if(an(o))return Uo(o,R);if(G==xe||G==gt||K&&!T){if(L=H||K?{}:ll(o),!R)return H?Jh(o,kh(L,o)):Kh(o,ko(L,o))}else{if(!bt[G])return T?o:{};L=l_(o,G,R)}}D||(D=new Se);var X=D.get(o);if(X)return X;D.set(o,L),Ol(o)?o.forEach(function(et){L.add(ge(et,d,f,et,o,D))}):Rl(o)&&o.forEach(function(et,lt){L.set(lt,ge(et,d,f,lt,o,D))});var tt=U?H?ba:ya:H?Xt:Pt,st=V?e:tt(o);return he(st||o,function(et,lt){st&&(lt=et,et=o[lt]),ti(L,lt,ge(et,d,f,lt,o,D))}),L}function yh(o){var d=Pt(o);return function(f){return yo(f,o,d)}}function yo(o,d,f){var y=f.length;if(o==null)return!y;for(o=yt(o);y--;){var T=f[y],D=d[T],L=o[T];if(L===e&&!(T in o)||!D(L))return!1}return!0}function bo(o,d,f){if(typeof o!="function")throw new _e(s);return oi(function(){o.apply(e,f)},d)}function ei(o,d,f,y){var T=-1,D=$i,L=!0,R=o.length,H=[],U=d.length;if(!R)return H;f&&(d=wt(d,ie(f))),y?(D=Wr,L=!1):d.length>=r&&(D=Yn,L=!1,d=new fn(d));t:for(;++T<R;){var V=o[T],G=f==null?V:f(V);if(V=y||V!==0?V:0,L&&G===G){for(var K=U;K--;)if(d[K]===G)continue t;H.push(V)}else D(d,G,y)||H.push(V)}return H}var tn=Yo(Ne),xo=Yo(ia,!0);function bh(o,d){var f=!0;return tn(o,function(y,T,D){return f=!!d(y,T,D),f}),f}function Fi(o,d,f){for(var y=-1,T=o.length;++y<T;){var D=o[y],L=d(D);if(L!=null&&(R===e?L===L&&!ae(L):f(L,R)))var R=L,H=D}return H}function xh(o,d,f,y){var T=o.length;for(f=at(f),f<0&&(f=-f>T?0:T+f),y=y===e||y>T?T:at(y),y<0&&(y+=T),y=f>y?0:Bl(y);f<y;)o[f++]=d;return o}function wo(o,d){var f=[];return tn(o,function(y,T,D){d(y,T,D)&&f.push(y)}),f}function Ht(o,d,f,y,T){var D=-1,L=o.length;for(f||(f=d_),T||(T=[]);++D<L;){var R=o[D];d>0&&f(R)?d>1?Ht(R,d-1,f,y,T):Xe(T,R):y||(T[T.length]=R)}return T}var na=Ko(),$o=Ko(!0);function Ne(o,d){return o&&na(o,d,Pt)}function ia(o,d){return o&&$o(o,d,Pt)}function Ui(o,d){return Je(d,function(f){return je(o[f])})}function pn(o,d){d=nn(d,o);for(var f=0,y=d.length;o!=null&&f<y;)o=o[Pe(d[f++])];return f&&f==y?o:e}function So(o,d,f){var y=d(o);return rt(o)?y:Xe(y,f(o))}function Vt(o){return o==null?o===e?Xc:xr:hn&&hn in yt(o)?r_(o):m_(o)}function ra(o,d){return o>d}function wh(o,d){return o!=null&&kt.call(o,d)}function $h(o,d){return o!=null&&d in yt(o)}function Sh(o,d,f){return o>=zt(d,f)&&o<Rt(d,f)}function aa(o,d,f){for(var y=f?Wr:$i,T=o[0].length,D=o.length,L=D,R=z(D),H=1/0,U=[];L--;){var V=o[L];L&&d&&(V=wt(V,ie(d))),H=zt(V.length,H),R[L]=!f&&(d||T>=120&&V.length>=120)?new fn(L&&V):e}V=o[0];var G=-1,K=R[0];t:for(;++G<T&&U.length<H;){var X=V[G],tt=d?d(X):X;if(X=f||X!==0?X:0,!(K?Yn(K,tt):y(U,tt,f))){for(L=D;--L;){var st=R[L];if(!(st?Yn(st,tt):y(o[L],tt,f)))continue t}K&&K.push(tt),U.push(X)}}return U}function Th(o,d,f,y){return Ne(o,function(T,D,L){d(y,f(T),D,L)}),y}function ni(o,d,f){d=nn(d,o),o=hl(o,d);var y=o==null?o:o[Pe(me(d))];return y==null?e:ne(y,o,f)}function To(o){return St(o)&&Vt(o)==gt}function Eh(o){return St(o)&&Vt(o)==qn}function Ch(o){return St(o)&&Vt(o)==Ke}function ii(o,d,f,y,T){return o===d?!0:o==null||d==null||!St(o)&&!St(d)?o!==o&&d!==d:Ah(o,d,f,y,ii,T)}function Ah(o,d,f,y,T,D){var L=rt(o),R=rt(d),H=L?te:Wt(o),U=R?te:Wt(d);H=H==gt?xe:H,U=U==gt?xe:U;var V=H==xe,G=U==xe,K=H==U;if(K&&an(o)){if(!an(d))return!1;L=!0,V=!1}if(K&&!V)return D||(D=new Se),L||On(o)?al(o,d,f,y,T,D):n_(o,d,H,f,y,T,D);if(!(f&v)){var X=V&&kt.call(o,"__wrapped__"),tt=G&&kt.call(d,"__wrapped__");if(X||tt){var st=X?o.value():o,et=tt?d.value():d;return D||(D=new Se),T(st,et,f,y,D)}}return K?(D||(D=new Se),i_(o,d,f,y,T,D)):!1}function Dh(o){return St(o)&&Wt(o)==Tt}function sa(o,d,f,y){var T=f.length,D=T,L=!y;if(o==null)return!D;for(o=yt(o);T--;){var R=f[T];if(L&&R[2]?R[1]!==o[R[0]]:!(R[0]in o))return!1}for(;++T<D;){R=f[T];var H=R[0],U=o[H],V=R[1];if(L&&R[2]){if(U===e&&!(H in o))return!1}else{var G=new Se;if(y)var K=y(U,V,H,o,d,G);if(!(K===e?ii(V,U,v|$,y,G):K))return!1}}return!0}function Eo(o){if(!$t(o)||h_(o))return!1;var d=je(o)?Du:yd;return d.test(vn(o))}function Ih(o){return St(o)&&Vt(o)==Vn}function Mh(o){return St(o)&&Wt(o)==we}function Lh(o){return St(o)&&sr(o.length)&&!!xt[Vt(o)]}function Co(o){return typeof o=="function"?o:o==null?Zt:typeof o=="object"?rt(o)?Io(o[0],o[1]):Do(o):Jl(o)}function oa(o){if(!si(o))return Pu(o);var d=[];for(var f in yt(o))kt.call(o,f)&&f!="constructor"&&d.push(f);return d}function Nh(o){if(!$t(o))return p_(o);var d=si(o),f=[];for(var y in o)y=="constructor"&&(d||!kt.call(o,y))||f.push(y);return f}function la(o,d){return o<d}function Ao(o,d){var f=-1,y=Jt(o)?z(o.length):[];return tn(o,function(T,D,L){y[++f]=d(T,D,L)}),y}function Do(o){var d=wa(o);return d.length==1&&d[0][2]?dl(d[0][0],d[0][1]):function(f){return f===o||sa(f,o,d)}}function Io(o,d){return Sa(o)&&cl(d)?dl(Pe(o),d):function(f){var y=Ra(f,o);return y===e&&y===d?Pa(f,o):ii(d,y,v|$)}}function Vi(o,d,f,y,T){o!==d&&na(d,function(D,L){if(T||(T=new Se),$t(D))Rh(o,d,L,f,Vi,y,T);else{var R=y?y(Ea(o,L),D,L+"",o,d,T):e;R===e&&(R=D),ta(o,L,R)}},Xt)}function Rh(o,d,f,y,T,D,L){var R=Ea(o,f),H=Ea(d,f),U=L.get(H);if(U){ta(o,f,U);return}var V=D?D(R,H,f+"",o,d,L):e,G=V===e;if(G){var K=rt(H),X=!K&&an(H),tt=!K&&!X&&On(H);V=H,K||X||tt?rt(R)?V=R:Ct(R)?V=Kt(R):X?(G=!1,V=Uo(H,!0)):tt?(G=!1,V=Vo(H,!0)):V=[]:li(H)||kn(H)?(V=R,kn(R)?V=zl(R):(!$t(R)||je(R))&&(V=ll(H))):G=!1}G&&(L.set(H,V),T(V,H,y,D,L),L.delete(H)),ta(o,f,V)}function Mo(o,d){var f=o.length;if(f)return d+=d<0?f:0,Ve(d,f)?o[d]:e}function Lo(o,d,f){d.length?d=wt(d,function(D){return rt(D)?function(L){return pn(L,D.length===1?D[0]:D)}:D}):d=[Zt];var y=-1;d=wt(d,ie(Q()));var T=Ao(o,function(D,L,R){var H=wt(d,function(U){return U(D)});return{criteria:H,index:++y,value:D}});return lu(T,function(D,L){return Yh(D,L,f)})}function Ph(o,d){return No(o,d,function(f,y){return Pa(o,y)})}function No(o,d,f){for(var y=-1,T=d.length,D={};++y<T;){var L=d[y],R=pn(o,L);f(R,L)&&ri(D,nn(L,o),R)}return D}function Oh(o){return function(d){return pn(d,o)}}function ca(o,d,f,y){var T=y?ou:Tn,D=-1,L=d.length,R=o;for(o===d&&(d=Kt(d)),f&&(R=wt(o,ie(f)));++D<L;)for(var H=0,U=d[D],V=f?f(U):U;(H=T(R,V,H,y))>-1;)R!==o&&Ni.call(R,H,1),Ni.call(o,H,1);return o}function Ro(o,d){for(var f=o?d.length:0,y=f-1;f--;){var T=d[f];if(f==y||T!==D){var D=T;Ve(T)?Ni.call(o,T,1):_a(o,T)}}return o}function da(o,d){return o+Oi(go()*(d-o+1))}function Hh(o,d,f,y){for(var T=-1,D=Rt(Pi((d-o)/(f||1)),0),L=z(D);D--;)L[y?D:++T]=o,o+=f;return L}function ua(o,d){var f="";if(!o||d<1||d>it)return f;do d%2&&(f+=o),d=Oi(d/2),d&&(o+=o);while(d);return f}function ot(o,d){return Ca(ul(o,d,Zt),o+"")}function Bh(o){return vo(Hn(o))}function zh(o,d){var f=Hn(o);return tr(f,gn(d,0,f.length))}function ri(o,d,f,y){if(!$t(o))return o;d=nn(d,o);for(var T=-1,D=d.length,L=D-1,R=o;R!=null&&++T<D;){var H=Pe(d[T]),U=f;if(H==="__proto__"||H==="constructor"||H==="prototype")return o;if(T!=L){var V=R[H];U=y?y(V,H,R):e,U===e&&(U=$t(V)?V:Ve(d[T+1])?[]:{})}ti(R,H,U),R=R[H]}return o}var Po=Hi?function(o,d){return Hi.set(o,d),o}:Zt,Wh=Ri?function(o,d){return Ri(o,"toString",{configurable:!0,enumerable:!1,value:Ha(d),writable:!0})}:Zt;function Fh(o){return tr(Hn(o))}function pe(o,d,f){var y=-1,T=o.length;d<0&&(d=-d>T?0:T+d),f=f>T?T:f,f<0&&(f+=T),T=d>f?0:f-d>>>0,d>>>=0;for(var D=z(T);++y<T;)D[y]=o[y+d];return D}function Uh(o,d){var f;return tn(o,function(y,T,D){return f=d(y,T,D),!f}),!!f}function ji(o,d,f){var y=0,T=o==null?y:o.length;if(typeof d=="number"&&d===d&&T<=Yt){for(;y<T;){var D=y+T>>>1,L=o[D];L!==null&&!ae(L)&&(f?L<=d:L<d)?y=D+1:T=D}return T}return ha(o,d,Zt,f)}function ha(o,d,f,y){var T=0,D=o==null?0:o.length;if(D===0)return 0;d=f(d);for(var L=d!==d,R=d===null,H=ae(d),U=d===e;T<D;){var V=Oi((T+D)/2),G=f(o[V]),K=G!==e,X=G===null,tt=G===G,st=ae(G);if(L)var et=y||tt;else U?et=tt&&(y||K):R?et=tt&&K&&(y||!X):H?et=tt&&K&&!X&&(y||!st):X||st?et=!1:et=y?G<=d:G<d;et?T=V+1:D=V}return zt(D,vt)}function Oo(o,d){for(var f=-1,y=o.length,T=0,D=[];++f<y;){var L=o[f],R=d?d(L):L;if(!f||!Te(R,H)){var H=R;D[T++]=L===0?0:L}}return D}function Ho(o){return typeof o=="number"?o:ae(o)?It:+o}function re(o){if(typeof o=="string")return o;if(rt(o))return wt(o,re)+"";if(ae(o))return po?po.call(o):"";var d=o+"";return d=="0"&&1/o==-Z?"-0":d}function en(o,d,f){var y=-1,T=$i,D=o.length,L=!0,R=[],H=R;if(f)L=!1,T=Wr;else if(D>=r){var U=d?null:t_(o);if(U)return Ti(U);L=!1,T=Yn,H=new fn}else H=d?[]:R;t:for(;++y<D;){var V=o[y],G=d?d(V):V;if(V=f||V!==0?V:0,L&&G===G){for(var K=H.length;K--;)if(H[K]===G)continue t;d&&H.push(G),R.push(V)}else T(H,G,f)||(H!==R&&H.push(G),R.push(V))}return R}function _a(o,d){return d=nn(d,o),o=hl(o,d),o==null||delete o[Pe(me(d))]}function Bo(o,d,f,y){return ri(o,d,f(pn(o,d)),y)}function Gi(o,d,f,y){for(var T=o.length,D=y?T:-1;(y?D--:++D<T)&&d(o[D],D,o););return f?pe(o,y?0:D,y?D+1:T):pe(o,y?D+1:0,y?T:D)}function zo(o,d){var f=o;return f instanceof ct&&(f=f.value()),Fr(d,function(y,T){return T.func.apply(T.thisArg,Xe([y],T.args))},f)}function fa(o,d,f){var y=o.length;if(y<2)return y?en(o[0]):[];for(var T=-1,D=z(y);++T<y;)for(var L=o[T],R=-1;++R<y;)R!=T&&(D[T]=ei(D[T]||L,o[R],d,f));return en(Ht(D,1),d,f)}function Wo(o,d,f){for(var y=-1,T=o.length,D=d.length,L={};++y<T;){var R=y<D?d[y]:e;f(L,o[y],R)}return L}function ga(o){return Ct(o)?o:[]}function pa(o){return typeof o=="function"?o:Zt}function nn(o,d){return rt(o)?o:Sa(o,d)?[o]:pl(pt(o))}var Vh=ot;function rn(o,d,f){var y=o.length;return f=f===e?y:f,!d&&f>=y?o:pe(o,d,f)}var Fo=Iu||function(o){return Ot.clearTimeout(o)};function Uo(o,d){if(d)return o.slice();var f=o.length,y=co?co(f):new o.constructor(f);return o.copy(y),y}function ma(o){var d=new o.constructor(o.byteLength);return new Mi(d).set(new Mi(o)),d}function jh(o,d){var f=d?ma(o.buffer):o.buffer;return new o.constructor(f,o.byteOffset,o.byteLength)}function Gh(o){var d=new o.constructor(o.source,Ss.exec(o));return d.lastIndex=o.lastIndex,d}function qh(o){return Qn?yt(Qn.call(o)):{}}function Vo(o,d){var f=d?ma(o.buffer):o.buffer;return new o.constructor(f,o.byteOffset,o.length)}function jo(o,d){if(o!==d){var f=o!==e,y=o===null,T=o===o,D=ae(o),L=d!==e,R=d===null,H=d===d,U=ae(d);if(!R&&!U&&!D&&o>d||D&&L&&H&&!R&&!U||y&&L&&H||!f&&H||!T)return 1;if(!y&&!D&&!U&&o<d||U&&f&&T&&!y&&!D||R&&f&&T||!L&&T||!H)return-1}return 0}function Yh(o,d,f){for(var y=-1,T=o.criteria,D=d.criteria,L=T.length,R=f.length;++y<L;){var H=jo(T[y],D[y]);if(H){if(y>=R)return H;var U=f[y];return H*(U=="desc"?-1:1)}}return o.index-d.index}function Go(o,d,f,y){for(var T=-1,D=o.length,L=f.length,R=-1,H=d.length,U=Rt(D-L,0),V=z(H+U),G=!y;++R<H;)V[R]=d[R];for(;++T<L;)(G||T<D)&&(V[f[T]]=o[T]);for(;U--;)V[R++]=o[T++];return V}function qo(o,d,f,y){for(var T=-1,D=o.length,L=-1,R=f.length,H=-1,U=d.length,V=Rt(D-R,0),G=z(V+U),K=!y;++T<V;)G[T]=o[T];for(var X=T;++H<U;)G[X+H]=d[H];for(;++L<R;)(K||T<D)&&(G[X+f[L]]=o[T++]);return G}function Kt(o,d){var f=-1,y=o.length;for(d||(d=z(y));++f<y;)d[f]=o[f];return d}function Re(o,d,f,y){var T=!f;f||(f={});for(var D=-1,L=d.length;++D<L;){var R=d[D],H=y?y(f[R],o[R],R,f,o):e;H===e&&(H=o[R]),T?We(f,R,H):ti(f,R,H)}return f}function Kh(o,d){return Re(o,$a(o),d)}function Jh(o,d){return Re(o,sl(o),d)}function qi(o,d){return function(f,y){var T=rt(f)?eu:vh,D=d?d():{};return T(f,o,Q(y,2),D)}}function Nn(o){return ot(function(d,f){var y=-1,T=f.length,D=T>1?f[T-1]:e,L=T>2?f[2]:e;for(D=o.length>3&&typeof D=="function"?(T--,D):e,L&&jt(f[0],f[1],L)&&(D=T<3?e:D,T=1),d=yt(d);++y<T;){var R=f[y];R&&o(d,R,y,D)}return d})}function Yo(o,d){return function(f,y){if(f==null)return f;if(!Jt(f))return o(f,y);for(var T=f.length,D=d?T:-1,L=yt(f);(d?D--:++D<T)&&y(L[D],D,L)!==!1;);return f}}function Ko(o){return function(d,f,y){for(var T=-1,D=yt(d),L=y(d),R=L.length;R--;){var H=L[o?R:++T];if(f(D[H],H,D)===!1)break}return d}}function Xh(o,d,f){var y=d&x,T=ai(o);function D(){var L=this&&this!==Ot&&this instanceof D?T:o;return L.apply(y?f:this,arguments)}return D}function Jo(o){return function(d){d=pt(d);var f=En(d)?$e(d):e,y=f?f[0]:d.charAt(0),T=f?rn(f,1).join(""):d.slice(1);return y[o]()+T}}function Rn(o){return function(d){return Fr(Yl(ql(d).replace(Wd,"")),o,"")}}function ai(o){return function(){var d=arguments;switch(d.length){case 0:return new o;case 1:return new o(d[0]);case 2:return new o(d[0],d[1]);case 3:return new o(d[0],d[1],d[2]);case 4:return new o(d[0],d[1],d[2],d[3]);case 5:return new o(d[0],d[1],d[2],d[3],d[4]);case 6:return new o(d[0],d[1],d[2],d[3],d[4],d[5]);case 7:return new o(d[0],d[1],d[2],d[3],d[4],d[5],d[6])}var f=Ln(o.prototype),y=o.apply(f,d);return $t(y)?y:f}}function Zh(o,d,f){var y=ai(o);function T(){for(var D=arguments.length,L=z(D),R=D,H=Pn(T);R--;)L[R]=arguments[R];var U=D<3&&L[0]!==H&&L[D-1]!==H?[]:Ze(L,H);if(D-=U.length,D<f)return el(o,d,Yi,T.placeholder,e,L,U,e,e,f-D);var V=this&&this!==Ot&&this instanceof T?y:o;return ne(V,this,L)}return T}function Xo(o){return function(d,f,y){var T=yt(d);if(!Jt(d)){var D=Q(f,3);d=Pt(d),f=function(R){return D(T[R],R,T)}}var L=o(d,f,y);return L>-1?T[D?d[L]:L]:e}}function Zo(o){return Ue(function(d){var f=d.length,y=f,T=fe.prototype.thru;for(o&&d.reverse();y--;){var D=d[y];if(typeof D!="function")throw new _e(s);if(T&&!L&&Zi(D)=="wrapper")var L=new fe([],!0)}for(y=L?y:f;++y<f;){D=d[y];var R=Zi(D),H=R=="wrapper"?xa(D):e;H&&Ta(H[0])&&H[1]==(I|b|w|C)&&!H[4].length&&H[9]==1?L=L[Zi(H[0])].apply(L,H[3]):L=D.length==1&&Ta(D)?L[R]():L.thru(D)}return function(){var U=arguments,V=U[0];if(L&&U.length==1&&rt(V))return L.plant(V).value();for(var G=0,K=f?d[G].apply(this,U):V;++G<f;)K=d[G].call(this,K);return K}})}function Yi(o,d,f,y,T,D,L,R,H,U){var V=d&I,G=d&x,K=d&S,X=d&(b|k),tt=d&M,st=K?e:ai(o);function et(){for(var lt=arguments.length,ht=z(lt),se=lt;se--;)ht[se]=arguments[se];if(X)var Gt=Pn(et),oe=du(ht,Gt);if(y&&(ht=Go(ht,y,T,X)),D&&(ht=qo(ht,D,L,X)),lt-=oe,X&&lt<U){var At=Ze(ht,Gt);return el(o,d,Yi,et.placeholder,f,ht,At,R,H,U-lt)}var Ee=G?f:this,qe=K?Ee[o]:o;return lt=ht.length,R?ht=v_(ht,R):tt&&lt>1&&ht.reverse(),V&&H<lt&&(ht.length=H),this&&this!==Ot&&this instanceof et&&(qe=st||ai(qe)),qe.apply(Ee,ht)}return et}function Qo(o,d){return function(f,y){return Th(f,o,d(y),{})}}function Ki(o,d){return function(f,y){var T;if(f===e&&y===e)return d;if(f!==e&&(T=f),y!==e){if(T===e)return y;typeof f=="string"||typeof y=="string"?(f=re(f),y=re(y)):(f=Ho(f),y=Ho(y)),T=o(f,y)}return T}}function va(o){return Ue(function(d){return d=wt(d,ie(Q())),ot(function(f){var y=this;return o(d,function(T){return ne(T,y,f)})})})}function Ji(o,d){d=d===e?" ":re(d);var f=d.length;if(f<2)return f?ua(d,o):d;var y=ua(d,Pi(o/Cn(d)));return En(d)?rn($e(y),0,o).join(""):y.slice(0,o)}function Qh(o,d,f,y){var T=d&x,D=ai(o);function L(){for(var R=-1,H=arguments.length,U=-1,V=y.length,G=z(V+H),K=this&&this!==Ot&&this instanceof L?D:o;++U<V;)G[U]=y[U];for(;H--;)G[U++]=arguments[++R];return ne(K,T?f:this,G)}return L}function tl(o){return function(d,f,y){return y&&typeof y!="number"&&jt(d,f,y)&&(f=y=e),d=Ge(d),f===e?(f=d,d=0):f=Ge(f),y=y===e?d<f?1:-1:Ge(y),Hh(d,f,y,o)}}function Xi(o){return function(d,f){return typeof d=="string"&&typeof f=="string"||(d=ve(d),f=ve(f)),o(d,f)}}function el(o,d,f,y,T,D,L,R,H,U){var V=d&b,G=V?L:e,K=V?e:L,X=V?D:e,tt=V?e:D;d|=V?w:A,d&=~(V?A:w),d&p||(d&=~(x|S));var st=[o,d,T,X,G,tt,K,R,H,U],et=f.apply(e,st);return Ta(o)&&_l(et,st),et.placeholder=y,fl(et,o,d)}function ka(o){var d=Nt[o];return function(f,y){if(f=ve(f),y=y==null?0:zt(at(y),292),y&&fo(f)){var T=(pt(f)+"e").split("e"),D=d(T[0]+"e"+(+T[1]+y));return T=(pt(D)+"e").split("e"),+(T[0]+"e"+(+T[1]-y))}return d(f)}}var t_=In&&1/Ti(new In([,-0]))[1]==Z?function(o){return new In(o)}:Wa;function nl(o){return function(d){var f=Wt(d);return f==Tt?Kr(d):f==we?mu(d):cu(d,o(d))}}function Fe(o,d,f,y,T,D,L,R){var H=d&S;if(!H&&typeof o!="function")throw new _e(s);var U=y?y.length:0;if(U||(d&=~(w|A),y=T=e),L=L===e?L:Rt(at(L),0),R=R===e?R:at(R),U-=T?T.length:0,d&A){var V=y,G=T;y=T=e}var K=H?e:xa(o),X=[o,d,f,y,T,V,G,D,L,R];if(K&&g_(X,K),o=X[0],d=X[1],f=X[2],y=X[3],T=X[4],R=X[9]=X[9]===e?H?0:o.length:Rt(X[9]-U,0),!R&&d&(b|k)&&(d&=~(b|k)),!d||d==x)var tt=Xh(o,d,f);else d==b||d==k?tt=Zh(o,d,R):(d==w||d==(x|w))&&!T.length?tt=Qh(o,d,f,y):tt=Yi.apply(e,X);var st=K?Po:_l;return fl(st(tt,X),o,d)}function il(o,d,f,y){return o===e||Te(o,Dn[f])&&!kt.call(y,f)?d:o}function rl(o,d,f,y,T,D){return $t(o)&&$t(d)&&(D.set(d,o),Vi(o,d,e,rl,D),D.delete(d)),o}function e_(o){return li(o)?e:o}function al(o,d,f,y,T,D){var L=f&v,R=o.length,H=d.length;if(R!=H&&!(L&&H>R))return!1;var U=D.get(o),V=D.get(d);if(U&&V)return U==d&&V==o;var G=-1,K=!0,X=f&$?new fn:e;for(D.set(o,d),D.set(d,o);++G<R;){var tt=o[G],st=d[G];if(y)var et=L?y(st,tt,G,d,o,D):y(tt,st,G,o,d,D);if(et!==e){if(et)continue;K=!1;break}if(X){if(!Ur(d,function(lt,ht){if(!Yn(X,ht)&&(tt===lt||T(tt,lt,f,y,D)))return X.push(ht)})){K=!1;break}}else if(!(tt===st||T(tt,st,f,y,D))){K=!1;break}}return D.delete(o),D.delete(d),K}function n_(o,d,f,y,T,D,L){switch(f){case $n:if(o.byteLength!=d.byteLength||o.byteOffset!=d.byteOffset)return!1;o=o.buffer,d=d.buffer;case qn:return!(o.byteLength!=d.byteLength||!D(new Mi(o),new Mi(d)));case be:case Ke:case Et:return Te(+o,+d);case wn:return o.name==d.name&&o.message==d.message;case Vn:case jn:return o==d+"";case Tt:var R=Kr;case we:var H=y&v;if(R||(R=Ti),o.size!=d.size&&!H)return!1;var U=L.get(o);if(U)return U==d;y|=$,L.set(o,d);var V=al(R(o),R(d),y,T,D,L);return L.delete(o),V;case yi:if(Qn)return Qn.call(o)==Qn.call(d)}return!1}function i_(o,d,f,y,T,D){var L=f&v,R=ya(o),H=R.length,U=ya(d),V=U.length;if(H!=V&&!L)return!1;for(var G=H;G--;){var K=R[G];if(!(L?K in d:kt.call(d,K)))return!1}var X=D.get(o),tt=D.get(d);if(X&&tt)return X==d&&tt==o;var st=!0;D.set(o,d),D.set(d,o);for(var et=L;++G<H;){K=R[G];var lt=o[K],ht=d[K];if(y)var se=L?y(ht,lt,K,d,o,D):y(lt,ht,K,o,d,D);if(!(se===e?lt===ht||T(lt,ht,f,y,D):se)){st=!1;break}et||(et=K=="constructor")}if(st&&!et){var Gt=o.constructor,oe=d.constructor;Gt!=oe&&"constructor"in o&&"constructor"in d&&!(typeof Gt=="function"&&Gt instanceof Gt&&typeof oe=="function"&&oe instanceof oe)&&(st=!1)}return D.delete(o),D.delete(d),st}function Ue(o){return Ca(ul(o,e,yl),o+"")}function ya(o){return So(o,Pt,$a)}function ba(o){return So(o,Xt,sl)}var xa=Hi?function(o){return Hi.get(o)}:Wa;function Zi(o){for(var d=o.name+"",f=Mn[d],y=kt.call(Mn,d)?f.length:0;y--;){var T=f[y],D=T.func;if(D==null||D==o)return T.name}return d}function Pn(o){var d=kt.call(E,"placeholder")?E:o;return d.placeholder}function Q(){var o=E.iteratee||Ba;return o=o===Ba?Co:o,arguments.length?o(arguments[0],arguments[1]):o}function Qi(o,d){var f=o.__data__;return u_(d)?f[typeof d=="string"?"string":"hash"]:f.map}function wa(o){for(var d=Pt(o),f=d.length;f--;){var y=d[f],T=o[y];d[f]=[y,T,cl(T)]}return d}function mn(o,d){var f=fu(o,d);return Eo(f)?f:e}function r_(o){var d=kt.call(o,hn),f=o[hn];try{o[hn]=e;var y=!0}catch{}var T=Di.call(o);return y&&(d?o[hn]=f:delete o[hn]),T}var $a=Xr?function(o){return o==null?[]:(o=yt(o),Je(Xr(o),function(d){return ho.call(o,d)}))}:Fa,sl=Xr?function(o){for(var d=[];o;)Xe(d,$a(o)),o=Li(o);return d}:Fa,Wt=Vt;(Zr&&Wt(new Zr(new ArrayBuffer(1)))!=$n||Jn&&Wt(new Jn)!=Tt||Qr&&Wt(Qr.resolve())!=bs||In&&Wt(new In)!=we||Xn&&Wt(new Xn)!=Gn)&&(Wt=function(o){var d=Vt(o),f=d==xe?o.constructor:e,y=f?vn(f):"";if(y)switch(y){case zu:return $n;case Wu:return Tt;case Fu:return bs;case Uu:return we;case Vu:return Gn}return d});function a_(o,d,f){for(var y=-1,T=f.length;++y<T;){var D=f[y],L=D.size;switch(D.type){case"drop":o+=L;break;case"dropRight":d-=L;break;case"take":d=zt(d,o+L);break;case"takeRight":o=Rt(o,d-L);break}}return{start:o,end:d}}function s_(o){var d=o.match(hd);return d?d[1].split(_d):[]}function ol(o,d,f){d=nn(d,o);for(var y=-1,T=d.length,D=!1;++y<T;){var L=Pe(d[y]);if(!(D=o!=null&&f(o,L)))break;o=o[L]}return D||++y!=T?D:(T=o==null?0:o.length,!!T&&sr(T)&&Ve(L,T)&&(rt(o)||kn(o)))}function o_(o){var d=o.length,f=new o.constructor(d);return d&&typeof o[0]=="string"&&kt.call(o,"index")&&(f.index=o.index,f.input=o.input),f}function ll(o){return typeof o.constructor=="function"&&!si(o)?Ln(Li(o)):{}}function l_(o,d,f){var y=o.constructor;switch(d){case qn:return ma(o);case be:case Ke:return new y(+o);case $n:return jh(o,f);case wr:case $r:case Sr:case Tr:case Er:case Cr:case Ar:case Dr:case Ir:return Vo(o,f);case Tt:return new y;case Et:case jn:return new y(o);case Vn:return Gh(o);case we:return new y;case yi:return qh(o)}}function c_(o,d){var f=d.length;if(!f)return o;var y=f-1;return d[y]=(f>1?"& ":"")+d[y],d=d.join(f>2?", ":" "),o.replace(ud,`{
/* [wrapped with `+d+`] */
`)}function d_(o){return rt(o)||kn(o)||!!(_o&&o&&o[_o])}function Ve(o,d){var f=typeof o;return d=d??it,!!d&&(f=="number"||f!="symbol"&&xd.test(o))&&o>-1&&o%1==0&&o<d}function jt(o,d,f){if(!$t(f))return!1;var y=typeof d;return(y=="number"?Jt(f)&&Ve(d,f.length):y=="string"&&d in f)?Te(f[d],o):!1}function Sa(o,d){if(rt(o))return!1;var f=typeof o;return f=="number"||f=="symbol"||f=="boolean"||o==null||ae(o)?!0:od.test(o)||!sd.test(o)||d!=null&&o in yt(d)}function u_(o){var d=typeof o;return d=="string"||d=="number"||d=="symbol"||d=="boolean"?o!=="__proto__":o===null}function Ta(o){var d=Zi(o),f=E[d];if(typeof f!="function"||!(d in ct.prototype))return!1;if(o===f)return!0;var y=xa(f);return!!y&&o===y[0]}function h_(o){return!!lo&&lo in o}var __=Ci?je:Ua;function si(o){var d=o&&o.constructor,f=typeof d=="function"&&d.prototype||Dn;return o===f}function cl(o){return o===o&&!$t(o)}function dl(o,d){return function(f){return f==null?!1:f[o]===d&&(d!==e||o in yt(f))}}function f_(o){var d=rr(o,function(y){return f.size===u&&f.clear(),y}),f=d.cache;return d}function g_(o,d){var f=o[1],y=d[1],T=f|y,D=T<(x|S|I),L=y==I&&f==b||y==I&&f==C&&o[7].length<=d[8]||y==(I|C)&&d[7].length<=d[8]&&f==b;if(!(D||L))return o;y&x&&(o[2]=d[2],T|=f&x?0:p);var R=d[3];if(R){var H=o[3];o[3]=H?Go(H,R,d[4]):R,o[4]=H?Ze(o[3],h):d[4]}return R=d[5],R&&(H=o[5],o[5]=H?qo(H,R,d[6]):R,o[6]=H?Ze(o[5],h):d[6]),R=d[7],R&&(o[7]=R),y&I&&(o[8]=o[8]==null?d[8]:zt(o[8],d[8])),o[9]==null&&(o[9]=d[9]),o[0]=d[0],o[1]=T,o}function p_(o){var d=[];if(o!=null)for(var f in yt(o))d.push(f);return d}function m_(o){return Di.call(o)}function ul(o,d,f){return d=Rt(d===e?o.length-1:d,0),function(){for(var y=arguments,T=-1,D=Rt(y.length-d,0),L=z(D);++T<D;)L[T]=y[d+T];T=-1;for(var R=z(d+1);++T<d;)R[T]=y[T];return R[d]=f(L),ne(o,this,R)}}function hl(o,d){return d.length<2?o:pn(o,pe(d,0,-1))}function v_(o,d){for(var f=o.length,y=zt(d.length,f),T=Kt(o);y--;){var D=d[y];o[y]=Ve(D,f)?T[D]:e}return o}function Ea(o,d){if(!(d==="constructor"&&typeof o[d]=="function")&&d!="__proto__")return o[d]}var _l=gl(Po),oi=Lu||function(o,d){return Ot.setTimeout(o,d)},Ca=gl(Wh);function fl(o,d,f){var y=d+"";return Ca(o,c_(y,k_(s_(y),f)))}function gl(o){var d=0,f=0;return function(){var y=Ou(),T=W-(y-f);if(f=y,T>0){if(++d>=B)return arguments[0]}else d=0;return o.apply(e,arguments)}}function tr(o,d){var f=-1,y=o.length,T=y-1;for(d=d===e?y:d;++f<d;){var D=da(f,T),L=o[D];o[D]=o[f],o[f]=L}return o.length=d,o}var pl=f_(function(o){var d=[];return o.charCodeAt(0)===46&&d.push(""),o.replace(ld,function(f,y,T,D){d.push(T?D.replace(pd,"$1"):y||f)}),d});function Pe(o){if(typeof o=="string"||ae(o))return o;var d=o+"";return d=="0"&&1/o==-Z?"-0":d}function vn(o){if(o!=null){try{return Ai.call(o)}catch{}try{return o+""}catch{}}return""}function k_(o,d){return he(Ut,function(f){var y="_."+f[0];d&f[1]&&!$i(o,y)&&o.push(y)}),o.sort()}function ml(o){if(o instanceof ct)return o.clone();var d=new fe(o.__wrapped__,o.__chain__);return d.__actions__=Kt(o.__actions__),d.__index__=o.__index__,d.__values__=o.__values__,d}function y_(o,d,f){(f?jt(o,d,f):d===e)?d=1:d=Rt(at(d),0);var y=o==null?0:o.length;if(!y||d<1)return[];for(var T=0,D=0,L=z(Pi(y/d));T<y;)L[D++]=pe(o,T,T+=d);return L}function b_(o){for(var d=-1,f=o==null?0:o.length,y=0,T=[];++d<f;){var D=o[d];D&&(T[y++]=D)}return T}function x_(){var o=arguments.length;if(!o)return[];for(var d=z(o-1),f=arguments[0],y=o;y--;)d[y-1]=arguments[y];return Xe(rt(f)?Kt(f):[f],Ht(d,1))}var w_=ot(function(o,d){return Ct(o)?ei(o,Ht(d,1,Ct,!0)):[]}),$_=ot(function(o,d){var f=me(d);return Ct(f)&&(f=e),Ct(o)?ei(o,Ht(d,1,Ct,!0),Q(f,2)):[]}),S_=ot(function(o,d){var f=me(d);return Ct(f)&&(f=e),Ct(o)?ei(o,Ht(d,1,Ct,!0),e,f):[]});function T_(o,d,f){var y=o==null?0:o.length;return y?(d=f||d===e?1:at(d),pe(o,d<0?0:d,y)):[]}function E_(o,d,f){var y=o==null?0:o.length;return y?(d=f||d===e?1:at(d),d=y-d,pe(o,0,d<0?0:d)):[]}function C_(o,d){return o&&o.length?Gi(o,Q(d,3),!0,!0):[]}function A_(o,d){return o&&o.length?Gi(o,Q(d,3),!0):[]}function D_(o,d,f,y){var T=o==null?0:o.length;return T?(f&&typeof f!="number"&&jt(o,d,f)&&(f=0,y=T),xh(o,d,f,y)):[]}function vl(o,d,f){var y=o==null?0:o.length;if(!y)return-1;var T=f==null?0:at(f);return T<0&&(T=Rt(y+T,0)),Si(o,Q(d,3),T)}function kl(o,d,f){var y=o==null?0:o.length;if(!y)return-1;var T=y-1;return f!==e&&(T=at(f),T=f<0?Rt(y+T,0):zt(T,y-1)),Si(o,Q(d,3),T,!0)}function yl(o){var d=o==null?0:o.length;return d?Ht(o,1):[]}function I_(o){var d=o==null?0:o.length;return d?Ht(o,Z):[]}function M_(o,d){var f=o==null?0:o.length;return f?(d=d===e?1:at(d),Ht(o,d)):[]}function L_(o){for(var d=-1,f=o==null?0:o.length,y={};++d<f;){var T=o[d];y[T[0]]=T[1]}return y}function bl(o){return o&&o.length?o[0]:e}function N_(o,d,f){var y=o==null?0:o.length;if(!y)return-1;var T=f==null?0:at(f);return T<0&&(T=Rt(y+T,0)),Tn(o,d,T)}function R_(o){var d=o==null?0:o.length;return d?pe(o,0,-1):[]}var P_=ot(function(o){var d=wt(o,ga);return d.length&&d[0]===o[0]?aa(d):[]}),O_=ot(function(o){var d=me(o),f=wt(o,ga);return d===me(f)?d=e:f.pop(),f.length&&f[0]===o[0]?aa(f,Q(d,2)):[]}),H_=ot(function(o){var d=me(o),f=wt(o,ga);return d=typeof d=="function"?d:e,d&&f.pop(),f.length&&f[0]===o[0]?aa(f,e,d):[]});function B_(o,d){return o==null?"":Ru.call(o,d)}function me(o){var d=o==null?0:o.length;return d?o[d-1]:e}function z_(o,d,f){var y=o==null?0:o.length;if(!y)return-1;var T=y;return f!==e&&(T=at(f),T=T<0?Rt(y+T,0):zt(T,y-1)),d===d?ku(o,d,T):Si(o,to,T,!0)}function W_(o,d){return o&&o.length?Mo(o,at(d)):e}var F_=ot(xl);function xl(o,d){return o&&o.length&&d&&d.length?ca(o,d):o}function U_(o,d,f){return o&&o.length&&d&&d.length?ca(o,d,Q(f,2)):o}function V_(o,d,f){return o&&o.length&&d&&d.length?ca(o,d,e,f):o}var j_=Ue(function(o,d){var f=o==null?0:o.length,y=ea(o,d);return Ro(o,wt(d,function(T){return Ve(T,f)?+T:T}).sort(jo)),y});function G_(o,d){var f=[];if(!(o&&o.length))return f;var y=-1,T=[],D=o.length;for(d=Q(d,3);++y<D;){var L=o[y];d(L,y,o)&&(f.push(L),T.push(y))}return Ro(o,T),f}function Aa(o){return o==null?o:Bu.call(o)}function q_(o,d,f){var y=o==null?0:o.length;return y?(f&&typeof f!="number"&&jt(o,d,f)?(d=0,f=y):(d=d==null?0:at(d),f=f===e?y:at(f)),pe(o,d,f)):[]}function Y_(o,d){return ji(o,d)}function K_(o,d,f){return ha(o,d,Q(f,2))}function J_(o,d){var f=o==null?0:o.length;if(f){var y=ji(o,d);if(y<f&&Te(o[y],d))return y}return-1}function X_(o,d){return ji(o,d,!0)}function Z_(o,d,f){return ha(o,d,Q(f,2),!0)}function Q_(o,d){var f=o==null?0:o.length;if(f){var y=ji(o,d,!0)-1;if(Te(o[y],d))return y}return-1}function tf(o){return o&&o.length?Oo(o):[]}function ef(o,d){return o&&o.length?Oo(o,Q(d,2)):[]}function nf(o){var d=o==null?0:o.length;return d?pe(o,1,d):[]}function rf(o,d,f){return o&&o.length?(d=f||d===e?1:at(d),pe(o,0,d<0?0:d)):[]}function af(o,d,f){var y=o==null?0:o.length;return y?(d=f||d===e?1:at(d),d=y-d,pe(o,d<0?0:d,y)):[]}function sf(o,d){return o&&o.length?Gi(o,Q(d,3),!1,!0):[]}function of(o,d){return o&&o.length?Gi(o,Q(d,3)):[]}var lf=ot(function(o){return en(Ht(o,1,Ct,!0))}),cf=ot(function(o){var d=me(o);return Ct(d)&&(d=e),en(Ht(o,1,Ct,!0),Q(d,2))}),df=ot(function(o){var d=me(o);return d=typeof d=="function"?d:e,en(Ht(o,1,Ct,!0),e,d)});function uf(o){return o&&o.length?en(o):[]}function hf(o,d){return o&&o.length?en(o,Q(d,2)):[]}function _f(o,d){return d=typeof d=="function"?d:e,o&&o.length?en(o,e,d):[]}function Da(o){if(!(o&&o.length))return[];var d=0;return o=Je(o,function(f){if(Ct(f))return d=Rt(f.length,d),!0}),qr(d,function(f){return wt(o,Vr(f))})}function wl(o,d){if(!(o&&o.length))return[];var f=Da(o);return d==null?f:wt(f,function(y){return ne(d,e,y)})}var ff=ot(function(o,d){return Ct(o)?ei(o,d):[]}),gf=ot(function(o){return fa(Je(o,Ct))}),pf=ot(function(o){var d=me(o);return Ct(d)&&(d=e),fa(Je(o,Ct),Q(d,2))}),mf=ot(function(o){var d=me(o);return d=typeof d=="function"?d:e,fa(Je(o,Ct),e,d)}),vf=ot(Da);function kf(o,d){return Wo(o||[],d||[],ti)}function yf(o,d){return Wo(o||[],d||[],ri)}var bf=ot(function(o){var d=o.length,f=d>1?o[d-1]:e;return f=typeof f=="function"?(o.pop(),f):e,wl(o,f)});function $l(o){var d=E(o);return d.__chain__=!0,d}function xf(o,d){return d(o),o}function er(o,d){return d(o)}var wf=Ue(function(o){var d=o.length,f=d?o[0]:0,y=this.__wrapped__,T=function(D){return ea(D,o)};return d>1||this.__actions__.length||!(y instanceof ct)||!Ve(f)?this.thru(T):(y=y.slice(f,+f+(d?1:0)),y.__actions__.push({func:er,args:[T],thisArg:e}),new fe(y,this.__chain__).thru(function(D){return d&&!D.length&&D.push(e),D}))});function $f(){return $l(this)}function Sf(){return new fe(this.value(),this.__chain__)}function Tf(){this.__values__===e&&(this.__values__=Hl(this.value()));var o=this.__index__>=this.__values__.length,d=o?e:this.__values__[this.__index__++];return{done:o,value:d}}function Ef(){return this}function Cf(o){for(var d,f=this;f instanceof zi;){var y=ml(f);y.__index__=0,y.__values__=e,d?T.__wrapped__=y:d=y;var T=y;f=f.__wrapped__}return T.__wrapped__=o,d}function Af(){var o=this.__wrapped__;if(o instanceof ct){var d=o;return this.__actions__.length&&(d=new ct(this)),d=d.reverse(),d.__actions__.push({func:er,args:[Aa],thisArg:e}),new fe(d,this.__chain__)}return this.thru(Aa)}function Df(){return zo(this.__wrapped__,this.__actions__)}var If=qi(function(o,d,f){kt.call(o,f)?++o[f]:We(o,f,1)});function Mf(o,d,f){var y=rt(o)?Zs:bh;return f&&jt(o,d,f)&&(d=e),y(o,Q(d,3))}function Lf(o,d){var f=rt(o)?Je:wo;return f(o,Q(d,3))}var Nf=Xo(vl),Rf=Xo(kl);function Pf(o,d){return Ht(nr(o,d),1)}function Of(o,d){return Ht(nr(o,d),Z)}function Hf(o,d,f){return f=f===e?1:at(f),Ht(nr(o,d),f)}function Sl(o,d){var f=rt(o)?he:tn;return f(o,Q(d,3))}function Tl(o,d){var f=rt(o)?nu:xo;return f(o,Q(d,3))}var Bf=qi(function(o,d,f){kt.call(o,f)?o[f].push(d):We(o,f,[d])});function zf(o,d,f,y){o=Jt(o)?o:Hn(o),f=f&&!y?at(f):0;var T=o.length;return f<0&&(f=Rt(T+f,0)),or(o)?f<=T&&o.indexOf(d,f)>-1:!!T&&Tn(o,d,f)>-1}var Wf=ot(function(o,d,f){var y=-1,T=typeof d=="function",D=Jt(o)?z(o.length):[];return tn(o,function(L){D[++y]=T?ne(d,L,f):ni(L,d,f)}),D}),Ff=qi(function(o,d,f){We(o,f,d)});function nr(o,d){var f=rt(o)?wt:Ao;return f(o,Q(d,3))}function Uf(o,d,f,y){return o==null?[]:(rt(d)||(d=d==null?[]:[d]),f=y?e:f,rt(f)||(f=f==null?[]:[f]),Lo(o,d,f))}var Vf=qi(function(o,d,f){o[f?0:1].push(d)},function(){return[[],[]]});function jf(o,d,f){var y=rt(o)?Fr:no,T=arguments.length<3;return y(o,Q(d,4),f,T,tn)}function Gf(o,d,f){var y=rt(o)?iu:no,T=arguments.length<3;return y(o,Q(d,4),f,T,xo)}function qf(o,d){var f=rt(o)?Je:wo;return f(o,ar(Q(d,3)))}function Yf(o){var d=rt(o)?vo:Bh;return d(o)}function Kf(o,d,f){(f?jt(o,d,f):d===e)?d=1:d=at(d);var y=rt(o)?ph:zh;return y(o,d)}function Jf(o){var d=rt(o)?mh:Fh;return d(o)}function Xf(o){if(o==null)return 0;if(Jt(o))return or(o)?Cn(o):o.length;var d=Wt(o);return d==Tt||d==we?o.size:oa(o).length}function Zf(o,d,f){var y=rt(o)?Ur:Uh;return f&&jt(o,d,f)&&(d=e),y(o,Q(d,3))}var Qf=ot(function(o,d){if(o==null)return[];var f=d.length;return f>1&&jt(o,d[0],d[1])?d=[]:f>2&&jt(d[0],d[1],d[2])&&(d=[d[0]]),Lo(o,Ht(d,1),[])}),ir=Mu||function(){return Ot.Date.now()};function tg(o,d){if(typeof d!="function")throw new _e(s);return o=at(o),function(){if(--o<1)return d.apply(this,arguments)}}function El(o,d,f){return d=f?e:d,d=o&&d==null?o.length:d,Fe(o,I,e,e,e,e,d)}function Cl(o,d){var f;if(typeof d!="function")throw new _e(s);return o=at(o),function(){return--o>0&&(f=d.apply(this,arguments)),o<=1&&(d=e),f}}var Ia=ot(function(o,d,f){var y=x;if(f.length){var T=Ze(f,Pn(Ia));y|=w}return Fe(o,y,d,f,T)}),Al=ot(function(o,d,f){var y=x|S;if(f.length){var T=Ze(f,Pn(Al));y|=w}return Fe(d,y,o,f,T)});function Dl(o,d,f){d=f?e:d;var y=Fe(o,b,e,e,e,e,e,d);return y.placeholder=Dl.placeholder,y}function Il(o,d,f){d=f?e:d;var y=Fe(o,k,e,e,e,e,e,d);return y.placeholder=Il.placeholder,y}function Ml(o,d,f){var y,T,D,L,R,H,U=0,V=!1,G=!1,K=!0;if(typeof o!="function")throw new _e(s);d=ve(d)||0,$t(f)&&(V=!!f.leading,G="maxWait"in f,D=G?Rt(ve(f.maxWait)||0,d):D,K="trailing"in f?!!f.trailing:K);function X(At){var Ee=y,qe=T;return y=T=e,U=At,L=o.apply(qe,Ee),L}function tt(At){return U=At,R=oi(lt,d),V?X(At):L}function st(At){var Ee=At-H,qe=At-U,Xl=d-Ee;return G?zt(Xl,D-qe):Xl}function et(At){var Ee=At-H,qe=At-U;return H===e||Ee>=d||Ee<0||G&&qe>=D}function lt(){var At=ir();if(et(At))return ht(At);R=oi(lt,st(At))}function ht(At){return R=e,K&&y?X(At):(y=T=e,L)}function se(){R!==e&&Fo(R),U=0,y=H=T=R=e}function Gt(){return R===e?L:ht(ir())}function oe(){var At=ir(),Ee=et(At);if(y=arguments,T=this,H=At,Ee){if(R===e)return tt(H);if(G)return Fo(R),R=oi(lt,d),X(H)}return R===e&&(R=oi(lt,d)),L}return oe.cancel=se,oe.flush=Gt,oe}var eg=ot(function(o,d){return bo(o,1,d)}),ng=ot(function(o,d,f){return bo(o,ve(d)||0,f)});function ig(o){return Fe(o,M)}function rr(o,d){if(typeof o!="function"||d!=null&&typeof d!="function")throw new _e(s);var f=function(){var y=arguments,T=d?d.apply(this,y):y[0],D=f.cache;if(D.has(T))return D.get(T);var L=o.apply(this,y);return f.cache=D.set(T,L)||D,L};return f.cache=new(rr.Cache||ze),f}rr.Cache=ze;function ar(o){if(typeof o!="function")throw new _e(s);return function(){var d=arguments;switch(d.length){case 0:return!o.call(this);case 1:return!o.call(this,d[0]);case 2:return!o.call(this,d[0],d[1]);case 3:return!o.call(this,d[0],d[1],d[2])}return!o.apply(this,d)}}function rg(o){return Cl(2,o)}var ag=Vh(function(o,d){d=d.length==1&&rt(d[0])?wt(d[0],ie(Q())):wt(Ht(d,1),ie(Q()));var f=d.length;return ot(function(y){for(var T=-1,D=zt(y.length,f);++T<D;)y[T]=d[T].call(this,y[T]);return ne(o,this,y)})}),Ma=ot(function(o,d){var f=Ze(d,Pn(Ma));return Fe(o,w,e,d,f)}),Ll=ot(function(o,d){var f=Ze(d,Pn(Ll));return Fe(o,A,e,d,f)}),sg=Ue(function(o,d){return Fe(o,C,e,e,e,d)});function og(o,d){if(typeof o!="function")throw new _e(s);return d=d===e?d:at(d),ot(o,d)}function lg(o,d){if(typeof o!="function")throw new _e(s);return d=d==null?0:Rt(at(d),0),ot(function(f){var y=f[d],T=rn(f,0,d);return y&&Xe(T,y),ne(o,this,T)})}function cg(o,d,f){var y=!0,T=!0;if(typeof o!="function")throw new _e(s);return $t(f)&&(y="leading"in f?!!f.leading:y,T="trailing"in f?!!f.trailing:T),Ml(o,d,{leading:y,maxWait:d,trailing:T})}function dg(o){return El(o,1)}function ug(o,d){return Ma(pa(d),o)}function hg(){if(!arguments.length)return[];var o=arguments[0];return rt(o)?o:[o]}function _g(o){return ge(o,m)}function fg(o,d){return d=typeof d=="function"?d:e,ge(o,m,d)}function gg(o){return ge(o,_|m)}function pg(o,d){return d=typeof d=="function"?d:e,ge(o,_|m,d)}function mg(o,d){return d==null||yo(o,d,Pt(d))}function Te(o,d){return o===d||o!==o&&d!==d}var vg=Xi(ra),kg=Xi(function(o,d){return o>=d}),kn=To(function(){return arguments}())?To:function(o){return St(o)&&kt.call(o,"callee")&&!ho.call(o,"callee")},rt=z.isArray,yg=Gs?ie(Gs):Eh;function Jt(o){return o!=null&&sr(o.length)&&!je(o)}function Ct(o){return St(o)&&Jt(o)}function bg(o){return o===!0||o===!1||St(o)&&Vt(o)==be}var an=Nu||Ua,xg=qs?ie(qs):Ch;function wg(o){return St(o)&&o.nodeType===1&&!li(o)}function $g(o){if(o==null)return!0;if(Jt(o)&&(rt(o)||typeof o=="string"||typeof o.splice=="function"||an(o)||On(o)||kn(o)))return!o.length;var d=Wt(o);if(d==Tt||d==we)return!o.size;if(si(o))return!oa(o).length;for(var f in o)if(kt.call(o,f))return!1;return!0}function Sg(o,d){return ii(o,d)}function Tg(o,d,f){f=typeof f=="function"?f:e;var y=f?f(o,d):e;return y===e?ii(o,d,e,f):!!y}function La(o){if(!St(o))return!1;var d=Vt(o);return d==wn||d==br||typeof o.message=="string"&&typeof o.name=="string"&&!li(o)}function Eg(o){return typeof o=="number"&&fo(o)}function je(o){if(!$t(o))return!1;var d=Vt(o);return d==ee||d==dn||d==cn||d==Jc}function Nl(o){return typeof o=="number"&&o==at(o)}function sr(o){return typeof o=="number"&&o>-1&&o%1==0&&o<=it}function $t(o){var d=typeof o;return o!=null&&(d=="object"||d=="function")}function St(o){return o!=null&&typeof o=="object"}var Rl=Ys?ie(Ys):Dh;function Cg(o,d){return o===d||sa(o,d,wa(d))}function Ag(o,d,f){return f=typeof f=="function"?f:e,sa(o,d,wa(d),f)}function Dg(o){return Pl(o)&&o!=+o}function Ig(o){if(__(o))throw new nt(a);return Eo(o)}function Mg(o){return o===null}function Lg(o){return o==null}function Pl(o){return typeof o=="number"||St(o)&&Vt(o)==Et}function li(o){if(!St(o)||Vt(o)!=xe)return!1;var d=Li(o);if(d===null)return!0;var f=kt.call(d,"constructor")&&d.constructor;return typeof f=="function"&&f instanceof f&&Ai.call(f)==Cu}var Na=Ks?ie(Ks):Ih;function Ng(o){return Nl(o)&&o>=-it&&o<=it}var Ol=Js?ie(Js):Mh;function or(o){return typeof o=="string"||!rt(o)&&St(o)&&Vt(o)==jn}function ae(o){return typeof o=="symbol"||St(o)&&Vt(o)==yi}var On=Xs?ie(Xs):Lh;function Rg(o){return o===e}function Pg(o){return St(o)&&Wt(o)==Gn}function Og(o){return St(o)&&Vt(o)==Zc}var Hg=Xi(la),Bg=Xi(function(o,d){return o<=d});function Hl(o){if(!o)return[];if(Jt(o))return or(o)?$e(o):Kt(o);if(Kn&&o[Kn])return pu(o[Kn]());var d=Wt(o),f=d==Tt?Kr:d==we?Ti:Hn;return f(o)}function Ge(o){if(!o)return o===0?o:0;if(o=ve(o),o===Z||o===-Z){var d=o<0?-1:1;return d*mt}return o===o?o:0}function at(o){var d=Ge(o),f=d%1;return d===d?f?d-f:d:0}function Bl(o){return o?gn(at(o),0,Lt):0}function ve(o){if(typeof o=="number")return o;if(ae(o))return It;if($t(o)){var d=typeof o.valueOf=="function"?o.valueOf():o;o=$t(d)?d+"":d}if(typeof o!="string")return o===0?o:+o;o=io(o);var f=kd.test(o);return f||bd.test(o)?Qd(o.slice(2),f?2:8):vd.test(o)?It:+o}function zl(o){return Re(o,Xt(o))}function zg(o){return o?gn(at(o),-it,it):o===0?o:0}function pt(o){return o==null?"":re(o)}var Wg=Nn(function(o,d){if(si(d)||Jt(d)){Re(d,Pt(d),o);return}for(var f in d)kt.call(d,f)&&ti(o,f,d[f])}),Wl=Nn(function(o,d){Re(d,Xt(d),o)}),lr=Nn(function(o,d,f,y){Re(d,Xt(d),o,y)}),Fg=Nn(function(o,d,f,y){Re(d,Pt(d),o,y)}),Ug=Ue(ea);function Vg(o,d){var f=Ln(o);return d==null?f:ko(f,d)}var jg=ot(function(o,d){o=yt(o);var f=-1,y=d.length,T=y>2?d[2]:e;for(T&&jt(d[0],d[1],T)&&(y=1);++f<y;)for(var D=d[f],L=Xt(D),R=-1,H=L.length;++R<H;){var U=L[R],V=o[U];(V===e||Te(V,Dn[U])&&!kt.call(o,U))&&(o[U]=D[U])}return o}),Gg=ot(function(o){return o.push(e,rl),ne(Fl,e,o)});function qg(o,d){return Qs(o,Q(d,3),Ne)}function Yg(o,d){return Qs(o,Q(d,3),ia)}function Kg(o,d){return o==null?o:na(o,Q(d,3),Xt)}function Jg(o,d){return o==null?o:$o(o,Q(d,3),Xt)}function Xg(o,d){return o&&Ne(o,Q(d,3))}function Zg(o,d){return o&&ia(o,Q(d,3))}function Qg(o){return o==null?[]:Ui(o,Pt(o))}function tp(o){return o==null?[]:Ui(o,Xt(o))}function Ra(o,d,f){var y=o==null?e:pn(o,d);return y===e?f:y}function ep(o,d){return o!=null&&ol(o,d,wh)}function Pa(o,d){return o!=null&&ol(o,d,$h)}var np=Qo(function(o,d,f){d!=null&&typeof d.toString!="function"&&(d=Di.call(d)),o[d]=f},Ha(Zt)),ip=Qo(function(o,d,f){d!=null&&typeof d.toString!="function"&&(d=Di.call(d)),kt.call(o,d)?o[d].push(f):o[d]=[f]},Q),rp=ot(ni);function Pt(o){return Jt(o)?mo(o):oa(o)}function Xt(o){return Jt(o)?mo(o,!0):Nh(o)}function ap(o,d){var f={};return d=Q(d,3),Ne(o,function(y,T,D){We(f,d(y,T,D),y)}),f}function sp(o,d){var f={};return d=Q(d,3),Ne(o,function(y,T,D){We(f,T,d(y,T,D))}),f}var op=Nn(function(o,d,f){Vi(o,d,f)}),Fl=Nn(function(o,d,f,y){Vi(o,d,f,y)}),lp=Ue(function(o,d){var f={};if(o==null)return f;var y=!1;d=wt(d,function(D){return D=nn(D,o),y||(y=D.length>1),D}),Re(o,ba(o),f),y&&(f=ge(f,_|g|m,e_));for(var T=d.length;T--;)_a(f,d[T]);return f});function cp(o,d){return Ul(o,ar(Q(d)))}var dp=Ue(function(o,d){return o==null?{}:Ph(o,d)});function Ul(o,d){if(o==null)return{};var f=wt(ba(o),function(y){return[y]});return d=Q(d),No(o,f,function(y,T){return d(y,T[0])})}function up(o,d,f){d=nn(d,o);var y=-1,T=d.length;for(T||(T=1,o=e);++y<T;){var D=o==null?e:o[Pe(d[y])];D===e&&(y=T,D=f),o=je(D)?D.call(o):D}return o}function hp(o,d,f){return o==null?o:ri(o,d,f)}function _p(o,d,f,y){return y=typeof y=="function"?y:e,o==null?o:ri(o,d,f,y)}var Vl=nl(Pt),jl=nl(Xt);function fp(o,d,f){var y=rt(o),T=y||an(o)||On(o);if(d=Q(d,4),f==null){var D=o&&o.constructor;T?f=y?new D:[]:$t(o)?f=je(D)?Ln(Li(o)):{}:f={}}return(T?he:Ne)(o,function(L,R,H){return d(f,L,R,H)}),f}function gp(o,d){return o==null?!0:_a(o,d)}function pp(o,d,f){return o==null?o:Bo(o,d,pa(f))}function mp(o,d,f,y){return y=typeof y=="function"?y:e,o==null?o:Bo(o,d,pa(f),y)}function Hn(o){return o==null?[]:Yr(o,Pt(o))}function vp(o){return o==null?[]:Yr(o,Xt(o))}function kp(o,d,f){return f===e&&(f=d,d=e),f!==e&&(f=ve(f),f=f===f?f:0),d!==e&&(d=ve(d),d=d===d?d:0),gn(ve(o),d,f)}function yp(o,d,f){return d=Ge(d),f===e?(f=d,d=0):f=Ge(f),o=ve(o),Sh(o,d,f)}function bp(o,d,f){if(f&&typeof f!="boolean"&&jt(o,d,f)&&(d=f=e),f===e&&(typeof d=="boolean"?(f=d,d=e):typeof o=="boolean"&&(f=o,o=e)),o===e&&d===e?(o=0,d=1):(o=Ge(o),d===e?(d=o,o=0):d=Ge(d)),o>d){var y=o;o=d,d=y}if(f||o%1||d%1){var T=go();return zt(o+T*(d-o+Zd("1e-"+((T+"").length-1))),d)}return da(o,d)}var xp=Rn(function(o,d,f){return d=d.toLowerCase(),o+(f?Gl(d):d)});function Gl(o){return Oa(pt(o).toLowerCase())}function ql(o){return o=pt(o),o&&o.replace(wd,uu).replace(Fd,"")}function wp(o,d,f){o=pt(o),d=re(d);var y=o.length;f=f===e?y:gn(at(f),0,y);var T=f;return f-=d.length,f>=0&&o.slice(f,T)==d}function $p(o){return o=pt(o),o&&id.test(o)?o.replace(ws,hu):o}function Sp(o){return o=pt(o),o&&cd.test(o)?o.replace(Mr,"\\$&"):o}var Tp=Rn(function(o,d,f){return o+(f?"-":"")+d.toLowerCase()}),Ep=Rn(function(o,d,f){return o+(f?" ":"")+d.toLowerCase()}),Cp=Jo("toLowerCase");function Ap(o,d,f){o=pt(o),d=at(d);var y=d?Cn(o):0;if(!d||y>=d)return o;var T=(d-y)/2;return Ji(Oi(T),f)+o+Ji(Pi(T),f)}function Dp(o,d,f){o=pt(o),d=at(d);var y=d?Cn(o):0;return d&&y<d?o+Ji(d-y,f):o}function Ip(o,d,f){o=pt(o),d=at(d);var y=d?Cn(o):0;return d&&y<d?Ji(d-y,f)+o:o}function Mp(o,d,f){return f||d==null?d=0:d&&(d=+d),Hu(pt(o).replace(Lr,""),d||0)}function Lp(o,d,f){return(f?jt(o,d,f):d===e)?d=1:d=at(d),ua(pt(o),d)}function Np(){var o=arguments,d=pt(o[0]);return o.length<3?d:d.replace(o[1],o[2])}var Rp=Rn(function(o,d,f){return o+(f?"_":"")+d.toLowerCase()});function Pp(o,d,f){return f&&typeof f!="number"&&jt(o,d,f)&&(d=f=e),f=f===e?Lt:f>>>0,f?(o=pt(o),o&&(typeof d=="string"||d!=null&&!Na(d))&&(d=re(d),!d&&En(o))?rn($e(o),0,f):o.split(d,f)):[]}var Op=Rn(function(o,d,f){return o+(f?" ":"")+Oa(d)});function Hp(o,d,f){return o=pt(o),f=f==null?0:gn(at(f),0,o.length),d=re(d),o.slice(f,f+d.length)==d}function Bp(o,d,f){var y=E.templateSettings;f&&jt(o,d,f)&&(d=e),o=pt(o),d=lr({},d,y,il);var T=lr({},d.imports,y.imports,il),D=Pt(T),L=Yr(T,D),R,H,U=0,V=d.interpolate||bi,G="__p += '",K=Jr((d.escape||bi).source+"|"+V.source+"|"+(V===$s?md:bi).source+"|"+(d.evaluate||bi).source+"|$","g"),X="//# sourceURL="+(kt.call(d,"sourceURL")?(d.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++qd+"]")+`
`;o.replace(K,function(et,lt,ht,se,Gt,oe){return ht||(ht=se),G+=o.slice(U,oe).replace($d,_u),lt&&(R=!0,G+=`' +
__e(`+lt+`) +
'`),Gt&&(H=!0,G+=`';
`+Gt+`;
__p += '`),ht&&(G+=`' +
((__t = (`+ht+`)) == null ? '' : __t) +
'`),U=oe+et.length,et}),G+=`';
`;var tt=kt.call(d,"variable")&&d.variable;if(!tt)G=`with (obj) {
`+G+`
}
`;else if(gd.test(tt))throw new nt(l);G=(H?G.replace(Qc,""):G).replace(td,"$1").replace(ed,"$1;"),G="function("+(tt||"obj")+`) {
`+(tt?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(R?", __e = _.escape":"")+(H?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+G+`return __p
}`;var st=Kl(function(){return ft(D,X+"return "+G).apply(e,L)});if(st.source=G,La(st))throw st;return st}function zp(o){return pt(o).toLowerCase()}function Wp(o){return pt(o).toUpperCase()}function Fp(o,d,f){if(o=pt(o),o&&(f||d===e))return io(o);if(!o||!(d=re(d)))return o;var y=$e(o),T=$e(d),D=ro(y,T),L=ao(y,T)+1;return rn(y,D,L).join("")}function Up(o,d,f){if(o=pt(o),o&&(f||d===e))return o.slice(0,oo(o)+1);if(!o||!(d=re(d)))return o;var y=$e(o),T=ao(y,$e(d))+1;return rn(y,0,T).join("")}function Vp(o,d,f){if(o=pt(o),o&&(f||d===e))return o.replace(Lr,"");if(!o||!(d=re(d)))return o;var y=$e(o),T=ro(y,$e(d));return rn(y,T).join("")}function jp(o,d){var f=N,y=P;if($t(d)){var T="separator"in d?d.separator:T;f="length"in d?at(d.length):f,y="omission"in d?re(d.omission):y}o=pt(o);var D=o.length;if(En(o)){var L=$e(o);D=L.length}if(f>=D)return o;var R=f-Cn(y);if(R<1)return y;var H=L?rn(L,0,R).join(""):o.slice(0,R);if(T===e)return H+y;if(L&&(R+=H.length-R),Na(T)){if(o.slice(R).search(T)){var U,V=H;for(T.global||(T=Jr(T.source,pt(Ss.exec(T))+"g")),T.lastIndex=0;U=T.exec(V);)var G=U.index;H=H.slice(0,G===e?R:G)}}else if(o.indexOf(re(T),R)!=R){var K=H.lastIndexOf(T);K>-1&&(H=H.slice(0,K))}return H+y}function Gp(o){return o=pt(o),o&&nd.test(o)?o.replace(xs,yu):o}var qp=Rn(function(o,d,f){return o+(f?" ":"")+d.toUpperCase()}),Oa=Jo("toUpperCase");function Yl(o,d,f){return o=pt(o),d=f?e:d,d===e?gu(o)?wu(o):su(o):o.match(d)||[]}var Kl=ot(function(o,d){try{return ne(o,e,d)}catch(f){return La(f)?f:new nt(f)}}),Yp=Ue(function(o,d){return he(d,function(f){f=Pe(f),We(o,f,Ia(o[f],o))}),o});function Kp(o){var d=o==null?0:o.length,f=Q();return o=d?wt(o,function(y){if(typeof y[1]!="function")throw new _e(s);return[f(y[0]),y[1]]}):[],ot(function(y){for(var T=-1;++T<d;){var D=o[T];if(ne(D[0],this,y))return ne(D[1],this,y)}})}function Jp(o){return yh(ge(o,_))}function Ha(o){return function(){return o}}function Xp(o,d){return o==null||o!==o?d:o}var Zp=Zo(),Qp=Zo(!0);function Zt(o){return o}function Ba(o){return Co(typeof o=="function"?o:ge(o,_))}function tm(o){return Do(ge(o,_))}function em(o,d){return Io(o,ge(d,_))}var nm=ot(function(o,d){return function(f){return ni(f,o,d)}}),im=ot(function(o,d){return function(f){return ni(o,f,d)}});function za(o,d,f){var y=Pt(d),T=Ui(d,y);f==null&&!($t(d)&&(T.length||!y.length))&&(f=d,d=o,o=this,T=Ui(d,Pt(d)));var D=!($t(f)&&"chain"in f)||!!f.chain,L=je(o);return he(T,function(R){var H=d[R];o[R]=H,L&&(o.prototype[R]=function(){var U=this.__chain__;if(D||U){var V=o(this.__wrapped__),G=V.__actions__=Kt(this.__actions__);return G.push({func:H,args:arguments,thisArg:o}),V.__chain__=U,V}return H.apply(o,Xe([this.value()],arguments))})}),o}function rm(){return Ot._===this&&(Ot._=Au),this}function Wa(){}function am(o){return o=at(o),ot(function(d){return Mo(d,o)})}var sm=va(wt),om=va(Zs),lm=va(Ur);function Jl(o){return Sa(o)?Vr(Pe(o)):Oh(o)}function cm(o){return function(d){return o==null?e:pn(o,d)}}var dm=tl(),um=tl(!0);function Fa(){return[]}function Ua(){return!1}function hm(){return{}}function _m(){return""}function fm(){return!0}function gm(o,d){if(o=at(o),o<1||o>it)return[];var f=Lt,y=zt(o,Lt);d=Q(d),o-=Lt;for(var T=qr(y,d);++f<o;)d(f);return T}function pm(o){return rt(o)?wt(o,Pe):ae(o)?[o]:Kt(pl(pt(o)))}function mm(o){var d=++Eu;return pt(o)+d}var vm=Ki(function(o,d){return o+d},0),km=ka("ceil"),ym=Ki(function(o,d){return o/d},1),bm=ka("floor");function xm(o){return o&&o.length?Fi(o,Zt,ra):e}function wm(o,d){return o&&o.length?Fi(o,Q(d,2),ra):e}function $m(o){return eo(o,Zt)}function Sm(o,d){return eo(o,Q(d,2))}function Tm(o){return o&&o.length?Fi(o,Zt,la):e}function Em(o,d){return o&&o.length?Fi(o,Q(d,2),la):e}var Cm=Ki(function(o,d){return o*d},1),Am=ka("round"),Dm=Ki(function(o,d){return o-d},0);function Im(o){return o&&o.length?Gr(o,Zt):0}function Mm(o,d){return o&&o.length?Gr(o,Q(d,2)):0}return E.after=tg,E.ary=El,E.assign=Wg,E.assignIn=Wl,E.assignInWith=lr,E.assignWith=Fg,E.at=Ug,E.before=Cl,E.bind=Ia,E.bindAll=Yp,E.bindKey=Al,E.castArray=hg,E.chain=$l,E.chunk=y_,E.compact=b_,E.concat=x_,E.cond=Kp,E.conforms=Jp,E.constant=Ha,E.countBy=If,E.create=Vg,E.curry=Dl,E.curryRight=Il,E.debounce=Ml,E.defaults=jg,E.defaultsDeep=Gg,E.defer=eg,E.delay=ng,E.difference=w_,E.differenceBy=$_,E.differenceWith=S_,E.drop=T_,E.dropRight=E_,E.dropRightWhile=C_,E.dropWhile=A_,E.fill=D_,E.filter=Lf,E.flatMap=Pf,E.flatMapDeep=Of,E.flatMapDepth=Hf,E.flatten=yl,E.flattenDeep=I_,E.flattenDepth=M_,E.flip=ig,E.flow=Zp,E.flowRight=Qp,E.fromPairs=L_,E.functions=Qg,E.functionsIn=tp,E.groupBy=Bf,E.initial=R_,E.intersection=P_,E.intersectionBy=O_,E.intersectionWith=H_,E.invert=np,E.invertBy=ip,E.invokeMap=Wf,E.iteratee=Ba,E.keyBy=Ff,E.keys=Pt,E.keysIn=Xt,E.map=nr,E.mapKeys=ap,E.mapValues=sp,E.matches=tm,E.matchesProperty=em,E.memoize=rr,E.merge=op,E.mergeWith=Fl,E.method=nm,E.methodOf=im,E.mixin=za,E.negate=ar,E.nthArg=am,E.omit=lp,E.omitBy=cp,E.once=rg,E.orderBy=Uf,E.over=sm,E.overArgs=ag,E.overEvery=om,E.overSome=lm,E.partial=Ma,E.partialRight=Ll,E.partition=Vf,E.pick=dp,E.pickBy=Ul,E.property=Jl,E.propertyOf=cm,E.pull=F_,E.pullAll=xl,E.pullAllBy=U_,E.pullAllWith=V_,E.pullAt=j_,E.range=dm,E.rangeRight=um,E.rearg=sg,E.reject=qf,E.remove=G_,E.rest=og,E.reverse=Aa,E.sampleSize=Kf,E.set=hp,E.setWith=_p,E.shuffle=Jf,E.slice=q_,E.sortBy=Qf,E.sortedUniq=tf,E.sortedUniqBy=ef,E.split=Pp,E.spread=lg,E.tail=nf,E.take=rf,E.takeRight=af,E.takeRightWhile=sf,E.takeWhile=of,E.tap=xf,E.throttle=cg,E.thru=er,E.toArray=Hl,E.toPairs=Vl,E.toPairsIn=jl,E.toPath=pm,E.toPlainObject=zl,E.transform=fp,E.unary=dg,E.union=lf,E.unionBy=cf,E.unionWith=df,E.uniq=uf,E.uniqBy=hf,E.uniqWith=_f,E.unset=gp,E.unzip=Da,E.unzipWith=wl,E.update=pp,E.updateWith=mp,E.values=Hn,E.valuesIn=vp,E.without=ff,E.words=Yl,E.wrap=ug,E.xor=gf,E.xorBy=pf,E.xorWith=mf,E.zip=vf,E.zipObject=kf,E.zipObjectDeep=yf,E.zipWith=bf,E.entries=Vl,E.entriesIn=jl,E.extend=Wl,E.extendWith=lr,za(E,E),E.add=vm,E.attempt=Kl,E.camelCase=xp,E.capitalize=Gl,E.ceil=km,E.clamp=kp,E.clone=_g,E.cloneDeep=gg,E.cloneDeepWith=pg,E.cloneWith=fg,E.conformsTo=mg,E.deburr=ql,E.defaultTo=Xp,E.divide=ym,E.endsWith=wp,E.eq=Te,E.escape=$p,E.escapeRegExp=Sp,E.every=Mf,E.find=Nf,E.findIndex=vl,E.findKey=qg,E.findLast=Rf,E.findLastIndex=kl,E.findLastKey=Yg,E.floor=bm,E.forEach=Sl,E.forEachRight=Tl,E.forIn=Kg,E.forInRight=Jg,E.forOwn=Xg,E.forOwnRight=Zg,E.get=Ra,E.gt=vg,E.gte=kg,E.has=ep,E.hasIn=Pa,E.head=bl,E.identity=Zt,E.includes=zf,E.indexOf=N_,E.inRange=yp,E.invoke=rp,E.isArguments=kn,E.isArray=rt,E.isArrayBuffer=yg,E.isArrayLike=Jt,E.isArrayLikeObject=Ct,E.isBoolean=bg,E.isBuffer=an,E.isDate=xg,E.isElement=wg,E.isEmpty=$g,E.isEqual=Sg,E.isEqualWith=Tg,E.isError=La,E.isFinite=Eg,E.isFunction=je,E.isInteger=Nl,E.isLength=sr,E.isMap=Rl,E.isMatch=Cg,E.isMatchWith=Ag,E.isNaN=Dg,E.isNative=Ig,E.isNil=Lg,E.isNull=Mg,E.isNumber=Pl,E.isObject=$t,E.isObjectLike=St,E.isPlainObject=li,E.isRegExp=Na,E.isSafeInteger=Ng,E.isSet=Ol,E.isString=or,E.isSymbol=ae,E.isTypedArray=On,E.isUndefined=Rg,E.isWeakMap=Pg,E.isWeakSet=Og,E.join=B_,E.kebabCase=Tp,E.last=me,E.lastIndexOf=z_,E.lowerCase=Ep,E.lowerFirst=Cp,E.lt=Hg,E.lte=Bg,E.max=xm,E.maxBy=wm,E.mean=$m,E.meanBy=Sm,E.min=Tm,E.minBy=Em,E.stubArray=Fa,E.stubFalse=Ua,E.stubObject=hm,E.stubString=_m,E.stubTrue=fm,E.multiply=Cm,E.nth=W_,E.noConflict=rm,E.noop=Wa,E.now=ir,E.pad=Ap,E.padEnd=Dp,E.padStart=Ip,E.parseInt=Mp,E.random=bp,E.reduce=jf,E.reduceRight=Gf,E.repeat=Lp,E.replace=Np,E.result=up,E.round=Am,E.runInContext=O,E.sample=Yf,E.size=Xf,E.snakeCase=Rp,E.some=Zf,E.sortedIndex=Y_,E.sortedIndexBy=K_,E.sortedIndexOf=J_,E.sortedLastIndex=X_,E.sortedLastIndexBy=Z_,E.sortedLastIndexOf=Q_,E.startCase=Op,E.startsWith=Hp,E.subtract=Dm,E.sum=Im,E.sumBy=Mm,E.template=Bp,E.times=gm,E.toFinite=Ge,E.toInteger=at,E.toLength=Bl,E.toLower=zp,E.toNumber=ve,E.toSafeInteger=zg,E.toString=pt,E.toUpper=Wp,E.trim=Fp,E.trimEnd=Up,E.trimStart=Vp,E.truncate=jp,E.unescape=Gp,E.uniqueId=mm,E.upperCase=qp,E.upperFirst=Oa,E.each=Sl,E.eachRight=Tl,E.first=bl,za(E,function(){var o={};return Ne(E,function(d,f){kt.call(E.prototype,f)||(o[f]=d)}),o}(),{chain:!1}),E.VERSION=i,he(["bind","bindKey","curry","curryRight","partial","partialRight"],function(o){E[o].placeholder=E}),he(["drop","take"],function(o,d){ct.prototype[o]=function(f){f=f===e?1:Rt(at(f),0);var y=this.__filtered__&&!d?new ct(this):this.clone();return y.__filtered__?y.__takeCount__=zt(f,y.__takeCount__):y.__views__.push({size:zt(f,Lt),type:o+(y.__dir__<0?"Right":"")}),y},ct.prototype[o+"Right"]=function(f){return this.reverse()[o](f).reverse()}}),he(["filter","map","takeWhile"],function(o,d){var f=d+1,y=f==j||f==Y;ct.prototype[o]=function(T){var D=this.clone();return D.__iteratees__.push({iteratee:Q(T,3),type:f}),D.__filtered__=D.__filtered__||y,D}}),he(["head","last"],function(o,d){var f="take"+(d?"Right":"");ct.prototype[o]=function(){return this[f](1).value()[0]}}),he(["initial","tail"],function(o,d){var f="drop"+(d?"":"Right");ct.prototype[o]=function(){return this.__filtered__?new ct(this):this[f](1)}}),ct.prototype.compact=function(){return this.filter(Zt)},ct.prototype.find=function(o){return this.filter(o).head()},ct.prototype.findLast=function(o){return this.reverse().find(o)},ct.prototype.invokeMap=ot(function(o,d){return typeof o=="function"?new ct(this):this.map(function(f){return ni(f,o,d)})}),ct.prototype.reject=function(o){return this.filter(ar(Q(o)))},ct.prototype.slice=function(o,d){o=at(o);var f=this;return f.__filtered__&&(o>0||d<0)?new ct(f):(o<0?f=f.takeRight(-o):o&&(f=f.drop(o)),d!==e&&(d=at(d),f=d<0?f.dropRight(-d):f.take(d-o)),f)},ct.prototype.takeRightWhile=function(o){return this.reverse().takeWhile(o).reverse()},ct.prototype.toArray=function(){return this.take(Lt)},Ne(ct.prototype,function(o,d){var f=/^(?:filter|find|map|reject)|While$/.test(d),y=/^(?:head|last)$/.test(d),T=E[y?"take"+(d=="last"?"Right":""):d],D=y||/^find/.test(d);T&&(E.prototype[d]=function(){var L=this.__wrapped__,R=y?[1]:arguments,H=L instanceof ct,U=R[0],V=H||rt(L),G=function(lt){var ht=T.apply(E,Xe([lt],R));return y&&K?ht[0]:ht};V&&f&&typeof U=="function"&&U.length!=1&&(H=V=!1);var K=this.__chain__,X=!!this.__actions__.length,tt=D&&!K,st=H&&!X;if(!D&&V){L=st?L:new ct(this);var et=o.apply(L,R);return et.__actions__.push({func:er,args:[G],thisArg:e}),new fe(et,K)}return tt&&st?o.apply(this,R):(et=this.thru(G),tt?y?et.value()[0]:et.value():et)})}),he(["pop","push","shift","sort","splice","unshift"],function(o){var d=Ei[o],f=/^(?:push|sort|unshift)$/.test(o)?"tap":"thru",y=/^(?:pop|shift)$/.test(o);E.prototype[o]=function(){var T=arguments;if(y&&!this.__chain__){var D=this.value();return d.apply(rt(D)?D:[],T)}return this[f](function(L){return d.apply(rt(L)?L:[],T)})}}),Ne(ct.prototype,function(o,d){var f=E[d];if(f){var y=f.name+"";kt.call(Mn,y)||(Mn[y]=[]),Mn[y].push({name:d,func:f})}}),Mn[Yi(e,S).name]=[{name:"wrapper",func:e}],ct.prototype.clone=ju,ct.prototype.reverse=Gu,ct.prototype.value=qu,E.prototype.at=wf,E.prototype.chain=$f,E.prototype.commit=Sf,E.prototype.next=Tf,E.prototype.plant=Cf,E.prototype.reverse=Af,E.prototype.toJSON=E.prototype.valueOf=E.prototype.value=Df,E.prototype.first=E.prototype.head,Kn&&(E.prototype[Kn]=Ef),E},An=$u();un?((un.exports=An)._=An,Br._=An):Ot._=An}).call(ci)})(yr,yr.exports);var vy=yr.exports;const ky={style:{height:"100%","background-color":"white"}},yy={class:"gantt-controls"},Ty={__name:"gantt-widget",props:{widgetObj:{type:Object,required:!0}},async setup(t){let n,e;const i=t,r=async x=>{var p,b;const S={};for(const k in x)!k.startsWith("$")&&x.hasOwnProperty(k)&&(S[k]=x[k]);if(S.start_date=cr(S.start_date),S.end_date=cr(S.end_date),console.log("",S),(p=i.widgetObj.widgetParams[11])!=null&&p.value)try{const k=await Um((b=i.widgetObj.widgetParams[11])==null?void 0:b.value,S);k&&k.length>0&&console.log("",k)}catch(k){console.error(":",k)}},a=di(),s=di("day"),l=()=>{var p,b,k,w,A,I,C,M,N,P,B,W,j;if(!a.value)return;dt.config.drag_move=!0,dt.config.drag_resize=!0,dt.config.drag_progress=!0,dt.config.drag_links=!0,dt.config.drag_order=!0,dt.config.order_branch=(p=i.widgetObj.widgetParams[13])==null?void 0:p.value,dt.config.order_branch_free=(b=i.widgetObj.widgetParams[14])==null?void 0:b.value,dt.config.drag_move=(q,Y,Z)=>(console.log(` ${q.text}  ${Y==null?void 0:Y.text}  ${Z} `),!0),dt.config.auto_tasks=(k=i.widgetObj.widgetParams[12])==null?void 0:k.value,dt.config.editable=!0,dt.init(a.value),u(),dt.plugins({tooltip:(w=i.widgetObj.widgetParams[1])==null?void 0:w.value,quick_info:(A=i.widgetObj.widgetParams[10])==null?void 0:A.value}),dt.locale.date={month_full:["1","2","3","4","5","6","7","8","9","10","11","12"],month_short:["1","2","3","4","5","6","7","8","9","10","11","12"],day_full:["","","","","","",""],day_short:["","","","","","",""]},dt.config.scales=[{unit:"month",step:1,date:"%F, %Y"},{unit:"day",step:1,date:"%j, %D"}],dt.config.drag_project=(I=i.widgetObj.widgetParams[2])==null?void 0:I.value,dt.config.fit_tasks=!0,dt.config.scale_height=(C=i.widgetObj.widgetParams[3])==null?void 0:C.value,dt.config.row_height=(M=i.widgetObj.widgetParams[4])==null?void 0:M.value,dt.config.bar_height=(N=i.widgetObj.widgetParams[5])==null?void 0:N.value,dt.config.autosize=(P=i.widgetObj.widgetParams[6])==null?void 0:P.value,dt.config.readonly=(B=i.widgetObj.widgetParams[7])==null?void 0:B.value,dt.config.show_grid=(W=i.widgetObj.widgetParams[8])==null?void 0:W.value,dt.config.show_progress=(j=i.widgetObj.widgetParams[9])==null?void 0:j.value,dt.templates.tooltip_text=(q,Y,Z)=>`
        <div>
          <div>${Z.text}</div>
          <div>${cr(Z.start_date)}</div>
          <div>${cr(Z.end_date)}</div>
          <div>${Z.progress*100}%</div>
        </div>`,dt.config.columns=i.widgetObj.widgetParams[0].typeOptions.dataJson.columns,dt.clearAll();const x=di();x.value=Wm(i.widgetObj.widgetParams[0].typeOptions.dataJson),dt.parse(x.value),c();const S=vy.debounce((q,Y)=>{console.log(":",q,":",Y);const Z=dt.getTask(q);r(Z)},500);dt.attachEvent("onAfterTaskMove",S)},c=()=>{dt.attachEvent("onAfterTaskUpdate",async function(x,S){return r(S),!0})},u=()=>{dt.ext.zoom.init({levels:[{name:"hour",scale_height:60,min_column_width:30,scales:[{unit:"day",step:1,format:"%d %M"},{unit:"hour",step:4,format:"%H:%i"}]},{name:"day",scale_height:60,min_column_width:70,scales:[{unit:"week",step:1,format:"Week #%W"},{unit:"day",step:1,format:"%d %M (%D)"}]},{name:"week",scale_height:60,min_column_width:50,scales:[{unit:"month",step:1,format:"%F, %Y"},{unit:"week",step:1,format:"Week #%W"}]},{name:"month",scale_height:60,min_column_width:50,scales:[{unit:"year",step:1,format:"%Y"},{unit:"month",step:1,format:"%M"}]},{name:"quarter",scale_height:60,min_column_width:120,scales:[{unit:"year",step:1,format:"%Y"},{unit:"month",step:3,format:x=>`Q${Math.floor(x.getMonth()/3)+1}`}]},{name:"year",scale_height:60,min_column_width:100,scales:[{unit:"year",step:1,format:"%Y"}]}]}),dt.ext.zoom.setLevel(s.value),dt.ext.zoom.attachEvent("onZoom",x=>(s.value=x.name,!0))},h=()=>{dt.ext.zoom.zoomIn()},_=()=>{dt.ext.zoom.zoomOut()},g=()=>{dt.ext.zoom.setLevel(s.value)};Lm(()=>{l()});const m=di(),v=di(!1),{loadRemoteData:$}=Fm(i.widgetObj,i.widgetObj.widgetParams[0].typeOptions.dataJson,m,v);return[n,e]=Nm(()=>$()),await n,e(),(x,S)=>(Rm(),Pm("div",ky,[ui("div",yy,[ui("button",{onClick:_},"(-)"),ui("button",{onClick:h},"(+)"),Om(ui("select",{"onUpdate:modelValue":S[0]||(S[0]=p=>s.value=p),onChange:g},S[1]||(S[1]=[Bm('<option value="hour"></option><option value="day"></option><option value="week"></option><option value="month"></option><option value="quarter"></option><option value="year"></option>',6)]),544),[[Hm,s.value]])]),ui("div",{ref_key:"ganttRef",ref:a,style:zm([{width:"100%"},{height:t.widgetObj.widgetOption.height-60+"px"}])},null,4)]))}};export{Ty as default};
