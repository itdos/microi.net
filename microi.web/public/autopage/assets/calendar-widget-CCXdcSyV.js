import{u as k}from"./useWidget-CMKonltV.js";import{u as v,s as C,r as p,k as D,l as i,b as E,e as J,m as r,p as g,f as P,q as _,t as m,E as S}from"./index-wPmqCD4D.js";const B=["onClick"],q={__name:"calendar-widget",props:{widgetObj:{type:Object,required:!0}},async setup(u){let c,l;const w=v(),{formData:f}=C(w),n=u,y=p(),O=p(!1),{loadRemoteData:b}=k(n.widgetObj,n.widgetObj.widgetParams[0].typeOptions.dataJson,y,O);[c,l]=D(()=>b()),await c,l();const x=e=>n.widgetObj.widgetParams[0].typeOptions.dataJson.findIndex(a=>a.date==e)>-1,h=e=>{var a,s;let t=n.widgetObj.widgetParams[0].typeOptions.dataJson.findIndex(d=>d.date==e);return((a=n.widgetObj.widgetParams[0].typeOptions.dataJson[t])==null?void 0:a.content)==null?"无事件":(s=n.widgetObj.widgetParams[0].typeOptions.dataJson[t])==null?void 0:s.content},j=e=>{var t;f.value.JsonObj.formConfig.link&&(S.emit("calendarSelDate",e),(t=window.parent)==null||t.postMessage({key:"calendarSelDate",value:e},"*"),console.log("触发日历事件总线，当前点击日期：",e))};return(e,t)=>{const a=i("el-badge"),s=i("el-tooltip"),d=i("el-calendar");return E(),J(d,null,{"date-cell":r(({data:o})=>[g(s,{"raw-content":!0,"show-after":200,content:h(o.day)},{default:r(()=>[P("div",{onClick:N=>j(o.day)},[g(a,{"is-dot":"",hidden:!x(o.day)},{default:r(()=>[_(m(o.day.split("-")[2]),1)]),_:2},1032,["hidden"]),_(" "+m(o.isSelected?"✔️":""),1)],8,B)]),_:2},1032,["content"])]),_:1})}}};export{q as default};
