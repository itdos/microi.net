import{i as W}from"./index-C2kp-yMC.js";import{_ as q,u as M,s as N,r as R,a as U,k as V,j as K,n as z,b as Q,d as B,e as X,l as Y,f as Z,m as $,F as ee}from"./index-dXYoX_di.js";import{C as te}from"./CommonSearch-CUTXptYO.js";import"./useWidget-Ctz9ELKX.js";import"./axiosInstance-DG6xiFm4.js";const ae={__name:"linebar-widget",props:{widgetObj:{type:Object,required:!0}},setup(d){const D=M(),{curWrapper:T,dark:l}=N(D),t=d,u=R();let o=null;const e=R({title:{text:"",subtext:"",textStyle:{color:"#333"}},tooltip:{trigger:"axis",show:!0},legend:{orient:"vertical",left:"left",show:!0,textStyle:{color:"#333"}},xAxis:[{type:"category",data:[],axisLabel:{color:"#333"},boundaryGap:!0}],yAxis:[{type:"value",axisLabel:{color:"#333",formatter:"{value}"},splitLine:{show:!0}},{type:"value",axisLabel:{color:"#333",formatter:"{value}"},splitLine:{show:!0}}],series:[],toolbox:{show:!1}}),C=(i,a)=>{let r;return function(...n){clearTimeout(r),r=setTimeout(()=>i.apply(this,n),a)}};U(()=>{window.addEventListener("resize",g)}),V(()=>{window.removeEventListener("resize",g)});const F=K(()=>{var a;let i=(a=t.widgetObj.widgetParams[1])!=null&&a.value?40:0;return t.widgetObj.widgetOption.height-i+"px"}),v=()=>{z(()=>{o&&o.dispose(),u.value&&(o=W(u.value),w())})},G=()=>{o.setOption(e.value)},w=()=>{var i,a,r,n,c,m,b,p,x,h,O,f,y,j,P,L,A,S,k;e.value.title.textStyle.color=l.value?"#999":"#333",e.value.legend.textStyle.color=l.value?"#999":"#333",e.value.legend.orient=(i=t.widgetObj.widgetParams[8])==null?void 0:i.value,e.value.legend.left=(a=t.widgetObj.widgetParams[9])==null?void 0:a.value,e.value.title.text=(r=t.widgetObj.widgetParams[5])==null?void 0:r.value,e.value.title.subtext=(n=t.widgetObj.widgetParams[6])==null?void 0:n.value,e.value.legend.show=(c=t.widgetObj.widgetParams[7])==null?void 0:c.value,e.value.tooltip.show=(m=t.widgetObj.widgetParams[10])==null?void 0:m.value,e.value.tooltip.trigger=(b=t.widgetObj.widgetParams[11])==null?void 0:b.value,e.value.toolbox.show=(p=t.widgetObj.widgetParams[13])==null?void 0:p.value,e.value.xAxis[0].data=(x=t.widgetObj.widgetParams[0])==null?void 0:x.typeOptions.dataJson.xAxis,e.value.xAxis[0].boundaryGap=(h=t.widgetObj.widgetParams[2])==null?void 0:h.value,e.value.xAxis[0].axisLabel.color=l.value?"#999":"#333",e.value.yAxis[0].axisLabel.color=l.value?"#999":"#333",e.value.yAxis[1].axisLabel.color=l.value?"#999":"#333",e.value.yAxis[0].axisLabel.formatter="{value} "+((O=t.widgetObj.widgetParams[3])==null?void 0:O.value),e.value.yAxis[1].axisLabel.formatter="{value} "+((f=t.widgetObj.widgetParams[4])==null?void 0:f.value),e.value.yAxis[0].splitLine.show=(j=(y=t.widgetObj)==null?void 0:y.widgetParams[16])==null?void 0:j.value,e.value.yAxis[1].splitLine.show=(L=(P=t.widgetObj)==null?void 0:P.widgetParams[17])==null?void 0:L.value,e.value.series=[],e.value.legend.data=[],(k=(S=(A=t.widgetObj.widgetParams[0])==null?void 0:A.typeOptions.dataJson)==null?void 0:S.series)==null||k.forEach((s,ie)=>{var I,E;const _={type:s.type,name:s.name,data:s.data,tooltip:{valueFormatter:function(J){return J+" "+s.unit}},label:{show:(I=t.widgetObj.widgetParams[14])==null?void 0:I.value,position:(E=t.widgetObj.widgetParams[15])==null?void 0:E.value}};s.type=="line"&&(_.yAxisIndex=1),e.value.series.push(_),e.value.legend.data.push(s.name)}),G()},g=()=>{z(()=>{u.value&&o.resize()})},H=C(()=>{v(),g()},1e3);return Q([()=>t.widgetObj,()=>T.value,()=>l.value],()=>{H()},{deep:!0}),(i,a)=>(B(),X(ee,null,[(B(),Y(te,{widgetObj:d.widgetObj,searchIndex:1,pickerIndex:18,key:d.widgetObj.widgetOption.number,onSetData:w,onResetData:v},null,8,["widgetObj"])),Z("div",{ref_key:"chartRef",ref:u,style:$([{width:"100%"},{height:F.value}])},null,4)],64))}},ne=q(ae,[["__scopeId","data-v-3f396e84"]]);export{ne as default};
