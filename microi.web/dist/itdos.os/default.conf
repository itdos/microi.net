server {
	listen	0.0.0.0:80;
	#server_name	127.0.0.1 localhost;
	root	/usr/share/nginx/html;
	index	index.html;

	# ========== Gzip 压缩配置 ==========
	# 开启 gzip 压缩（关键！）
	gzip on;
	# 压缩级别 1-9，6 是性能和压缩率的平衡点
	gzip_comp_level 6;
	# 小于 1KB 的文件不压缩（压缩收益小）
	gzip_min_length 1024;
	# 压缩的文件类型
	gzip_types text/plain text/css text/javascript application/javascript application/json application/xml text/xml image/svg+xml;
	# 启用 gzip 静态压缩（如果有预压缩的 .gz 文件则直接使用）
	gzip_static on;
	# 为代理服务器缓存 gzip 和非 gzip 版本
	gzip_vary on;
	# 禁用 IE6 的 gzip（IE6 支持不好）
	gzip_disable "msie6";

	# ========== 浏览器缓存配置 ==========
	# 静态资源缓存策略（带 hash 的文件可以永久缓存）
	location ~* \.(js|css|png|jpg|jpeg|gif|ico|svg|woff|woff2|ttf|eot)$ {
		expires 1y;
		add_header Cache-Control "public, immutable";
		add_header Access-Control-Allow-Origin '*';
	}

	# HTML 文件不缓存（确保更新及时）
	location ~* \.html$ {
		expires -1;
		add_header Cache-Control "no-cache, no-store, must-revalidate";
		add_header Access-Control-Allow-Origin '*';
	}

	# 默认路由
	location / {
		try_files $uri $uri/ /index.html;
		add_header Access-Control-Allow-Origin '*';
	}

	location = / {
		add_header Access-Control-Allow-Origin '*';
	}
}