server {
	listen	0.0.0.0:80;
	#server_name	127.0.0.1 localhost;
	root	/usr/share/nginx/html;
	index	index.html;
	
	# 启用 gzip 压缩
	gzip on;
	gzip_types text/plain text/css application/json application/javascript text/xml application/xml application/xml+rss text/javascript;
	gzip_min_length 1000;
	
	# 静态资源缓存
	location ~* \.(js|css|png|jpg|jpeg|gif|ico|svg|woff|woff2|ttf|eot)$ {
		expires 1y;
		add_header Cache-Control "public, immutable";
		add_header Access-Control-Allow-Origin '*';
	}
	
	# VitePress 资源文件夹
	location /assets/ {
		expires 1y;
		add_header Cache-Control "public, immutable";
		add_header Access-Control-Allow-Origin '*';
	}
	
	# SPA fallback - 所有非文件请求都返回 index.html
	location / {
		try_files $uri $uri/ $uri.html /index.html;
		add_header Access-Control-Allow-Origin '*';
	}
	
	# 明确处理 HTML 文件（不缓存）
	location ~* \.html$ {
		expires -1;
		add_header Cache-Control "no-cache, no-store, must-revalidate";
		add_header Access-Control-Allow-Origin '*';
	}
}