import{i as J}from"./index2.js";import{_ as T,u as A,s as H,r as I,j as R,a as V,k as q,n as B,b as M,d as D,e as N,l as U,f as G,m as K,F as Q}from"./index.js";import{C as X}from"./CommonSearch.js";import"./useWidget.js";import"./axiosInstance.js";const Y={__name:"pie-widget",props:{widgetObj:{type:Object,required:!0}},setup(l){var g,w;const E=A(),{curWrapper:C,dark:r}=H(E),e=l,o=I(null);let s=null;const L=R(()=>{var i;let a=(i=e.widgetObj.widgetParams[1])!=null&&i.value?40:0;return e.widgetObj.widgetOption.height-a+"px"}),t=I({});t.value={title:{show:!0,text:"",subtext:"",textStyle:{color:r.value?"#999":"#333",fontStyle:"normal",fontWeight:"bolder",fontFamily:"sans-serif",fontSize:18}},tooltip:{trigger:"item",show:!0},legend:{show:!0,type:"scroll",textStyle:{color:r.value?"#fff":"#333"},orient:(g=e.widgetObj.widgetParams[8])==null?void 0:g.value,left:(w=e.widgetObj.widgetParams[9])==null?void 0:w.value},grid:{show:!1,left:"6%",right:"4%",bottom:"30px",containLabel:!1},toolbox:{show:!0,feature:{dataView:{readOnly:!1},restore:{},saveAsImage:{}}},series:[]},V(()=>{window.addEventListener("resize",d)}),q(()=>{window.removeEventListener("resize",d)});const n=()=>{B(()=>{s&&s.dispose(),o.value&&(s=J(o.value),u())})},W=()=>{s.setOption(t.value)},u=()=>{var i,m,v,c,b,p,f,O,h,j,P,y,x,S,k,_,z;t.value.title.textStyle.color=r.value?"#999":"#333",t.value.legend.textStyle.color=r.value?"#999":"#333",t.value.legend.orient=(i=e.widgetObj.widgetParams[8])==null?void 0:i.value,t.value.legend.left=(m=e.widgetObj.widgetParams[9])==null?void 0:m.value,t.value.title.text=(v=e.widgetObj.widgetParams[5])==null?void 0:v.value,t.value.title.subtext=(c=e.widgetObj.widgetParams[6])==null?void 0:c.value,t.value.legend.show=(b=e.widgetObj.widgetParams[7])==null?void 0:b.value,t.value.tooltip.show=(p=e.widgetObj.widgetParams[10])==null?void 0:p.value,t.value.tooltip.trigger=(f=e.widgetObj.widgetParams[11])==null?void 0:f.value,t.value.toolbox.show=(O=e.widgetObj.widgetParams[12])==null?void 0:O.value,t.value.series=[];const a={type:"pie",radius:[((h=e.widgetObj.widgetParams[2])==null?void 0:h.value)+"%",((j=e.widgetObj.widgetParams[3])==null?void 0:j.value)+"%"],top:50,bottom:30,labelLine:{show:!0},padAngle:(P=e.widgetObj.widgetParams[17])==null?void 0:P.value,itemStyle:{borderRadius:(y=e.widgetObj.widgetParams[15])==null?void 0:y.value,borderColor:"#fff",borderWidth:(x=e.widgetObj.widgetParams[16])==null?void 0:x.value},data:F.value,label:{show:(S=e.widgetObj.widgetParams[13])==null?void 0:S.value,position:(k=e.widgetObj.widgetParams[14])==null?void 0:k.value,formatter:(_=e.widgetObj.widgetParams[20])==null?void 0:_.value}};(z=e.widgetObj.widgetParams[18])!=null&&z.value&&(a.roseType="radius"),t.value.series.push(a),W()},d=()=>{B(()=>{o.value&&s.resize()})};M([()=>e.widgetObj,()=>C.value,()=>r.value],()=>{n(),d()},{deep:!0});const F=R(()=>{var a;return(a=e.widgetObj.widgetParams[0].typeOptions.dataJson)!=null&&a.data?e.widgetObj.widgetParams[0].typeOptions.dataJson.data:e.widgetObj.widgetParams[0].typeOptions.dataJson});return(a,i)=>(D(),N(Q,null,[(D(),U(X,{widgetObj:l.widgetObj,searchIndex:1,pickerIndex:19,key:l.widgetObj.widgetOption.number,onSetData:u,onResetData:n},null,8,["widgetObj"])),G("div",{ref_key:"chartRef",ref:o,style:K([{width:"100%"},{height:L.value}])},null,4)],64))}},ie=T(Y,[["__scopeId","data-v-d86ae63c"]]);export{ie as default};
