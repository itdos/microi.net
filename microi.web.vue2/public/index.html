<!DOCTYPE html>
<html>
<head>
    <meta name="robots" content="noindex">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="renderer" content="webkit">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <style>
        html,body{margin: 0px;padding: 0px;}
        body{
            background-color: #EDF0F9 !important;
            font-size: 13px !important;
            font-family: Helvetica Neue, Helvetica, PingFang SC, Microsoft YaHei, Arial, sans-serif !important;
            background-size: 20%;
        }
    </style>
    <link href="./static/css/microi.loading.css?d=221213" rel="stylesheet" />
    <title>
        Loading...
    </title>
    <script type="text/javascript">
        var OsClient = '';
        var ApiBase = '';
        var FileServer = '';
        var OsClientType = '';
        var ApiCustom = '';
    </script>
</head>
<body class="microi">
    <div id="microi_loading">
        <div class="microi-load">
            <div class="microi-loading">
                <div class="dot"></div>
                <div class="dot"></div>
                <div class="dot"></div>
                <div class="dot"></div>
                <div class="dot"></div>
                <div id="microi_loading_progress">0%</div>
            </div>
        </div>
    </div>
    <!-- <div id="microi_loading">
        <div class="load-wrapp">
            <div class="load-1">
                <p id="microi_loading_progress">0%</p>
                <div class="line"></div>
                <div class="line"></div>
                <div class="line"></div>
            </div>
        </div>
    </div> -->
    <div id="app_microi"></div>

    <script src="./static/js/microi.loading.js?d=221213" type="text/javascript"></script>

    <!-- 全局配置-多语言切换-开始 -->
    <!-- 已禁用自动翻译功能，避免 translate.js 400 错误 -->
    <script src="<%= BASE_URL %>static/translate.min.js"></script>
    <!-- <script src="https://cdn.staticfile.net/translate.js/3.18.66/translate.js"></script> -->
     <script>
        // 添加全局错误处理，静默处理 translate.js API 连接错误（502 Bad Gateway）
        window.addEventListener('error', function(event) {
            // 检查是否是 translate API 相关的错误
            if (event.target && event.target.src && event.target.src.indexOf('api.translate.zvo.cn') > -1) {
                event.preventDefault(); // 阻止错误冒泡
                console.warn('翻译服务连接失败，已静默处理:', event.target.src);
                return true;
            }
        }, true);

        // 捕获未处理的 Promise 拒绝（用于 fetch/XMLHttpRequest 错误）
        window.addEventListener('unhandledrejection', function(event) {
            if (event.reason && typeof event.reason === 'string' && event.reason.indexOf('api.translate.zvo.cn') > -1) {
                event.preventDefault(); // 阻止错误冒泡
                console.warn('翻译服务请求失败，已静默处理');
                return true;
            }
        });

        try {
            translate.language.setLocal('chinese_simplified'); //设置本地语种（当前网页的语种）
            translate.service.use('client.edge'); // 设置服务类型
            translate.selectLanguageTag.show = false; // 隐藏语言选择标签
            translate.language.translateLanguagesRange = ['chinese_simplified','english']; // 设置可翻译的语言范围
            //  translate.language.setDefaultTo('english');// 设置默认语言为英文
            translate.listener.start();

            // 方案1: 使用 DOMContentLoaded（推荐）- 只等待DOM解析完成，不等待资源加载
            if (document.readyState === 'loading') {
                document.addEventListener('DOMContentLoaded', function () {
                    // 等待Vue应用渲染完成后再执行翻译
                    setTimeout(function () {
                        try {
                            translate.execute();
                        } catch (e) {
                            console.warn('翻译执行失败，已静默处理:', e);
                        }
                    }, 100);
                });
            } else {
                // DOM已经加载完成，直接执行
                setTimeout(function () {
                    try {
                        translate.execute();
                    } catch (e) {
                        console.warn('翻译执行失败，已静默处理:', e);
                    }
                }, 100);
            }
        } catch (e) {
            console.warn('翻译初始化失败，已静默处理:', e);
        }

       // translate.changeLanguage('english'); // 修改语言
     </script>

</body>
</html>
